function IH(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var NT={exports:{}},Dy={};var OD;function UH(){if(OD)return Dy;OD=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Dy.Fragment=e,Dy.jsx=t,Dy.jsxs=t,Dy}var DD;function PH(){return DD||(DD=1,NT.exports=UH()),NT.exports}var q=PH();const fn=n=>typeof n=="string",Ny=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},ND=n=>n==null?"":""+n,zH=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},BH=/###/g,LD=n=>n&&n.indexOf("###")>-1?n.replace(BH,"."):n,ID=n=>!n||fn(n),u0=(n,e,t)=>{const i=fn(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(ID(n))return{};const a=LD(i[r]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++r}return ID(n)?{}:{obj:n,k:LD(i[r])}},UD=(n,e,t)=>{const{obj:i,k:r}=u0(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let a=e[e.length-1],s=e.slice(0,e.length-1),o=u0(n,s,Object);for(;o.obj===void 0&&s.length;)a=`${s[s.length-1]}.${a}`,s=s.slice(0,s.length-1),o=u0(n,s,Object),o?.obj&&typeof o.obj[`${o.k}.${a}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${a}`]=t},kH=(n,e,t,i)=>{const{obj:r,k:a}=u0(n,e,Object);r[a]=r[a]||[],r[a].push(t)},ZS=(n,e)=>{const{obj:t,k:i}=u0(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},FH=(n,e,t)=>{const i=ZS(n,t);return i!==void 0?i:ZS(e,t)},MU=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?fn(n[i])||n[i]instanceof String||fn(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):MU(n[i],e[i],t):n[i]=e[i]);return n},Rm=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var HH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const jH=n=>fn(n)?n.replace(/[&<>"'\/]/g,e=>HH[e]):n;class VH{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const GH=[" ",",","?","!",";"],YH=new VH(20),WH=(n,e,t)=>{e=e||"",t=t||"";const i=GH.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=YH.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let a=!r.test(n);if(!a){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(a=!0)}return a},$A=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let a=0;a<i.length;){if(!r||typeof r!="object")return;let s,o="";for(let c=a;c<i.length;++c)if(c!==a&&(o+=t),o+=i[c],s=r[o],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;a+=c-a+1;break}r=s}return r},w0=n=>n?.replace("_","-"),ZH={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class XS{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||ZH,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(fn(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new XS(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new XS(this.logger,e)}}var Uc=new XS;class x1{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,a])=>{for(let s=0;s<a;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,a])=>{for(let s=0;s<a;s++)r.apply(r,[e,...t])})}}class PD extends x1{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],i&&(Array.isArray(i)?o.push(...i):fn(i)&&a?o.push(...i.split(a)):o.push(i)));const c=ZS(this.data,o);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=o[0],t=o[1],i=o.slice(2).join(".")),c||!s||!fn(i)?c:$A(this.data?.[e]?.[t],i,a)}addResource(e,t,i,r,a={silent:!1}){const s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let o=[e,t];i&&(o=o.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),UD(this.data,o,r),a.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const a in i)(fn(i[a])||Array.isArray(i[a]))&&this.addResource(e,t,a,i[a],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,a,s={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=i,i=t,t=o[1]),this.addNamespaces(t);let c=ZS(this.data,o)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?MU(c,i,a):c={...c,...i},UD(this.data,o,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var AU={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(a=>{e=this.processors[a]?.process(e,t,i,r)??e}),e}};const CU=Symbol("i18next/PATH_KEY");function XH(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===CU?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function QA(n,e){const{[CU]:t}=n(XH());return t.join(e?.keySeparator??".")}const zD={},BD=n=>!fn(n)&&typeof n!="boolean"&&typeof n!="number";class qS extends x1{constructor(e,t={}){super(),zH(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Uc.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};return e==null?!1:this.resolve(e,i)?.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!WH(e,i,r);if(s&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:fn(a)?[a]:a};const f=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(f[0])>-1)&&(a=f.shift()),e=f.join(r)}return{key:e,namespaces:fn(a)?[a]:a}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=QA(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(e[e.length-1],r),f=c[c.length-1];let p=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const d=r.lng||this.language,m=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode")return m?a?{res:`${f}${p}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:f,usedParams:this.getUsedParamsDetails(r)}:`${f}${p}${o}`:a?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:f,usedParams:this.getUsedParamsDetails(r)}:o;const v=this.resolve(e,r);let _=v?.res;const b=v?.usedKey||o,S=v?.exactUsedKey||o,x=["[object Number]","[object Function]","[object RegExp]"],T=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,M=!this.i18nFormat||this.i18nFormat.handleAsObject,A=r.count!==void 0&&!fn(r.count),D=qS.hasDefaultValue(r),O=A?this.pluralResolver.getSuffix(d,r.count,r):"",I=r.ordinal&&A?this.pluralResolver.getSuffix(d,r.count,{ordinal:!1}):"",U=A&&!r.ordinal&&r.count===0,N=U&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${O}`]||r[`defaultValue${I}`]||r.defaultValue;let L=_;M&&!_&&D&&(L=N);const Y=BD(L),ee=Object.prototype.toString.apply(L);if(M&&L&&Y&&x.indexOf(ee)<0&&!(fn(T)&&Array.isArray(L))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const se=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,L,{...r,ns:c}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(v.res=se,v.usedParams=this.getUsedParamsDetails(r),v):se}if(s){const se=Array.isArray(L),he=se?[]:{},de=se?S:b;for(const P in L)if(Object.prototype.hasOwnProperty.call(L,P)){const B=`${de}${s}${P}`;D&&!_?he[P]=this.translate(B,{...r,defaultValue:BD(N)?N[P]:void 0,joinArrays:!1,ns:c}):he[P]=this.translate(B,{...r,joinArrays:!1,ns:c}),he[P]===B&&(he[P]=L[P])}_=he}}else if(M&&fn(T)&&Array.isArray(_))_=_.join(T),_&&(_=this.extendTranslation(_,e,r,i));else{let se=!1,he=!1;!this.isValidLookup(_)&&D&&(se=!0,_=N),this.isValidLookup(_)||(he=!0,_=o);const P=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&he?void 0:_,B=D&&N!==_&&this.options.updateMissing;if(he||se||B){if(this.logger.log(B?"updateKey":"missingKey",d,f,o,B?N:_),s){const oe=this.resolve(o,{...r,keySeparator:!1});oe&&oe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let V=[];const ae=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ae&&ae[0])for(let oe=0;oe<ae.length;oe++)V.push(ae[oe]);else this.options.saveMissingTo==="all"?V=this.languageUtils.toResolveHierarchy(r.lng||this.language):V.push(r.lng||this.language);const X=(oe,me,J)=>{const le=D&&J!==_?J:P;this.options.missingKeyHandler?this.options.missingKeyHandler(oe,f,me,le,B,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(oe,f,me,le,B,r),this.emit("missingKey",oe,f,me,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?V.forEach(oe=>{const me=this.pluralResolver.getSuffixes(oe,r);U&&r[`defaultValue${this.options.pluralSeparator}zero`]&&me.indexOf(`${this.options.pluralSeparator}zero`)<0&&me.push(`${this.options.pluralSeparator}zero`),me.forEach(J=>{X([oe],o+J,r[`defaultValue${J}`]||N)})}):X(V,o,N))}_=this.extendTranslation(_,e,r,v,i),he&&_===o&&this.options.appendNamespaceToMissingKey&&(_=`${f}${p}${o}`),(he||se)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${p}${o}`:o,se?_:void 0,r))}return a?(v.res=_,v.usedParams=this.getUsedParamsDetails(r),v):_}extendTranslation(e,t,i,r,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=fn(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(c){const d=e.match(this.interpolator.nestingRegexp);f=d&&d.length}let p=i.replace&&!fn(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,i.lng||this.language||r.usedLng,i),c){const d=e.match(this.interpolator.nestingRegexp),m=d&&d.length;f<m&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...d)=>a?.[0]===d[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${d[0]} in key: ${t[0]}`),null):this.translate(...d,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,o=fn(s)?[s]:s;return e!=null&&o?.length&&i.applyPostProcessor!==!1&&(e=AU.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,a,s,o;return fn(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const f=this.extractFromKey(c,t),p=f.key;r=p;let d=f.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const m=t.count!==void 0&&!fn(t.count),v=m&&!t.ordinal&&t.count===0,_=t.context!==void 0&&(fn(t.context)||typeof t.context=="number")&&t.context!=="",b=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);d.forEach(S=>{this.isValidLookup(i)||(o=S,!zD[`${b[0]}-${S}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(zD[`${b[0]}-${S}`]=!0,this.logger.warn(`key "${r}" for languages "${b.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(x=>{if(this.isValidLookup(i))return;s=x;const T=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(T,p,x,S,t);else{let A;m&&(A=this.pluralResolver.getSuffix(x,t.count,t));const D=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(t.ordinal&&A.indexOf(O)===0&&T.push(p+A.replace(O,this.options.pluralSeparator)),T.push(p+A),v&&T.push(p+D)),_){const I=`${p}${this.options.contextSeparator||"_"}${t.context}`;T.push(I),m&&(t.ordinal&&A.indexOf(O)===0&&T.push(I+A.replace(O,this.options.pluralSeparator)),T.push(I+A),v&&T.push(I+D))}}let M;for(;M=T.pop();)this.isValidLookup(i)||(a=M,i=this.getResource(x,S,M,t))}))})}),{res:i,usedKey:r,exactUsedKey:a,usedLng:s,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!fn(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const a of t)delete r[a]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class kD{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Uc.create("languageUtils")}getScriptPartFromCode(e){if(e=w0(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=w0(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(fn(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const a=this.getLanguagePartFromCode(i);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(s=>{if(s===a)return s;if(!(s.indexOf("-")<0&&a.indexOf("-")<0)&&(s.indexOf("-")>0&&a.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===a||s.indexOf(a)===0&&a.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),fn(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],a=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return fn(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):fn(e)&&a(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&a(this.formatLanguageCode(s))}),r}}const FD={zero:0,one:1,two:2,few:3,many:4,other:5},HD={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class qH{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Uc.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=w0(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:i,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),HD;if(!e.match(/-|_/))return HD;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[a]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,a)=>FD[r]-FD[a]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const jD=(n,e,t,i=".",r=!0)=>{let a=FH(n,e,t);return!a&&r&&fn(t)&&(a=$A(n,t,i),a===void 0&&(a=$A(e,t,i))),a},LT=n=>n.replace(/\$/g,"$$$$");class KH{constructor(e={}){this.logger=Uc.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:a,prefixEscaped:s,suffix:o,suffixEscaped:c,formatSeparator:f,unescapeSuffix:p,unescapePrefix:d,nestingPrefix:m,nestingPrefixEscaped:v,nestingSuffix:_,nestingSuffixEscaped:b,nestingOptionsSeparator:S,maxReplaces:x,alwaysFormat:T}=e.interpolation;this.escape=t!==void 0?t:jH,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=a?Rm(a):s||"{{",this.suffix=o?Rm(o):c||"}}",this.formatSeparator=f||",",this.unescapePrefix=p?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=m?Rm(m):v||Rm("$t("),this.nestingSuffix=_?Rm(_):b||Rm(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=x||1e3,this.alwaysFormat=T!==void 0?T:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let a,s,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=v=>{if(v.indexOf(this.formatSeparator)<0){const x=jD(t,c,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,i,{...r,...t,interpolationkey:v}):x}const _=v.split(this.formatSeparator),b=_.shift().trim(),S=_.join(this.formatSeparator).trim();return this.format(jD(t,c,b,this.options.keySeparator,this.options.ignoreJSONStructure),S,i,{...r,...t,interpolationkey:b})};this.resetRegExp();const p=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>LT(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?LT(this.escape(v)):LT(v)}].forEach(v=>{for(o=0;a=v.regex.exec(e);){const _=a[1].trim();if(s=f(_),s===void 0)if(typeof p=="function"){const S=p(e,a,r);s=fn(S)?S:""}else if(r&&Object.prototype.hasOwnProperty.call(r,_))s="";else if(d){s=a[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${e}`),s="";else!fn(s)&&!this.useRawValueToEscape&&(s=ND(s));const b=v.safeValue(s);if(e=e.replace(a[0],b),d?(v.regex.lastIndex+=s.length,v.regex.lastIndex-=a[0].length):v.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,a,s;const o=(c,f)=>{const p=this.nestingOptionsSeparator;if(c.indexOf(p)<0)return c;const d=c.split(new RegExp(`${p}[ ]*{`));let m=`{${d[1]}`;c=d[0],m=this.interpolate(m,s);const v=m.match(/'/g),_=m.match(/"/g);((v?.length??0)%2===0&&!_||_.length%2!==0)&&(m=m.replace(/'/g,'"'));try{s=JSON.parse(m),f&&(s={...f,...s})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,b),`${c}${p}${m}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!fn(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const f=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(f!==-1&&(c=r[1].slice(f).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),r[1]=r[1].slice(0,f)),a=t(o.call(this,r[1].trim(),s),s),a&&r[0]===e&&!fn(a))return a;fn(a)||(a=ND(a)),a||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),a=""),c.length&&(a=c.reduce((p,d)=>this.format(p,d,i.lng,{...i,interpolationkey:r[1].trim()}),a.trim())),e=e.replace(r[0],a),this.regexp.lastIndex=0}return e}}const $H=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[o,...c]=s.split(":"),f=c.join(":").trim().replace(/^'+|'+$/g,""),p=o.trim();t[p]||(t[p]=f),f==="false"&&(t[p]=!1),f==="true"&&(t[p]=!0),isNaN(f)||(t[p]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},VD=n=>{const e={};return(t,i,r)=>{let a=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(a={...a,[r.interpolationkey]:void 0});const s=i+JSON.stringify(a);let o=e[s];return o||(o=n(w0(i),r),e[s]=o),o(t)}},QH=n=>(e,t,i)=>n(w0(t),i)(e);class JH{constructor(e={}){this.logger=Uc.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?VD:QH;this.formats={number:i((r,a)=>{const s=new Intl.NumberFormat(r,{...a});return o=>s.format(o)}),currency:i((r,a)=>{const s=new Intl.NumberFormat(r,{...a,style:"currency"});return o=>s.format(o)}),datetime:i((r,a)=>{const s=new Intl.DateTimeFormat(r,{...a});return o=>s.format(o)}),relativetime:i((r,a)=>{const s=new Intl.RelativeTimeFormat(r,{...a});return o=>s.format(o,a.range||"day")}),list:i((r,a)=>{const s=new Intl.ListFormat(r,{...a});return o=>s.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=VD(t)}format(e,t,i,r={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(o=>o.indexOf(")")>-1)){const o=a.findIndex(c=>c.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,o)].join(this.formatSeparator)}return a.reduce((o,c)=>{const{formatName:f,formatOptions:p}=$H(c);if(this.formats[f]){let d=o;try{const m=r?.formatParams?.[r.interpolationkey]||{},v=m.locale||m.lng||r.locale||r.lng||i;d=this.formats[f](o,v,{...p,...r,...m})}catch(m){this.logger.warn(m)}return d}else this.logger.warn(`there was no format function for ${f}`);return o},e)}}const e8=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class t8 extends x1{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Uc.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const a={},s={},o={},c={};return e.forEach(f=>{let p=!0;t.forEach(d=>{const m=`${f}|${d}`;!i.reload&&this.store.hasResourceBundle(f,d)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?s[m]===void 0&&(s[m]=!0):(this.state[m]=1,p=!1,s[m]===void 0&&(s[m]=!0),a[m]===void 0&&(a[m]=!0),c[d]===void 0&&(c[d]=!0)))}),p||(o[f]=!0)}),(Object.keys(a).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(s),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),a=r[0],s=r[1];t&&this.emit("failedLoading",a,s,t),!t&&i&&this.store.addResourceBundle(a,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const o={};this.queue.forEach(c=>{kH(c.loaded,[a],s),e8(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(f=>{o[f]||(o[f]={});const p=c.loaded[f];p.length&&p.forEach(d=>{o[f][d]===void 0&&(o[f][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,a=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:a,callback:s});return}this.readingCalls++;const o=(f,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(f&&p&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,a*2,s)},a);return}s(f,p)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const f=c(e,t);f&&typeof f.then=="function"?f.then(p=>o(null,p)).catch(o):o(null,f)}catch(f){o(f)}return}return c(e,t,o)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();fn(e)&&(e=this.languageUtils.toResolveHierarchy(e)),fn(t)&&(t=[t]);const a=this.queueLoad(e,t,i,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],a=i[1];this.read(r,a,"read",void 0,void 0,(s,o)=>{s&&this.logger.warn(`${t}loading namespace ${a} for language ${r} failed`,s),!s&&o&&this.logger.log(`${t}loaded namespace ${a} for language ${r}`,o),this.loaded(e,s,o)})}saveMissing(e,t,i,r,a,s={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:a},f=this.backend.create.bind(this.backend);if(f.length<6)try{let p;f.length===5?p=f(e,t,i,r,c):p=f(e,t,i,r),p&&typeof p.then=="function"?p.then(d=>o(null,d)).catch(o):o(null,p)}catch(p){o(p)}else f(e,t,i,r,o,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const GD=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),fn(n[1])&&(e.defaultValue=n[1]),fn(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),YD=n=>(fn(n.ns)&&(n.ns=[n.ns]),fn(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),fn(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),lx=()=>{},n8=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class T0 extends x1{constructor(e={},t){if(super(),this.options=YD(e),this.services={},this.logger=Uc,this.modules={external:[]},n8(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(fn(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=GD();this.options={...i,...this.options,...YD(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Uc.init(r(this.modules.logger),this.options):Uc.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=JH;const p=new kD(this.options);this.store=new PD(this.options.resources,this.options);const d=this.services;d.logger=Uc,d.resourceStore=this.store,d.languageUtils=p,d.pluralResolver=new qH(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=r(f),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new KH(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new t8(r(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(v,..._)=>{this.emit(v,..._)}),this.modules.languageDetector&&(d.languageDetector=r(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=r(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new qS(this.services,this.options),this.translator.on("*",(v,..._)=>{this.emit(v,..._)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,t||(t=lx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...p)=>this.store[f](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...p)=>(this.store[f](...p),this)});const o=Ny(),c=()=>{const f=(p,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(d),t(p,d)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),o}loadResources(e,t=lx){let i=t;const r=fn(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const a=[],s=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(f=>{f!=="cimode"&&a.indexOf(f)<0&&a.push(f)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(o=>s(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(o)})}else i(null)}reloadResources(e,t,i){const r=Ny();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=lx),this.services.backendConnector.reload(e,t,a=>{r.resolve(),i(a)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&AU.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=Ny();this.emit("languageChanging",e);const r=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},a=(o,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...f)=>this.t(...f)),t&&t(o,(...f)=>this.t(...f))},s=o=>{!e&&!o&&this.services.languageDetector&&(o=[]);const c=fn(o)?o:o&&o[0],f=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(fn(o)?[o]:o);f&&(this.language||r(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,p=>{a(p,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(a,s,...o)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([a,s].concat(o)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const f=this.options.keySeparator||".";let p;return c.keyPrefix&&Array.isArray(a)?p=a.map(d=>(typeof d=="function"&&(d=QA(d,{...this.options,...s})),`${c.keyPrefix}${f}${d}`)):(typeof a=="function"&&(a=QA(a,{...this.options,...s})),p=c.keyPrefix?`${c.keyPrefix}${f}${a}`:a),this.t(p,c)};return fn(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(o,c)=>{const f=this.services.backendConnector.state[`${o}|${c}`];return f===-1||f===0||f===2};if(t.precheck){const o=t.precheck(this,s);if(o!==void 0)return o}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(a,e)))}loadNamespaces(e,t){const i=Ny();return this.options.ns?(fn(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=Ny();fn(e)&&(e=[e]);const r=this.options.preload||[],a=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return a.length?(this.options.preload=r.concat(a),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const a=r.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new kD(GD());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new T0(e,t)}cloneInstance(e={},t=lx){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},a=new T0(r);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(o=>{a[o]=this[o]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},i){const o=Object.keys(this.store.data).reduce((c,f)=>(c[f]={...this.store.data[f]},c[f]=Object.keys(c[f]).reduce((p,d)=>(p[d]={...c[f][d]},p),c[f]),c),{});a.store=new PD(o,r),a.services.resourceStore=a.store}return a.translator=new qS(a.services,r),a.translator.on("*",(o,...c)=>{a.emit(o,...c)}),a.init(r,t),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Da=T0.createInstance();Da.createInstance=T0.createInstance;Da.createInstance;Da.dir;Da.init;Da.loadResources;Da.reloadResources;Da.use;Da.changeLanguage;Da.getFixedT;const On=Da.t;Da.exists;Da.setDefaultNamespace;Da.hasLoadedNamespace;Da.loadNamespaces;Da.loadLanguages;var IT,WD;function i8(){if(WD)return IT;WD=1;const{slice:n,forEach:e}=[];function t(U){return e.call(n.call(arguments,1),N=>{if(N)for(const L in N)U[L]===void 0&&(U[L]=N[L])}),U}function i(U){return typeof U!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(L=>L.test(U))}const r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,a=function(U,N){const Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},ee=encodeURIComponent(N);let se=`${U}=${ee}`;if(Y.maxAge>0){const he=Y.maxAge-0;if(Number.isNaN(he))throw new Error("maxAge should be a Number");se+=`; Max-Age=${Math.floor(he)}`}if(Y.domain){if(!r.test(Y.domain))throw new TypeError("option domain is invalid");se+=`; Domain=${Y.domain}`}if(Y.path){if(!r.test(Y.path))throw new TypeError("option path is invalid");se+=`; Path=${Y.path}`}if(Y.expires){if(typeof Y.expires.toUTCString!="function")throw new TypeError("option expires is invalid");se+=`; Expires=${Y.expires.toUTCString()}`}if(Y.httpOnly&&(se+="; HttpOnly"),Y.secure&&(se+="; Secure"),Y.sameSite)switch(typeof Y.sameSite=="string"?Y.sameSite.toLowerCase():Y.sameSite){case!0:se+="; SameSite=Strict";break;case"lax":se+="; SameSite=Lax";break;case"strict":se+="; SameSite=Strict";break;case"none":se+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return Y.partitioned&&(se+="; Partitioned"),se},s={create(U,N,L,Y){let ee=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};L&&(ee.expires=new Date,ee.expires.setTime(ee.expires.getTime()+L*60*1e3)),Y&&(ee.domain=Y),document.cookie=a(U,N,ee)},read(U){const N=`${U}=`,L=document.cookie.split(";");for(let Y=0;Y<L.length;Y++){let ee=L[Y];for(;ee.charAt(0)===" ";)ee=ee.substring(1,ee.length);if(ee.indexOf(N)===0)return ee.substring(N.length,ee.length)}return null},remove(U,N){this.create(U,"",-1,N)}};var o={name:"cookie",lookup(U){let{lookupCookie:N}=U;if(N&&typeof document<"u")return s.read(N)||void 0},cacheUserLanguage(U,N){let{lookupCookie:L,cookieMinutes:Y,cookieDomain:ee,cookieOptions:se}=N;L&&typeof document<"u"&&s.create(L,U,Y,ee,se)}},c={name:"querystring",lookup(U){let{lookupQuerystring:N}=U,L;if(typeof window<"u"){let{search:Y}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(Y=window.location.hash.substring(window.location.hash.indexOf("?")));const se=Y.substring(1).split("&");for(let he=0;he<se.length;he++){const de=se[he].indexOf("=");de>0&&se[he].substring(0,de)===N&&(L=se[he].substring(de+1))}}return L}},f={name:"hash",lookup(U){let{lookupHash:N,lookupFromHashIndex:L}=U,Y;if(typeof window<"u"){const{hash:ee}=window.location;if(ee&&ee.length>2){const se=ee.substring(1);if(N){const he=se.split("&");for(let de=0;de<he.length;de++){const P=he[de].indexOf("=");P>0&&he[de].substring(0,P)===N&&(Y=he[de].substring(P+1))}}if(Y)return Y;if(!Y&&L>-1){const he=ee.match(/\/([a-zA-Z-]*)/g);return Array.isArray(he)?he[typeof L=="number"?L:0]?.replace("/",""):void 0}}}return Y}};let p=null;const d=()=>{if(p!==null)return p;try{if(p=typeof window<"u"&&window.localStorage!==null,!p)return!1;const U="i18next.translate.boo";window.localStorage.setItem(U,"foo"),window.localStorage.removeItem(U)}catch{p=!1}return p};var m={name:"localStorage",lookup(U){let{lookupLocalStorage:N}=U;if(N&&d())return window.localStorage.getItem(N)||void 0},cacheUserLanguage(U,N){let{lookupLocalStorage:L}=N;L&&d()&&window.localStorage.setItem(L,U)}};let v=null;const _=()=>{if(v!==null)return v;try{if(v=typeof window<"u"&&window.sessionStorage!==null,!v)return!1;const U="i18next.translate.boo";window.sessionStorage.setItem(U,"foo"),window.sessionStorage.removeItem(U)}catch{v=!1}return v};var b={name:"sessionStorage",lookup(U){let{lookupSessionStorage:N}=U;if(N&&_())return window.sessionStorage.getItem(N)||void 0},cacheUserLanguage(U,N){let{lookupSessionStorage:L}=N;L&&_()&&window.sessionStorage.setItem(L,U)}},S={name:"navigator",lookup(U){const N=[];if(typeof navigator<"u"){const{languages:L,userLanguage:Y,language:ee}=navigator;if(L)for(let se=0;se<L.length;se++)N.push(L[se]);Y&&N.push(Y),ee&&N.push(ee)}return N.length>0?N:void 0}},x={name:"htmlTag",lookup(U){let{htmlTag:N}=U,L;const Y=N||(typeof document<"u"?document.documentElement:null);return Y&&typeof Y.getAttribute=="function"&&(L=Y.getAttribute("lang")),L}},T={name:"path",lookup(U){let{lookupFromPathIndex:N}=U;if(typeof window>"u")return;const L=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(L)?L[typeof N=="number"?N:0]?.replace("/",""):void 0}},M={name:"subdomain",lookup(U){let{lookupFromSubdomainIndex:N}=U;const L=typeof N=="number"?N+1:1,Y=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(Y)return Y[L]}};let A=!1;try{document.cookie,A=!0}catch{}const D=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];A||D.splice(1,1);const O=()=>({order:D,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:U=>U});class I{constructor(N){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(N,L)}init(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=N,this.options=t(L,this.options||{},O()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=ee=>ee.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=Y,this.addDetector(o),this.addDetector(c),this.addDetector(m),this.addDetector(b),this.addDetector(S),this.addDetector(x),this.addDetector(T),this.addDetector(M),this.addDetector(f)}addDetector(N){return this.detectors[N.name]=N,this}detect(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,L=[];return N.forEach(Y=>{if(this.detectors[Y]){let ee=this.detectors[Y].lookup(this.options);ee&&typeof ee=="string"&&(ee=[ee]),ee&&(L=L.concat(ee))}}),L=L.filter(Y=>Y!=null&&!i(Y)).map(Y=>this.options.convertDetectedLanguage(Y)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?L:L.length>0?L[0]:null}cacheUserLanguage(N){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;L&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(N)>-1||L.forEach(Y=>{this.detectors[Y]&&this.detectors[Y].cacheUserLanguage(N,this.options)}))}}return I.type="languageDetector",IT=I,IT}var r8=i8();const a8=o_(r8);var UT={exports:{}},Tn={};var ZD;function s8(){if(ZD)return Tn;ZD=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator;function m(X){return X===null||typeof X!="object"?null:(X=d&&X[d]||X["@@iterator"],typeof X=="function"?X:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,b={};function S(X,oe,me){this.props=X,this.context=oe,this.refs=b,this.updater=me||v}S.prototype.isReactComponent={},S.prototype.setState=function(X,oe){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,oe,"setState")},S.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function x(){}x.prototype=S.prototype;function T(X,oe,me){this.props=X,this.context=oe,this.refs=b,this.updater=me||v}var M=T.prototype=new x;M.constructor=T,_(M,S.prototype),M.isPureReactComponent=!0;var A=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(X,oe,me,J,le,Se){return me=Se.ref,{$$typeof:n,type:X,key:oe,ref:me!==void 0?me:null,props:Se}}function U(X,oe){return I(X.type,oe,void 0,void 0,void 0,X.props)}function N(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function L(X){var oe={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(me){return oe[me]})}var Y=/\/+/g;function ee(X,oe){return typeof X=="object"&&X!==null&&X.key!=null?L(""+X.key):oe.toString(36)}function se(){}function he(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(se,se):(X.status="pending",X.then(function(oe){X.status==="pending"&&(X.status="fulfilled",X.value=oe)},function(oe){X.status==="pending"&&(X.status="rejected",X.reason=oe)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function de(X,oe,me,J,le){var Se=typeof X;(Se==="undefined"||Se==="boolean")&&(X=null);var Ee=!1;if(X===null)Ee=!0;else switch(Se){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(X.$$typeof){case n:case e:Ee=!0;break;case p:return Ee=X._init,de(Ee(X._payload),oe,me,J,le)}}if(Ee)return le=le(X),Ee=J===""?"."+ee(X,0):J,A(le)?(me="",Ee!=null&&(me=Ee.replace(Y,"$&/")+"/"),de(le,oe,me,"",function(Ae){return Ae})):le!=null&&(N(le)&&(le=U(le,me+(le.key==null||X&&X.key===le.key?"":(""+le.key).replace(Y,"$&/")+"/")+Ee)),oe.push(le)),1;Ee=0;var re=J===""?".":J+":";if(A(X))for(var ge=0;ge<X.length;ge++)J=X[ge],Se=re+ee(J,ge),Ee+=de(J,oe,me,Se,le);else if(ge=m(X),typeof ge=="function")for(X=ge.call(X),ge=0;!(J=X.next()).done;)J=J.value,Se=re+ee(J,ge++),Ee+=de(J,oe,me,Se,le);else if(Se==="object"){if(typeof X.then=="function")return de(he(X),oe,me,J,le);throw oe=String(X),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function P(X,oe,me){if(X==null)return X;var J=[],le=0;return de(X,J,"","",function(Se){return oe.call(me,Se,le++)}),J}function B(X){if(X._status===-1){var oe=X._result;oe=oe(),oe.then(function(me){(X._status===0||X._status===-1)&&(X._status=1,X._result=me)},function(me){(X._status===0||X._status===-1)&&(X._status=2,X._result=me)}),X._status===-1&&(X._status=0,X._result=oe)}if(X._status===1)return X._result.default;throw X._result}var V=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function ae(){}return Tn.Children={map:P,forEach:function(X,oe,me){P(X,function(){oe.apply(this,arguments)},me)},count:function(X){var oe=0;return P(X,function(){oe++}),oe},toArray:function(X){return P(X,function(oe){return oe})||[]},only:function(X){if(!N(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Tn.Component=S,Tn.Fragment=t,Tn.Profiler=r,Tn.PureComponent=T,Tn.StrictMode=i,Tn.Suspense=c,Tn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Tn.__COMPILER_RUNTIME={__proto__:null,c:function(X){return D.H.useMemoCache(X)}},Tn.cache=function(X){return function(){return X.apply(null,arguments)}},Tn.cloneElement=function(X,oe,me){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var J=_({},X.props),le=X.key,Se=void 0;if(oe!=null)for(Ee in oe.ref!==void 0&&(Se=void 0),oe.key!==void 0&&(le=""+oe.key),oe)!O.call(oe,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&oe.ref===void 0||(J[Ee]=oe[Ee]);var Ee=arguments.length-2;if(Ee===1)J.children=me;else if(1<Ee){for(var re=Array(Ee),ge=0;ge<Ee;ge++)re[ge]=arguments[ge+2];J.children=re}return I(X.type,le,void 0,void 0,Se,J)},Tn.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},Tn.createElement=function(X,oe,me){var J,le={},Se=null;if(oe!=null)for(J in oe.key!==void 0&&(Se=""+oe.key),oe)O.call(oe,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(le[J]=oe[J]);var Ee=arguments.length-2;if(Ee===1)le.children=me;else if(1<Ee){for(var re=Array(Ee),ge=0;ge<Ee;ge++)re[ge]=arguments[ge+2];le.children=re}if(X&&X.defaultProps)for(J in Ee=X.defaultProps,Ee)le[J]===void 0&&(le[J]=Ee[J]);return I(X,Se,void 0,void 0,null,le)},Tn.createRef=function(){return{current:null}},Tn.forwardRef=function(X){return{$$typeof:o,render:X}},Tn.isValidElement=N,Tn.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:B}},Tn.memo=function(X,oe){return{$$typeof:f,type:X,compare:oe===void 0?null:oe}},Tn.startTransition=function(X){var oe=D.T,me={};D.T=me;try{var J=X(),le=D.S;le!==null&&le(me,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(ae,V)}catch(Se){V(Se)}finally{D.T=oe}},Tn.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Tn.use=function(X){return D.H.use(X)},Tn.useActionState=function(X,oe,me){return D.H.useActionState(X,oe,me)},Tn.useCallback=function(X,oe){return D.H.useCallback(X,oe)},Tn.useContext=function(X){return D.H.useContext(X)},Tn.useDebugValue=function(){},Tn.useDeferredValue=function(X,oe){return D.H.useDeferredValue(X,oe)},Tn.useEffect=function(X,oe,me){var J=D.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(X,oe)},Tn.useId=function(){return D.H.useId()},Tn.useImperativeHandle=function(X,oe,me){return D.H.useImperativeHandle(X,oe,me)},Tn.useInsertionEffect=function(X,oe){return D.H.useInsertionEffect(X,oe)},Tn.useLayoutEffect=function(X,oe){return D.H.useLayoutEffect(X,oe)},Tn.useMemo=function(X,oe){return D.H.useMemo(X,oe)},Tn.useOptimistic=function(X,oe){return D.H.useOptimistic(X,oe)},Tn.useReducer=function(X,oe,me){return D.H.useReducer(X,oe,me)},Tn.useRef=function(X){return D.H.useRef(X)},Tn.useState=function(X){return D.H.useState(X)},Tn.useSyncExternalStore=function(X,oe,me){return D.H.useSyncExternalStore(X,oe,me)},Tn.useTransition=function(){return D.H.useTransition()},Tn.version="19.1.1",Tn}var XD;function nv(){return XD||(XD=1,UT.exports=s8()),UT.exports}var F=nv();const Tt=o_(F),CR=IH({__proto__:null,default:Tt},[F]),o8=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,l8={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},c8=n=>l8[n],u8=n=>n.replace(o8,c8);let qD={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:u8};const f8=(n={})=>{qD={...qD,...n}},d8={type:"3rdParty",init(n){f8(n.options.react)}};F.createContext();const h8={"&nbsp;":"","&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&copy;":"","&reg;":"","&trade;":"","&hellip;":"","&ndash;":"","&mdash;":"","&lsquo;":"","&rsquo;":"","&sbquo;":"","&ldquo;":"","&rdquo;":"","&bdquo;":"","&dagger;":"","&Dagger;":"","&bull;":"","&prime;":"","&Prime;":"","&lsaquo;":"","&rsaquo;":"","&sect;":"","&para;":"","&middot;":"","&ensp;":"","&emsp;":"","&thinsp;":"","&euro;":"","&pound;":"","&yen;":"","&cent;":"","&curren;":"","&times;":"","&divide;":"","&minus;":"","&plusmn;":"","&ne;":"","&le;":"","&ge;":"","&asymp;":"","&equiv;":"","&infin;":"","&int;":"","&sum;":"","&prod;":"","&radic;":"","&part;":"","&permil;":"","&deg;":"","&micro;":"","&larr;":"","&uarr;":"","&rarr;":"","&darr;":"","&harr;":"","&crarr;":"","&lArr;":"","&uArr;":"","&rArr;":"","&dArr;":"","&hArr;":"","&alpha;":"","&beta;":"","&gamma;":"","&delta;":"","&epsilon;":"","&zeta;":"","&eta;":"","&theta;":"","&iota;":"","&kappa;":"","&lambda;":"","&mu;":"","&nu;":"","&xi;":"","&omicron;":"","&pi;":"","&rho;":"","&sigma;":"","&tau;":"","&upsilon;":"","&phi;":"","&chi;":"","&psi;":"","&omega;":"","&Alpha;":"","&Beta;":"","&Gamma;":"","&Delta;":"","&Epsilon;":"","&Zeta;":"","&Eta;":"","&Theta;":"","&Iota;":"","&Kappa;":"","&Lambda;":"","&Mu;":"","&Nu;":"","&Xi;":"","&Omicron;":"","&Pi;":"","&Rho;":"","&Sigma;":"","&Tau;":"","&Upsilon;":"","&Phi;":"","&Chi;":"","&Psi;":"","&Omega;":"","&Agrave;":"","&Aacute;":"","&Acirc;":"","&Atilde;":"","&Auml;":"","&Aring;":"","&AElig;":"","&Ccedil;":"","&Egrave;":"","&Eacute;":"","&Ecirc;":"","&Euml;":"","&Igrave;":"","&Iacute;":"","&Icirc;":"","&Iuml;":"","&ETH;":"","&Ntilde;":"","&Ograve;":"","&Oacute;":"","&Ocirc;":"","&Otilde;":"","&Ouml;":"","&Oslash;":"","&Ugrave;":"","&Uacute;":"","&Ucirc;":"","&Uuml;":"","&Yacute;":"","&THORN;":"","&szlig;":"","&agrave;":"","&aacute;":"","&acirc;":"","&atilde;":"","&auml;":"","&aring;":"","&aelig;":"","&ccedil;":"","&egrave;":"","&eacute;":"","&ecirc;":"","&euml;":"","&igrave;":"","&iacute;":"","&icirc;":"","&iuml;":"","&eth;":"","&ntilde;":"","&ograve;":"","&oacute;":"","&ocirc;":"","&otilde;":"","&ouml;":"","&oslash;":"","&ugrave;":"","&uacute;":"","&ucirc;":"","&uuml;":"","&yacute;":"","&thorn;":"","&yuml;":"","&iexcl;":"","&iquest;":"","&fnof;":"","&circ;":"","&tilde;":"","&OElig;":"","&oelig;":"","&Scaron;":"","&scaron;":"","&Yuml;":"","&ordf;":"","&ordm;":"","&macr;":"","&acute;":"","&cedil;":"","&sup1;":"","&sup2;":"","&sup3;":"","&frac14;":"","&frac12;":"","&frac34;":"","&spades;":"","&clubs;":"","&hearts;":"","&diams;":"","&loz;":"","&oline;":"","&frasl;":"","&weierp;":"","&image;":"","&real;":"","&alefsym;":""};new RegExp(Object.keys(h8).map(n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),"g");var PT={exports:{}},zT={};var KD;function p8(){if(KD)return zT;KD=1;var n=nv();function e(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(d,m){var v=m(),_=i({inst:{value:v,getSnapshot:m}}),b=_[0].inst,S=_[1];return a(function(){b.value=v,b.getSnapshot=m,c(b)&&S({inst:b})},[d,v,m]),r(function(){return c(b)&&S({inst:b}),d(function(){c(b)&&S({inst:b})})},[d]),s(v),v}function c(d){var m=d.getSnapshot;d=d.value;try{var v=m();return!t(d,v)}catch{return!0}}function f(d,m){return m()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:o;return zT.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,zT}var $D;function RU(){return $D||($D=1,PT.exports=p8()),PT.exports}RU();const m8={"actions-hub":{errors:{"action-already-registered":"Action {{action}} is already registered.","action-not-registered":"Action {{action}} is not registered."}}},g8={errors:{"unknown-format":"Format de couleur non reconnu."}},v8={arguments:{errors:{undefined:'Argument "{{argument}}" is undefined.'}},collections:{errors:{"key-missing":"The collection does not contain the key {{key}}.","object-not-found":"The item you are looking for is not in this collection."}},response:{"missing-value-or-error":"Response must have a value or an error.","conflict-value-error":"Response cannot have both a value and an error."}},y8={actions:m8,colors:g8,utils:v8},_8={station:{"default-name":"New station"}},b8={"command-queue":{errors:{"ill-formed-command":'The command "{{command}}" cannot be decomposed.'}},keyboard:{errors:{"unsupported-key":'The key "{{key}}" is not supported.'}}},x8={errors:{"unknown-layer-id":'No layer with id="{{id}}" exists.',"layer-level-out-of-range":"Level must be between {{min}} and {{max}}."}},S8={artefacts:{errors:{"overlay-undefined":"Overlay is undefined."}},base:{errors:{"group-undefined":'Unable to initialize the map: group named "base" is undefined.'}},objects:{errors:{"group-undefined":'Unable to add objects to the map: group named "objects" is undefined.'}}},E8={errors:{"parent-undefined":'The core object "{{object}}" has no parent.'},node:{errors:{"not-connected-to-path":`The node "{{node}}
 is not connected to the path "{{path}}".`}}},w8={errors:{undefined:"The core module is in an undefined state."}},T8={errors:{"object-not-found":'Unable to retrieve object "{{id}}" from the store.'},nodes:{errors:{"already-connected":'The nodes "{{startNode}}" and "{{endNode}}" are already connected.',"already-exists":'The node "{{node}}" already exists.',"not-found":'Unable to retrieve node "{{node}}".',"missing-connection":'The node "{{node}}" is not connected to the node "{{connection}}".',"station-node-already-connected":'The node "{{node}}" belongs to a station and is already connected.',"station-node-not-attached":'The node "{{node}}" is not attached to any station.',"station-node-still-connected":'The node "{{node}}" is still connected to the station "{{station}}".'}},paths:{errors:{"already-exists":'The path "{{path}}" already exists.',"not-found":'Unable to retrieve path "{{path}}".'}},stations:{errors:{"already-exists":'The station "{{station}}" already exists.',"not-found":'Unable to retrieve station "{{station}}".'}}},M8={errors:{"world-undefined":'"World" is undefined.'}},A8={builders:_8,io:b8,layers:x8,map:S8,objects:E8,state:w8,store:T8,world:M8},C8={"file-menu":{title:"File",actions:{load:"Load",new:"New",save:"Save"}}},R8={"object-settings":{state:{empty:"Select an object to set its properties."},sections:{properties:{title:"Properties"},transform:{fields:{position:"Position",rotation:"Rotation",scale:"Scale"},title:"Transform"}},title:"Settings"},overlay:{actions:{delete:"Delete",load:"Load",move:"Move"},fields:{opacity:"Opacity",position:"Position",rotation:"Rotation",scale:"Scale",visible:"Visible"},title:"Overlay"},"station-models":{actions:{"drag-and-drop":"Drag and drop one or many models here "},title:"Station models"}},O8={"create-objects":{path:{label:"Path"}},header:C8,panel:R8},D8={"actions-hub":{errors:{"action-already-registered":"L'action {{action}} a dj t enregistre.","action-not-registered":"L'action {{action}} n'est pas enregistre."}}},N8={errors:{"unknown-format":"Color format not recognized."}},L8={arguments:{errors:{undefined:`L'argument "{{argument}}" n'est pas dfini.`}},collections:{errors:{"key-missing":"La collection ne contient pas la cl {{key}}.","object-not-found":"L'objet recherch n'est pas prsent dans cette collection."}},response:{"missing-value-or-error":"Response doit avoir une valeur ou une erreur.","conflict-value-error":"Response ne peut pas avoir  la fois une valeur et une erreur."}},I8={actions:D8,colors:N8,utils:L8},U8={station:{"default-name":"Nouvelle station"}},P8={"command-queue":{errors:{"ill-formed-command":'La commande "{{command}}" ne peut pas tre dcomposes.'}},keyboard:{errors:{"unsupported-key":`La cl "{{key}}" n'est pas supporte.`}}},z8={errors:{"unknown-layer-id":`Aucune couche avec id="{{id}}" n'existe.`,"layer-level-out-of-range":"Le niveau doit tre compris entre {{min}} et {{max}}."}},B8={artefacts:{errors:{"overlay-undefined":"Overlay n'est pas dfini."}},base:{errors:{"group-undefined":`Impossible d'initialiser la carte : le groupe nomm "base-group" n'est pas dfini.`}},objects:{errors:{"group-undefined":`Impossible d'ajouter des objects  la carte: le groupe nomm "objects" n'est pas dfini.`}}},k8={errors:{"parent-undefined":`L'object core "{{object}}" n'a aucun parent.`},node:{errors:{"not-connected-to-path":`Le noeud "{{node}}" n'est pas connect au chemin "{{path}}".`}}},F8={errors:{undefined:"Le module core est dans un tat non dfini."}},H8={errors:{"object-not-found":`Impossible de rcuprer l'objet "{{id}}" depuis le store.`},nodes:{errors:{"already-connected":'Les noeuds "{{startNode}}" et "{{endNode}}" sont dj connects.',"already-exists":'Le noeud "{{node}}" existe dj.',"not-found":'Impossible de rcuprer le noeud "{{node}}".',"missing-connection":'Le noeud "{{node}}" ne possde aucune connexion avec le noeud "{{connection}}".',"station-node-already-connected":'Le noeud "{{node}}" appartient  une station et est dj connect.',"station-node-not-attached":`Le noeud "{{node}}" n'est attach  aucune station.`,"station-node-still-connected":'Le noeud "{{node}}" est encore connect  la station "{{station}}".'}},paths:{errors:{"already-exists":'Le chemin "{{path}}" existe dj.',"not-found":'Impossible de rcuprer le chemin "{{path}}".'}},stations:{errors:{"already-exists":'La station "{{station}}" existe dj.',"not-found":'Impossible de rcuprer la station "{{station}}".'}}},j8={errors:{"world-undefined":`"World" n'est pas dfini.`}},V8={builders:U8,io:P8,layers:z8,map:B8,objects:k8,state:F8,store:H8,world:j8},G8={"file-menu":{title:"Fichier",actions:{load:"Charger",new:"Nouveau",save:"Sauvegarder"}}},Y8={"object-settings":{state:{empty:"Slectionnez un objet pour modifier ses proprits."},sections:{properties:{title:"Proprits"},transform:{fields:{position:"Position",rotation:"Rotation",scale:"chelle"},title:"Transformation"}},title:"Configuration"},overlay:{actions:{delete:"Supprimer",load:"Charger",move:"Dplacer"},fields:{opacity:"Opacit",position:"Position",rotation:"Rotation",scale:"chelle",visible:"Visible"},title:"Superposition"},"station-models":{actions:{"drag-and-drop":"Glissez et dposez un ou plusieurs modles ici "},title:"Modles de stations"}},W8={"create-objects":{path:{label:"Chemin"}},header:G8,panel:Y8},Z8=new a8(null,{order:["localStorage","navigator"]});Da.use(d8).use(Z8).init({fallbackLng:"en",returnEmptyString:!1,debug:!1,resources:{en:{common:y8,core:A8,ui:O8},fr:{common:I8,core:V8,ui:W8}}});document.documentElement.lang=Da.language;var BT={exports:{}},Ly={},kT={exports:{}},FT={};var QD;function X8(){return QD||(QD=1,(function(n){function e(P,B){var V=P.length;P.push(B);e:for(;0<V;){var ae=V-1>>>1,X=P[ae];if(0<r(X,B))P[ae]=B,P[V]=X,V=ae;else break e}}function t(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var B=P[0],V=P.pop();if(V!==B){P[0]=V;e:for(var ae=0,X=P.length,oe=X>>>1;ae<oe;){var me=2*(ae+1)-1,J=P[me],le=me+1,Se=P[le];if(0>r(J,V))le<X&&0>r(Se,J)?(P[ae]=Se,P[le]=V,ae=le):(P[ae]=J,P[me]=V,ae=me);else if(le<X&&0>r(Se,V))P[ae]=Se,P[le]=V,ae=le;else break e}}return B}function r(P,B){var V=P.sortIndex-B.sortIndex;return V!==0?V:P.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],f=[],p=1,d=null,m=3,v=!1,_=!1,b=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function A(P){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=P)i(f),B.sortIndex=B.expirationTime,e(c,B);else break;B=t(f)}}function D(P){if(b=!1,A(P),!_)if(t(c)!==null)_=!0,O||(O=!0,ee());else{var B=t(f);B!==null&&de(D,B.startTime-P)}}var O=!1,I=-1,U=5,N=-1;function L(){return S?!0:!(n.unstable_now()-N<U)}function Y(){if(S=!1,O){var P=n.unstable_now();N=P;var B=!0;try{e:{_=!1,b&&(b=!1,T(I),I=-1),v=!0;var V=m;try{t:{for(A(P),d=t(c);d!==null&&!(d.expirationTime>P&&L());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,m=d.priorityLevel;var X=ae(d.expirationTime<=P);if(P=n.unstable_now(),typeof X=="function"){d.callback=X,A(P),B=!0;break t}d===t(c)&&i(c),A(P)}else i(c);d=t(c)}if(d!==null)B=!0;else{var oe=t(f);oe!==null&&de(D,oe.startTime-P),B=!1}}break e}finally{d=null,m=V,v=!1}B=void 0}}finally{B?ee():O=!1}}}var ee;if(typeof M=="function")ee=function(){M(Y)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,he=se.port2;se.port1.onmessage=Y,ee=function(){he.postMessage(null)}}else ee=function(){x(Y,0)};function de(P,B){I=x(function(){P(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(P){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var V=m;m=B;try{return P()}finally{m=V}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=m;m=P;try{return B()}finally{m=V}},n.unstable_scheduleCallback=function(P,B,V){var ae=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ae+V:ae):V=ae,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=V+X,P={id:p++,callback:B,priorityLevel:P,startTime:V,expirationTime:X,sortIndex:-1},V>ae?(P.sortIndex=V,e(f,P),t(c)===null&&P===t(f)&&(b?(T(I),I=-1):b=!0,de(D,V-ae))):(P.sortIndex=X,e(c,P),_||v||(_=!0,O||(O=!0,ee()))),P},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(P){var B=m;return function(){var V=m;m=B;try{return P.apply(this,arguments)}finally{m=V}}}})(FT)),FT}var JD;function q8(){return JD||(JD=1,kT.exports=X8()),kT.exports}var HT={exports:{}},ja={};var eN;function K8(){if(eN)return ja;eN=1;var n=nv();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,p){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:d==null?null:""+d,children:c,containerInfo:f,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ja.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ja.createPortal=function(c,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,p)},ja.flushSync=function(c){var f=s.T,p=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=f,i.p=p,i.d.f()}},ja.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},ja.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},ja.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var p=f.as,d=o(p,f.crossOrigin),m=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:d,integrity:m,fetchPriority:v}):p==="script"&&i.d.X(c,{crossOrigin:d,integrity:m,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ja.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=o(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},ja.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,d=o(p,f.crossOrigin);i.d.L(c,p,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ja.preloadModule=function(c,f){if(typeof c=="string")if(f){var p=o(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},ja.requestFormReset=function(c){i.d.r(c)},ja.unstable_batchedUpdates=function(c,f){return c(f)},ja.useFormState=function(c,f,p){return s.H.useFormState(c,f,p)},ja.useFormStatus=function(){return s.H.useHostTransitionStatus()},ja.version="19.1.1",ja}var tN;function OU(){if(tN)return HT.exports;tN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),HT.exports=K8(),HT.exports}var nN;function $8(){if(nN)return Ly;nN=1;var n=q8(),e=nv(),t=OU();function i(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)u+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,y=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(y=u.return),l=u.return;while(l)}return u.tag===3?y:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(i(188))}function c(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(i(188));return u!==l?null:l}for(var y=l,E=u;;){var C=y.return;if(C===null)break;var z=C.alternate;if(z===null){if(E=C.return,E!==null){y=E;continue}break}if(C.child===z.child){for(z=C.child;z;){if(z===y)return o(C),l;if(z===E)return o(C),u;z=z.sibling}throw Error(i(188))}if(y.return!==E.return)y=C,E=z;else{for(var ue=!1,we=C.child;we;){if(we===y){ue=!0,y=C,E=z;break}if(we===E){ue=!0,E=C,y=z;break}we=we.sibling}if(!ue){for(we=z.child;we;){if(we===y){ue=!0,y=z,E=C;break}if(we===E){ue=!0,E=z,y=C;break}we=we.sibling}if(!ue)throw Error(i(189))}}if(y.alternate!==E)throw Error(i(190))}if(y.tag!==3)throw Error(i(188));return y.stateNode.current===y?l:u}function f(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=f(l),u!==null)return u;l=l.sibling}return null}var p=Object.assign,d=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),M=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function ee(l){return l===null||typeof l!="object"?null:(l=Y&&l[Y]||l["@@iterator"],typeof l=="function"?l:null)}var se=Symbol.for("react.client.reference");function he(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===se?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case v:return"Portal";case M:return(l.displayName||"Context")+".Provider";case T:return(l._context.displayName||"Context")+".Consumer";case A:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case I:return u=l.displayName||null,u!==null?u:he(l.type)||"Memo";case U:u=l._payload,l=l._init;try{return he(l(u))}catch{}}return null}var de=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},ae=[],X=-1;function oe(l){return{current:l}}function me(l){0>X||(l.current=ae[X],ae[X]=null,X--)}function J(l,u){X++,ae[X]=l.current,l.current=u}var le=oe(null),Se=oe(null),Ee=oe(null),re=oe(null);function ge(l,u){switch(J(Ee,u),J(Se,l),J(le,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?rD(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=rD(u),l=aD(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}me(le),J(le,l)}function Ae(){me(le),me(Se),me(Ee)}function Pe(l){l.memoizedState!==null&&J(re,l);var u=le.current,y=aD(u,l.type);u!==y&&(J(Se,l),J(le,y))}function We(l){Se.current===l&&(me(le),me(Se)),re.current===l&&(me(re),My._currentValue=V)}var it=Object.prototype.hasOwnProperty,te=n.unstable_scheduleCallback,xe=n.unstable_cancelCallback,De=n.unstable_shouldYield,He=n.unstable_requestPaint,Ce=n.unstable_now,ce=n.unstable_getCurrentPriorityLevel,pe=n.unstable_ImmediatePriority,ie=n.unstable_UserBlockingPriority,W=n.unstable_NormalPriority,K=n.unstable_LowPriority,j=n.unstable_IdlePriority,$=n.log,Re=n.unstable_setDisableYieldValue,Ie=null,ne=null;function H(l){if(typeof $=="function"&&Re(l),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(Ie,l)}catch{}}var Z=Math.clz32?Math.clz32:Be,ye=Math.log,Oe=Math.LN2;function Be(l){return l>>>=0,l===0?32:31-(ye(l)/Oe|0)|0}var Ue=256,pt=4194304;function St(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function _e(l,u,y){var E=l.pendingLanes;if(E===0)return 0;var C=0,z=l.suspendedLanes,ue=l.pingedLanes;l=l.warmLanes;var we=E&134217727;return we!==0?(E=we&~z,E!==0?C=St(E):(ue&=we,ue!==0?C=St(ue):y||(y=we&~l,y!==0&&(C=St(y))))):(we=E&~z,we!==0?C=St(we):ue!==0?C=St(ue):y||(y=E&~l,y!==0&&(C=St(y)))),C===0?0:u!==0&&u!==C&&(u&z)===0&&(z=C&-C,y=u&-u,z>=y||z===32&&(y&4194048)!==0)?u:C}function Ve(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function nt(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Le(){var l=Ue;return Ue<<=1,(Ue&4194048)===0&&(Ue=256),l}function Ne(){var l=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),l}function je(l){for(var u=[],y=0;31>y;y++)u.push(l);return u}function fe(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Xe(l,u,y,E,C,z){var ue=l.pendingLanes;l.pendingLanes=y,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=y,l.entangledLanes&=y,l.errorRecoveryDisabledLanes&=y,l.shellSuspendCounter=0;var we=l.entanglements,ke=l.expirationTimes,st=l.hiddenUpdates;for(y=ue&~y;0<y;){var gt=31-Z(y),bt=1<<gt;we[gt]=0,ke[gt]=-1;var ct=st[gt];if(ct!==null)for(st[gt]=null,gt=0;gt<ct.length;gt++){var ft=ct[gt];ft!==null&&(ft.lane&=-536870913)}y&=~bt}E!==0&&Ye(l,E,0),z!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=z&~(ue&~u))}function Ye(l,u,y){l.pendingLanes|=u,l.suspendedLanes&=~u;var E=31-Z(u);l.entangledLanes|=u,l.entanglements[E]=l.entanglements[E]|1073741824|y&4194090}function G(l,u){var y=l.entangledLanes|=u;for(l=l.entanglements;y;){var E=31-Z(y),C=1<<E;C&u|l[E]&u&&(l[E]|=u),y&=~C}}function Ge(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function $e(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function be(){var l=B.p;return l!==0?l:(l=window.event,l===void 0?32:wD(l.type))}function ze(l,u){var y=B.p;try{return B.p=l,u()}finally{B.p=y}}var Qe=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Qe,xt="__reactProps$"+Qe,Mt="__reactContainer$"+Qe,$t="__reactEvents$"+Qe,Ii="__reactListeners$"+Qe,In="__reactHandles$"+Qe,rn="__reactResources$"+Qe,jn="__reactMarker$"+Qe;function dn(l){delete l[Ot],delete l[xt],delete l[$t],delete l[Ii],delete l[In]}function vi(l){var u=l[Ot];if(u)return u;for(var y=l.parentNode;y;){if(u=y[Mt]||y[Ot]){if(y=u.alternate,u.child!==null||y!==null&&y.child!==null)for(l=cD(l);l!==null;){if(y=l[Ot])return y;l=cD(l)}return u}l=y,y=l.parentNode}return null}function ca(l){if(l=l[Ot]||l[Mt]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function qa(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(i(33))}function ei(l){var u=l[rn];return u||(u=l[rn]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Vn(l){l[jn]=!0}var Di=new Set,Kr={};function Te(l,u){Ke(l,u),Ke(l+"Capture",u)}function Ke(l,u){for(Kr[l]=u,l=0;l<u.length;l++)Di.add(u[l])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dt={},et={};function wt(l){return it.call(et,l)?!0:it.call(dt,l)?!1:at.test(l)?et[l]=!0:(dt[l]=!0,!1)}function Rt(l,u,y){if(wt(u))if(y===null)l.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var E=u.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+y)}}function Bt(l,u,y){if(y===null)l.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+y)}}function Nt(l,u,y,E){if(E===null)l.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(y);return}l.setAttributeNS(u,y,""+E)}}var Wt,Qt;function Gt(l){if(Wt===void 0)try{throw Error()}catch(y){var u=y.stack.trim().match(/\n( *(at )?)/);Wt=u&&u[1]||"",Qt=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+l+Qt}var _n=!1;function Gn(l,u){if(!l||_n)return"";_n=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(u){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(ft){var ct=ft}Reflect.construct(l,[],bt)}else{try{bt.call()}catch(ft){ct=ft}l.call(bt.prototype)}}else{try{throw Error()}catch(ft){ct=ft}(bt=l())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(ft){if(ft&&ct&&typeof ft.stack=="string")return[ft.stack,ct.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=E.DetermineComponentFrameRoot(),ue=z[0],we=z[1];if(ue&&we){var ke=ue.split(`
`),st=we.split(`
`);for(C=E=0;E<ke.length&&!ke[E].includes("DetermineComponentFrameRoot");)E++;for(;C<st.length&&!st[C].includes("DetermineComponentFrameRoot");)C++;if(E===ke.length||C===st.length)for(E=ke.length-1,C=st.length-1;1<=E&&0<=C&&ke[E]!==st[C];)C--;for(;1<=E&&0<=C;E--,C--)if(ke[E]!==st[C]){if(E!==1||C!==1)do if(E--,C--,0>C||ke[E]!==st[C]){var gt=`
`+ke[E].replace(" at new "," at ");return l.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",l.displayName)),gt}while(1<=E&&0<=C);break}}}finally{_n=!1,Error.prepareStackTrace=y}return(y=l?l.displayName||l.name:"")?Gt(y):""}function Ti(l){switch(l.tag){case 26:case 27:case 5:return Gt(l.type);case 16:return Gt("Lazy");case 13:return Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 15:return Gn(l.type,!1);case 11:return Gn(l.type.render,!1);case 1:return Gn(l.type,!0);case 31:return Gt("Activity");default:return""}}function si(l){try{var u="";do u+=Ti(l),l=l.return;while(l);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function gn(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Zt(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Mi(l){var u=Zt(l)?"checked":"value",y=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),E=""+l[u];if(!l.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var C=y.get,z=y.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return C.call(this)},set:function(ue){E=""+ue,z.call(this,ue)}}),Object.defineProperty(l,u,{enumerable:y.enumerable}),{getValue:function(){return E},setValue:function(ue){E=""+ue},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Cn(l){l._valueTracker||(l._valueTracker=Mi(l))}function Dr(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var y=u.getValue(),E="";return l&&(E=Zt(l)?l.checked?"true":"false":l.value),l=E,l!==y?(u.setValue(l),!0):!1}function ws(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Nr=/[\n"\\]/g;function mr(l){return l.replace(Nr,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ci(l,u,y,E,C,z,ue,we){l.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?l.type=ue:l.removeAttribute("type"),u!=null?ue==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+gn(u)):l.value!==""+gn(u)&&(l.value=""+gn(u)):ue!=="submit"&&ue!=="reset"||l.removeAttribute("value"),u!=null?Lr(l,ue,gn(u)):y!=null?Lr(l,ue,gn(y)):E!=null&&l.removeAttribute("value"),C==null&&z!=null&&(l.defaultChecked=!!z),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?l.name=""+gn(we):l.removeAttribute("name")}function $r(l,u,y,E,C,z,ue,we){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(l.type=z),u!=null||y!=null){if(!(z!=="submit"&&z!=="reset"||u!=null))return;y=y!=null?""+gn(y):"",u=u!=null?""+gn(u):y,we||u===l.value||(l.value=u),l.defaultValue=u}E=E??C,E=typeof E!="function"&&typeof E!="symbol"&&!!E,l.checked=we?l.checked:!!E,l.defaultChecked=!!E,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(l.name=ue)}function Lr(l,u,y){u==="number"&&ws(l.ownerDocument)===l||l.defaultValue===""+y||(l.defaultValue=""+y)}function Ui(l,u,y,E){if(l=l.options,u){u={};for(var C=0;C<y.length;C++)u["$"+y[C]]=!0;for(y=0;y<l.length;y++)C=u.hasOwnProperty("$"+l[y].value),l[y].selected!==C&&(l[y].selected=C),C&&E&&(l[y].defaultSelected=!0)}else{for(y=""+gn(y),u=null,C=0;C<l.length;C++){if(l[C].value===y){l[C].selected=!0,E&&(l[C].defaultSelected=!0);return}u!==null||l[C].disabled||(u=l[C])}u!==null&&(u.selected=!0)}}function Ir(l,u,y){if(u!=null&&(u=""+gn(u),u!==l.value&&(l.value=u),y==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=y!=null?""+gn(y):""}function Kc(l,u,y,E){if(u==null){if(E!=null){if(y!=null)throw Error(i(92));if(de(E)){if(1<E.length)throw Error(i(93));E=E[0]}y=E}y==null&&(y=""),u=y}y=gn(u),l.defaultValue=y,E=l.textContent,E===y&&E!==""&&E!==null&&(l.value=E)}function gr(l,u){if(u){var y=l.firstChild;if(y&&y===l.lastChild&&y.nodeType===3){y.nodeValue=u;return}}l.textContent=u}var I_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cd(l,u,y){var E=u.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?E?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":E?l.setProperty(u,y):typeof y!="number"||y===0||I_.has(u)?u==="float"?l.cssFloat=y:l[u]=(""+y).trim():l[u]=y+"px"}function Rd(l,u,y){if(u!=null&&typeof u!="object")throw Error(i(62));if(l=l.style,y!=null){for(var E in y)!y.hasOwnProperty(E)||u!=null&&u.hasOwnProperty(E)||(E.indexOf("--")===0?l.setProperty(E,""):E==="float"?l.cssFloat="":l[E]="");for(var C in u)E=u[C],u.hasOwnProperty(C)&&y[C]!==E&&Cd(l,C,E)}else for(var z in u)u.hasOwnProperty(z)&&Cd(l,z,u[z])}function Cp(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),U_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Od(l){return U_.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Rp=null;function Op(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Bl=null,$c=null;function _v(l){var u=ca(l);if(u&&(l=u.stateNode)){var y=l[xt]||null;e:switch(l=u.stateNode,u.type){case"input":if(ci(l,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),u=y.name,y.type==="radio"&&u!=null){for(y=l;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+mr(""+u)+'"][type="radio"]'),u=0;u<y.length;u++){var E=y[u];if(E!==l&&E.form===l.form){var C=E[xt]||null;if(!C)throw Error(i(90));ci(E,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<y.length;u++)E=y[u],E.form===l.form&&Dr(E)}break e;case"textarea":Ir(l,y.value,y.defaultValue);break e;case"select":u=y.value,u!=null&&Ui(l,!!y.multiple,u,!1)}}}var Dd=!1;function bv(l,u,y){if(Dd)return l(u,y);Dd=!0;try{var E=l(u);return E}finally{if(Dd=!1,(Bl!==null||$c!==null)&&(Uo(),Bl&&(u=Bl,l=$c,$c=Bl=null,_v(u),l)))for(u=0;u<l.length;u++)_v(l[u])}}function Gu(l,u){var y=l.stateNode;if(y===null)return null;var E=y[xt]||null;if(E===null)return null;y=E[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(l=l.type,E=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!E;break e;default:l=!1}if(l)return null;if(y&&typeof y!="function")throw Error(i(231,u,typeof y));return y}var bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nd=!1;if(bo)try{var Yu={};Object.defineProperty(Yu,"passive",{get:function(){Nd=!0}}),window.addEventListener("test",Yu,Yu),window.removeEventListener("test",Yu,Yu)}catch{Nd=!1}var Qo=null,xv=null,Dp=null;function Sv(){if(Dp)return Dp;var l,u=xv,y=u.length,E,C="value"in Qo?Qo.value:Qo.textContent,z=C.length;for(l=0;l<y&&u[l]===C[l];l++);var ue=y-l;for(E=1;E<=ue&&u[y-E]===C[z-E];E++);return Dp=C.slice(l,1<E?1-E:void 0)}function kl(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Wu(){return!0}function Ld(){return!1}function ua(l){function u(y,E,C,z,ue){this._reactName=y,this._targetInst=C,this.type=E,this.nativeEvent=z,this.target=ue,this.currentTarget=null;for(var we in l)l.hasOwnProperty(we)&&(y=l[we],this[we]=y?y(z):z[we]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Wu:Ld,this.isPropagationStopped=Ld,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Wu)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Wu)},persist:function(){},isPersistent:Wu}),u}var Fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=ua(Fl),Xu=p({},Fl,{view:0,detail:0}),P_=ua(Xu),Jo,qu,Ku,$u=p({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ud,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ku&&(Ku&&l.type==="mousemove"?(Jo=l.screenX-Ku.screenX,qu=l.screenY-Ku.screenY):qu=Jo=0,Ku=l),Jo)},movementY:function(l){return"movementY"in l?l.movementY:qu}}),Ev=ua($u),z_=p({},$u,{dataTransfer:0}),Kw=ua(z_),Ur=p({},Xu,{relatedTarget:0}),Np=ua(Ur),B_=p({},Fl,{animationName:0,elapsedTime:0,pseudoElement:0}),k_=ua(B_),F_=p({},Fl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),H_=ua(F_),Id=p({},Fl,{data:0}),Lp=ua(Id),j_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wv(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=G_[l])?!!u[l]:!1}function Ud(){return wv}var Y_=p({},Xu,{key:function(l){if(l.key){var u=j_[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=kl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?V_[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ud,charCode:function(l){return l.type==="keypress"?kl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?kl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Tv=ua(Y_),Mv=p({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ip=ua(Mv),W_=p({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ud}),Av=ua(W_),Z_=p({},Fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),el=ua(Z_),Cv=p({},$u,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),$w=ua(Cv),X_=p({},Fl,{newState:0,oldState:0}),Hl=ua(X_),tl=[9,13,27,32],Pd=bo&&"CompositionEvent"in window,Qc=null;bo&&"documentMode"in document&&(Qc=document.documentMode);var zd=bo&&"TextEvent"in window&&!Qc,Bd=bo&&(!Pd||Qc&&8<Qc&&11>=Qc),jl=" ",Pr=!1;function kd(l,u){switch(l){case"keyup":return tl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rv(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Vl=!1;function Fd(l,u){switch(l){case"compositionend":return Rv(u);case"keypress":return u.which!==32?null:(Pr=!0,jl);case"textInput":return l=u.data,l===jl&&Pr?null:l;default:return null}}function Ov(l,u){if(Vl)return l==="compositionend"||!Pd&&kd(l,u)?(l=Sv(),Dp=xv=Qo=null,Vl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Bd&&u.locale!=="ko"?null:u.data;default:return null}}var Up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dv(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Up[l.type]:u==="textarea"}function La(l,u,y,E){Bl?$c?$c.push(E):$c=[E]:Bl=E,u=Zb(u,"onChange"),0<u.length&&(y=new Zu("onChange","change",null,y,E),l.push({event:y,listeners:u}))}var Qu=null,Jc=null;function q_(l){JO(l,0)}function Hd(l){var u=qa(l);if(Dr(u))return l}function Pp(l,u){if(l==="change")return u}var zp=!1;if(bo){var Bp;if(bo){var Ju="oninput"in document;if(!Ju){var ef=document.createElement("div");ef.setAttribute("oninput","return;"),Ju=typeof ef.oninput=="function"}Bp=Ju}else Bp=!1;zp=Bp&&(!document.documentMode||9<document.documentMode)}function Ni(){Qu&&(Qu.detachEvent("onpropertychange",K_),Jc=Qu=null)}function K_(l){if(l.propertyName==="value"&&Hd(Jc)){var u=[];La(u,Jc,l,Op(l)),bv(q_,u)}}function Qw(l,u,y){l==="focusin"?(Ni(),Qu=u,Jc=y,Qu.attachEvent("onpropertychange",K_)):l==="focusout"&&Ni()}function $_(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Hd(Jc)}function jd(l,u){if(l==="click")return Hd(u)}function Gl(l,u){if(l==="input"||l==="change")return Hd(u)}function Q_(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ia=typeof Object.is=="function"?Object.is:Q_;function qs(l,u){if(Ia(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var y=Object.keys(l),E=Object.keys(u);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var C=y[E];if(!it.call(u,C)||!Ia(l[C],u[C]))return!1}return!0}function Ua(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Nv(l,u){var y=Ua(l);l=0;for(var E;y;){if(y.nodeType===3){if(E=l+y.textContent.length,l<=u&&E>=u)return{node:y,offset:u-l};l=E}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Ua(y)}}function Lv(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Lv(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Iv(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=ws(l.document);u instanceof l.HTMLIFrameElement;){try{var y=typeof u.contentWindow.location.href=="string"}catch{y=!1}if(y)l=u.contentWindow;else break;u=ws(l.document)}return u}function Vd(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var Uv=bo&&"documentMode"in document&&11>=document.documentMode,nl=null,kp=null,Gd=null,Fp=!1;function Pv(l,u,y){var E=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Fp||nl==null||nl!==ws(E)||(E=nl,"selectionStart"in E&&Vd(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Gd&&qs(Gd,E)||(Gd=E,E=Zb(kp,"onSelect"),0<E.length&&(u=new Zu("onSelect","select",null,u,y),l.push({event:u,listeners:E}),u.target=nl)))}function zr(l,u){var y={};return y[l.toLowerCase()]=u.toLowerCase(),y["Webkit"+l]="webkit"+u,y["Moz"+l]="moz"+u,y}var Yl={animationend:zr("Animation","AnimationEnd"),animationiteration:zr("Animation","AnimationIteration"),animationstart:zr("Animation","AnimationStart"),transitionrun:zr("Transition","TransitionRun"),transitionstart:zr("Transition","TransitionStart"),transitioncancel:zr("Transition","TransitionCancel"),transitionend:zr("Transition","TransitionEnd")},Hp={},J_={};bo&&(J_=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function il(l){if(Hp[l])return Hp[l];if(!Yl[l])return l;var u=Yl[l],y;for(y in u)if(u.hasOwnProperty(y)&&y in J_)return Hp[l]=u[y];return l}var fa=il("animationend"),zv=il("animationiteration"),Pa=il("animationstart"),eb=il("transitionrun"),rl=il("transitionstart"),tf=il("transitioncancel"),al=il("transitionend"),jp=new Map,Yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yd.push("scrollEnd");function wr(l,u){jp.set(l,u),Te(u,[l])}var Bv=new WeakMap;function Br(l,u){if(typeof l=="object"&&l!==null){var y=Bv.get(l);return y!==void 0?y:(u={value:l,source:u,stack:si(u)},Bv.set(l,u),u)}return{value:l,source:u,stack:si(u)}}var Qr=[],Ts=0,Vp=0;function Wd(){for(var l=Ts,u=Vp=Ts=0;u<l;){var y=Qr[u];Qr[u++]=null;var E=Qr[u];Qr[u++]=null;var C=Qr[u];Qr[u++]=null;var z=Qr[u];if(Qr[u++]=null,E!==null&&C!==null){var ue=E.pending;ue===null?C.next=C:(C.next=ue.next,ue.next=C),E.pending=C}z!==0&&kv(y,C,z)}}function Wl(l,u,y,E){Qr[Ts++]=l,Qr[Ts++]=u,Qr[Ts++]=y,Qr[Ts++]=E,Vp|=E,l.lanes|=E,l=l.alternate,l!==null&&(l.lanes|=E)}function Gp(l,u,y,E){return Wl(l,u,y,E),nf(l)}function sl(l,u){return Wl(l,null,null,u),nf(l)}function kv(l,u,y){l.lanes|=y;var E=l.alternate;E!==null&&(E.lanes|=y);for(var C=!1,z=l.return;z!==null;)z.childLanes|=y,E=z.alternate,E!==null&&(E.childLanes|=y),z.tag===22&&(l=z.stateNode,l===null||l._visibility&1||(C=!0)),l=z,z=z.return;return l.tag===3?(z=l.stateNode,C&&u!==null&&(C=31-Z(y),l=z.hiddenUpdates,E=l[C],E===null?l[C]=[u]:E.push(u),u.lane=y|536870912),z):null}function nf(l){if(50<Io)throw Io=0,vu=null,Error(i(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Zl={};function Fv(l,u,y,E){this.tag=l,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(l,u,y,E){return new Fv(l,u,y,E)}function Zd(l){return l=l.prototype,!(!l||!l.isReactComponent)}function qi(l,u){var y=l.alternate;return y===null?(y=za(l.tag,u,l.key,l.mode),y.elementType=l.elementType,y.type=l.type,y.stateNode=l.stateNode,y.alternate=l,l.alternate=y):(y.pendingProps=u,y.type=l.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=l.flags&65011712,y.childLanes=l.childLanes,y.lanes=l.lanes,y.child=l.child,y.memoizedProps=l.memoizedProps,y.memoizedState=l.memoizedState,y.updateQueue=l.updateQueue,u=l.dependencies,y.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},y.sibling=l.sibling,y.index=l.index,y.ref=l.ref,y.refCleanup=l.refCleanup,y}function Hv(l,u){l.flags&=65011714;var y=l.alternate;return y===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=y.childLanes,l.lanes=y.lanes,l.child=y.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=y.memoizedProps,l.memoizedState=y.memoizedState,l.updateQueue=y.updateQueue,l.type=y.type,u=y.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Tr(l,u,y,E,C,z){var ue=0;if(E=l,typeof l=="function")Zd(l)&&(ue=1);else if(typeof l=="string")ue=xH(l,y,le.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=za(31,y,u,C),l.elementType=N,l.lanes=z,l;case _:return Xl(y.children,C,z,u);case b:ue=8,C|=24;break;case S:return l=za(12,y,u,C|2),l.elementType=S,l.lanes=z,l;case D:return l=za(13,y,u,C),l.elementType=D,l.lanes=z,l;case O:return l=za(19,y,u,C),l.elementType=O,l.lanes=z,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case M:ue=10;break e;case T:ue=9;break e;case A:ue=11;break e;case I:ue=14;break e;case U:ue=16,E=null;break e}ue=29,y=Error(i(130,l===null?"null":typeof l,"")),E=null}return u=za(ue,y,u,C),u.elementType=l,u.type=E,u.lanes=z,u}function Xl(l,u,y,E){return l=za(7,l,E,u),l.lanes=y,l}function Xd(l,u,y){return l=za(6,l,null,u),l.lanes=y,l}function Yp(l,u,y){return u=za(4,l.children!==null?l.children:[],l.key,u),u.lanes=y,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var rf=[],Ba=0,qd=null,af=0,kr=[],Ka=0,ql=null,xo=1,So="";function ol(l,u){rf[Ba++]=af,rf[Ba++]=qd,qd=l,af=u}function Wp(l,u,y){kr[Ka++]=xo,kr[Ka++]=So,kr[Ka++]=ql,ql=l;var E=xo;l=So;var C=32-Z(E)-1;E&=~(1<<C),y+=1;var z=32-Z(u)+C;if(30<z){var ue=C-C%5;z=(E&(1<<ue)-1).toString(32),E>>=ue,C-=ue,xo=1<<32-Z(u)+C|y<<C|E,So=z+l}else xo=1<<z|y<<C|E,So=l}function jv(l){l.return!==null&&(ol(l,1),Wp(l,1,0))}function Vv(l){for(;l===qd;)qd=rf[--Ba],rf[Ba]=null,af=rf[--Ba],rf[Ba]=null;for(;l===ql;)ql=kr[--Ka],kr[Ka]=null,So=kr[--Ka],kr[Ka]=null,xo=kr[--Ka],kr[Ka]=null}var da=null,Pi=null,$n=!1,Ms=null,$a=!1,Zp=Error(i(519));function Kl(l){var u=Error(i(418,""));throw eu(Br(u,l)),Zp}function tb(l){var u=l.stateNode,y=l.type,E=l.memoizedProps;switch(u[Ot]=l,u[xt]=E,y){case"dialog":kn("cancel",u),kn("close",u);break;case"iframe":case"object":case"embed":kn("load",u);break;case"video":case"audio":for(y=0;y<by.length;y++)kn(by[y],u);break;case"source":kn("error",u);break;case"img":case"image":case"link":kn("error",u),kn("load",u);break;case"details":kn("toggle",u);break;case"input":kn("invalid",u),$r(u,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),Cn(u);break;case"select":kn("invalid",u);break;case"textarea":kn("invalid",u),Kc(u,E.value,E.defaultValue,E.children),Cn(u)}y=E.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||u.textContent===""+y||E.suppressHydrationWarning===!0||iD(u.textContent,y)?(E.popover!=null&&(kn("beforetoggle",u),kn("toggle",u)),E.onScroll!=null&&kn("scroll",u),E.onScrollEnd!=null&&kn("scrollend",u),E.onClick!=null&&(u.onclick=Xb),u=!0):u=!1,u||Kl(l)}function Gv(l){for(da=l.return;da;)switch(da.tag){case 5:case 13:$a=!1;return;case 27:case 3:$a=!0;return;default:da=da.return}}function Ks(l){if(l!==da)return!1;if(!$n)return Gv(l),$n=!0,!1;var u=l.tag,y;if((y=u!==3&&u!==27)&&((y=u===5)&&(y=l.type,y=!(y!=="form"&&y!=="button")||yT(l.type,l.memoizedProps)),y=!y),y&&Pi&&Kl(l),Gv(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(y=l.data,y==="/$"){if(u===0){Pi=xl(l.nextSibling);break e}u--}else y!=="$"&&y!=="$!"&&y!=="$?"||u++;l=l.nextSibling}Pi=null}}else u===27?(u=Pi,Of(l.type)?(l=ST,ST=null,Pi=l):Pi=u):Pi=da?xl(l.stateNode.nextSibling):null;return!0}function sf(){Pi=da=null,$n=!1}function ti(){var l=Ms;return l!==null&&(en===null?en=l:en.push.apply(en,l),Ms=null),l}function eu(l){Ms===null?Ms=[l]:Ms.push(l)}var Yv=oe(null),$l=null,ll=null;function Ql(l,u,y){J(Yv,u._currentValue),u._currentValue=y}function cl(l){l._currentValue=Yv.current,me(Yv)}function Wv(l,u,y){for(;l!==null;){var E=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,E!==null&&(E.childLanes|=u)):E!==null&&(E.childLanes&u)!==u&&(E.childLanes|=u),l===y)break;l=l.return}}function Kd(l,u,y,E){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var z=C.dependencies;if(z!==null){var ue=C.child;z=z.firstContext;e:for(;z!==null;){var we=z;z=C;for(var ke=0;ke<u.length;ke++)if(we.context===u[ke]){z.lanes|=y,we=z.alternate,we!==null&&(we.lanes|=y),Wv(z.return,y,l),E||(ue=null);break e}z=we.next}}else if(C.tag===18){if(ue=C.return,ue===null)throw Error(i(341));ue.lanes|=y,z=ue.alternate,z!==null&&(z.lanes|=y),Wv(ue,y,l),ue=null}else ue=C.child;if(ue!==null)ue.return=C;else for(ue=C;ue!==null;){if(ue===l){ue=null;break}if(C=ue.sibling,C!==null){C.return=ue.return,ue=C;break}ue=ue.return}C=ue}}function As(l,u,y,E){l=null;for(var C=u,z=!1;C!==null;){if(!z){if((C.flags&524288)!==0)z=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var ue=C.alternate;if(ue===null)throw Error(i(387));if(ue=ue.memoizedProps,ue!==null){var we=C.type;Ia(C.pendingProps.value,ue.value)||(l!==null?l.push(we):l=[we])}}else if(C===re.current){if(ue=C.alternate,ue===null)throw Error(i(387));ue.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(My):l=[My])}C=C.return}l!==null&&Kd(u,l,y,E),u.flags|=262144}function $d(l){for(l=l.firstContext;l!==null;){if(!Ia(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Eo(l){$l=l,ll=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ji(l){return Xp($l,l)}function Qd(l,u){return $l===null&&Eo(l),Xp(l,u)}function Xp(l,u){var y=u._currentValue;if(u={context:u,memoizedValue:y,next:null},ll===null){if(l===null)throw Error(i(308));ll=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else ll=ll.next=u;return y}var Zv=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(y,E){l.push(E)}};this.abort=function(){u.aborted=!0,l.forEach(function(y){return y()})}},Jw=n.unstable_scheduleCallback,nb=n.unstable_NormalPriority,sr={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qp(){return{controller:new Zv,data:new Map,refCount:0}}function of(l){l.refCount--,l.refCount===0&&Jw(nb,function(){l.controller.abort()})}var lf=null,Jd=0,vn=0,cf=null;function Qa(l,u){if(lf===null){var y=lf=[];Jd=0,vn=cT(),cf={status:"pending",value:void 0,then:function(E){y.push(E)}}}return Jd++,u.then(Kp,Kp),u}function Kp(){if(--Jd===0&&lf!==null){cf!==null&&(cf.status="fulfilled");var l=lf;lf=null,vn=0,cf=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function eT(l,u){var y=[],E={status:"pending",value:null,reason:null,then:function(C){y.push(C)}};return l.then(function(){E.status="fulfilled",E.value=u;for(var C=0;C<y.length;C++)(0,y[C])(u)},function(C){for(E.status="rejected",E.reason=C,C=0;C<y.length;C++)(0,y[C])(void 0)}),E}var eh=P.S;P.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Qa(l,u),eh!==null&&eh(l,u)};var Cs=oe(null);function Jl(){var l=Cs.current;return l!==null?l:hn.pooledCache}function th(l,u){u===null?J(Cs,Cs.current):J(Cs,u.pool)}function $p(){var l=Jl();return l===null?null:{parent:sr._currentValue,pool:l}}var nh=Error(i(460)),Xv=Error(i(474)),$s=Error(i(542)),ih={then:function(){}};function Qp(l){return l=l.status,l==="fulfilled"||l==="rejected"}function uf(){}function Jp(l,u,y){switch(y=l[y],y===void 0?l.push(u):y!==u&&(u.then(uf,uf),u=y),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ib(l),l;default:if(typeof u.status=="string")u.then(uf,uf);else{if(l=hn,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=u,l.status="pending",l.then(function(E){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=E}},function(E){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=E}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ib(l),l}throw Rs=u,nh}}var Rs=null;function qv(){if(Rs===null)throw Error(i(459));var l=Rs;return Rs=null,l}function ib(l){if(l===nh||l===$s)throw Error(i(483))}var ul=!1;function Kv(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function an(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function wo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fl(l,u,y){var E=l.updateQueue;if(E===null)return null;if(E=E.shared,(ni&2)!==0){var C=E.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),E.pending=u,u=nf(l),kv(l,null,y),u}return Wl(l,E,u,y),nf(l)}function tu(l,u,y){if(u=u.updateQueue,u!==null&&(u=u.shared,(y&4194048)!==0)){var E=u.lanes;E&=l.pendingLanes,y|=E,u.lanes=y,G(l,y)}}function ff(l,u){var y=l.updateQueue,E=l.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var C=null,z=null;if(y=y.firstBaseUpdate,y!==null){do{var ue={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};z===null?C=z=ue:z=z.next=ue,y=y.next}while(y!==null);z===null?C=z=u:z=z.next=u}else C=z=u;y={baseState:E.baseState,firstBaseUpdate:C,lastBaseUpdate:z,shared:E.shared,callbacks:E.callbacks},l.updateQueue=y;return}l=y.lastBaseUpdate,l===null?y.firstBaseUpdate=u:l.next=u,y.lastBaseUpdate=u}var $v=!1;function rh(){if($v){var l=cf;if(l!==null)throw l}}function df(l,u,y,E){$v=!1;var C=l.updateQueue;ul=!1;var z=C.firstBaseUpdate,ue=C.lastBaseUpdate,we=C.shared.pending;if(we!==null){C.shared.pending=null;var ke=we,st=ke.next;ke.next=null,ue===null?z=st:ue.next=st,ue=ke;var gt=l.alternate;gt!==null&&(gt=gt.updateQueue,we=gt.lastBaseUpdate,we!==ue&&(we===null?gt.firstBaseUpdate=st:we.next=st,gt.lastBaseUpdate=ke))}if(z!==null){var bt=C.baseState;ue=0,gt=st=ke=null,we=z;do{var ct=we.lane&-536870913,ft=ct!==we.lane;if(ft?(Kt&ct)===ct:(E&ct)===ct){ct!==0&&ct===vn&&($v=!0),gt!==null&&(gt=gt.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var cn=l,tn=we;ct=u;var Si=y;switch(tn.tag){case 1:if(cn=tn.payload,typeof cn=="function"){bt=cn.call(Si,bt,ct);break e}bt=cn;break e;case 3:cn.flags=cn.flags&-65537|128;case 0:if(cn=tn.payload,ct=typeof cn=="function"?cn.call(Si,bt,ct):cn,ct==null)break e;bt=p({},bt,ct);break e;case 2:ul=!0}}ct=we.callback,ct!==null&&(l.flags|=64,ft&&(l.flags|=8192),ft=C.callbacks,ft===null?C.callbacks=[ct]:ft.push(ct))}else ft={lane:ct,tag:we.tag,payload:we.payload,callback:we.callback,next:null},gt===null?(st=gt=ft,ke=bt):gt=gt.next=ft,ue|=ct;if(we=we.next,we===null){if(we=C.shared.pending,we===null)break;ft=we,we=ft.next,ft.next=null,C.lastBaseUpdate=ft,C.shared.pending=null}}while(!0);gt===null&&(ke=bt),C.baseState=ke,C.firstBaseUpdate=st,C.lastBaseUpdate=gt,z===null&&(C.shared.lanes=0),ao|=ue,l.lanes=ue,l.memoizedState=bt}}function hf(l,u){if(typeof l!="function")throw Error(i(191,l));l.call(u)}function rb(l,u){var y=l.callbacks;if(y!==null)for(l.callbacks=null,l=0;l<y.length;l++)hf(y[l],u)}var pf=oe(null),em=oe(0);function ab(l,u){l=Us,J(em,l),J(pf,u),Us=l|u.baseLanes}function Qv(){J(em,Us),J(pf,pf.current)}function ah(){Us=em.current,me(pf),me(em)}var dl=0,yn=null,oi=null,or=null,tm=!1,ec=!1,ha=!1,vr=0,Os=0,Fr=null,sb=0;function Ki(){throw Error(i(321))}function Jr(l,u){if(u===null)return!1;for(var y=0;y<u.length&&y<l.length;y++)if(!Ia(l[y],u[y]))return!1;return!0}function hl(l,u,y,E,C,z){return dl=z,yn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,P.H=l===null||l.memoizedState===null?um:py,ha=!1,z=y(E,C),ha=!1,ec&&(z=lb(u,y,E,C)),ob(l),z}function ob(l){P.H=lh;var u=oi!==null&&oi.next!==null;if(dl=0,or=oi=yn=null,tm=!1,Os=0,Fr=null,u)throw Error(i(300));l===null||Mr||(l=l.dependencies,l!==null&&$d(l)&&(Mr=!0))}function lb(l,u,y,E){yn=l;var C=0;do{if(ec&&(Fr=null),Os=0,ec=!1,25<=C)throw Error(i(301));if(C+=1,or=oi=null,l.updateQueue!=null){var z=l.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}P.H=Ib,z=u(y,E)}while(ec);return z}function tT(){var l=P.H,u=l.useState()[0];return u=typeof u.then=="function"?Qs(u):u,l=l.useState()[0],(oi!==null?oi.memoizedState:null)!==l&&(yn.flags|=1024),u}function Jv(){var l=vr!==0;return vr=0,l}function nm(l,u,y){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~y}function ey(l){if(tm){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}tm=!1}dl=0,or=oi=yn=null,ec=!1,Os=vr=0,Fr=null}function pa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?yn.memoizedState=or=l:or=or.next=l,or}function lr(){if(oi===null){var l=yn.alternate;l=l!==null?l.memoizedState:null}else l=oi.next;var u=or===null?yn.memoizedState:or.next;if(u!==null)or=u,oi=l;else{if(l===null)throw yn.alternate===null?Error(i(467)):Error(i(310));oi=l,l={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},or===null?yn.memoizedState=or=l:or=or.next=l}return or}function tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qs(l){var u=Os;return Os+=1,Fr===null&&(Fr=[]),l=Jp(Fr,l,u),u=yn,(or===null?u.memoizedState:or.next)===null&&(u=u.alternate,P.H=u===null||u.memoizedState===null?um:py),l}function im(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Qs(l);if(l.$$typeof===M)return ji(l)}throw Error(i(438,String(l)))}function ty(l){var u=null,y=yn.updateQueue;if(y!==null&&(u=y.memoCache),u==null){var E=yn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(u={data:E.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),y===null&&(y=tc(),yn.updateQueue=y),y.memoCache=u,y=u.data[u.index],y===void 0)for(y=u.data[u.index]=Array(l),E=0;E<l;E++)y[E]=L;return u.index++,y}function pl(l,u){return typeof u=="function"?u(l):u}function nc(l){var u=lr();return ny(u,oi,l)}function ny(l,u,y){var E=l.queue;if(E===null)throw Error(i(311));E.lastRenderedReducer=y;var C=l.baseQueue,z=E.pending;if(z!==null){if(C!==null){var ue=C.next;C.next=z.next,z.next=ue}u.baseQueue=C=z,E.pending=null}if(z=l.baseState,C===null)l.memoizedState=z;else{u=C.next;var we=ue=null,ke=null,st=u,gt=!1;do{var bt=st.lane&-536870913;if(bt!==st.lane?(Kt&bt)===bt:(dl&bt)===bt){var ct=st.revertLane;if(ct===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),bt===vn&&(gt=!0);else if((dl&ct)===ct){st=st.next,ct===vn&&(gt=!0);continue}else bt={lane:0,revertLane:st.revertLane,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},ke===null?(we=ke=bt,ue=z):ke=ke.next=bt,yn.lanes|=ct,ao|=ct;bt=st.action,ha&&y(z,bt),z=st.hasEagerState?st.eagerState:y(z,bt)}else ct={lane:bt,revertLane:st.revertLane,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},ke===null?(we=ke=ct,ue=z):ke=ke.next=ct,yn.lanes|=bt,ao|=bt;st=st.next}while(st!==null&&st!==u);if(ke===null?ue=z:ke.next=we,!Ia(z,l.memoizedState)&&(Mr=!0,gt&&(y=cf,y!==null)))throw y;l.memoizedState=z,l.baseState=ue,l.baseQueue=ke,E.lastRenderedState=z}return C===null&&(E.lanes=0),[l.memoizedState,E.dispatch]}function iy(l){var u=lr(),y=u.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=l;var E=y.dispatch,C=y.pending,z=u.memoizedState;if(C!==null){y.pending=null;var ue=C=C.next;do z=l(z,ue.action),ue=ue.next;while(ue!==C);Ia(z,u.memoizedState)||(Mr=!0),u.memoizedState=z,u.baseQueue===null&&(u.baseState=z),y.lastRenderedState=z}return[z,E]}function cb(l,u,y){var E=yn,C=lr(),z=$n;if(z){if(y===void 0)throw Error(i(407));y=y()}else y=u();var ue=!Ia((oi||C).memoizedState,y);ue&&(C.memoizedState=y,Mr=!0),C=C.queue;var we=fb.bind(null,E,C,l);if(vf(2048,8,we,[l]),C.getSnapshot!==u||ue||or!==null&&or.memoizedState.tag&1){if(E.flags|=2048,gf(9,sh(),ub.bind(null,E,C,y,u),null),hn===null)throw Error(i(349));z||(dl&124)!==0||mf(E,u,y)}return y}function mf(l,u,y){l.flags|=16384,l={getSnapshot:u,value:y},u=yn.updateQueue,u===null?(u=tc(),yn.updateQueue=u,u.stores=[l]):(y=u.stores,y===null?u.stores=[l]:y.push(l))}function ub(l,u,y,E){u.value=y,u.getSnapshot=E,db(u)&&hb(l)}function fb(l,u,y){return y(function(){db(u)&&hb(l)})}function db(l){var u=l.getSnapshot;l=l.value;try{var y=u();return!Ia(l,y)}catch{return!0}}function hb(l){var u=sl(l,2);u!==null&&va(u,l,2)}function ry(l){var u=pa();if(typeof l=="function"){var y=l;if(l=y(),ha){H(!0);try{y()}finally{H(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:l},u}function pb(l,u,y,E){return l.baseState=y,ny(l,oi,typeof E=="function"?E:pl)}function nT(l,u,y,E,C){if(cm(l))throw Error(i(485));if(l=u.action,l!==null){var z={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){z.listeners.push(ue)}};P.T!==null?y(!0):z.isTransition=!1,E(z),y=u.pending,y===null?(z.next=u.pending=z,mb(u,z)):(z.next=y.next,u.pending=y.next=z)}}function mb(l,u){var y=u.action,E=u.payload,C=l.state;if(u.isTransition){var z=P.T,ue={};P.T=ue;try{var we=y(C,E),ke=P.S;ke!==null&&ke(ue,we),gb(l,u,we)}catch(st){ay(l,u,st)}finally{P.T=z}}else try{z=y(C,E),gb(l,u,z)}catch(st){ay(l,u,st)}}function gb(l,u,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(E){vb(l,u,E)},function(E){return ay(l,u,E)}):vb(l,u,y)}function vb(l,u,y){u.status="fulfilled",u.value=y,yb(u),l.state=y,u=l.pending,u!==null&&(y=u.next,y===u?l.pending=null:(y=y.next,u.next=y,mb(l,y)))}function ay(l,u,y){var E=l.pending;if(l.pending=null,E!==null){E=E.next;do u.status="rejected",u.reason=y,yb(u),u=u.next;while(u!==E)}l.action=null}function yb(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function sy(l,u){return u}function _b(l,u){if($n){var y=hn.formState;if(y!==null){e:{var E=yn;if($n){if(Pi){t:{for(var C=Pi,z=$a;C.nodeType!==8;){if(!z){C=null;break t}if(C=xl(C.nextSibling),C===null){C=null;break t}}z=C.data,C=z==="F!"||z==="F"?C:null}if(C){Pi=xl(C.nextSibling),E=C.data==="F!";break e}}Kl(E)}E=!1}E&&(u=y[0])}}return y=pa(),y.memoizedState=y.baseState=u,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sy,lastRenderedState:u},y.queue=E,y=Nb.bind(null,yn,E),E.dispatch=y,E=ry(!1),z=lm.bind(null,yn,!1,E.queue),E=pa(),C={state:u,dispatch:null,action:l,pending:null},E.queue=C,y=nT.bind(null,yn,C,z,y),C.dispatch=y,E.memoizedState=l,[u,y,!1]}function bb(l){var u=lr();return xb(u,oi,l)}function xb(l,u,y){if(u=ny(l,u,sy)[0],l=nc(pl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var E=Qs(u)}catch(ue){throw ue===nh?$s:ue}else E=u;u=lr();var C=u.queue,z=C.dispatch;return y!==u.memoizedState&&(yn.flags|=2048,gf(9,sh(),iT.bind(null,C,y),null)),[E,z,l]}function iT(l,u){l.action=u}function Sb(l){var u=lr(),y=oi;if(y!==null)return xb(u,y,l);lr(),u=u.memoizedState,y=lr();var E=y.queue.dispatch;return y.memoizedState=l,[u,E,!1]}function gf(l,u,y,E){return l={tag:l,create:y,deps:E,inst:u,next:null},u=yn.updateQueue,u===null&&(u=tc(),yn.updateQueue=u),y=u.lastEffect,y===null?u.lastEffect=l.next=l:(E=y.next,y.next=l,l.next=E,u.lastEffect=l),l}function sh(){return{destroy:void 0,resource:void 0}}function oy(){return lr().memoizedState}function rm(l,u,y,E){var C=pa();E=E===void 0?null:E,yn.flags|=l,C.memoizedState=gf(1|u,sh(),y,E)}function vf(l,u,y,E){var C=lr();E=E===void 0?null:E;var z=C.memoizedState.inst;oi!==null&&E!==null&&Jr(E,oi.memoizedState.deps)?C.memoizedState=gf(u,z,y,E):(yn.flags|=l,C.memoizedState=gf(1|u,z,y,E))}function ly(l,u){rm(8390656,8,l,u)}function cy(l,u){vf(2048,8,l,u)}function am(l,u){return vf(4,2,l,u)}function sm(l,u){return vf(4,4,l,u)}function Eb(l,u){if(typeof u=="function"){l=l();var y=u(l);return function(){typeof y=="function"?y():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function wb(l,u,y){y=y!=null?y.concat([l]):null,vf(4,4,Eb.bind(null,u,l),y)}function uy(){}function Tb(l,u){var y=lr();u=u===void 0?null:u;var E=y.memoizedState;return u!==null&&Jr(u,E[1])?E[0]:(y.memoizedState=[l,u],l)}function fy(l,u){var y=lr();u=u===void 0?null:u;var E=y.memoizedState;if(u!==null&&Jr(u,E[1]))return E[0];if(E=l(),ha){H(!0);try{l()}finally{H(!1)}}return y.memoizedState=[E,u],E}function om(l,u,y){return y===void 0||(dl&1073741824)!==0?l.memoizedState=u:(l.memoizedState=y,l=xm(),yn.lanes|=l,ao|=l,y)}function Mb(l,u,y,E){return Ia(y,u)?y:pf.current!==null?(l=om(l,y,E),Ia(l,u)||(Mr=!0),l):(dl&42)===0?(Mr=!0,l.memoizedState=y):(l=xm(),yn.lanes|=l,ao|=l,u)}function Ab(l,u,y,E,C){var z=B.p;B.p=z!==0&&8>z?z:8;var ue=P.T,we={};P.T=we,lm(l,!1,u,y);try{var ke=C(),st=P.S;if(st!==null&&st(we,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var gt=eT(ke,E);oh(l,u,gt,Yi(l))}else oh(l,u,E,Yi(l))}catch(bt){oh(l,u,{then:function(){},status:"rejected",reason:bt},Yi())}finally{B.p=z,P.T=ue}}function rT(){}function dy(l,u,y,E){if(l.tag!==5)throw Error(i(476));var C=Cb(l).queue;Ab(l,C,u,V,y===null?rT:function(){return Rb(l),y(E)})}function Cb(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:V},next:null};var y={};return u.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:y},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Rb(l){var u=Cb(l).next.queue;oh(l,u,{},Yi())}function hy(){return ji(My)}function Ob(){return lr().memoizedState}function Db(){return lr().memoizedState}function aT(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var y=Yi();l=wo(y);var E=fl(u,l,y);E!==null&&(va(E,u,y),tu(E,u,y)),u={cache:qp()},l.payload=u;return}u=u.return}}function sT(l,u,y){var E=Yi();y={lane:E,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},cm(l)?Lb(u,y):(y=Gp(l,u,y,E),y!==null&&(va(y,l,E),Ja(y,u,E)))}function Nb(l,u,y){var E=Yi();oh(l,u,y,E)}function oh(l,u,y,E){var C={lane:E,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(cm(l))Lb(u,C);else{var z=l.alternate;if(l.lanes===0&&(z===null||z.lanes===0)&&(z=u.lastRenderedReducer,z!==null))try{var ue=u.lastRenderedState,we=z(ue,y);if(C.hasEagerState=!0,C.eagerState=we,Ia(we,ue))return Wl(l,u,C,0),hn===null&&Wd(),!1}catch{}finally{}if(y=Gp(l,u,C,E),y!==null)return va(y,l,E),Ja(y,u,E),!0}return!1}function lm(l,u,y,E){if(E={lane:2,revertLane:cT(),action:E,hasEagerState:!1,eagerState:null,next:null},cm(l)){if(u)throw Error(i(479))}else u=Gp(l,y,E,2),u!==null&&va(u,l,2)}function cm(l){var u=l.alternate;return l===yn||u!==null&&u===yn}function Lb(l,u){ec=tm=!0;var y=l.pending;y===null?u.next=u:(u.next=y.next,y.next=u),l.pending=u}function Ja(l,u,y){if((y&4194048)!==0){var E=u.lanes;E&=l.pendingLanes,y|=E,u.lanes=y,G(l,y)}}var lh={readContext:ji,use:im,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useLayoutEffect:Ki,useInsertionEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki,useDeferredValue:Ki,useTransition:Ki,useSyncExternalStore:Ki,useId:Ki,useHostTransitionStatus:Ki,useFormState:Ki,useActionState:Ki,useOptimistic:Ki,useMemoCache:Ki,useCacheRefresh:Ki},um={readContext:ji,use:im,useCallback:function(l,u){return pa().memoizedState=[l,u===void 0?null:u],l},useContext:ji,useEffect:ly,useImperativeHandle:function(l,u,y){y=y!=null?y.concat([l]):null,rm(4194308,4,Eb.bind(null,u,l),y)},useLayoutEffect:function(l,u){return rm(4194308,4,l,u)},useInsertionEffect:function(l,u){rm(4,2,l,u)},useMemo:function(l,u){var y=pa();u=u===void 0?null:u;var E=l();if(ha){H(!0);try{l()}finally{H(!1)}}return y.memoizedState=[E,u],E},useReducer:function(l,u,y){var E=pa();if(y!==void 0){var C=y(u);if(ha){H(!0);try{y(u)}finally{H(!1)}}}else C=u;return E.memoizedState=E.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},E.queue=l,l=l.dispatch=sT.bind(null,yn,l),[E.memoizedState,l]},useRef:function(l){var u=pa();return l={current:l},u.memoizedState=l},useState:function(l){l=ry(l);var u=l.queue,y=Nb.bind(null,yn,u);return u.dispatch=y,[l.memoizedState,y]},useDebugValue:uy,useDeferredValue:function(l,u){var y=pa();return om(y,l,u)},useTransition:function(){var l=ry(!1);return l=Ab.bind(null,yn,l.queue,!0,!1),pa().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,y){var E=yn,C=pa();if($n){if(y===void 0)throw Error(i(407));y=y()}else{if(y=u(),hn===null)throw Error(i(349));(Kt&124)!==0||mf(E,u,y)}C.memoizedState=y;var z={value:y,getSnapshot:u};return C.queue=z,ly(fb.bind(null,E,z,l),[l]),E.flags|=2048,gf(9,sh(),ub.bind(null,E,z,y,u),null),y},useId:function(){var l=pa(),u=hn.identifierPrefix;if($n){var y=So,E=xo;y=(E&~(1<<32-Z(E)-1)).toString(32)+y,u=""+u+"R"+y,y=vr++,0<y&&(u+="H"+y.toString(32)),u+=""}else y=sb++,u=""+u+"r"+y.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:hy,useFormState:_b,useActionState:_b,useOptimistic:function(l){var u=pa();u.memoizedState=u.baseState=l;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=y,u=lm.bind(null,yn,!0,y),y.dispatch=u,[l,u]},useMemoCache:ty,useCacheRefresh:function(){return pa().memoizedState=aT.bind(null,yn)}},py={readContext:ji,use:im,useCallback:Tb,useContext:ji,useEffect:cy,useImperativeHandle:wb,useInsertionEffect:am,useLayoutEffect:sm,useMemo:fy,useReducer:nc,useRef:oy,useState:function(){return nc(pl)},useDebugValue:uy,useDeferredValue:function(l,u){var y=lr();return Mb(y,oi.memoizedState,l,u)},useTransition:function(){var l=nc(pl)[0],u=lr().memoizedState;return[typeof l=="boolean"?l:Qs(l),u]},useSyncExternalStore:cb,useId:Ob,useHostTransitionStatus:hy,useFormState:bb,useActionState:bb,useOptimistic:function(l,u){var y=lr();return pb(y,oi,l,u)},useMemoCache:ty,useCacheRefresh:Db},Ib={readContext:ji,use:im,useCallback:Tb,useContext:ji,useEffect:cy,useImperativeHandle:wb,useInsertionEffect:am,useLayoutEffect:sm,useMemo:fy,useReducer:iy,useRef:oy,useState:function(){return iy(pl)},useDebugValue:uy,useDeferredValue:function(l,u){var y=lr();return oi===null?om(y,l,u):Mb(y,oi.memoizedState,l,u)},useTransition:function(){var l=iy(pl)[0],u=lr().memoizedState;return[typeof l=="boolean"?l:Qs(l),u]},useSyncExternalStore:cb,useId:Ob,useHostTransitionStatus:hy,useFormState:Sb,useActionState:Sb,useOptimistic:function(l,u){var y=lr();return oi!==null?pb(y,oi,l,u):(y.baseState=l,[l,y.queue.dispatch])},useMemoCache:ty,useCacheRefresh:Db},nu=null,ch=0;function uh(l){var u=ch;return ch+=1,nu===null&&(nu=[]),Jp(nu,l,u)}function yf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function fm(l,u){throw u.$$typeof===d?Error(i(525)):(l=Object.prototype.toString.call(u),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Ub(l){var u=l._init;return u(l._payload)}function Pb(l){function u(Je,qe){if(l){var rt=Je.deletions;rt===null?(Je.deletions=[qe],Je.flags|=16):rt.push(qe)}}function y(Je,qe){if(!l)return null;for(;qe!==null;)u(Je,qe),qe=qe.sibling;return null}function E(Je){for(var qe=new Map;Je!==null;)Je.key!==null?qe.set(Je.key,Je):qe.set(Je.index,Je),Je=Je.sibling;return qe}function C(Je,qe){return Je=qi(Je,qe),Je.index=0,Je.sibling=null,Je}function z(Je,qe,rt){return Je.index=rt,l?(rt=Je.alternate,rt!==null?(rt=rt.index,rt<qe?(Je.flags|=67108866,qe):rt):(Je.flags|=67108866,qe)):(Je.flags|=1048576,qe)}function ue(Je){return l&&Je.alternate===null&&(Je.flags|=67108866),Je}function we(Je,qe,rt,yt){return qe===null||qe.tag!==6?(qe=Xd(rt,Je.mode,yt),qe.return=Je,qe):(qe=C(qe,rt),qe.return=Je,qe)}function ke(Je,qe,rt,yt){var Ht=rt.type;return Ht===_?gt(Je,qe,rt.props.children,yt,rt.key):qe!==null&&(qe.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===U&&Ub(Ht)===qe.type)?(qe=C(qe,rt.props),yf(qe,rt),qe.return=Je,qe):(qe=Tr(rt.type,rt.key,rt.props,null,Je.mode,yt),yf(qe,rt),qe.return=Je,qe)}function st(Je,qe,rt,yt){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==rt.containerInfo||qe.stateNode.implementation!==rt.implementation?(qe=Yp(rt,Je.mode,yt),qe.return=Je,qe):(qe=C(qe,rt.children||[]),qe.return=Je,qe)}function gt(Je,qe,rt,yt,Ht){return qe===null||qe.tag!==7?(qe=Xl(rt,Je.mode,yt,Ht),qe.return=Je,qe):(qe=C(qe,rt),qe.return=Je,qe)}function bt(Je,qe,rt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=Xd(""+qe,Je.mode,rt),qe.return=Je,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case m:return rt=Tr(qe.type,qe.key,qe.props,null,Je.mode,rt),yf(rt,qe),rt.return=Je,rt;case v:return qe=Yp(qe,Je.mode,rt),qe.return=Je,qe;case U:var yt=qe._init;return qe=yt(qe._payload),bt(Je,qe,rt)}if(de(qe)||ee(qe))return qe=Xl(qe,Je.mode,rt,null),qe.return=Je,qe;if(typeof qe.then=="function")return bt(Je,uh(qe),rt);if(qe.$$typeof===M)return bt(Je,Qd(Je,qe),rt);fm(Je,qe)}return null}function ct(Je,qe,rt,yt){var Ht=qe!==null?qe.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Ht!==null?null:we(Je,qe,""+rt,yt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case m:return rt.key===Ht?ke(Je,qe,rt,yt):null;case v:return rt.key===Ht?st(Je,qe,rt,yt):null;case U:return Ht=rt._init,rt=Ht(rt._payload),ct(Je,qe,rt,yt)}if(de(rt)||ee(rt))return Ht!==null?null:gt(Je,qe,rt,yt,null);if(typeof rt.then=="function")return ct(Je,qe,uh(rt),yt);if(rt.$$typeof===M)return ct(Je,qe,Qd(Je,rt),yt);fm(Je,rt)}return null}function ft(Je,qe,rt,yt,Ht){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return Je=Je.get(rt)||null,we(qe,Je,""+yt,Ht);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case m:return Je=Je.get(yt.key===null?rt:yt.key)||null,ke(qe,Je,yt,Ht);case v:return Je=Je.get(yt.key===null?rt:yt.key)||null,st(qe,Je,yt,Ht);case U:var Bn=yt._init;return yt=Bn(yt._payload),ft(Je,qe,rt,yt,Ht)}if(de(yt)||ee(yt))return Je=Je.get(rt)||null,gt(qe,Je,yt,Ht,null);if(typeof yt.then=="function")return ft(Je,qe,rt,uh(yt),Ht);if(yt.$$typeof===M)return ft(Je,qe,rt,Qd(qe,yt),Ht);fm(qe,yt)}return null}function cn(Je,qe,rt,yt){for(var Ht=null,Bn=null,Xt=qe,nn=qe=0,na=null;Xt!==null&&nn<rt.length;nn++){Xt.index>nn?(na=Xt,Xt=null):na=Xt.sibling;var ri=ct(Je,Xt,rt[nn],yt);if(ri===null){Xt===null&&(Xt=na);break}l&&Xt&&ri.alternate===null&&u(Je,Xt),qe=z(ri,qe,nn),Bn===null?Ht=ri:Bn.sibling=ri,Bn=ri,Xt=na}if(nn===rt.length)return y(Je,Xt),$n&&ol(Je,nn),Ht;if(Xt===null){for(;nn<rt.length;nn++)Xt=bt(Je,rt[nn],yt),Xt!==null&&(qe=z(Xt,qe,nn),Bn===null?Ht=Xt:Bn.sibling=Xt,Bn=Xt);return $n&&ol(Je,nn),Ht}for(Xt=E(Xt);nn<rt.length;nn++)na=ft(Xt,Je,nn,rt[nn],yt),na!==null&&(l&&na.alternate!==null&&Xt.delete(na.key===null?nn:na.key),qe=z(na,qe,nn),Bn===null?Ht=na:Bn.sibling=na,Bn=na);return l&&Xt.forEach(function(Uf){return u(Je,Uf)}),$n&&ol(Je,nn),Ht}function tn(Je,qe,rt,yt){if(rt==null)throw Error(i(151));for(var Ht=null,Bn=null,Xt=qe,nn=qe=0,na=null,ri=rt.next();Xt!==null&&!ri.done;nn++,ri=rt.next()){Xt.index>nn?(na=Xt,Xt=null):na=Xt.sibling;var Uf=ct(Je,Xt,ri.value,yt);if(Uf===null){Xt===null&&(Xt=na);break}l&&Xt&&Uf.alternate===null&&u(Je,Xt),qe=z(Uf,qe,nn),Bn===null?Ht=Uf:Bn.sibling=Uf,Bn=Uf,Xt=na}if(ri.done)return y(Je,Xt),$n&&ol(Je,nn),Ht;if(Xt===null){for(;!ri.done;nn++,ri=rt.next())ri=bt(Je,ri.value,yt),ri!==null&&(qe=z(ri,qe,nn),Bn===null?Ht=ri:Bn.sibling=ri,Bn=ri);return $n&&ol(Je,nn),Ht}for(Xt=E(Xt);!ri.done;nn++,ri=rt.next())ri=ft(Xt,Je,nn,ri.value,yt),ri!==null&&(l&&ri.alternate!==null&&Xt.delete(ri.key===null?nn:ri.key),qe=z(ri,qe,nn),Bn===null?Ht=ri:Bn.sibling=ri,Bn=ri);return l&&Xt.forEach(function(LH){return u(Je,LH)}),$n&&ol(Je,nn),Ht}function Si(Je,qe,rt,yt){if(typeof rt=="object"&&rt!==null&&rt.type===_&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case m:e:{for(var Ht=rt.key;qe!==null;){if(qe.key===Ht){if(Ht=rt.type,Ht===_){if(qe.tag===7){y(Je,qe.sibling),yt=C(qe,rt.props.children),yt.return=Je,Je=yt;break e}}else if(qe.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===U&&Ub(Ht)===qe.type){y(Je,qe.sibling),yt=C(qe,rt.props),yf(yt,rt),yt.return=Je,Je=yt;break e}y(Je,qe);break}else u(Je,qe);qe=qe.sibling}rt.type===_?(yt=Xl(rt.props.children,Je.mode,yt,rt.key),yt.return=Je,Je=yt):(yt=Tr(rt.type,rt.key,rt.props,null,Je.mode,yt),yf(yt,rt),yt.return=Je,Je=yt)}return ue(Je);case v:e:{for(Ht=rt.key;qe!==null;){if(qe.key===Ht)if(qe.tag===4&&qe.stateNode.containerInfo===rt.containerInfo&&qe.stateNode.implementation===rt.implementation){y(Je,qe.sibling),yt=C(qe,rt.children||[]),yt.return=Je,Je=yt;break e}else{y(Je,qe);break}else u(Je,qe);qe=qe.sibling}yt=Yp(rt,Je.mode,yt),yt.return=Je,Je=yt}return ue(Je);case U:return Ht=rt._init,rt=Ht(rt._payload),Si(Je,qe,rt,yt)}if(de(rt))return cn(Je,qe,rt,yt);if(ee(rt)){if(Ht=ee(rt),typeof Ht!="function")throw Error(i(150));return rt=Ht.call(rt),tn(Je,qe,rt,yt)}if(typeof rt.then=="function")return Si(Je,qe,uh(rt),yt);if(rt.$$typeof===M)return Si(Je,qe,Qd(Je,rt),yt);fm(Je,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,qe!==null&&qe.tag===6?(y(Je,qe.sibling),yt=C(qe,rt),yt.return=Je,Je=yt):(y(Je,qe),yt=Xd(rt,Je.mode,yt),yt.return=Je,Je=yt),ue(Je)):y(Je,qe)}return function(Je,qe,rt,yt){try{ch=0;var Ht=Si(Je,qe,rt,yt);return nu=null,Ht}catch(Xt){if(Xt===nh||Xt===$s)throw Xt;var Bn=za(29,Xt,null,Je.mode);return Bn.lanes=yt,Bn.return=Je,Bn}finally{}}}var iu=Pb(!0),zb=Pb(!1),di=oe(null),Js=null;function ic(l){var u=l.alternate;J($i,$i.current&1),J(di,l),Js===null&&(u===null||pf.current!==null||u.memoizedState!==null)&&(Js=l)}function Bb(l){if(l.tag===22){if(J($i,$i.current),J(di,l),Js===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(Js=l)}}else rc()}function rc(){J($i,$i.current),J(di,di.current)}function To(l){me(di),Js===l&&(Js=null),me($i)}var $i=oe(0);function ml(l){for(var u=l;u!==null;){if(u.tag===13){var y=u.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||xT(y)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function ac(l,u,y,E){u=l.memoizedState,y=y(E,u),y=y==null?u:p({},u,y),l.memoizedState=y,l.lanes===0&&(l.updateQueue.baseState=y)}var ma={enqueueSetState:function(l,u,y){l=l._reactInternals;var E=Yi(),C=wo(E);C.payload=u,y!=null&&(C.callback=y),u=fl(l,C,E),u!==null&&(va(u,l,E),tu(u,l,E))},enqueueReplaceState:function(l,u,y){l=l._reactInternals;var E=Yi(),C=wo(E);C.tag=1,C.payload=u,y!=null&&(C.callback=y),u=fl(l,C,E),u!==null&&(va(u,l,E),tu(u,l,E))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var y=Yi(),E=wo(y);E.tag=2,u!=null&&(E.callback=u),u=fl(l,E,y),u!==null&&(va(u,l,y),tu(u,l,y))}};function kb(l,u,y,E,C,z,ue){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(E,z,ue):u.prototype&&u.prototype.isPureReactComponent?!qs(y,E)||!qs(C,z):!0}function Fb(l,u,y,E){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(y,E),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(y,E),u.state!==l&&ma.enqueueReplaceState(u,u.state,null)}function Mo(l,u){var y=u;if("ref"in u){y={};for(var E in u)E!=="ref"&&(y[E]=u[E])}if(l=l.defaultProps){y===u&&(y=p({},y));for(var C in l)y[C]===void 0&&(y[C]=l[C])}return y}var ru=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function fh(l){ru(l)}function dm(l){console.error(l)}function Hb(l){ru(l)}function hm(l,u){try{var y=l.onUncaughtError;y(u.value,{componentStack:u.stack})}catch(E){setTimeout(function(){throw E})}}function Ds(l,u,y){try{var E=l.onCaughtError;E(y.value,{componentStack:y.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function pm(l,u,y){return y=wo(y),y.tag=3,y.payload={element:null},y.callback=function(){hm(l,u)},y}function jb(l){return l=wo(l),l.tag=3,l}function mm(l,u,y,E){var C=y.type.getDerivedStateFromError;if(typeof C=="function"){var z=E.value;l.payload=function(){return C(z)},l.callback=function(){Ds(u,y,E)}}var ue=y.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(l.callback=function(){Ds(u,y,E),typeof C!="function"&&(os===null?os=new Set([this]):os.add(this));var we=E.stack;this.componentDidCatch(E.value,{componentStack:we!==null?we:""})})}function oT(l,u,y,E,C){if(y.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(u=y.alternate,u!==null&&As(u,y,C,!0),y=di.current,y!==null){switch(y.tag){case 13:return Js===null?h():y.alternate===null&&Ai===0&&(Ai=3),y.flags&=-257,y.flags|=65536,y.lanes=C,E===ih?y.flags|=16384:(u=y.updateQueue,u===null?y.updateQueue=new Set([E]):u.add(E),ht(l,E,C)),!1;case 22:return y.flags|=65536,E===ih?y.flags|=16384:(u=y.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([E])},y.updateQueue=u):(y=u.retryQueue,y===null?u.retryQueue=new Set([E]):y.add(E)),ht(l,E,C)),!1}throw Error(i(435,y.tag))}return ht(l,E,C),h(),!1}if($n)return u=di.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,E!==Zp&&(l=Error(i(422),{cause:E}),eu(Br(l,y)))):(E!==Zp&&(u=Error(i(423),{cause:E}),eu(Br(u,y))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,E=Br(E,y),C=pm(l.stateNode,E,C),ff(l,C),Ai!==4&&(Ai=2)),!1;var z=Error(i(520),{cause:E});if(z=Br(z,y),ii===null?ii=[z]:ii.push(z),Ai!==4&&(Ai=2),u===null)return!0;E=Br(E,y),y=u;do{switch(y.tag){case 3:return y.flags|=65536,l=C&-C,y.lanes|=l,l=pm(y.stateNode,E,l),ff(y,l),!1;case 1:if(u=y.type,z=y.stateNode,(y.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(os===null||!os.has(z))))return y.flags|=65536,C&=-C,y.lanes|=C,C=jb(C),mm(C,l,y,E),ff(y,C),!1}y=y.return}while(y!==null);return!1}var Vb=Error(i(461)),Mr=!1;function Qi(l,u,y,E){u.child=l===null?zb(u,null,y,E):iu(u,l.child,y,E)}function ka(l,u,y,E,C){y=y.render;var z=u.ref;if("ref"in E){var ue={};for(var we in E)we!=="ref"&&(ue[we]=E[we])}else ue=E;return Eo(u),E=hl(l,u,y,ue,z,C),we=Jv(),l!==null&&!Mr?(nm(l,u,C),Ar(l,u,C)):($n&&we&&jv(u),u.flags|=1,Qi(l,u,E,C),u.child)}function Fa(l,u,y,E,C){if(l===null){var z=y.type;return typeof z=="function"&&!Zd(z)&&z.defaultProps===void 0&&y.compare===null?(u.tag=15,u.type=z,my(l,u,z,E,C)):(l=Tr(y.type,null,E,u,u.mode,C),l.ref=u.ref,l.return=u,u.child=l)}if(z=l.child,!dh(l,C)){var ue=z.memoizedProps;if(y=y.compare,y=y!==null?y:qs,y(ue,E)&&l.ref===u.ref)return Ar(l,u,C)}return u.flags|=1,l=qi(z,E),l.ref=u.ref,l.return=u,u.child=l}function my(l,u,y,E,C){if(l!==null){var z=l.memoizedProps;if(qs(z,E)&&l.ref===u.ref)if(Mr=!1,u.pendingProps=E=z,dh(l,C))(l.flags&131072)!==0&&(Mr=!0);else return u.lanes=l.lanes,Ar(l,u,C)}return _f(l,u,y,E,C)}function au(l,u,y){var E=u.pendingProps,C=E.children,z=l!==null?l.memoizedState:null;if(E.mode==="hidden"){if((u.flags&128)!==0){if(E=z!==null?z.baseLanes|y:y,l!==null){for(C=u.child=l.child,z=0;C!==null;)z=z|C.lanes|C.childLanes,C=C.sibling;u.childLanes=z&~E}else u.childLanes=0,u.child=null;return su(l,u,E,y)}if((y&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&th(u,z!==null?z.cachePool:null),z!==null?ab(u,z):Qv(),Bb(u);else return u.lanes=u.childLanes=536870912,su(l,u,z!==null?z.baseLanes|y:y,y)}else z!==null?(th(u,z.cachePool),ab(u,z),rc(),u.memoizedState=null):(l!==null&&th(u,null),Qv(),rc());return Qi(l,u,C,y),u.child}function su(l,u,y,E){var C=Jl();return C=C===null?null:{parent:sr._currentValue,pool:C},u.memoizedState={baseLanes:y,cachePool:C},l!==null&&th(u,null),Qv(),Bb(u),l!==null&&As(l,u,E,!0),null}function ou(l,u){var y=u.ref;if(y===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(i(284));(l===null||l.ref!==y)&&(u.flags|=4194816)}}function _f(l,u,y,E,C){return Eo(u),y=hl(l,u,y,E,void 0,C),E=Jv(),l!==null&&!Mr?(nm(l,u,C),Ar(l,u,C)):($n&&E&&jv(u),u.flags|=1,Qi(l,u,y,C),u.child)}function es(l,u,y,E,C,z){return Eo(u),u.updateQueue=null,y=lb(u,E,y,C),ob(l),E=Jv(),l!==null&&!Mr?(nm(l,u,z),Ar(l,u,z)):($n&&E&&jv(u),u.flags|=1,Qi(l,u,y,z),u.child)}function ts(l,u,y,E,C){if(Eo(u),u.stateNode===null){var z=Zl,ue=y.contextType;typeof ue=="object"&&ue!==null&&(z=ji(ue)),z=new y(E,z),u.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=ma,u.stateNode=z,z._reactInternals=u,z=u.stateNode,z.props=E,z.state=u.memoizedState,z.refs={},Kv(u),ue=y.contextType,z.context=typeof ue=="object"&&ue!==null?ji(ue):Zl,z.state=u.memoizedState,ue=y.getDerivedStateFromProps,typeof ue=="function"&&(ac(u,y,ue,E),z.state=u.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(ue=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),ue!==z.state&&ma.enqueueReplaceState(z,z.state,null),df(u,E,z,C),rh(),z.state=u.memoizedState),typeof z.componentDidMount=="function"&&(u.flags|=4194308),E=!0}else if(l===null){z=u.stateNode;var we=u.memoizedProps,ke=Mo(y,we);z.props=ke;var st=z.context,gt=y.contextType;ue=Zl,typeof gt=="object"&&gt!==null&&(ue=ji(gt));var bt=y.getDerivedStateFromProps;gt=typeof bt=="function"||typeof z.getSnapshotBeforeUpdate=="function",we=u.pendingProps!==we,gt||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(we||st!==ue)&&Fb(u,z,E,ue),ul=!1;var ct=u.memoizedState;z.state=ct,df(u,E,z,C),rh(),st=u.memoizedState,we||ct!==st||ul?(typeof bt=="function"&&(ac(u,y,bt,E),st=u.memoizedState),(ke=ul||kb(u,y,ke,E,ct,st,ue))?(gt||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(u.flags|=4194308)):(typeof z.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=E,u.memoizedState=st),z.props=E,z.state=st,z.context=ue,E=ke):(typeof z.componentDidMount=="function"&&(u.flags|=4194308),E=!1)}else{z=u.stateNode,an(l,u),ue=u.memoizedProps,gt=Mo(y,ue),z.props=gt,bt=u.pendingProps,ct=z.context,st=y.contextType,ke=Zl,typeof st=="object"&&st!==null&&(ke=ji(st)),we=y.getDerivedStateFromProps,(st=typeof we=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ue!==bt||ct!==ke)&&Fb(u,z,E,ke),ul=!1,ct=u.memoizedState,z.state=ct,df(u,E,z,C),rh();var ft=u.memoizedState;ue!==bt||ct!==ft||ul||l!==null&&l.dependencies!==null&&$d(l.dependencies)?(typeof we=="function"&&(ac(u,y,we,E),ft=u.memoizedState),(gt=ul||kb(u,y,gt,E,ct,ft,ke)||l!==null&&l.dependencies!==null&&$d(l.dependencies))?(st||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(E,ft,ke),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(E,ft,ke)),typeof z.componentDidUpdate=="function"&&(u.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof z.componentDidUpdate!="function"||ue===l.memoizedProps&&ct===l.memoizedState||(u.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ue===l.memoizedProps&&ct===l.memoizedState||(u.flags|=1024),u.memoizedProps=E,u.memoizedState=ft),z.props=E,z.state=ft,z.context=ke,E=gt):(typeof z.componentDidUpdate!="function"||ue===l.memoizedProps&&ct===l.memoizedState||(u.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ue===l.memoizedProps&&ct===l.memoizedState||(u.flags|=1024),E=!1)}return z=E,ou(l,u),E=(u.flags&128)!==0,z||E?(z=u.stateNode,y=E&&typeof y.getDerivedStateFromError!="function"?null:z.render(),u.flags|=1,l!==null&&E?(u.child=iu(u,l.child,null,C),u.child=iu(u,null,y,C)):Qi(l,u,y,C),u.memoizedState=z.state,l=u.child):l=Ar(l,u,C),l}function sc(l,u,y,E){return sf(),u.flags|=256,Qi(l,u,y,E),u.child}var eo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function to(l){return{baseLanes:l,cachePool:$p()}}function yr(l,u,y){return l=l!==null?l.childLanes&~y:0,u&&(l|=Ps),l}function bf(l,u,y){var E=u.pendingProps,C=!1,z=(u.flags&128)!==0,ue;if((ue=z)||(ue=l!==null&&l.memoizedState===null?!1:($i.current&2)!==0),ue&&(C=!0,u.flags&=-129),ue=(u.flags&32)!==0,u.flags&=-33,l===null){if($n){if(C?ic(u):rc(),$n){var we=Pi,ke;if(ke=we){e:{for(ke=we,we=$a;ke.nodeType!==8;){if(!we){we=null;break e}if(ke=xl(ke.nextSibling),ke===null){we=null;break e}}we=ke}we!==null?(u.memoizedState={dehydrated:we,treeContext:ql!==null?{id:xo,overflow:So}:null,retryLane:536870912,hydrationErrors:null},ke=za(18,null,null,0),ke.stateNode=we,ke.return=u,u.child=ke,da=u,Pi=null,ke=!0):ke=!1}ke||Kl(u)}if(we=u.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return xT(we)?u.lanes=32:u.lanes=536870912,null;To(u)}return we=E.children,E=E.fallback,C?(rc(),C=u.mode,we=lu({mode:"hidden",children:we},C),E=Xl(E,C,y,null),we.return=u,E.return=u,we.sibling=E,u.child=we,C=u.child,C.memoizedState=to(y),C.childLanes=yr(l,ue,y),u.memoizedState=eo,E):(ic(u),Ao(u,we))}if(ke=l.memoizedState,ke!==null&&(we=ke.dehydrated,we!==null)){if(z)u.flags&256?(ic(u),u.flags&=-257,u=Hr(l,u,y)):u.memoizedState!==null?(rc(),u.child=l.child,u.flags|=128,u=null):(rc(),C=E.fallback,we=u.mode,E=lu({mode:"visible",children:E.children},we),C=Xl(C,we,y,null),C.flags|=2,E.return=u,C.return=u,E.sibling=C,u.child=E,iu(u,l.child,null,y),E=u.child,E.memoizedState=to(y),E.childLanes=yr(l,ue,y),u.memoizedState=eo,u=C);else if(ic(u),xT(we)){if(ue=we.nextSibling&&we.nextSibling.dataset,ue)var st=ue.dgst;ue=st,E=Error(i(419)),E.stack="",E.digest=ue,eu({value:E,source:null,stack:null}),u=Hr(l,u,y)}else if(Mr||As(l,u,y,!1),ue=(y&l.childLanes)!==0,Mr||ue){if(ue=hn,ue!==null&&(E=y&-y,E=(E&42)!==0?1:Ge(E),E=(E&(ue.suspendedLanes|y))!==0?0:E,E!==0&&E!==ke.retryLane))throw ke.retryLane=E,sl(l,E),va(ue,l,E),Vb;we.data==="$?"||h(),u=Hr(l,u,y)}else we.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=ke.treeContext,Pi=xl(we.nextSibling),da=u,$n=!0,Ms=null,$a=!1,l!==null&&(kr[Ka++]=xo,kr[Ka++]=So,kr[Ka++]=ql,xo=l.id,So=l.overflow,ql=u),u=Ao(u,E.children),u.flags|=4096);return u}return C?(rc(),C=E.fallback,we=u.mode,ke=l.child,st=ke.sibling,E=qi(ke,{mode:"hidden",children:E.children}),E.subtreeFlags=ke.subtreeFlags&65011712,st!==null?C=qi(st,C):(C=Xl(C,we,y,null),C.flags|=2),C.return=u,E.return=u,E.sibling=C,u.child=E,E=C,C=u.child,we=l.child.memoizedState,we===null?we=to(y):(ke=we.cachePool,ke!==null?(st=sr._currentValue,ke=ke.parent!==st?{parent:st,pool:st}:ke):ke=$p(),we={baseLanes:we.baseLanes|y,cachePool:ke}),C.memoizedState=we,C.childLanes=yr(l,ue,y),u.memoizedState=eo,E):(ic(u),y=l.child,l=y.sibling,y=qi(y,{mode:"visible",children:E.children}),y.return=u,y.sibling=null,l!==null&&(ue=u.deletions,ue===null?(u.deletions=[l],u.flags|=16):ue.push(l)),u.child=y,u.memoizedState=null,y)}function Ao(l,u){return u=lu({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function lu(l,u){return l=za(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Hr(l,u,y){return iu(u,l.child,null,y),l=Ao(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function jr(l,u,y){l.lanes|=u;var E=l.alternate;E!==null&&(E.lanes|=u),Wv(l.return,u,y)}function Hn(l,u,y,E,C){var z=l.memoizedState;z===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:C}:(z.isBackwards=u,z.rendering=null,z.renderingStartTime=0,z.last=E,z.tail=y,z.tailMode=C)}function Ns(l,u,y){var E=u.pendingProps,C=E.revealOrder,z=E.tail;if(Qi(l,u,E.children,y),E=$i.current,(E&2)!==0)E=E&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&jr(l,y,u);else if(l.tag===19)jr(l,y,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}E&=1}switch(J($i,E),C){case"forwards":for(y=u.child,C=null;y!==null;)l=y.alternate,l!==null&&ml(l)===null&&(C=y),y=y.sibling;y=C,y===null?(C=u.child,u.child=null):(C=y.sibling,y.sibling=null),Hn(u,!1,C,y,z);break;case"backwards":for(y=null,C=u.child,u.child=null;C!==null;){if(l=C.alternate,l!==null&&ml(l)===null){u.child=C;break}l=C.sibling,C.sibling=y,y=C,C=l}Hn(u,!0,y,null,z);break;case"together":Hn(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ar(l,u,y){if(l!==null&&(u.dependencies=l.dependencies),ao|=u.lanes,(y&u.childLanes)===0)if(l!==null){if(As(l,u,y,!1),(y&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(i(153));if(u.child!==null){for(l=u.child,y=qi(l,l.pendingProps),u.child=y,y.return=u;l.sibling!==null;)l=l.sibling,y=y.sibling=qi(l,l.pendingProps),y.return=u;y.sibling=null}return u.child}function dh(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&$d(l)))}function Ls(l,u,y){switch(u.tag){case 3:ge(u,u.stateNode.containerInfo),Ql(u,sr,l.memoizedState.cache),sf();break;case 27:case 5:Pe(u);break;case 4:ge(u,u.stateNode.containerInfo);break;case 10:Ql(u,u.type,u.memoizedProps.value);break;case 13:var E=u.memoizedState;if(E!==null)return E.dehydrated!==null?(ic(u),u.flags|=128,null):(y&u.child.childLanes)!==0?bf(l,u,y):(ic(u),l=Ar(l,u,y),l!==null?l.sibling:null);ic(u);break;case 19:var C=(l.flags&128)!==0;if(E=(y&u.childLanes)!==0,E||(As(l,u,y,!1),E=(y&u.childLanes)!==0),C){if(E)return Ns(l,u,y);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),J($i,$i.current),E)break;return null;case 22:case 23:return u.lanes=0,au(l,u,y);case 24:Ql(u,sr,l.memoizedState.cache)}return Ar(l,u,y)}function cu(l,u,y){if(l!==null)if(l.memoizedProps!==u.pendingProps)Mr=!0;else{if(!dh(l,y)&&(u.flags&128)===0)return Mr=!1,Ls(l,u,y);Mr=(l.flags&131072)!==0}else Mr=!1,$n&&(u.flags&1048576)!==0&&Wp(u,af,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var E=u.elementType,C=E._init;if(E=C(E._payload),u.type=E,typeof E=="function")Zd(E)?(l=Mo(E,l),u.tag=1,u=ts(null,u,E,l,y)):(u.tag=0,u=_f(null,u,E,l,y));else{if(E!=null){if(C=E.$$typeof,C===A){u.tag=11,u=ka(null,u,E,l,y);break e}else if(C===I){u.tag=14,u=Fa(null,u,E,l,y);break e}}throw u=he(E)||E,Error(i(306,u,""))}}return u;case 0:return _f(l,u,u.type,u.pendingProps,y);case 1:return E=u.type,C=Mo(E,u.pendingProps),ts(l,u,E,C,y);case 3:e:{if(ge(u,u.stateNode.containerInfo),l===null)throw Error(i(387));E=u.pendingProps;var z=u.memoizedState;C=z.element,an(l,u),df(u,E,null,y);var ue=u.memoizedState;if(E=ue.cache,Ql(u,sr,E),E!==z.cache&&Kd(u,[sr],y,!0),rh(),E=ue.element,z.isDehydrated)if(z={element:E,isDehydrated:!1,cache:ue.cache},u.updateQueue.baseState=z,u.memoizedState=z,u.flags&256){u=sc(l,u,E,y);break e}else if(E!==C){C=Br(Error(i(424)),u),eu(C),u=sc(l,u,E,y);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Pi=xl(l.firstChild),da=u,$n=!0,Ms=null,$a=!0,y=zb(u,null,E,y),u.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(sf(),E===C){u=Ar(l,u,y);break e}Qi(l,u,E,y)}u=u.child}return u;case 26:return ou(l,u),l===null?(y=hD(u.type,null,u.pendingProps,null))?u.memoizedState=y:$n||(y=u.type,l=u.pendingProps,E=qb(Ee.current).createElement(y),E[Ot]=u,E[xt]=l,ya(E,y,l),Vn(E),u.stateNode=E):u.memoizedState=hD(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Pe(u),l===null&&$n&&(E=u.stateNode=uD(u.type,u.pendingProps,Ee.current),da=u,$a=!0,C=Pi,Of(u.type)?(ST=C,Pi=xl(E.firstChild)):Pi=C),Qi(l,u,u.pendingProps.children,y),ou(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&$n&&((C=E=Pi)&&(E=lH(E,u.type,u.pendingProps,$a),E!==null?(u.stateNode=E,da=u,Pi=xl(E.firstChild),$a=!1,C=!0):C=!1),C||Kl(u)),Pe(u),C=u.type,z=u.pendingProps,ue=l!==null?l.memoizedProps:null,E=z.children,yT(C,z)?E=null:ue!==null&&yT(C,ue)&&(u.flags|=32),u.memoizedState!==null&&(C=hl(l,u,tT,null,null,y),My._currentValue=C),ou(l,u),Qi(l,u,E,y),u.child;case 6:return l===null&&$n&&((l=y=Pi)&&(y=cH(y,u.pendingProps,$a),y!==null?(u.stateNode=y,da=u,Pi=null,l=!0):l=!1),l||Kl(u)),null;case 13:return bf(l,u,y);case 4:return ge(u,u.stateNode.containerInfo),E=u.pendingProps,l===null?u.child=iu(u,null,E,y):Qi(l,u,E,y),u.child;case 11:return ka(l,u,u.type,u.pendingProps,y);case 7:return Qi(l,u,u.pendingProps,y),u.child;case 8:return Qi(l,u,u.pendingProps.children,y),u.child;case 12:return Qi(l,u,u.pendingProps.children,y),u.child;case 10:return E=u.pendingProps,Ql(u,u.type,E.value),Qi(l,u,E.children,y),u.child;case 9:return C=u.type._context,E=u.pendingProps.children,Eo(u),C=ji(C),E=E(C),u.flags|=1,Qi(l,u,E,y),u.child;case 14:return Fa(l,u,u.type,u.pendingProps,y);case 15:return my(l,u,u.type,u.pendingProps,y);case 19:return Ns(l,u,y);case 31:return E=u.pendingProps,y=u.mode,E={mode:E.mode,children:E.children},l===null?(y=lu(E,y),y.ref=u.ref,u.child=y,y.return=u,u=y):(y=qi(l.child,E),y.ref=u.ref,u.child=y,y.return=u,u=y),u;case 22:return au(l,u,y);case 24:return Eo(u),E=ji(sr),l===null?(C=Jl(),C===null&&(C=hn,z=qp(),C.pooledCache=z,z.refCount++,z!==null&&(C.pooledCacheLanes|=y),C=z),u.memoizedState={parent:E,cache:C},Kv(u),Ql(u,sr,C)):((l.lanes&y)!==0&&(an(l,u),df(u,null,null,y),rh()),C=l.memoizedState,z=u.memoizedState,C.parent!==E?(C={parent:E,cache:E},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),Ql(u,sr,E)):(E=z.cache,Ql(u,sr,E),E!==C.cache&&Kd(u,[sr],y,!0))),Qi(l,u,u.pendingProps.children,y),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function no(l){l.flags|=4}function hh(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!yD(u)){if(u=di.current,u!==null&&((Kt&4194048)===Kt?Js!==null:(Kt&62914560)!==Kt&&(Kt&536870912)===0||u!==Js))throw Rs=ih,Xv;l.flags|=8192}}function gl(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Ne():536870912,l.lanes|=u,Wn|=u)}function uu(l,u){if(!$n)switch(l.tailMode){case"hidden":u=l.tail;for(var y=null;u!==null;)u.alternate!==null&&(y=u),u=u.sibling;y===null?l.tail=null:y.sibling=null;break;case"collapsed":y=l.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:E.sibling=null}}function yi(l){var u=l.alternate!==null&&l.alternate.child===l.child,y=0,E=0;if(u)for(var C=l.child;C!==null;)y|=C.lanes|C.childLanes,E|=C.subtreeFlags&65011712,E|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)y|=C.lanes|C.childLanes,E|=C.subtreeFlags,E|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=E,l.childLanes=y,u}function gy(l,u,y){var E=u.pendingProps;switch(Vv(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(u),null;case 1:return yi(u),null;case 3:return y=u.stateNode,E=null,l!==null&&(E=l.memoizedState.cache),u.memoizedState.cache!==E&&(u.flags|=2048),cl(sr),Ae(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(Ks(u)?no(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ti())),yi(u),null;case 26:return y=u.memoizedState,l===null?(no(u),y!==null?(yi(u),hh(u,y)):(yi(u),u.flags&=-16777217)):y?y!==l.memoizedState?(no(u),yi(u),hh(u,y)):(yi(u),u.flags&=-16777217):(l.memoizedProps!==E&&no(u),yi(u),u.flags&=-16777217),null;case 27:We(u),y=Ee.current;var C=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==E&&no(u);else{if(!E){if(u.stateNode===null)throw Error(i(166));return yi(u),null}l=le.current,Ks(u)?tb(u):(l=uD(C,E,y),u.stateNode=l,no(u))}return yi(u),null;case 5:if(We(u),y=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==E&&no(u);else{if(!E){if(u.stateNode===null)throw Error(i(166));return yi(u),null}if(l=le.current,Ks(u))tb(u);else{switch(C=qb(Ee.current),l){case 1:l=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:l=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":l=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":l=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":l=C.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof E.is=="string"?C.createElement("select",{is:E.is}):C.createElement("select"),E.multiple?l.multiple=!0:E.size&&(l.size=E.size);break;default:l=typeof E.is=="string"?C.createElement(y,{is:E.is}):C.createElement(y)}}l[Ot]=u,l[xt]=E;e:for(C=u.child;C!==null;){if(C.tag===5||C.tag===6)l.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===u)break e;for(;C.sibling===null;){if(C.return===null||C.return===u)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}u.stateNode=l;e:switch(ya(l,y,E),y){case"button":case"input":case"select":case"textarea":l=!!E.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&no(u)}}return yi(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==E&&no(u);else{if(typeof E!="string"&&u.stateNode===null)throw Error(i(166));if(l=Ee.current,Ks(u)){if(l=u.stateNode,y=u.memoizedProps,E=null,C=da,C!==null)switch(C.tag){case 27:case 5:E=C.memoizedProps}l[Ot]=u,l=!!(l.nodeValue===y||E!==null&&E.suppressHydrationWarning===!0||iD(l.nodeValue,y)),l||Kl(u)}else l=qb(l).createTextNode(E),l[Ot]=u,u.stateNode=l}return yi(u),null;case 13:if(E=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Ks(u),E!==null&&E.dehydrated!==null){if(l===null){if(!C)throw Error(i(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[Ot]=u}else sf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yi(u),C=!1}else C=ti(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?(To(u),u):(To(u),null)}if(To(u),(u.flags&128)!==0)return u.lanes=y,u;if(y=E!==null,l=l!==null&&l.memoizedState!==null,y){E=u.child,C=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(C=E.alternate.memoizedState.cachePool.pool);var z=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(z=E.memoizedState.cachePool.pool),z!==C&&(E.flags|=2048)}return y!==l&&y&&(u.child.flags|=8192),gl(u,u.updateQueue),yi(u),null;case 4:return Ae(),l===null&&hT(u.stateNode.containerInfo),yi(u),null;case 10:return cl(u.type),yi(u),null;case 19:if(me($i),C=u.memoizedState,C===null)return yi(u),null;if(E=(u.flags&128)!==0,z=C.rendering,z===null)if(E)uu(C,!1);else{if(Ai!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(z=ml(l),z!==null){for(u.flags|=128,uu(C,!1),l=z.updateQueue,u.updateQueue=l,gl(u,l),u.subtreeFlags=0,l=y,y=u.child;y!==null;)Hv(y,l),y=y.sibling;return J($i,$i.current&1|2),u.child}l=l.sibling}C.tail!==null&&Ce()>ea&&(u.flags|=128,E=!0,uu(C,!1),u.lanes=4194304)}else{if(!E)if(l=ml(z),l!==null){if(u.flags|=128,E=!0,l=l.updateQueue,u.updateQueue=l,gl(u,l),uu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!z.alternate&&!$n)return yi(u),null}else 2*Ce()-C.renderingStartTime>ea&&y!==536870912&&(u.flags|=128,E=!0,uu(C,!1),u.lanes=4194304);C.isBackwards?(z.sibling=u.child,u.child=z):(l=C.last,l!==null?l.sibling=z:u.child=z,C.last=z)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=Ce(),u.sibling=null,l=$i.current,J($i,E?l&1|2:l&1),u):(yi(u),null);case 22:case 23:return To(u),ah(),E=u.memoizedState!==null,l!==null?l.memoizedState!==null!==E&&(u.flags|=8192):E&&(u.flags|=8192),E?(y&536870912)!==0&&(u.flags&128)===0&&(yi(u),u.subtreeFlags&6&&(u.flags|=8192)):yi(u),y=u.updateQueue,y!==null&&gl(u,y.retryQueue),y=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),E=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(E=u.memoizedState.cachePool.pool),E!==y&&(u.flags|=2048),l!==null&&me(Cs),null;case 24:return y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),cl(sr),yi(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function xf(l,u){switch(Vv(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return cl(sr),Ae(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return We(u),null;case 13:if(To(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(i(340));sf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return me($i),null;case 4:return Ae(),null;case 10:return cl(u.type),null;case 22:case 23:return To(u),ah(),l!==null&&me(Cs),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return cl(sr),null;case 25:return null;default:return null}}function Sf(l,u){switch(Vv(u),u.tag){case 3:cl(sr),Ae();break;case 26:case 27:case 5:We(u);break;case 4:Ae();break;case 13:To(u);break;case 19:me($i);break;case 10:cl(u.type);break;case 22:case 23:To(u),ah(),l!==null&&me(Cs);break;case 24:cl(sr)}}function fu(l,u){try{var y=u.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var C=E.next;y=C;do{if((y.tag&l)===l){E=void 0;var z=y.create,ue=y.inst;E=z(),ue.destroy=E}y=y.next}while(y!==C)}}catch(we){Ze(u,u.return,we)}}function ns(l,u,y){try{var E=u.updateQueue,C=E!==null?E.lastEffect:null;if(C!==null){var z=C.next;E=z;do{if((E.tag&l)===l){var ue=E.inst,we=ue.destroy;if(we!==void 0){ue.destroy=void 0,C=u;var ke=y,st=we;try{st()}catch(gt){Ze(C,ke,gt)}}}E=E.next}while(E!==z)}}catch(gt){Ze(u,u.return,gt)}}function du(l){var u=l.updateQueue;if(u!==null){var y=l.stateNode;try{rb(u,y)}catch(E){Ze(l,l.return,E)}}}function vl(l,u,y){y.props=Mo(l.type,l.memoizedProps),y.state=l.memoizedState;try{y.componentWillUnmount()}catch(E){Ze(l,u,E)}}function hu(l,u){try{var y=l.ref;if(y!==null){switch(l.tag){case 26:case 27:case 5:var E=l.stateNode;break;case 30:E=l.stateNode;break;default:E=l.stateNode}typeof y=="function"?l.refCleanup=y(E):y.current=E}}catch(C){Ze(l,u,C)}}function Co(l,u){var y=l.ref,E=l.refCleanup;if(y!==null)if(typeof E=="function")try{E()}catch(C){Ze(l,u,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(C){Ze(l,u,C)}else y.current=null}function Ef(l){var u=l.type,y=l.memoizedProps,E=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":y.autoFocus&&E.focus();break e;case"img":y.src?E.src=y.src:y.srcSet&&(E.srcset=y.srcSet)}}catch(C){Ze(l,l.return,C)}}function ph(l,u,y){try{var E=l.stateNode;iH(E,l.type,y,u),E[xt]=u}catch(C){Ze(l,l.return,C)}}function mh(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Of(l.type)||l.tag===4}function oc(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||mh(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Of(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function lc(l,u,y){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(l,u):(u=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,u.appendChild(l),y=y._reactRootContainer,y!=null||u.onclick!==null||(u.onclick=Xb));else if(E!==4&&(E===27&&Of(l.type)&&(y=l.stateNode,u=null),l=l.child,l!==null))for(lc(l,u,y),l=l.sibling;l!==null;)lc(l,u,y),l=l.sibling}function cc(l,u,y){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?y.insertBefore(l,u):y.appendChild(l);else if(E!==4&&(E===27&&Of(l.type)&&(y=l.stateNode),l=l.child,l!==null))for(cc(l,u,y),l=l.sibling;l!==null;)cc(l,u,y),l=l.sibling}function uc(l){var u=l.stateNode,y=l.memoizedProps;try{for(var E=l.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);ya(u,E,y),u[Ot]=l,u[xt]=y}catch(z){Ze(l,l.return,z)}}var Ro=!1,_i=!1,wf=!1,is=typeof WeakSet=="function"?WeakSet:Set,hi=null;function _r(l,u){if(l=l.containerInfo,gT=tx,l=Iv(l),Vd(l)){if("selectionStart"in l)var y={start:l.selectionStart,end:l.selectionEnd};else e:{y=(y=l.ownerDocument)&&y.defaultView||window;var E=y.getSelection&&y.getSelection();if(E&&E.rangeCount!==0){y=E.anchorNode;var C=E.anchorOffset,z=E.focusNode;E=E.focusOffset;try{y.nodeType,z.nodeType}catch{y=null;break e}var ue=0,we=-1,ke=-1,st=0,gt=0,bt=l,ct=null;t:for(;;){for(var ft;bt!==y||C!==0&&bt.nodeType!==3||(we=ue+C),bt!==z||E!==0&&bt.nodeType!==3||(ke=ue+E),bt.nodeType===3&&(ue+=bt.nodeValue.length),(ft=bt.firstChild)!==null;)ct=bt,bt=ft;for(;;){if(bt===l)break t;if(ct===y&&++st===C&&(we=ue),ct===z&&++gt===E&&(ke=ue),(ft=bt.nextSibling)!==null)break;bt=ct,ct=bt.parentNode}bt=ft}y=we===-1||ke===-1?null:{start:we,end:ke}}else y=null}y=y||{start:0,end:0}}else y=null;for(vT={focusedElem:l,selectionRange:y},tx=!1,hi=u;hi!==null;)if(u=hi,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,hi=l;else for(;hi!==null;){switch(u=hi,z=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&z!==null){l=void 0,y=u,C=z.memoizedProps,z=z.memoizedState,E=y.stateNode;try{var cn=Mo(y.type,C,y.elementType===y.type);l=E.getSnapshotBeforeUpdate(cn,z),E.__reactInternalSnapshotBeforeUpdate=l}catch(tn){Ze(y,y.return,tn)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,y=l.nodeType,y===9)bT(l);else if(y===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":bT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=u.sibling,l!==null){l.return=u.return,hi=l;break}hi=u.return}}function yl(l,u,y){var E=y.flags;switch(y.tag){case 0:case 11:case 15:ga(l,y),E&4&&fu(5,y);break;case 1:if(ga(l,y),E&4)if(l=y.stateNode,u===null)try{l.componentDidMount()}catch(ue){Ze(y,y.return,ue)}else{var C=Mo(y.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(C,u,l.__reactInternalSnapshotBeforeUpdate)}catch(ue){Ze(y,y.return,ue)}}E&64&&du(y),E&512&&hu(y,y.return);break;case 3:if(ga(l,y),E&64&&(l=y.updateQueue,l!==null)){if(u=null,y.child!==null)switch(y.child.tag){case 27:case 5:u=y.child.stateNode;break;case 1:u=y.child.stateNode}try{rb(l,u)}catch(ue){Ze(y,y.return,ue)}}break;case 27:u===null&&E&4&&uc(y);case 26:case 5:ga(l,y),u===null&&E&4&&Ef(y),E&512&&hu(y,y.return);break;case 12:ga(l,y);break;case 13:ga(l,y),E&4&&fc(l,y),E&64&&(l=y.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(y=Ci.bind(null,y),uH(l,y))));break;case 22:if(E=y.memoizedState!==null||Ro,!E){u=u!==null&&u.memoizedState!==null||_i,C=Ro;var z=_i;Ro=E,(_i=u)&&!z?Oo(l,y,(y.subtreeFlags&8772)!==0):ga(l,y),Ro=C,_i=z}break;case 30:break;default:ga(l,y)}}function Sn(l){var u=l.alternate;u!==null&&(l.alternate=null,Sn(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&dn(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Jt=null,Yn=!1;function Is(l,u,y){for(y=y.child;y!==null;)pu(l,u,y),y=y.sibling}function pu(l,u,y){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(Ie,y)}catch{}switch(y.tag){case 26:_i||Co(y,u),Is(l,u,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:_i||Co(y,u);var E=Jt,C=Yn;Of(y.type)&&(Jt=y.stateNode,Yn=!1),Is(l,u,y),Sy(y.stateNode),Jt=E,Yn=C;break;case 5:_i||Co(y,u);case 6:if(E=Jt,C=Yn,Jt=null,Is(l,u,y),Jt=E,Yn=C,Jt!==null)if(Yn)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(y.stateNode)}catch(z){Ze(y,u,z)}else try{Jt.removeChild(y.stateNode)}catch(z){Ze(y,u,z)}break;case 18:Jt!==null&&(Yn?(l=Jt,lD(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,y.stateNode),Oy(l)):lD(Jt,y.stateNode));break;case 4:E=Jt,C=Yn,Jt=y.stateNode.containerInfo,Yn=!0,Is(l,u,y),Jt=E,Yn=C;break;case 0:case 11:case 14:case 15:_i||ns(2,y,u),_i||ns(4,y,u),Is(l,u,y);break;case 1:_i||(Co(y,u),E=y.stateNode,typeof E.componentWillUnmount=="function"&&vl(y,u,E)),Is(l,u,y);break;case 21:Is(l,u,y);break;case 22:_i=(E=_i)||y.memoizedState!==null,Is(l,u,y),_i=E;break;default:Is(l,u,y)}}function fc(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Oy(l)}catch(y){Ze(u,u.return,y)}}function gm(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new is),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new is),u;default:throw Error(i(435,l.tag))}}function mu(l,u){var y=gm(l);u.forEach(function(E){var C=sn.bind(null,l,E);y.has(E)||(y.add(E),E.then(C,C))})}function Cr(l,u){var y=u.deletions;if(y!==null)for(var E=0;E<y.length;E++){var C=y[E],z=l,ue=u,we=ue;e:for(;we!==null;){switch(we.tag){case 27:if(Of(we.type)){Jt=we.stateNode,Yn=!1;break e}break;case 5:Jt=we.stateNode,Yn=!1;break e;case 3:case 4:Jt=we.stateNode.containerInfo,Yn=!0;break e}we=we.return}if(Jt===null)throw Error(i(160));pu(z,ue,C),Jt=null,Yn=!1,z=C.alternate,z!==null&&(z.return=null),C.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)vm(u,l),u=u.sibling}var io=null;function vm(l,u){var y=l.alternate,E=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Cr(u,l),Vi(l),E&4&&(ns(3,l,l.return),fu(3,l),ns(5,l,l.return));break;case 1:Cr(u,l),Vi(l),E&512&&(_i||y===null||Co(y,y.return)),E&64&&Ro&&(l=l.updateQueue,l!==null&&(E=l.callbacks,E!==null&&(y=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=y===null?E:y.concat(E))));break;case 26:var C=io;if(Cr(u,l),Vi(l),E&512&&(_i||y===null||Co(y,y.return)),E&4){var z=y!==null?y.memoizedState:null;if(E=l.memoizedState,y===null)if(E===null)if(l.stateNode===null){e:{E=l.type,y=l.memoizedProps,C=C.ownerDocument||C;t:switch(E){case"title":z=C.getElementsByTagName("title")[0],(!z||z[jn]||z[Ot]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=C.createElement(E),C.head.insertBefore(z,C.querySelector("head > title"))),ya(z,E,y),z[Ot]=l,Vn(z),E=z;break e;case"link":var ue=gD("link","href",C).get(E+(y.href||""));if(ue){for(var we=0;we<ue.length;we++)if(z=ue[we],z.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&z.getAttribute("rel")===(y.rel==null?null:y.rel)&&z.getAttribute("title")===(y.title==null?null:y.title)&&z.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ue.splice(we,1);break t}}z=C.createElement(E),ya(z,E,y),C.head.appendChild(z);break;case"meta":if(ue=gD("meta","content",C).get(E+(y.content||""))){for(we=0;we<ue.length;we++)if(z=ue[we],z.getAttribute("content")===(y.content==null?null:""+y.content)&&z.getAttribute("name")===(y.name==null?null:y.name)&&z.getAttribute("property")===(y.property==null?null:y.property)&&z.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&z.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ue.splice(we,1);break t}}z=C.createElement(E),ya(z,E,y),C.head.appendChild(z);break;default:throw Error(i(468,E))}z[Ot]=l,Vn(z),E=z}l.stateNode=E}else vD(C,l.type,l.stateNode);else l.stateNode=mD(C,E,l.memoizedProps);else z!==E?(z===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):z.count--,E===null?vD(C,l.type,l.stateNode):mD(C,E,l.memoizedProps)):E===null&&l.stateNode!==null&&ph(l,l.memoizedProps,y.memoizedProps)}break;case 27:Cr(u,l),Vi(l),E&512&&(_i||y===null||Co(y,y.return)),y!==null&&E&4&&ph(l,l.memoizedProps,y.memoizedProps);break;case 5:if(Cr(u,l),Vi(l),E&512&&(_i||y===null||Co(y,y.return)),l.flags&32){C=l.stateNode;try{gr(C,"")}catch(ft){Ze(l,l.return,ft)}}E&4&&l.stateNode!=null&&(C=l.memoizedProps,ph(l,C,y!==null?y.memoizedProps:C)),E&1024&&(wf=!0);break;case 6:if(Cr(u,l),Vi(l),E&4){if(l.stateNode===null)throw Error(i(162));E=l.memoizedProps,y=l.stateNode;try{y.nodeValue=E}catch(ft){Ze(l,l.return,ft)}}break;case 3:if(Qb=null,C=io,io=Kb(u.containerInfo),Cr(u,l),io=C,Vi(l),E&4&&y!==null&&y.memoizedState.isDehydrated)try{Oy(u.containerInfo)}catch(ft){Ze(l,l.return,ft)}wf&&(wf=!1,dc(l));break;case 4:E=io,io=Kb(l.stateNode.containerInfo),Cr(u,l),Vi(l),io=E;break;case 12:Cr(u,l),Vi(l);break;case 13:Cr(u,l),Vi(l),l.child.flags&8192&&l.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(ui=Ce()),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,mu(l,E)));break;case 22:C=l.memoizedState!==null;var ke=y!==null&&y.memoizedState!==null,st=Ro,gt=_i;if(Ro=st||C,_i=gt||ke,Cr(u,l),_i=gt,Ro=st,Vi(l),E&8192)e:for(u=l.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(y===null||ke||Ro||_i||rs(l)),y=null,u=l;;){if(u.tag===5||u.tag===26){if(y===null){ke=y=u;try{if(z=ke.stateNode,C)ue=z.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{we=ke.stateNode;var bt=ke.memoizedProps.style,ct=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;we.style.display=ct==null||typeof ct=="boolean"?"":(""+ct).trim()}}catch(ft){Ze(ke,ke.return,ft)}}}else if(u.tag===6){if(y===null){ke=u;try{ke.stateNode.nodeValue=C?"":ke.memoizedProps}catch(ft){Ze(ke,ke.return,ft)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;y===u&&(y=null),u=u.return}y===u&&(y=null),u.sibling.return=u.return,u=u.sibling}E&4&&(E=l.updateQueue,E!==null&&(y=E.retryQueue,y!==null&&(E.retryQueue=null,mu(l,y))));break;case 19:Cr(u,l),Vi(l),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,mu(l,E)));break;case 30:break;case 21:break;default:Cr(u,l),Vi(l)}}function Vi(l){var u=l.flags;if(u&2){try{for(var y,E=l.return;E!==null;){if(mh(E)){y=E;break}E=E.return}if(y==null)throw Error(i(160));switch(y.tag){case 27:var C=y.stateNode,z=oc(l);cc(l,z,C);break;case 5:var ue=y.stateNode;y.flags&32&&(gr(ue,""),y.flags&=-33);var we=oc(l);cc(l,we,ue);break;case 3:case 4:var ke=y.stateNode.containerInfo,st=oc(l);lc(l,st,ke);break;default:throw Error(i(161))}}catch(gt){Ze(l,l.return,gt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function dc(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;dc(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function ga(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)yl(l,u.alternate,u),u=u.sibling}function rs(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:ns(4,u,u.return),rs(u);break;case 1:Co(u,u.return);var y=u.stateNode;typeof y.componentWillUnmount=="function"&&vl(u,u.return,y),rs(u);break;case 27:Sy(u.stateNode);case 26:case 5:Co(u,u.return),rs(u);break;case 22:u.memoizedState===null&&rs(u);break;case 30:rs(u);break;default:rs(u)}l=l.sibling}}function Oo(l,u,y){for(y=y&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var E=u.alternate,C=l,z=u,ue=z.flags;switch(z.tag){case 0:case 11:case 15:Oo(C,z,y),fu(4,z);break;case 1:if(Oo(C,z,y),E=z,C=E.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(st){Ze(E,E.return,st)}if(E=z,C=E.updateQueue,C!==null){var we=E.stateNode;try{var ke=C.shared.hiddenCallbacks;if(ke!==null)for(C.shared.hiddenCallbacks=null,C=0;C<ke.length;C++)hf(ke[C],we)}catch(st){Ze(E,E.return,st)}}y&&ue&64&&du(z),hu(z,z.return);break;case 27:uc(z);case 26:case 5:Oo(C,z,y),y&&E===null&&ue&4&&Ef(z),hu(z,z.return);break;case 12:Oo(C,z,y);break;case 13:Oo(C,z,y),y&&ue&4&&fc(C,z);break;case 22:z.memoizedState===null&&Oo(C,z,y),hu(z,z.return);break;case 30:break;default:Oo(C,z,y)}u=u.sibling}}function ym(l,u){var y=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==y&&(l!=null&&l.refCount++,y!=null&&of(y))}function _m(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&of(l))}function pi(l,u,y,E){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)bm(l,u,y,E),u=u.sibling}function bm(l,u,y,E){var C=u.flags;switch(u.tag){case 0:case 11:case 15:pi(l,u,y,E),C&2048&&fu(9,u);break;case 1:pi(l,u,y,E);break;case 3:pi(l,u,y,E),C&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&of(l)));break;case 12:if(C&2048){pi(l,u,y,E),l=u.stateNode;try{var z=u.memoizedProps,ue=z.id,we=z.onPostCommit;typeof we=="function"&&we(ue,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ke){Ze(u,u.return,ke)}}else pi(l,u,y,E);break;case 13:pi(l,u,y,E);break;case 23:break;case 22:z=u.stateNode,ue=u.alternate,u.memoizedState!==null?z._visibility&2?pi(l,u,y,E):ro(l,u):z._visibility&2?pi(l,u,y,E):(z._visibility|=2,_l(l,u,y,E,(u.subtreeFlags&10256)!==0)),C&2048&&ym(ue,u);break;case 24:pi(l,u,y,E),C&2048&&_m(u.alternate,u);break;default:pi(l,u,y,E)}}function _l(l,u,y,E,C){for(C=C&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var z=l,ue=u,we=y,ke=E,st=ue.flags;switch(ue.tag){case 0:case 11:case 15:_l(z,ue,we,ke,C),fu(8,ue);break;case 23:break;case 22:var gt=ue.stateNode;ue.memoizedState!==null?gt._visibility&2?_l(z,ue,we,ke,C):ro(z,ue):(gt._visibility|=2,_l(z,ue,we,ke,C)),C&&st&2048&&ym(ue.alternate,ue);break;case 24:_l(z,ue,we,ke,C),C&&st&2048&&_m(ue.alternate,ue);break;default:_l(z,ue,we,ke,C)}u=u.sibling}}function ro(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var y=l,E=u,C=E.flags;switch(E.tag){case 22:ro(y,E),C&2048&&ym(E.alternate,E);break;case 24:ro(y,E),C&2048&&_m(E.alternate,E);break;default:ro(y,E)}u=u.sibling}}var as=8192;function Tf(l){if(l.subtreeFlags&as)for(l=l.child;l!==null;)Gb(l),l=l.sibling}function Gb(l){switch(l.tag){case 26:Tf(l),l.flags&as&&l.memoizedState!==null&&EH(io,l.memoizedState,l.memoizedProps);break;case 5:Tf(l);break;case 3:case 4:var u=io;io=Kb(l.stateNode.containerInfo),Tf(l),io=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=as,as=16777216,Tf(l),as=u):Tf(l));break;default:Tf(l)}}function Yb(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function bi(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var y=0;y<u.length;y++){var E=u[y];hi=E,No(E,l)}Yb(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)vy(l),l=l.sibling}function vy(l){switch(l.tag){case 0:case 11:case 15:bi(l),l.flags&2048&&ns(9,l,l.return);break;case 3:bi(l);break;case 12:bi(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Do(l)):bi(l);break;default:bi(l)}}function Do(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var y=0;y<u.length;y++){var E=u[y];hi=E,No(E,l)}Yb(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:ns(8,u,u.return),Do(u);break;case 22:y=u.stateNode,y._visibility&2&&(y._visibility&=-3,Do(u));break;default:Do(u)}l=l.sibling}}function No(l,u){for(;hi!==null;){var y=hi;switch(y.tag){case 0:case 11:case 15:ns(8,y,u);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var E=y.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:of(y.memoizedState.cache)}if(E=y.child,E!==null)E.return=y,hi=E;else e:for(y=l;hi!==null;){E=hi;var C=E.sibling,z=E.return;if(Sn(E),E===y){hi=null;break e}if(C!==null){C.return=z,hi=C;break e}hi=z}}}var Gi={getCacheForType:function(l){var u=ji(sr),y=u.data.get(l);return y===void 0&&(y=l(),u.data.set(l,y)),y}},yy=typeof WeakMap=="function"?WeakMap:Map,ni=0,hn=null,Rn=null,Kt=0,bn=0,zi=null,ss=!1,Mf=!1,Af=!1,Us=0,Ai=0,ao=0,Lo=0,gu=0,Ps=0,Wn=0,ii=null,en=null,zn=!1,ui=0,ea=1/0,zs=null,os=null,br=0,ta=null,mi=null,ls=0,bl=0,gh=null,cs=null,Io=0,vu=null;function Yi(){if((ni&2)!==0&&Kt!==0)return Kt&-Kt;if(P.T!==null){var l=vn;return l!==0?l:cT()}return be()}function xm(){Ps===0&&(Ps=(Kt&536870912)===0||$n?Le():536870912);var l=di.current;return l!==null&&(l.flags|=32),Ps}function va(l,u,y){(l===hn&&(bn===2||bn===9)||l.cancelPendingCommit!==null)&&(pc(l,0),so(l,Kt,Ps,!1)),fe(l,y),((ni&2)===0||l!==hn)&&(l===hn&&((ni&2)===0&&(Lo|=y),Ai===4&&so(l,Kt,Ps,!1)),vc(l))}function Cf(l,u,y){if((ni&6)!==0)throw Error(i(327));var E=!y&&(u&124)===0&&(u&l.expiredLanes)===0||Ve(l,u),C=E?R(l,u):g(l,u,!0),z=E;do{if(C===0){Mf&&!E&&so(l,u,0,!1);break}else{if(y=l.current.alternate,z&&!hc(y)){C=g(l,u,!1),z=!1;continue}if(C===2){if(z=u,l.errorRecoveryDisabledLanes&z)var ue=0;else ue=l.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){u=ue;e:{var we=l;C=ii;var ke=we.current.memoizedState.isDehydrated;if(ke&&(pc(we,ue).flags|=256),ue=g(we,ue,!1),ue!==2){if(Af&&!ke){we.errorRecoveryDisabledLanes|=z,Lo|=z,C=4;break e}z=en,en=C,z!==null&&(en===null?en=z:en.push.apply(en,z))}C=ue}if(z=!1,C!==2)continue}}if(C===1){pc(l,0),so(l,u,0,!0);break}e:{switch(E=l,z=C,z){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:so(E,u,Ps,!ss);break e;case 2:en=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(C=ui+300-Ce(),10<C)){if(so(E,u,Ps,!ss),_e(E,0,!0)!==0)break e;E.timeoutHandle=sD(vh.bind(null,E,y,en,zs,zn,u,Ps,Lo,Wn,ss,z,2,-0,0),C);break e}vh(E,y,en,zs,zn,u,Ps,Lo,Wn,ss,z,0,-0,0)}}break}while(!0);vc(l)}function vh(l,u,y,E,C,z,ue,we,ke,st,gt,bt,ct,ft){if(l.timeoutHandle=-1,bt=u.subtreeFlags,(bt&8192||(bt&16785408)===16785408)&&(Ty={stylesheets:null,count:0,unsuspend:SH},Gb(u),bt=wH(),bt!==null)){l.cancelPendingCommit=bt(Ct.bind(null,l,u,z,y,E,C,ue,we,ke,gt,1,ct,ft)),so(l,z,ue,!st);return}Ct(l,u,z,y,E,C,ue,we,ke)}function hc(l){for(var u=l;;){var y=u.tag;if((y===0||y===11||y===15)&&u.flags&16384&&(y=u.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var E=0;E<y.length;E++){var C=y[E],z=C.getSnapshot;C=C.value;try{if(!Ia(z(),C))return!1}catch{return!1}}if(y=u.child,u.subtreeFlags&16384&&y!==null)y.return=u,u=y;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function so(l,u,y,E){u&=~gu,u&=~Lo,l.suspendedLanes|=u,l.pingedLanes&=~u,E&&(l.warmLanes|=u),E=l.expirationTimes;for(var C=u;0<C;){var z=31-Z(C),ue=1<<z;E[z]=-1,C&=~ue}y!==0&&Ye(l,y,u)}function Uo(){return(ni&6)===0?(_y(0),!1):!0}function yu(){if(Rn!==null){if(bn===0)var l=Rn.return;else l=Rn,ll=$l=null,ey(l),nu=null,ch=0,l=Rn;for(;l!==null;)Sf(l.alternate,l),l=l.return;Rn=null}}function pc(l,u){var y=l.timeoutHandle;y!==-1&&(l.timeoutHandle=-1,aH(y)),y=l.cancelPendingCommit,y!==null&&(l.cancelPendingCommit=null,y()),yu(),hn=l,Rn=y=qi(l.current,null),Kt=u,bn=0,zi=null,ss=!1,Mf=Ve(l,u),Af=!1,Wn=Ps=gu=Lo=ao=Ai=0,en=ii=null,zn=!1,(u&8)!==0&&(u|=u&32);var E=l.entangledLanes;if(E!==0)for(l=l.entanglements,E&=u;0<E;){var C=31-Z(E),z=1<<C;u|=l[C],E&=~z}return Us=u,Wd(),y}function Sm(l,u){yn=null,P.H=lh,u===nh||u===$s?(u=qv(),bn=3):u===Xv?(u=qv(),bn=4):bn=u===Vb?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,zi=u,Rn===null&&(Ai=1,hm(l,Br(u,l.current)))}function Rf(){var l=P.H;return P.H=lh,l===null?lh:l}function Em(){var l=P.A;return P.A=Gi,l}function h(){Ai=4,ss||(Kt&4194048)!==Kt&&di.current!==null||(Mf=!0),(ao&134217727)===0&&(Lo&134217727)===0||hn===null||so(hn,Kt,Ps,!1)}function g(l,u,y){var E=ni;ni|=2;var C=Rf(),z=Em();(hn!==l||Kt!==u)&&(zs=null,pc(l,u)),u=!1;var ue=Ai;e:do try{if(bn!==0&&Rn!==null){var we=Rn,ke=zi;switch(bn){case 8:yu(),ue=6;break e;case 3:case 2:case 9:case 6:di.current===null&&(u=!0);var st=bn;if(bn=0,zi=null,Fe(l,we,ke,st),y&&Mf){ue=0;break e}break;default:st=bn,bn=0,zi=null,Fe(l,we,ke,st)}}w(),ue=Ai;break}catch(gt){Sm(l,gt)}while(!0);return u&&l.shellSuspendCounter++,ll=$l=null,ni=E,P.H=C,P.A=z,Rn===null&&(hn=null,Kt=0,Wd()),ue}function w(){for(;Rn!==null;)Q(Rn)}function R(l,u){var y=ni;ni|=2;var E=Rf(),C=Em();hn!==l||Kt!==u?(zs=null,ea=Ce()+500,pc(l,u)):Mf=Ve(l,u);e:do try{if(bn!==0&&Rn!==null){u=Rn;var z=zi;t:switch(bn){case 1:bn=0,zi=null,Fe(l,u,z,1);break;case 2:case 9:if(Qp(z)){bn=0,zi=null,Me(u);break}u=function(){bn!==2&&bn!==9||hn!==l||(bn=7),vc(l)},z.then(u,u);break e;case 3:bn=7;break e;case 4:bn=5;break e;case 7:Qp(z)?(bn=0,zi=null,Me(u)):(bn=0,zi=null,Fe(l,u,z,7));break;case 5:var ue=null;switch(Rn.tag){case 26:ue=Rn.memoizedState;case 5:case 27:var we=Rn;if(!ue||yD(ue)){bn=0,zi=null;var ke=we.sibling;if(ke!==null)Rn=ke;else{var st=we.return;st!==null?(Rn=st,tt(st)):Rn=null}break t}}bn=0,zi=null,Fe(l,u,z,5);break;case 6:bn=0,zi=null,Fe(l,u,z,6);break;case 8:yu(),Ai=6;break e;default:throw Error(i(462))}}k();break}catch(gt){Sm(l,gt)}while(!0);return ll=$l=null,P.H=E,P.A=C,ni=y,Rn!==null?0:(hn=null,Kt=0,Wd(),Ai)}function k(){for(;Rn!==null&&!De();)Q(Rn)}function Q(l){var u=cu(l.alternate,l,Us);l.memoizedProps=l.pendingProps,u===null?tt(l):Rn=u}function Me(l){var u=l,y=u.alternate;switch(u.tag){case 15:case 0:u=es(y,u,u.pendingProps,u.type,void 0,Kt);break;case 11:u=es(y,u,u.pendingProps,u.type.render,u.ref,Kt);break;case 5:ey(u);default:Sf(y,u),u=Rn=Hv(u,Us),u=cu(y,u,Us)}l.memoizedProps=l.pendingProps,u===null?tt(l):Rn=u}function Fe(l,u,y,E){ll=$l=null,ey(u),nu=null,ch=0;var C=u.return;try{if(oT(l,C,u,y,Kt)){Ai=1,hm(l,Br(y,l.current)),Rn=null;return}}catch(z){if(C!==null)throw Rn=C,z;Ai=1,hm(l,Br(y,l.current)),Rn=null;return}u.flags&32768?($n||E===1?l=!0:Mf||(Kt&536870912)!==0?l=!1:(ss=l=!0,(E===2||E===9||E===3||E===6)&&(E=di.current,E!==null&&E.tag===13&&(E.flags|=16384))),mt(u,l)):tt(u)}function tt(l){var u=l;do{if((u.flags&32768)!==0){mt(u,ss);return}l=u.return;var y=gy(u.alternate,u,Us);if(y!==null){Rn=y;return}if(u=u.sibling,u!==null){Rn=u;return}Rn=u=l}while(u!==null);Ai===0&&(Ai=5)}function mt(l,u){do{var y=xf(l.alternate,l);if(y!==null){y.flags&=32767,Rn=y;return}if(y=l.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!u&&(l=l.sibling,l!==null)){Rn=l;return}Rn=l=y}while(l!==null);Ai=6,Rn=null}function Ct(l,u,y,E,C,z,ue,we,ke){l.cancelPendingCommit=null;do mc();while(br!==0);if((ni&6)!==0)throw Error(i(327));if(u!==null){if(u===l.current)throw Error(i(177));if(z=u.lanes|u.childLanes,z|=Vp,Xe(l,y,z,ue,we,ke),l===hn&&(Rn=hn=null,Kt=0),mi=u,ta=l,ls=y,bl=z,gh=C,cs=E,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Qn(W,function(){return gc(),null})):(l.callbackNode=null,l.callbackPriority=0),E=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||E){E=P.T,P.T=null,C=B.p,B.p=2,ue=ni,ni|=4;try{_r(l,u,y)}finally{ni=ue,B.p=C,P.T=E}}br=1,It(),Pt(),pn()}}function It(){if(br===1){br=0;var l=ta,u=mi,y=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||y){y=P.T,P.T=null;var E=B.p;B.p=2;var C=ni;ni|=4;try{vm(u,l);var z=vT,ue=Iv(l.containerInfo),we=z.focusedElem,ke=z.selectionRange;if(ue!==we&&we&&we.ownerDocument&&Lv(we.ownerDocument.documentElement,we)){if(ke!==null&&Vd(we)){var st=ke.start,gt=ke.end;if(gt===void 0&&(gt=st),"selectionStart"in we)we.selectionStart=st,we.selectionEnd=Math.min(gt,we.value.length);else{var bt=we.ownerDocument||document,ct=bt&&bt.defaultView||window;if(ct.getSelection){var ft=ct.getSelection(),cn=we.textContent.length,tn=Math.min(ke.start,cn),Si=ke.end===void 0?tn:Math.min(ke.end,cn);!ft.extend&&tn>Si&&(ue=Si,Si=tn,tn=ue);var Je=Nv(we,tn),qe=Nv(we,Si);if(Je&&qe&&(ft.rangeCount!==1||ft.anchorNode!==Je.node||ft.anchorOffset!==Je.offset||ft.focusNode!==qe.node||ft.focusOffset!==qe.offset)){var rt=bt.createRange();rt.setStart(Je.node,Je.offset),ft.removeAllRanges(),tn>Si?(ft.addRange(rt),ft.extend(qe.node,qe.offset)):(rt.setEnd(qe.node,qe.offset),ft.addRange(rt))}}}}for(bt=[],ft=we;ft=ft.parentNode;)ft.nodeType===1&&bt.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<bt.length;we++){var yt=bt[we];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}tx=!!gT,vT=gT=null}finally{ni=C,B.p=E,P.T=y}}l.current=u,br=2}}function Pt(){if(br===2){br=0;var l=ta,u=mi,y=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||y){y=P.T,P.T=null;var E=B.p;B.p=2;var C=ni;ni|=4;try{yl(l,u.alternate,u)}finally{ni=C,B.p=E,P.T=y}}br=3}}function pn(){if(br===4||br===3){br=0,He();var l=ta,u=mi,y=ls,E=cs;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?br=5:(br=0,mi=ta=null,us(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(os=null),$e(y),u=u.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(Ie,u,void 0,(u.current.flags&128)===128)}catch{}if(E!==null){u=P.T,C=B.p,B.p=2,P.T=null;try{for(var z=l.onRecoverableError,ue=0;ue<E.length;ue++){var we=E[ue];z(we.value,{componentStack:we.stack})}}finally{P.T=u,B.p=C}}(ls&3)!==0&&mc(),vc(l),C=l.pendingLanes,(y&4194090)!==0&&(C&42)!==0?l===vu?Io++:(Io=0,vu=l):Io=0,_y(0)}}function us(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,of(u)))}function mc(l){return It(),Pt(),pn(),gc()}function gc(){if(br!==5)return!1;var l=ta,u=bl;bl=0;var y=$e(ls),E=P.T,C=B.p;try{B.p=32>y?32:y,P.T=null,y=gh,gh=null;var z=ta,ue=ls;if(br=0,mi=ta=null,ls=0,(ni&6)!==0)throw Error(i(331));var we=ni;if(ni|=4,vy(z.current),bm(z,z.current,ue,y),ni=we,_y(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(Ie,z)}catch{}return!0}finally{B.p=C,P.T=E,us(l,u)}}function ot(l,u,y){u=Br(y,u),u=pm(l.stateNode,u,2),l=fl(l,u,2),l!==null&&(fe(l,2),vc(l))}function Ze(l,u,y){if(l.tag===3)ot(l,l,y);else for(;u!==null;){if(u.tag===3){ot(u,l,y);break}else if(u.tag===1){var E=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(os===null||!os.has(E))){l=Br(y,l),y=jb(2),E=fl(u,y,2),E!==null&&(mm(y,E,u,l),fe(E,2),vc(E));break}}u=u.return}}function ht(l,u,y){var E=l.pingCache;if(E===null){E=l.pingCache=new yy;var C=new Set;E.set(u,C)}else C=E.get(u),C===void 0&&(C=new Set,E.set(u,C));C.has(y)||(Af=!0,C.add(y),l=At.bind(null,l,u,y),u.then(l,l))}function At(l,u,y){var E=l.pingCache;E!==null&&E.delete(u),l.pingedLanes|=l.suspendedLanes&y,l.warmLanes&=~y,hn===l&&(Kt&y)===y&&(Ai===4||Ai===3&&(Kt&62914560)===Kt&&300>Ce()-ui?(ni&2)===0&&pc(l,0):gu|=y,Wn===Kt&&(Wn=0)),vc(l)}function Yt(l,u){u===0&&(u=Ne()),l=sl(l,u),l!==null&&(fe(l,u),vc(l))}function Ci(l){var u=l.memoizedState,y=0;u!==null&&(y=u.retryLane),Yt(l,y)}function sn(l,u){var y=0;switch(l.tag){case 13:var E=l.stateNode,C=l.memoizedState;C!==null&&(y=C.retryLane);break;case 19:E=l.stateNode;break;case 22:E=l.stateNode._retryCache;break;default:throw Error(i(314))}E!==null&&E.delete(u),Yt(l,y)}function Qn(l,u){return te(l,u)}var Ji=null,Un=null,Po=!1,wm=!1,lT=!1,yh=0;function vc(l){l!==Un&&l.next===null&&(Un===null?Ji=Un=l:Un=Un.next=l),wm=!0,Po||(Po=!0,K6())}function _y(l,u){if(!lT&&wm){lT=!0;do for(var y=!1,E=Ji;E!==null;){if(l!==0){var C=E.pendingLanes;if(C===0)var z=0;else{var ue=E.suspendedLanes,we=E.pingedLanes;z=(1<<31-Z(42|l)+1)-1,z&=C&~(ue&~we),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(y=!0,KO(E,z))}else z=Kt,z=_e(E,E===hn?z:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(z&3)===0||Ve(E,z)||(y=!0,KO(E,z));E=E.next}while(y);lT=!1}}function q6(){ZO()}function ZO(){wm=Po=!1;var l=0;yh!==0&&(rH()&&(l=yh),yh=0);for(var u=Ce(),y=null,E=Ji;E!==null;){var C=E.next,z=XO(E,u);z===0?(E.next=null,y===null?Ji=C:y.next=C,C===null&&(Un=y)):(y=E,(l!==0||(z&3)!==0)&&(wm=!0)),E=C}_y(l)}function XO(l,u){for(var y=l.suspendedLanes,E=l.pingedLanes,C=l.expirationTimes,z=l.pendingLanes&-62914561;0<z;){var ue=31-Z(z),we=1<<ue,ke=C[ue];ke===-1?((we&y)===0||(we&E)!==0)&&(C[ue]=nt(we,u)):ke<=u&&(l.expiredLanes|=we),z&=~we}if(u=hn,y=Kt,y=_e(l,l===u?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),E=l.callbackNode,y===0||l===u&&(bn===2||bn===9)||l.cancelPendingCommit!==null)return E!==null&&E!==null&&xe(E),l.callbackNode=null,l.callbackPriority=0;if((y&3)===0||Ve(l,y)){if(u=y&-y,u===l.callbackPriority)return u;switch(E!==null&&xe(E),$e(y)){case 2:case 8:y=ie;break;case 32:y=W;break;case 268435456:y=j;break;default:y=W}return E=qO.bind(null,l),y=te(y,E),l.callbackPriority=u,l.callbackNode=y,u}return E!==null&&E!==null&&xe(E),l.callbackPriority=2,l.callbackNode=null,2}function qO(l,u){if(br!==0&&br!==5)return l.callbackNode=null,l.callbackPriority=0,null;var y=l.callbackNode;if(mc()&&l.callbackNode!==y)return null;var E=Kt;return E=_e(l,l===hn?E:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),E===0?null:(Cf(l,E,u),XO(l,Ce()),l.callbackNode!=null&&l.callbackNode===y?qO.bind(null,l):null)}function KO(l,u){if(mc())return null;Cf(l,u,!0)}function K6(){sH(function(){(ni&6)!==0?te(pe,q6):ZO()})}function cT(){return yh===0&&(yh=Le()),yh}function $O(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Od(""+l)}function QO(l,u){var y=u.ownerDocument.createElement("input");return y.name=u.name,y.value=u.value,l.id&&y.setAttribute("form",l.id),u.parentNode.insertBefore(y,u),l=new FormData(l),y.parentNode.removeChild(y),l}function $6(l,u,y,E,C){if(u==="submit"&&y&&y.stateNode===C){var z=$O((C[xt]||null).action),ue=E.submitter;ue&&(u=(u=ue[xt]||null)?$O(u.formAction):ue.getAttribute("formAction"),u!==null&&(z=u,ue=null));var we=new Zu("action","action",null,E,C);l.push({event:we,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(yh!==0){var ke=ue?QO(C,ue):new FormData(C);dy(y,{pending:!0,data:ke,method:C.method,action:z},null,ke)}}else typeof z=="function"&&(we.preventDefault(),ke=ue?QO(C,ue):new FormData(C),dy(y,{pending:!0,data:ke,method:C.method,action:z},z,ke))},currentTarget:C}]})}}for(var uT=0;uT<Yd.length;uT++){var fT=Yd[uT],Q6=fT.toLowerCase(),J6=fT[0].toUpperCase()+fT.slice(1);wr(Q6,"on"+J6)}wr(fa,"onAnimationEnd"),wr(zv,"onAnimationIteration"),wr(Pa,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(eb,"onTransitionRun"),wr(rl,"onTransitionStart"),wr(tf,"onTransitionCancel"),wr(al,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Te("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Te("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Te("onBeforeInput",["compositionend","keypress","textInput","paste"]),Te("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Te("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Te("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var by="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(by));function JO(l,u){u=(u&4)!==0;for(var y=0;y<l.length;y++){var E=l[y],C=E.event;E=E.listeners;e:{var z=void 0;if(u)for(var ue=E.length-1;0<=ue;ue--){var we=E[ue],ke=we.instance,st=we.currentTarget;if(we=we.listener,ke!==z&&C.isPropagationStopped())break e;z=we,C.currentTarget=st;try{z(C)}catch(gt){ru(gt)}C.currentTarget=null,z=ke}else for(ue=0;ue<E.length;ue++){if(we=E[ue],ke=we.instance,st=we.currentTarget,we=we.listener,ke!==z&&C.isPropagationStopped())break e;z=we,C.currentTarget=st;try{z(C)}catch(gt){ru(gt)}C.currentTarget=null,z=ke}}}}function kn(l,u){var y=u[$t];y===void 0&&(y=u[$t]=new Set);var E=l+"__bubble";y.has(E)||(eD(u,l,2,!1),y.add(E))}function dT(l,u,y){var E=0;u&&(E|=4),eD(y,l,E,u)}var Wb="_reactListening"+Math.random().toString(36).slice(2);function hT(l){if(!l[Wb]){l[Wb]=!0,Di.forEach(function(y){y!=="selectionchange"&&(eH.has(y)||dT(y,!1,l),dT(y,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Wb]||(u[Wb]=!0,dT("selectionchange",!1,u))}}function eD(l,u,y,E){switch(wD(u)){case 2:var C=AH;break;case 8:C=CH;break;default:C=AT}y=C.bind(null,u,y,l),C=void 0,!Nd||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),E?C!==void 0?l.addEventListener(u,y,{capture:!0,passive:C}):l.addEventListener(u,y,!0):C!==void 0?l.addEventListener(u,y,{passive:C}):l.addEventListener(u,y,!1)}function pT(l,u,y,E,C){var z=E;if((u&1)===0&&(u&2)===0&&E!==null)e:for(;;){if(E===null)return;var ue=E.tag;if(ue===3||ue===4){var we=E.stateNode.containerInfo;if(we===C)break;if(ue===4)for(ue=E.return;ue!==null;){var ke=ue.tag;if((ke===3||ke===4)&&ue.stateNode.containerInfo===C)return;ue=ue.return}for(;we!==null;){if(ue=vi(we),ue===null)return;if(ke=ue.tag,ke===5||ke===6||ke===26||ke===27){E=z=ue;continue e}we=we.parentNode}}E=E.return}bv(function(){var st=z,gt=Op(y),bt=[];e:{var ct=jp.get(l);if(ct!==void 0){var ft=Zu,cn=l;switch(l){case"keypress":if(kl(y)===0)break e;case"keydown":case"keyup":ft=Tv;break;case"focusin":cn="focus",ft=Np;break;case"focusout":cn="blur",ft=Np;break;case"beforeblur":case"afterblur":ft=Np;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Ev;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Kw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Av;break;case fa:case zv:case Pa:ft=k_;break;case al:ft=el;break;case"scroll":case"scrollend":ft=P_;break;case"wheel":ft=$w;break;case"copy":case"cut":case"paste":ft=H_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Ip;break;case"toggle":case"beforetoggle":ft=Hl}var tn=(u&4)!==0,Si=!tn&&(l==="scroll"||l==="scrollend"),Je=tn?ct!==null?ct+"Capture":null:ct;tn=[];for(var qe=st,rt;qe!==null;){var yt=qe;if(rt=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||rt===null||Je===null||(yt=Gu(qe,Je),yt!=null&&tn.push(xy(qe,yt,rt))),Si)break;qe=qe.return}0<tn.length&&(ct=new ft(ct,cn,null,y,gt),bt.push({event:ct,listeners:tn}))}}if((u&7)===0){e:{if(ct=l==="mouseover"||l==="pointerover",ft=l==="mouseout"||l==="pointerout",ct&&y!==Rp&&(cn=y.relatedTarget||y.fromElement)&&(vi(cn)||cn[Mt]))break e;if((ft||ct)&&(ct=gt.window===gt?gt:(ct=gt.ownerDocument)?ct.defaultView||ct.parentWindow:window,ft?(cn=y.relatedTarget||y.toElement,ft=st,cn=cn?vi(cn):null,cn!==null&&(Si=a(cn),tn=cn.tag,cn!==Si||tn!==5&&tn!==27&&tn!==6)&&(cn=null)):(ft=null,cn=st),ft!==cn)){if(tn=Ev,yt="onMouseLeave",Je="onMouseEnter",qe="mouse",(l==="pointerout"||l==="pointerover")&&(tn=Ip,yt="onPointerLeave",Je="onPointerEnter",qe="pointer"),Si=ft==null?ct:qa(ft),rt=cn==null?ct:qa(cn),ct=new tn(yt,qe+"leave",ft,y,gt),ct.target=Si,ct.relatedTarget=rt,yt=null,vi(gt)===st&&(tn=new tn(Je,qe+"enter",cn,y,gt),tn.target=rt,tn.relatedTarget=Si,yt=tn),Si=yt,ft&&cn)t:{for(tn=ft,Je=cn,qe=0,rt=tn;rt;rt=Tm(rt))qe++;for(rt=0,yt=Je;yt;yt=Tm(yt))rt++;for(;0<qe-rt;)tn=Tm(tn),qe--;for(;0<rt-qe;)Je=Tm(Je),rt--;for(;qe--;){if(tn===Je||Je!==null&&tn===Je.alternate)break t;tn=Tm(tn),Je=Tm(Je)}tn=null}else tn=null;ft!==null&&tD(bt,ct,ft,tn,!1),cn!==null&&Si!==null&&tD(bt,Si,cn,tn,!0)}}e:{if(ct=st?qa(st):window,ft=ct.nodeName&&ct.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ct.type==="file")var Ht=Pp;else if(Dv(ct))if(zp)Ht=Gl;else{Ht=$_;var Bn=Qw}else ft=ct.nodeName,!ft||ft.toLowerCase()!=="input"||ct.type!=="checkbox"&&ct.type!=="radio"?st&&Cp(st.elementType)&&(Ht=Pp):Ht=jd;if(Ht&&(Ht=Ht(l,st))){La(bt,Ht,y,gt);break e}Bn&&Bn(l,ct,st),l==="focusout"&&st&&ct.type==="number"&&st.memoizedProps.value!=null&&Lr(ct,"number",ct.value)}switch(Bn=st?qa(st):window,l){case"focusin":(Dv(Bn)||Bn.contentEditable==="true")&&(nl=Bn,kp=st,Gd=null);break;case"focusout":Gd=kp=nl=null;break;case"mousedown":Fp=!0;break;case"contextmenu":case"mouseup":case"dragend":Fp=!1,Pv(bt,y,gt);break;case"selectionchange":if(Uv)break;case"keydown":case"keyup":Pv(bt,y,gt)}var Xt;if(Pd)e:{switch(l){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else Vl?kd(l,y)&&(nn="onCompositionEnd"):l==="keydown"&&y.keyCode===229&&(nn="onCompositionStart");nn&&(Bd&&y.locale!=="ko"&&(Vl||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&Vl&&(Xt=Sv()):(Qo=gt,xv="value"in Qo?Qo.value:Qo.textContent,Vl=!0)),Bn=Zb(st,nn),0<Bn.length&&(nn=new Lp(nn,l,null,y,gt),bt.push({event:nn,listeners:Bn}),Xt?nn.data=Xt:(Xt=Rv(y),Xt!==null&&(nn.data=Xt)))),(Xt=zd?Fd(l,y):Ov(l,y))&&(nn=Zb(st,"onBeforeInput"),0<nn.length&&(Bn=new Lp("onBeforeInput","beforeinput",null,y,gt),bt.push({event:Bn,listeners:nn}),Bn.data=Xt)),$6(bt,l,st,y,gt)}JO(bt,u)})}function xy(l,u,y){return{instance:l,listener:u,currentTarget:y}}function Zb(l,u){for(var y=u+"Capture",E=[];l!==null;){var C=l,z=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||z===null||(C=Gu(l,y),C!=null&&E.unshift(xy(l,C,z)),C=Gu(l,u),C!=null&&E.push(xy(l,C,z))),l.tag===3)return E;l=l.return}return[]}function Tm(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function tD(l,u,y,E,C){for(var z=u._reactName,ue=[];y!==null&&y!==E;){var we=y,ke=we.alternate,st=we.stateNode;if(we=we.tag,ke!==null&&ke===E)break;we!==5&&we!==26&&we!==27||st===null||(ke=st,C?(st=Gu(y,z),st!=null&&ue.unshift(xy(y,st,ke))):C||(st=Gu(y,z),st!=null&&ue.push(xy(y,st,ke)))),y=y.return}ue.length!==0&&l.push({event:u,listeners:ue})}var tH=/\r\n?/g,nH=/\u0000|\uFFFD/g;function nD(l){return(typeof l=="string"?l:""+l).replace(tH,`
`).replace(nH,"")}function iD(l,u){return u=nD(u),nD(l)===u}function Xb(){}function xi(l,u,y,E,C,z){switch(y){case"children":typeof E=="string"?u==="body"||u==="textarea"&&E===""||gr(l,E):(typeof E=="number"||typeof E=="bigint")&&u!=="body"&&gr(l,""+E);break;case"className":Bt(l,"class",E);break;case"tabIndex":Bt(l,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Bt(l,y,E);break;case"style":Rd(l,E,z);break;case"data":if(u!=="object"){Bt(l,"data",E);break}case"src":case"href":if(E===""&&(u!=="a"||y!=="href")){l.removeAttribute(y);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){l.removeAttribute(y);break}E=Od(""+E),l.setAttribute(y,E);break;case"action":case"formAction":if(typeof E=="function"){l.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(y==="formAction"?(u!=="input"&&xi(l,u,"name",C.name,C,null),xi(l,u,"formEncType",C.formEncType,C,null),xi(l,u,"formMethod",C.formMethod,C,null),xi(l,u,"formTarget",C.formTarget,C,null)):(xi(l,u,"encType",C.encType,C,null),xi(l,u,"method",C.method,C,null),xi(l,u,"target",C.target,C,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){l.removeAttribute(y);break}E=Od(""+E),l.setAttribute(y,E);break;case"onClick":E!=null&&(l.onclick=Xb);break;case"onScroll":E!=null&&kn("scroll",l);break;case"onScrollEnd":E!=null&&kn("scrollend",l);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(i(61));if(y=E.__html,y!=null){if(C.children!=null)throw Error(i(60));l.innerHTML=y}}break;case"multiple":l.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":l.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){l.removeAttribute("xlink:href");break}y=Od(""+E),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(y,""+E):l.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(y,""):l.removeAttribute(y);break;case"capture":case"download":E===!0?l.setAttribute(y,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(y,E):l.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?l.setAttribute(y,E):l.removeAttribute(y);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?l.removeAttribute(y):l.setAttribute(y,E);break;case"popover":kn("beforetoggle",l),kn("toggle",l),Rt(l,"popover",E);break;case"xlinkActuate":Nt(l,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":Nt(l,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":Nt(l,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":Nt(l,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":Nt(l,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":Nt(l,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":Nt(l,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":Nt(l,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":Nt(l,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Rt(l,"is",E);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=yv.get(y)||y,Rt(l,y,E))}}function mT(l,u,y,E,C,z){switch(y){case"style":Rd(l,E,z);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(i(61));if(y=E.__html,y!=null){if(C.children!=null)throw Error(i(60));l.innerHTML=y}}break;case"children":typeof E=="string"?gr(l,E):(typeof E=="number"||typeof E=="bigint")&&gr(l,""+E);break;case"onScroll":E!=null&&kn("scroll",l);break;case"onScrollEnd":E!=null&&kn("scrollend",l);break;case"onClick":E!=null&&(l.onclick=Xb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kr.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(C=y.endsWith("Capture"),u=y.slice(2,C?y.length-7:void 0),z=l[xt]||null,z=z!=null?z[y]:null,typeof z=="function"&&l.removeEventListener(u,z,C),typeof E=="function")){typeof z!="function"&&z!==null&&(y in l?l[y]=null:l.hasAttribute(y)&&l.removeAttribute(y)),l.addEventListener(u,E,C);break e}y in l?l[y]=E:E===!0?l.setAttribute(y,""):Rt(l,y,E)}}}function ya(l,u,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kn("error",l),kn("load",l);var E=!1,C=!1,z;for(z in y)if(y.hasOwnProperty(z)){var ue=y[z];if(ue!=null)switch(z){case"src":E=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:xi(l,u,z,ue,y,null)}}C&&xi(l,u,"srcSet",y.srcSet,y,null),E&&xi(l,u,"src",y.src,y,null);return;case"input":kn("invalid",l);var we=z=ue=C=null,ke=null,st=null;for(E in y)if(y.hasOwnProperty(E)){var gt=y[E];if(gt!=null)switch(E){case"name":C=gt;break;case"type":ue=gt;break;case"checked":ke=gt;break;case"defaultChecked":st=gt;break;case"value":z=gt;break;case"defaultValue":we=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(i(137,u));break;default:xi(l,u,E,gt,y,null)}}$r(l,z,we,ke,st,ue,C,!1),Cn(l);return;case"select":kn("invalid",l),E=ue=z=null;for(C in y)if(y.hasOwnProperty(C)&&(we=y[C],we!=null))switch(C){case"value":z=we;break;case"defaultValue":ue=we;break;case"multiple":E=we;default:xi(l,u,C,we,y,null)}u=z,y=ue,l.multiple=!!E,u!=null?Ui(l,!!E,u,!1):y!=null&&Ui(l,!!E,y,!0);return;case"textarea":kn("invalid",l),z=C=E=null;for(ue in y)if(y.hasOwnProperty(ue)&&(we=y[ue],we!=null))switch(ue){case"value":E=we;break;case"defaultValue":C=we;break;case"children":z=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(91));break;default:xi(l,u,ue,we,y,null)}Kc(l,E,C,z),Cn(l);return;case"option":for(ke in y)if(y.hasOwnProperty(ke)&&(E=y[ke],E!=null))switch(ke){case"selected":l.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:xi(l,u,ke,E,y,null)}return;case"dialog":kn("beforetoggle",l),kn("toggle",l),kn("cancel",l),kn("close",l);break;case"iframe":case"object":kn("load",l);break;case"video":case"audio":for(E=0;E<by.length;E++)kn(by[E],l);break;case"image":kn("error",l),kn("load",l);break;case"details":kn("toggle",l);break;case"embed":case"source":case"link":kn("error",l),kn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in y)if(y.hasOwnProperty(st)&&(E=y[st],E!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:xi(l,u,st,E,y,null)}return;default:if(Cp(u)){for(gt in y)y.hasOwnProperty(gt)&&(E=y[gt],E!==void 0&&mT(l,u,gt,E,y,void 0));return}}for(we in y)y.hasOwnProperty(we)&&(E=y[we],E!=null&&xi(l,u,we,E,y,null))}function iH(l,u,y,E){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,z=null,ue=null,we=null,ke=null,st=null,gt=null;for(ft in y){var bt=y[ft];if(y.hasOwnProperty(ft)&&bt!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":ke=bt;default:E.hasOwnProperty(ft)||xi(l,u,ft,null,E,bt)}}for(var ct in E){var ft=E[ct];if(bt=y[ct],E.hasOwnProperty(ct)&&(ft!=null||bt!=null))switch(ct){case"type":z=ft;break;case"name":C=ft;break;case"checked":st=ft;break;case"defaultChecked":gt=ft;break;case"value":ue=ft;break;case"defaultValue":we=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(i(137,u));break;default:ft!==bt&&xi(l,u,ct,ft,E,bt)}}ci(l,ue,we,ke,st,gt,z,C);return;case"select":ft=ue=we=ct=null;for(z in y)if(ke=y[z],y.hasOwnProperty(z)&&ke!=null)switch(z){case"value":break;case"multiple":ft=ke;default:E.hasOwnProperty(z)||xi(l,u,z,null,E,ke)}for(C in E)if(z=E[C],ke=y[C],E.hasOwnProperty(C)&&(z!=null||ke!=null))switch(C){case"value":ct=z;break;case"defaultValue":we=z;break;case"multiple":ue=z;default:z!==ke&&xi(l,u,C,z,E,ke)}u=we,y=ue,E=ft,ct!=null?Ui(l,!!y,ct,!1):!!E!=!!y&&(u!=null?Ui(l,!!y,u,!0):Ui(l,!!y,y?[]:"",!1));return;case"textarea":ft=ct=null;for(we in y)if(C=y[we],y.hasOwnProperty(we)&&C!=null&&!E.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:xi(l,u,we,null,E,C)}for(ue in E)if(C=E[ue],z=y[ue],E.hasOwnProperty(ue)&&(C!=null||z!=null))switch(ue){case"value":ct=C;break;case"defaultValue":ft=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:C!==z&&xi(l,u,ue,C,E,z)}Ir(l,ct,ft);return;case"option":for(var cn in y)if(ct=y[cn],y.hasOwnProperty(cn)&&ct!=null&&!E.hasOwnProperty(cn))switch(cn){case"selected":l.selected=!1;break;default:xi(l,u,cn,null,E,ct)}for(ke in E)if(ct=E[ke],ft=y[ke],E.hasOwnProperty(ke)&&ct!==ft&&(ct!=null||ft!=null))switch(ke){case"selected":l.selected=ct&&typeof ct!="function"&&typeof ct!="symbol";break;default:xi(l,u,ke,ct,E,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tn in y)ct=y[tn],y.hasOwnProperty(tn)&&ct!=null&&!E.hasOwnProperty(tn)&&xi(l,u,tn,null,E,ct);for(st in E)if(ct=E[st],ft=y[st],E.hasOwnProperty(st)&&ct!==ft&&(ct!=null||ft!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,u));break;default:xi(l,u,st,ct,E,ft)}return;default:if(Cp(u)){for(var Si in y)ct=y[Si],y.hasOwnProperty(Si)&&ct!==void 0&&!E.hasOwnProperty(Si)&&mT(l,u,Si,void 0,E,ct);for(gt in E)ct=E[gt],ft=y[gt],!E.hasOwnProperty(gt)||ct===ft||ct===void 0&&ft===void 0||mT(l,u,gt,ct,E,ft);return}}for(var Je in y)ct=y[Je],y.hasOwnProperty(Je)&&ct!=null&&!E.hasOwnProperty(Je)&&xi(l,u,Je,null,E,ct);for(bt in E)ct=E[bt],ft=y[bt],!E.hasOwnProperty(bt)||ct===ft||ct==null&&ft==null||xi(l,u,bt,ct,E,ft)}var gT=null,vT=null;function qb(l){return l.nodeType===9?l:l.ownerDocument}function rD(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aD(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function yT(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var _T=null;function rH(){var l=window.event;return l&&l.type==="popstate"?l===_T?!1:(_T=l,!0):(_T=null,!1)}var sD=typeof setTimeout=="function"?setTimeout:void 0,aH=typeof clearTimeout=="function"?clearTimeout:void 0,oD=typeof Promise=="function"?Promise:void 0,sH=typeof queueMicrotask=="function"?queueMicrotask:typeof oD<"u"?function(l){return oD.resolve(null).then(l).catch(oH)}:sD;function oH(l){setTimeout(function(){throw l})}function Of(l){return l==="head"}function lD(l,u){var y=u,E=0,C=0;do{var z=y.nextSibling;if(l.removeChild(y),z&&z.nodeType===8)if(y=z.data,y==="/$"){if(0<E&&8>E){y=E;var ue=l.ownerDocument;if(y&1&&Sy(ue.documentElement),y&2&&Sy(ue.body),y&4)for(y=ue.head,Sy(y),ue=y.firstChild;ue;){var we=ue.nextSibling,ke=ue.nodeName;ue[jn]||ke==="SCRIPT"||ke==="STYLE"||ke==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||y.removeChild(ue),ue=we}}if(C===0){l.removeChild(z),Oy(u);return}C--}else y==="$"||y==="$?"||y==="$!"?C++:E=y.charCodeAt(0)-48;else E=0;y=z}while(y);Oy(u)}function bT(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var y=u;switch(u=u.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":bT(y),dn(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}l.removeChild(y)}}function lH(l,u,y,E){for(;l.nodeType===1;){var C=y;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!E&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(E){if(!l[jn])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(z=l.getAttribute("rel"),z==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(z!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(z=l.getAttribute("src"),(z!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&z&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var z=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===z)return l}else return l;if(l=xl(l.nextSibling),l===null)break}return null}function cH(l,u,y){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!y||(l=xl(l.nextSibling),l===null))return null;return l}function xT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function uH(l,u){var y=l.ownerDocument;if(l.data!=="$?"||y.readyState==="complete")u();else{var E=function(){u(),y.removeEventListener("DOMContentLoaded",E)};y.addEventListener("DOMContentLoaded",E),l._reactRetry=E}}function xl(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var ST=null;function cD(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var y=l.data;if(y==="$"||y==="$!"||y==="$?"){if(u===0)return l;u--}else y==="/$"&&u++}l=l.previousSibling}return null}function uD(l,u,y){switch(u=qb(y),l){case"html":if(l=u.documentElement,!l)throw Error(i(452));return l;case"head":if(l=u.head,!l)throw Error(i(453));return l;case"body":if(l=u.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function Sy(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);dn(l)}var zo=new Map,fD=new Set;function Kb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var _u=B.d;B.d={f:fH,r:dH,D:hH,C:pH,L:mH,m:gH,X:yH,S:vH,M:_H};function fH(){var l=_u.f(),u=Uo();return l||u}function dH(l){var u=ca(l);u!==null&&u.tag===5&&u.type==="form"?Rb(u):_u.r(l)}var Mm=typeof document>"u"?null:document;function dD(l,u,y){var E=Mm;if(E&&typeof u=="string"&&u){var C=mr(u);C='link[rel="'+l+'"][href="'+C+'"]',typeof y=="string"&&(C+='[crossorigin="'+y+'"]'),fD.has(C)||(fD.add(C),l={rel:l,crossOrigin:y,href:u},E.querySelector(C)===null&&(u=E.createElement("link"),ya(u,"link",l),Vn(u),E.head.appendChild(u)))}}function hH(l){_u.D(l),dD("dns-prefetch",l,null)}function pH(l,u){_u.C(l,u),dD("preconnect",l,u)}function mH(l,u,y){_u.L(l,u,y);var E=Mm;if(E&&l&&u){var C='link[rel="preload"][as="'+mr(u)+'"]';u==="image"&&y&&y.imageSrcSet?(C+='[imagesrcset="'+mr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(C+='[imagesizes="'+mr(y.imageSizes)+'"]')):C+='[href="'+mr(l)+'"]';var z=C;switch(u){case"style":z=Am(l);break;case"script":z=Cm(l)}zo.has(z)||(l=p({rel:"preload",href:u==="image"&&y&&y.imageSrcSet?void 0:l,as:u},y),zo.set(z,l),E.querySelector(C)!==null||u==="style"&&E.querySelector(Ey(z))||u==="script"&&E.querySelector(wy(z))||(u=E.createElement("link"),ya(u,"link",l),Vn(u),E.head.appendChild(u)))}}function gH(l,u){_u.m(l,u);var y=Mm;if(y&&l){var E=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+mr(E)+'"][href="'+mr(l)+'"]',z=C;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=Cm(l)}if(!zo.has(z)&&(l=p({rel:"modulepreload",href:l},u),zo.set(z,l),y.querySelector(C)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(wy(z)))return}E=y.createElement("link"),ya(E,"link",l),Vn(E),y.head.appendChild(E)}}}function vH(l,u,y){_u.S(l,u,y);var E=Mm;if(E&&l){var C=ei(E).hoistableStyles,z=Am(l);u=u||"default";var ue=C.get(z);if(!ue){var we={loading:0,preload:null};if(ue=E.querySelector(Ey(z)))we.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":u},y),(y=zo.get(z))&&ET(l,y);var ke=ue=E.createElement("link");Vn(ke),ya(ke,"link",l),ke._p=new Promise(function(st,gt){ke.onload=st,ke.onerror=gt}),ke.addEventListener("load",function(){we.loading|=1}),ke.addEventListener("error",function(){we.loading|=2}),we.loading|=4,$b(ue,u,E)}ue={type:"stylesheet",instance:ue,count:1,state:we},C.set(z,ue)}}}function yH(l,u){_u.X(l,u);var y=Mm;if(y&&l){var E=ei(y).hoistableScripts,C=Cm(l),z=E.get(C);z||(z=y.querySelector(wy(C)),z||(l=p({src:l,async:!0},u),(u=zo.get(C))&&wT(l,u),z=y.createElement("script"),Vn(z),ya(z,"link",l),y.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},E.set(C,z))}}function _H(l,u){_u.M(l,u);var y=Mm;if(y&&l){var E=ei(y).hoistableScripts,C=Cm(l),z=E.get(C);z||(z=y.querySelector(wy(C)),z||(l=p({src:l,async:!0,type:"module"},u),(u=zo.get(C))&&wT(l,u),z=y.createElement("script"),Vn(z),ya(z,"link",l),y.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},E.set(C,z))}}function hD(l,u,y,E){var C=(C=Ee.current)?Kb(C):null;if(!C)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(u=Am(y.href),y=ei(C).hoistableStyles,E=y.get(u),E||(E={type:"style",instance:null,count:0,state:null},y.set(u,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){l=Am(y.href);var z=ei(C).hoistableStyles,ue=z.get(l);if(ue||(C=C.ownerDocument||C,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(l,ue),(z=C.querySelector(Ey(l)))&&!z._p&&(ue.instance=z,ue.state.loading=5),zo.has(l)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},zo.set(l,y),z||bH(C,l,y,ue.state))),u&&E===null)throw Error(i(528,""));return ue}if(u&&E!==null)throw Error(i(529,""));return null;case"script":return u=y.async,y=y.src,typeof y=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Cm(y),y=ei(C).hoistableScripts,E=y.get(u),E||(E={type:"script",instance:null,count:0,state:null},y.set(u,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function Am(l){return'href="'+mr(l)+'"'}function Ey(l){return'link[rel="stylesheet"]['+l+"]"}function pD(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function bH(l,u,y,E){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?E.loading=1:(u=l.createElement("link"),E.preload=u,u.addEventListener("load",function(){return E.loading|=1}),u.addEventListener("error",function(){return E.loading|=2}),ya(u,"link",y),Vn(u),l.head.appendChild(u))}function Cm(l){return'[src="'+mr(l)+'"]'}function wy(l){return"script[async]"+l}function mD(l,u,y){if(u.count++,u.instance===null)switch(u.type){case"style":var E=l.querySelector('style[data-href~="'+mr(y.href)+'"]');if(E)return u.instance=E,Vn(E),E;var C=p({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return E=(l.ownerDocument||l).createElement("style"),Vn(E),ya(E,"style",C),$b(E,y.precedence,l),u.instance=E;case"stylesheet":C=Am(y.href);var z=l.querySelector(Ey(C));if(z)return u.state.loading|=4,u.instance=z,Vn(z),z;E=pD(y),(C=zo.get(C))&&ET(E,C),z=(l.ownerDocument||l).createElement("link"),Vn(z);var ue=z;return ue._p=new Promise(function(we,ke){ue.onload=we,ue.onerror=ke}),ya(z,"link",E),u.state.loading|=4,$b(z,y.precedence,l),u.instance=z;case"script":return z=Cm(y.src),(C=l.querySelector(wy(z)))?(u.instance=C,Vn(C),C):(E=y,(C=zo.get(z))&&(E=p({},y),wT(E,C)),l=l.ownerDocument||l,C=l.createElement("script"),Vn(C),ya(C,"link",E),l.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(E=u.instance,u.state.loading|=4,$b(E,y.precedence,l));return u.instance}function $b(l,u,y){for(var E=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=E.length?E[E.length-1]:null,z=C,ue=0;ue<E.length;ue++){var we=E[ue];if(we.dataset.precedence===u)z=we;else if(z!==C)break}z?z.parentNode.insertBefore(l,z.nextSibling):(u=y.nodeType===9?y.head:y,u.insertBefore(l,u.firstChild))}function ET(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function wT(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Qb=null;function gD(l,u,y){if(Qb===null){var E=new Map,C=Qb=new Map;C.set(y,E)}else C=Qb,E=C.get(y),E||(E=new Map,C.set(y,E));if(E.has(l))return E;for(E.set(l,null),y=y.getElementsByTagName(l),C=0;C<y.length;C++){var z=y[C];if(!(z[jn]||z[Ot]||l==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=z.getAttribute(u)||"";ue=l+ue;var we=E.get(ue);we?we.push(z):E.set(ue,[z])}}return E}function vD(l,u,y){l=l.ownerDocument||l,l.head.insertBefore(y,u==="title"?l.querySelector("head > title"):null)}function xH(l,u,y){if(y===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function yD(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Ty=null;function SH(){}function EH(l,u,y){if(Ty===null)throw Error(i(475));var E=Ty;if(u.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var C=Am(y.href),z=l.querySelector(Ey(C));if(z){l=z._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(E.count++,E=Jb.bind(E),l.then(E,E)),u.state.loading|=4,u.instance=z,Vn(z);return}z=l.ownerDocument||l,y=pD(y),(C=zo.get(C))&&ET(y,C),z=z.createElement("link"),Vn(z);var ue=z;ue._p=new Promise(function(we,ke){ue.onload=we,ue.onerror=ke}),ya(z,"link",y),u.instance=z}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(E.count++,u=Jb.bind(E),l.addEventListener("load",u),l.addEventListener("error",u))}}function wH(){if(Ty===null)throw Error(i(475));var l=Ty;return l.stylesheets&&l.count===0&&TT(l,l.stylesheets),0<l.count?function(u){var y=setTimeout(function(){if(l.stylesheets&&TT(l,l.stylesheets),l.unsuspend){var E=l.unsuspend;l.unsuspend=null,E()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(y)}}:null}function Jb(){if(this.count--,this.count===0){if(this.stylesheets)TT(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ex=null;function TT(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ex=new Map,u.forEach(TH,l),ex=null,Jb.call(l))}function TH(l,u){if(!(u.state.loading&4)){var y=ex.get(l);if(y)var E=y.get(null);else{y=new Map,ex.set(l,y);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<C.length;z++){var ue=C[z];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(y.set(ue.dataset.precedence,ue),E=ue)}E&&y.set(null,E)}C=u.instance,ue=C.getAttribute("data-precedence"),z=y.get(ue)||E,z===E&&y.set(null,C),y.set(ue,C),this.count++,E=Jb.bind(this),C.addEventListener("load",E),C.addEventListener("error",E),z?z.parentNode.insertBefore(C,z.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),u.state.loading|=4}}var My={$$typeof:M,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function MH(l,u,y,E,C,z,ue,we){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=E,this.onUncaughtError=C,this.onCaughtError=z,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function _D(l,u,y,E,C,z,ue,we,ke,st,gt,bt){return l=new MH(l,u,y,ue,we,ke,st,bt),u=1,z===!0&&(u|=24),z=za(3,null,null,u),l.current=z,z.stateNode=l,u=qp(),u.refCount++,l.pooledCache=u,u.refCount++,z.memoizedState={element:E,isDehydrated:y,cache:u},Kv(z),l}function bD(l){return l?(l=Zl,l):Zl}function xD(l,u,y,E,C,z){C=bD(C),E.context===null?E.context=C:E.pendingContext=C,E=wo(u),E.payload={element:y},z=z===void 0?null:z,z!==null&&(E.callback=z),y=fl(l,E,u),y!==null&&(va(y,l,u),tu(y,l,u))}function SD(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var y=l.retryLane;l.retryLane=y!==0&&y<u?y:u}}function MT(l,u){SD(l,u),(l=l.alternate)&&SD(l,u)}function ED(l){if(l.tag===13){var u=sl(l,67108864);u!==null&&va(u,l,67108864),MT(l,67108864)}}var tx=!0;function AH(l,u,y,E){var C=P.T;P.T=null;var z=B.p;try{B.p=2,AT(l,u,y,E)}finally{B.p=z,P.T=C}}function CH(l,u,y,E){var C=P.T;P.T=null;var z=B.p;try{B.p=8,AT(l,u,y,E)}finally{B.p=z,P.T=C}}function AT(l,u,y,E){if(tx){var C=CT(E);if(C===null)pT(l,u,E,nx,y),TD(l,E);else if(OH(C,l,u,y,E))E.stopPropagation();else if(TD(l,E),u&4&&-1<RH.indexOf(l)){for(;C!==null;){var z=ca(C);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var ue=St(z.pendingLanes);if(ue!==0){var we=z;for(we.pendingLanes|=2,we.entangledLanes|=2;ue;){var ke=1<<31-Z(ue);we.entanglements[1]|=ke,ue&=~ke}vc(z),(ni&6)===0&&(ea=Ce()+500,_y(0))}}break;case 13:we=sl(z,2),we!==null&&va(we,z,2),Uo(),MT(z,2)}if(z=CT(E),z===null&&pT(l,u,E,nx,y),z===C)break;C=z}C!==null&&E.stopPropagation()}else pT(l,u,E,null,y)}}function CT(l){return l=Op(l),RT(l)}var nx=null;function RT(l){if(nx=null,l=vi(l),l!==null){var u=a(l);if(u===null)l=null;else{var y=u.tag;if(y===13){if(l=s(u),l!==null)return l;l=null}else if(y===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return nx=l,null}function wD(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case pe:return 2;case ie:return 8;case W:case K:return 32;case j:return 268435456;default:return 32}default:return 32}}var OT=!1,Df=null,Nf=null,Lf=null,Ay=new Map,Cy=new Map,If=[],RH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TD(l,u){switch(l){case"focusin":case"focusout":Df=null;break;case"dragenter":case"dragleave":Nf=null;break;case"mouseover":case"mouseout":Lf=null;break;case"pointerover":case"pointerout":Ay.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cy.delete(u.pointerId)}}function Ry(l,u,y,E,C,z){return l===null||l.nativeEvent!==z?(l={blockedOn:u,domEventName:y,eventSystemFlags:E,nativeEvent:z,targetContainers:[C]},u!==null&&(u=ca(u),u!==null&&ED(u)),l):(l.eventSystemFlags|=E,u=l.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),l)}function OH(l,u,y,E,C){switch(u){case"focusin":return Df=Ry(Df,l,u,y,E,C),!0;case"dragenter":return Nf=Ry(Nf,l,u,y,E,C),!0;case"mouseover":return Lf=Ry(Lf,l,u,y,E,C),!0;case"pointerover":var z=C.pointerId;return Ay.set(z,Ry(Ay.get(z)||null,l,u,y,E,C)),!0;case"gotpointercapture":return z=C.pointerId,Cy.set(z,Ry(Cy.get(z)||null,l,u,y,E,C)),!0}return!1}function MD(l){var u=vi(l.target);if(u!==null){var y=a(u);if(y!==null){if(u=y.tag,u===13){if(u=s(y),u!==null){l.blockedOn=u,ze(l.priority,function(){if(y.tag===13){var E=Yi();E=Ge(E);var C=sl(y,E);C!==null&&va(C,y,E),MT(y,E)}});return}}else if(u===3&&y.stateNode.current.memoizedState.isDehydrated){l.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ix(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var y=CT(l.nativeEvent);if(y===null){y=l.nativeEvent;var E=new y.constructor(y.type,y);Rp=E,y.target.dispatchEvent(E),Rp=null}else return u=ca(y),u!==null&&ED(u),l.blockedOn=y,!1;u.shift()}return!0}function AD(l,u,y){ix(l)&&y.delete(u)}function DH(){OT=!1,Df!==null&&ix(Df)&&(Df=null),Nf!==null&&ix(Nf)&&(Nf=null),Lf!==null&&ix(Lf)&&(Lf=null),Ay.forEach(AD),Cy.forEach(AD)}function rx(l,u){l.blockedOn===u&&(l.blockedOn=null,OT||(OT=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,DH)))}var ax=null;function CD(l){ax!==l&&(ax=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ax===l&&(ax=null);for(var u=0;u<l.length;u+=3){var y=l[u],E=l[u+1],C=l[u+2];if(typeof E!="function"){if(RT(E||y)===null)continue;break}var z=ca(y);z!==null&&(l.splice(u,3),u-=3,dy(z,{pending:!0,data:C,method:y.method,action:E},E,C))}}))}function Oy(l){function u(ke){return rx(ke,l)}Df!==null&&rx(Df,l),Nf!==null&&rx(Nf,l),Lf!==null&&rx(Lf,l),Ay.forEach(u),Cy.forEach(u);for(var y=0;y<If.length;y++){var E=If[y];E.blockedOn===l&&(E.blockedOn=null)}for(;0<If.length&&(y=If[0],y.blockedOn===null);)MD(y),y.blockedOn===null&&If.shift();if(y=(l.ownerDocument||l).$$reactFormReplay,y!=null)for(E=0;E<y.length;E+=3){var C=y[E],z=y[E+1],ue=C[xt]||null;if(typeof z=="function")ue||CD(y);else if(ue){var we=null;if(z&&z.hasAttribute("formAction")){if(C=z,ue=z[xt]||null)we=ue.formAction;else if(RT(C)!==null)continue}else we=ue.action;typeof we=="function"?y[E+1]=we:(y.splice(E,3),E-=3),CD(y)}}}function DT(l){this._internalRoot=l}sx.prototype.render=DT.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(i(409));var y=u.current,E=Yi();xD(y,E,l,u,null,null)},sx.prototype.unmount=DT.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;xD(l.current,2,null,l,null,null),Uo(),u[Mt]=null}};function sx(l){this._internalRoot=l}sx.prototype.unstable_scheduleHydration=function(l){if(l){var u=be();l={blockedOn:null,target:l,priority:u};for(var y=0;y<If.length&&u!==0&&u<If[y].priority;y++);If.splice(y,0,l),y===0&&MD(l)}};var RD=e.version;if(RD!=="19.1.1")throw Error(i(527,RD,"19.1.1"));B.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=c(u),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var NH={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ox.isDisabled&&ox.supportsFiber)try{Ie=ox.inject(NH),ne=ox}catch{}}return Ly.createRoot=function(l,u){if(!r(l))throw Error(i(299));var y=!1,E="",C=fh,z=dm,ue=Hb,we=null;return u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(E=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(z=u.onCaughtError),u.onRecoverableError!==void 0&&(ue=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(we=u.unstable_transitionCallbacks)),u=_D(l,1,!1,null,null,y,E,C,z,ue,we,null),l[Mt]=u.current,hT(l),new DT(u)},Ly.hydrateRoot=function(l,u,y){if(!r(l))throw Error(i(299));var E=!1,C="",z=fh,ue=dm,we=Hb,ke=null,st=null;return y!=null&&(y.unstable_strictMode===!0&&(E=!0),y.identifierPrefix!==void 0&&(C=y.identifierPrefix),y.onUncaughtError!==void 0&&(z=y.onUncaughtError),y.onCaughtError!==void 0&&(ue=y.onCaughtError),y.onRecoverableError!==void 0&&(we=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(ke=y.unstable_transitionCallbacks),y.formState!==void 0&&(st=y.formState)),u=_D(l,1,!0,u,y??null,E,C,z,ue,we,ke,st),u.context=bD(null),y=u.current,E=Yi(),E=Ge(E),C=wo(E),C.callback=null,fl(y,C,E),y=E,u.current.lanes=y,fe(u,y),vc(u),l[Mt]=u.current,hT(l),new sx(u)},Ly.version="19.1.1",Ly}var iN;function Q8(){if(iN)return BT.exports;iN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),BT.exports=$8(),BT.exports}var J8=Q8(),ej=(n,e,t,i,r,a,s,o)=>{let c=document.documentElement,f=["light","dark"];function p(v){(Array.isArray(n)?n:[n]).forEach(_=>{let b=_==="class",S=b&&a?r.map(x=>a[x]||x):r;b?(c.classList.remove(...S),c.classList.add(a&&a[v]?a[v]:v)):c.setAttribute(_,v)}),d(v)}function d(v){o&&f.includes(v)&&(c.style.colorScheme=v)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(i)p(i);else try{let v=localStorage.getItem(e)||t,_=s&&v==="system"?m():v;p(_)}catch{}},tj=F.createContext(void 0),nj={setTheme:n=>{},themes:[]},ij=()=>{var n;return(n=F.useContext(tj))!=null?n:nj};F.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:i,enableColorScheme:r,defaultTheme:a,value:s,themes:o,nonce:c,scriptProps:f})=>{let p=JSON.stringify([t,e,a,n,o,s,i,r]).slice(1,-1);return F.createElement("script",{...f,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${ej.toString()})(${p})`}})});var l_=OU();const DU=o_(l_);function rj(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const aj=n=>{switch(n){case"success":return lj;case"info":return uj;case"warning":return cj;case"error":return fj;default:return null}},sj=Array(12).fill(0),oj=({visible:n,className:e})=>Tt.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Tt.createElement("div",{className:"sonner-spinner"},sj.map((t,i)=>Tt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),lj=Tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Tt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),cj=Tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Tt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),uj=Tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Tt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fj=Tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Tt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),dj=Tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Tt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Tt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),hj=()=>{const[n,e]=Tt.useState(document.hidden);return Tt.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let JA=1;class pj{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...r}=e,a=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:JA++,s=this.toasts.find(c=>c.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(c=>c.id===a?(this.publish({...c,...e,id:a,title:i}),{...c,...e,id:a,dismissible:o,title:i}):c):this.addToast({title:i,...r,dismissible:o,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let a=i!==void 0,s;const o=r.then(async f=>{if(s=["resolve",f],Tt.isValidElement(f))a=!1,this.create({id:i,type:"default",message:f});else if(gj(f)&&!f.ok){a=!1;const d=typeof t.error=="function"?await t.error(`HTTP error! status: ${f.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${f.status}`):t.description,_=typeof d=="object"&&!Tt.isValidElement(d)?d:{message:d};this.create({id:i,type:"error",description:m,..._})}else if(f instanceof Error){a=!1;const d=typeof t.error=="function"?await t.error(f):t.error,m=typeof t.description=="function"?await t.description(f):t.description,_=typeof d=="object"&&!Tt.isValidElement(d)?d:{message:d};this.create({id:i,type:"error",description:m,..._})}else if(t.success!==void 0){a=!1;const d=typeof t.success=="function"?await t.success(f):t.success,m=typeof t.description=="function"?await t.description(f):t.description,_=typeof d=="object"&&!Tt.isValidElement(d)?d:{message:d};this.create({id:i,type:"success",description:m,..._})}}).catch(async f=>{if(s=["reject",f],t.error!==void 0){a=!1;const p=typeof t.error=="function"?await t.error(f):t.error,d=typeof t.description=="function"?await t.description(f):t.description,v=typeof p=="object"&&!Tt.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:d,...v})}}).finally(()=>{a&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),c=()=>new Promise((f,p)=>o.then(()=>s[0]==="reject"?p(s[1]):f(s[1])).catch(p));return typeof i!="string"&&typeof i!="number"?{unwrap:c}:Object.assign(i,{unwrap:c})},this.custom=(e,t)=>{const i=t?.id||JA++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Vs=new pj,mj=(n,e)=>{const t=e?.id||JA++;return Vs.addToast({title:n,...e,id:t}),t},gj=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",vj=mj,yj=()=>Vs.toasts,_j=()=>Vs.getActiveToasts(),ra=Object.assign(vj,{success:Vs.success,info:Vs.info,warning:Vs.warning,error:Vs.error,custom:Vs.custom,message:Vs.message,promise:Vs.promise,dismiss:Vs.dismiss,loading:Vs.loading},{getHistory:yj,getToasts:_j});rj("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function cx(n){return n.label!==void 0}const bj=3,xj="24px",Sj="16px",rN=4e3,Ej=356,wj=14,Tj=45,Mj=200;function yc(...n){return n.filter(Boolean).join(" ")}function Aj(n){const[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}const Cj=n=>{var e,t,i,r,a,s,o,c,f;const{invert:p,toast:d,unstyled:m,interacting:v,setHeights:_,visibleToasts:b,heights:S,index:x,toasts:T,expanded:M,removeToast:A,defaultRichColors:D,closeButton:O,style:I,cancelButtonStyle:U,actionButtonStyle:N,className:L="",descriptionClassName:Y="",duration:ee,position:se,gap:he,expandByDefault:de,classNames:P,icons:B,closeButtonAriaLabel:V="Close toast"}=n,[ae,X]=Tt.useState(null),[oe,me]=Tt.useState(null),[J,le]=Tt.useState(!1),[Se,Ee]=Tt.useState(!1),[re,ge]=Tt.useState(!1),[Ae,Pe]=Tt.useState(!1),[We,it]=Tt.useState(!1),[te,xe]=Tt.useState(0),[De,He]=Tt.useState(0),Ce=Tt.useRef(d.duration||ee||rN),ce=Tt.useRef(null),pe=Tt.useRef(null),ie=x===0,W=x+1<=b,K=d.type,j=d.dismissible!==!1,$=d.className||"",Re=d.descriptionClassName||"",Ie=Tt.useMemo(()=>S.findIndex(Ye=>Ye.toastId===d.id)||0,[S,d.id]),ne=Tt.useMemo(()=>{var Ye;return(Ye=d.closeButton)!=null?Ye:O},[d.closeButton,O]),H=Tt.useMemo(()=>d.duration||ee||rN,[d.duration,ee]),Z=Tt.useRef(0),ye=Tt.useRef(0),Oe=Tt.useRef(0),Be=Tt.useRef(null),[Ue,pt]=se.split("-"),St=Tt.useMemo(()=>S.reduce((Ye,G,Ge)=>Ge>=Ie?Ye:Ye+G.height,0),[S,Ie]),_e=hj(),Ve=d.invert||p,nt=K==="loading";ye.current=Tt.useMemo(()=>Ie*he+St,[Ie,St]),Tt.useEffect(()=>{Ce.current=H},[H]),Tt.useEffect(()=>{le(!0)},[]),Tt.useEffect(()=>{const Ye=pe.current;if(Ye){const G=Ye.getBoundingClientRect().height;return He(G),_(Ge=>[{toastId:d.id,height:G,position:d.position},...Ge]),()=>_(Ge=>Ge.filter($e=>$e.toastId!==d.id))}},[_,d.id]),Tt.useLayoutEffect(()=>{if(!J)return;const Ye=pe.current,G=Ye.style.height;Ye.style.height="auto";const Ge=Ye.getBoundingClientRect().height;Ye.style.height=G,He(Ge),_($e=>$e.find(ze=>ze.toastId===d.id)?$e.map(ze=>ze.toastId===d.id?{...ze,height:Ge}:ze):[{toastId:d.id,height:Ge,position:d.position},...$e])},[J,d.title,d.description,_,d.id,d.jsx,d.action,d.cancel]);const Le=Tt.useCallback(()=>{Ee(!0),xe(ye.current),_(Ye=>Ye.filter(G=>G.toastId!==d.id)),setTimeout(()=>{A(d)},Mj)},[d,A,_,ye]);Tt.useEffect(()=>{if(d.promise&&K==="loading"||d.duration===1/0||d.type==="loading")return;let Ye;return M||v||_e?(()=>{if(Oe.current<Z.current){const $e=new Date().getTime()-Z.current;Ce.current=Ce.current-$e}Oe.current=new Date().getTime()})():(()=>{Ce.current!==1/0&&(Z.current=new Date().getTime(),Ye=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),Le()},Ce.current))})(),()=>clearTimeout(Ye)},[M,v,d,K,_e,Le]),Tt.useEffect(()=>{d.delete&&(Le(),d.onDismiss==null||d.onDismiss.call(d,d))},[Le,d.delete]);function Ne(){var Ye;if(B?.loading){var G;return Tt.createElement("div",{className:yc(P?.loader,d==null||(G=d.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":K==="loading"},B.loading)}return Tt.createElement(oj,{className:yc(P?.loader,d==null||(Ye=d.classNames)==null?void 0:Ye.loader),visible:K==="loading"})}const je=d.icon||B?.[K]||aj(K);var fe,Xe;return Tt.createElement("li",{tabIndex:0,ref:pe,className:yc(L,$,P?.toast,d==null||(e=d.classNames)==null?void 0:e.toast,P?.default,P?.[K],d==null||(t=d.classNames)==null?void 0:t[K]),"data-sonner-toast":"","data-rich-colors":(fe=d.richColors)!=null?fe:D,"data-styled":!(d.jsx||d.unstyled||m),"data-mounted":J,"data-promise":!!d.promise,"data-swiped":We,"data-removed":Se,"data-visible":W,"data-y-position":Ue,"data-x-position":pt,"data-index":x,"data-front":ie,"data-swiping":re,"data-dismissible":j,"data-type":K,"data-invert":Ve,"data-swipe-out":Ae,"data-swipe-direction":oe,"data-expanded":!!(M||de&&J),"data-testid":d.testId,style:{"--index":x,"--toasts-before":x,"--z-index":T.length-x,"--offset":`${Se?te:ye.current}px`,"--initial-height":de?"auto":`${De}px`,...I,...d.style},onDragEnd:()=>{ge(!1),X(null),Be.current=null},onPointerDown:Ye=>{Ye.button!==2&&(nt||!j||(ce.current=new Date,xe(ye.current),Ye.target.setPointerCapture(Ye.pointerId),Ye.target.tagName!=="BUTTON"&&(ge(!0),Be.current={x:Ye.clientX,y:Ye.clientY})))},onPointerUp:()=>{var Ye,G,Ge;if(Ae||!j)return;Be.current=null;const $e=Number(((Ye=pe.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),be=Number(((G=pe.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ze=new Date().getTime()-((Ge=ce.current)==null?void 0:Ge.getTime()),Qe=ae==="x"?$e:be,Ot=Math.abs(Qe)/ze;if(Math.abs(Qe)>=Tj||Ot>.11){xe(ye.current),d.onDismiss==null||d.onDismiss.call(d,d),me(ae==="x"?$e>0?"right":"left":be>0?"down":"up"),Le(),Pe(!0);return}else{var xt,Mt;(xt=pe.current)==null||xt.style.setProperty("--swipe-amount-x","0px"),(Mt=pe.current)==null||Mt.style.setProperty("--swipe-amount-y","0px")}it(!1),ge(!1),X(null)},onPointerMove:Ye=>{var G,Ge,$e;if(!Be.current||!j||((G=window.getSelection())==null?void 0:G.toString().length)>0)return;const ze=Ye.clientY-Be.current.y,Qe=Ye.clientX-Be.current.x;var Ot;const xt=(Ot=n.swipeDirections)!=null?Ot:Aj(se);!ae&&(Math.abs(Qe)>1||Math.abs(ze)>1)&&X(Math.abs(Qe)>Math.abs(ze)?"x":"y");let Mt={x:0,y:0};const $t=Ii=>1/(1.5+Math.abs(Ii)/20);if(ae==="y"){if(xt.includes("top")||xt.includes("bottom"))if(xt.includes("top")&&ze<0||xt.includes("bottom")&&ze>0)Mt.y=ze;else{const Ii=ze*$t(ze);Mt.y=Math.abs(Ii)<Math.abs(ze)?Ii:ze}}else if(ae==="x"&&(xt.includes("left")||xt.includes("right")))if(xt.includes("left")&&Qe<0||xt.includes("right")&&Qe>0)Mt.x=Qe;else{const Ii=Qe*$t(Qe);Mt.x=Math.abs(Ii)<Math.abs(Qe)?Ii:Qe}(Math.abs(Mt.x)>0||Math.abs(Mt.y)>0)&&it(!0),(Ge=pe.current)==null||Ge.style.setProperty("--swipe-amount-x",`${Mt.x}px`),($e=pe.current)==null||$e.style.setProperty("--swipe-amount-y",`${Mt.y}px`)}},ne&&!d.jsx&&K!=="loading"?Tt.createElement("button",{"aria-label":V,"data-disabled":nt,"data-close-button":!0,onClick:nt||!j?()=>{}:()=>{Le(),d.onDismiss==null||d.onDismiss.call(d,d)},className:yc(P?.closeButton,d==null||(i=d.classNames)==null?void 0:i.closeButton)},(Xe=B?.close)!=null?Xe:dj):null,(K||d.icon||d.promise)&&d.icon!==null&&(B?.[K]!==null||d.icon)?Tt.createElement("div",{"data-icon":"",className:yc(P?.icon,d==null||(r=d.classNames)==null?void 0:r.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||Ne():null,d.type!=="loading"?je:null):null,Tt.createElement("div",{"data-content":"",className:yc(P?.content,d==null||(a=d.classNames)==null?void 0:a.content)},Tt.createElement("div",{"data-title":"",className:yc(P?.title,d==null||(s=d.classNames)==null?void 0:s.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?Tt.createElement("div",{"data-description":"",className:yc(Y,Re,P?.description,d==null||(o=d.classNames)==null?void 0:o.description)},typeof d.description=="function"?d.description():d.description):null),Tt.isValidElement(d.cancel)?d.cancel:d.cancel&&cx(d.cancel)?Tt.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||U,onClick:Ye=>{cx(d.cancel)&&j&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,Ye),Le())},className:yc(P?.cancelButton,d==null||(c=d.classNames)==null?void 0:c.cancelButton)},d.cancel.label):null,Tt.isValidElement(d.action)?d.action:d.action&&cx(d.action)?Tt.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||N,onClick:Ye=>{cx(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,Ye),!Ye.defaultPrevented&&Le())},className:yc(P?.actionButton,d==null||(f=d.classNames)==null?void 0:f.actionButton)},d.action.label):null)};function aN(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function Rj(n,e){const t={};return[n,e].forEach((i,r)=>{const a=r===1,s=a?"--mobile-offset":"--offset",o=a?Sj:xj;function c(f){["top","right","bottom","left"].forEach(p=>{t[`${s}-${p}`]=typeof f=="number"?`${f}px`:f})}typeof i=="number"||typeof i=="string"?c(i):typeof i=="object"?["top","right","bottom","left"].forEach(f=>{i[f]===void 0?t[`${s}-${f}`]=o:t[`${s}-${f}`]=typeof i[f]=="number"?`${i[f]}px`:i[f]}):c(o)}),t}const Oj=Tt.forwardRef(function(e,t){const{id:i,invert:r,position:a="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:c,className:f,offset:p,mobileOffset:d,theme:m="light",richColors:v,duration:_,style:b,visibleToasts:S=bj,toastOptions:x,dir:T=aN(),gap:M=wj,icons:A,containerAriaLabel:D="Notifications"}=e,[O,I]=Tt.useState([]),U=Tt.useMemo(()=>i?O.filter(J=>J.toasterId===i):O.filter(J=>!J.toasterId),[O,i]),N=Tt.useMemo(()=>Array.from(new Set([a].concat(U.filter(J=>J.position).map(J=>J.position)))),[U,a]),[L,Y]=Tt.useState([]),[ee,se]=Tt.useState(!1),[he,de]=Tt.useState(!1),[P,B]=Tt.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=Tt.useRef(null),ae=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=Tt.useRef(null),oe=Tt.useRef(!1),me=Tt.useCallback(J=>{I(le=>{var Se;return(Se=le.find(Ee=>Ee.id===J.id))!=null&&Se.delete||Vs.dismiss(J.id),le.filter(({id:Ee})=>Ee!==J.id)})},[]);return Tt.useEffect(()=>Vs.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{I(le=>le.map(Se=>Se.id===J.id?{...Se,delete:!0}:Se))});return}setTimeout(()=>{DU.flushSync(()=>{I(le=>{const Se=le.findIndex(Ee=>Ee.id===J.id);return Se!==-1?[...le.slice(0,Se),{...le[Se],...J},...le.slice(Se+1)]:[J,...le]})})})}),[O]),Tt.useEffect(()=>{if(m!=="system"){B(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:le})=>{B(le?"dark":"light")})}catch{J.addListener(({matches:Se})=>{try{B(Se?"dark":"light")}catch(Ee){console.error(Ee)}})}},[m]),Tt.useEffect(()=>{O.length<=1&&se(!1)},[O]),Tt.useEffect(()=>{const J=le=>{var Se;if(s.every(ge=>le[ge]||le.code===ge)){var re;se(!0),(re=V.current)==null||re.focus()}le.code==="Escape"&&(document.activeElement===V.current||(Se=V.current)!=null&&Se.contains(document.activeElement))&&se(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[s]),Tt.useEffect(()=>{if(V.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,oe.current=!1)}},[V.current]),Tt.createElement("section",{ref:t,"aria-label":`${D} ${ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((J,le)=>{var Se;const[Ee,re]=J.split("-");return U.length?Tt.createElement("ol",{key:J,dir:T==="auto"?aN():T,tabIndex:-1,ref:V,className:f,"data-sonner-toaster":!0,"data-sonner-theme":P,"data-y-position":Ee,"data-x-position":re,style:{"--front-toast-height":`${((Se=L[0])==null?void 0:Se.height)||0}px`,"--width":`${Ej}px`,"--gap":`${M}px`,...b,...Rj(p,d)},onBlur:ge=>{oe.current&&!ge.currentTarget.contains(ge.relatedTarget)&&(oe.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,X.current=ge.relatedTarget)},onMouseEnter:()=>se(!0),onMouseMove:()=>se(!0),onMouseLeave:()=>{he||se(!1)},onDragEnd:()=>se(!1),onPointerDown:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||de(!0)},onPointerUp:()=>de(!1)},U.filter(ge=>!ge.position&&le===0||ge.position===J).map((ge,Ae)=>{var Pe,We;return Tt.createElement(Cj,{key:ge.id,icons:A,index:Ae,toast:ge,defaultRichColors:v,duration:(Pe=x?.duration)!=null?Pe:_,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:r,visibleToasts:S,closeButton:(We=x?.closeButton)!=null?We:c,interacting:he,position:J,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,closeButtonAriaLabel:x?.closeButtonAriaLabel,removeToast:me,toasts:U.filter(it=>it.position==ge.position),heights:L.filter(it=>it.position==ge.position),setHeights:Y,expandByDefault:o,gap:M,expanded:ee,swipeDirections:e.swipeDirections})})):null}))}),Dj=({...n})=>{const{theme:e="system"}=ij();return q.jsx(Oj,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...n})};function Nn(n){return n!=null}function fr(n){return n===null}function lt(n){return n===void 0}const NU={coreModuleRef:{current:void 0}},LU=F.createContext(NU);function Za(){return F.useContext(LU)}function Nj(){const{coreModuleRef:n}=Za(),[e,t]=F.useState([0,0,0]);return F.useEffect(()=>{const i=n.current;if(lt(i))return;const r=i.listen("cursor.position:changed",({value:{position:a}})=>{t(a.toArray())});return()=>{i.forget(r)}},[]),q.jsx("div",{className:"flex flex-row items-center gap-2 h-6 w-full px-2 border-t-1 text-xs text-mono",children:q.jsxs("div",{children:["(",e[0].toFixed(2),", ",e[1].toFixed(2),")"]})})}const Gc={doNothing(){},isEquals(n,e){return n===e},patch(n,e){return{...n,...Object.fromEntries(Object.entries(e).filter(([t,i])=>Nn(i)))}},wrapAsyncFn(n){return(...e)=>{n(...e).catch(t=>t)}}};class S1 extends Error{constructor(){super(On("common:utils.response.errors.missing-value-or-error")),this.name=S1.name}}class Lj extends Error{constructor(){super(On("common:utils.response.errors.conflict-value-error")),this.name=S1.name}}const Xn={};let Lt=class eC{ok;error;constructor(e,t){if(fr(e)&&fr(t))throw new S1;if(Nn(e)&&Nn(t))throw new Lj;Nn(e)?(this.ok=e,this.error=null):(this.ok=null,this.error=t)}static Error(e){return new eC(null,e)}static Ok(e){return new eC(e,null)}expect(e){if(Nn(this.error))throw this.error.message=`${e}: ${this.error.message}`,this.error;return this.ok}getError(){return this.error}isOk(){return fr(this.error)}isError(){return fr(this.ok)}unwrap(){if(Nn(this.error))throw this.error;return this.ok}};function Ul(n,e=[]){let t=[];function i(a,s){const o=F.createContext(s),c=t.length;t=[...t,s];const f=d=>{const{scope:m,children:v,..._}=d,b=m?.[n]?.[c]||o,S=F.useMemo(()=>_,Object.values(_));return q.jsx(b.Provider,{value:S,children:v})};f.displayName=a+"Provider";function p(d,m){const v=m?.[n]?.[c]||o,_=F.useContext(v);if(_)return _;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[f,p]}const r=()=>{const a=t.map(s=>F.createContext(s));return function(o){const c=o?.[n]||a;return F.useMemo(()=>({[`__scope${n}`]:{...o,[n]:c}}),[o,c])}};return r.scopeName=n,[i,Ij(r,...e)]}function Ij(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const s=i.reduce((o,{useScope:c,scopeName:f})=>{const d=c(a)[`__scope${f}`];return{...o,...d}},{});return F.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function sN(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function E1(...n){return e=>{let t=!1;const i=n.map(r=>{const a=sN(r,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():sN(n[r],null)}}}}function Ln(...n){return F.useCallback(E1(...n),n)}function Dg(n){const e=Pj(n),t=F.forwardRef((i,r)=>{const{children:a,...s}=i,o=F.Children.toArray(a),c=o.find(Bj);if(c){const f=c.props.children,p=o.map(d=>d===c?F.Children.count(f)>1?F.Children.only(null):F.isValidElement(f)?f.props.children:null:d);return q.jsx(e,{...s,ref:r,children:F.isValidElement(f)?F.cloneElement(f,void 0,p):null})}return q.jsx(e,{...s,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}var Uj=Dg("Slot");function Pj(n){const e=F.forwardRef((t,i)=>{const{children:r,...a}=t;if(F.isValidElement(r)){const s=Fj(r),o=kj(a,r.props);return r.type!==F.Fragment&&(o.ref=i?E1(i,s):s),F.cloneElement(r,o)}return F.Children.count(r)>1?F.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var zj=Symbol("radix.slottable");function Bj(n){return F.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===zj}function kj(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...o)=>{const c=a(...o);return r(...o),c}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function Fj(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function c_(n){const e=n+"CollectionProvider",[t,i]=Ul(e),[r,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:S,children:x}=b,T=Tt.useRef(null),M=Tt.useRef(new Map).current;return q.jsx(r,{scope:S,itemMap:M,collectionRef:T,children:x})};s.displayName=e;const o=n+"CollectionSlot",c=Dg(o),f=Tt.forwardRef((b,S)=>{const{scope:x,children:T}=b,M=a(o,x),A=Ln(S,M.collectionRef);return q.jsx(c,{ref:A,children:T})});f.displayName=o;const p=n+"CollectionItemSlot",d="data-radix-collection-item",m=Dg(p),v=Tt.forwardRef((b,S)=>{const{scope:x,children:T,...M}=b,A=Tt.useRef(null),D=Ln(S,A),O=a(p,x);return Tt.useEffect(()=>(O.itemMap.set(A,{ref:A,...M}),()=>void O.itemMap.delete(A))),q.jsx(m,{[d]:"",ref:D,children:T})});v.displayName=p;function _(b){const S=a(n+"CollectionConsumer",b);return Tt.useCallback(()=>{const T=S.collectionRef.current;if(!T)return[];const M=Array.from(T.querySelectorAll(`[${d}]`));return Array.from(S.itemMap.values()).sort((O,I)=>M.indexOf(O.ref.current)-M.indexOf(I.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:s,Slot:f,ItemSlot:v},_,i]}var Hj=F.createContext(void 0);function iv(n){const e=F.useContext(Hj);return n||e||"ltr"}function Ut(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}var sa=globalThis?.document?F.useLayoutEffect:()=>{},jj=CR[" useId ".trim().toString()]||(()=>{}),Vj=0;function kc(n){const[e,t]=F.useState(jj());return sa(()=>{t(i=>i??String(Vj++))},[n]),e?`radix-${e}`:""}var Gj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ln=Gj.reduce((n,e)=>{const t=Dg(`Primitive.${e}`),i=F.forwardRef((r,a)=>{const{asChild:s,...o}=r,c=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),q.jsx(c,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function IU(n,e){n&&l_.flushSync(()=>n.dispatchEvent(e))}function Ca(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>e.current?.(...t),[])}function Yj(n,e=globalThis?.document){const t=Ca(n);F.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var Wj="DismissableLayer",tC="dismissableLayer.update",Zj="dismissableLayer.pointerDownOutside",Xj="dismissableLayer.focusOutside",oN,UU=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),RR=F.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...c}=n,f=F.useContext(UU),[p,d]=F.useState(null),m=p?.ownerDocument??globalThis?.document,[,v]=F.useState({}),_=Ln(e,I=>d(I)),b=Array.from(f.layers),[S]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(S),T=p?b.indexOf(p):-1,M=f.layersWithOutsidePointerEventsDisabled.size>0,A=T>=x,D=$j(I=>{const U=I.target,N=[...f.branches].some(L=>L.contains(U));!A||N||(r?.(I),s?.(I),I.defaultPrevented||o?.())},m),O=Qj(I=>{const U=I.target;[...f.branches].some(L=>L.contains(U))||(a?.(I),s?.(I),I.defaultPrevented||o?.())},m);return Yj(I=>{T===f.layers.size-1&&(i?.(I),!I.defaultPrevented&&o&&(I.preventDefault(),o()))},m),F.useEffect(()=>{if(p)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(oN=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),lN(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=oN)}},[p,m,t,f]),F.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),lN())},[p,f]),F.useEffect(()=>{const I=()=>v({});return document.addEventListener(tC,I),()=>document.removeEventListener(tC,I)},[]),q.jsx(ln.div,{...c,ref:_,style:{pointerEvents:M?A?"auto":"none":void 0,...n.style},onFocusCapture:Ut(n.onFocusCapture,O.onFocusCapture),onBlurCapture:Ut(n.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ut(n.onPointerDownCapture,D.onPointerDownCapture)})});RR.displayName=Wj;var qj="DismissableLayerBranch",Kj=F.forwardRef((n,e)=>{const t=F.useContext(UU),i=F.useRef(null),r=Ln(e,i);return F.useEffect(()=>{const a=i.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),q.jsx(ln.div,{...n,ref:r})});Kj.displayName=qj;function $j(n,e=globalThis?.document){const t=Ca(n),i=F.useRef(!1),r=F.useRef(()=>{});return F.useEffect(()=>{const a=o=>{if(o.target&&!i.current){let c=function(){PU(Zj,t,f,{discrete:!0})};const f={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);i.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function Qj(n,e=globalThis?.document){const t=Ca(n),i=F.useRef(!1);return F.useEffect(()=>{const r=a=>{a.target&&!i.current&&PU(Xj,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function lN(){const n=new CustomEvent(tC);document.dispatchEvent(n)}function PU(n,e,t,{discrete:i}){const r=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?IU(r,a):r.dispatchEvent(a)}var jT=0;function zU(){F.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??cN()),document.body.insertAdjacentElement("beforeend",n[1]??cN()),jT++,()=>{jT===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),jT--}},[])}function cN(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var VT="focusScope.autoFocusOnMount",GT="focusScope.autoFocusOnUnmount",uN={bubbles:!1,cancelable:!0},Jj="FocusScope",OR=F.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...s}=n,[o,c]=F.useState(null),f=Ca(r),p=Ca(a),d=F.useRef(null),m=Ln(e,b=>c(b)),v=F.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;F.useEffect(()=>{if(i){let b=function(M){if(v.paused||!o)return;const A=M.target;o.contains(A)?d.current=A:Wf(d.current,{select:!0})},S=function(M){if(v.paused||!o)return;const A=M.relatedTarget;A!==null&&(o.contains(A)||Wf(d.current,{select:!0}))},x=function(M){if(document.activeElement===document.body)for(const D of M)D.removedNodes.length>0&&Wf(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",S);const T=new MutationObserver(x);return o&&T.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",S),T.disconnect()}}},[i,o,v.paused]),F.useEffect(()=>{if(o){dN.add(v);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(VT,uN);o.addEventListener(VT,f),o.dispatchEvent(x),x.defaultPrevented||(eV(aV(BU(o)),{select:!0}),document.activeElement===b&&Wf(o))}return()=>{o.removeEventListener(VT,f),setTimeout(()=>{const x=new CustomEvent(GT,uN);o.addEventListener(GT,p),o.dispatchEvent(x),x.defaultPrevented||Wf(b??document.body,{select:!0}),o.removeEventListener(GT,p),dN.remove(v)},0)}}},[o,f,p,v]);const _=F.useCallback(b=>{if(!t&&!i||v.paused)return;const S=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(S&&x){const T=b.currentTarget,[M,A]=tV(T);M&&A?!b.shiftKey&&x===A?(b.preventDefault(),t&&Wf(M,{select:!0})):b.shiftKey&&x===M&&(b.preventDefault(),t&&Wf(A,{select:!0})):x===T&&b.preventDefault()}},[t,i,v.paused]);return q.jsx(ln.div,{tabIndex:-1,...s,ref:m,onKeyDown:_})});OR.displayName=Jj;function eV(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(Wf(i,{select:e}),document.activeElement!==t)return}function tV(n){const e=BU(n),t=fN(e,n),i=fN(e.reverse(),n);return[t,i]}function BU(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function fN(n,e){for(const t of n)if(!nV(t,{upTo:e}))return t}function nV(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function iV(n){return n instanceof HTMLInputElement&&"select"in n}function Wf(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&iV(n)&&e&&n.select()}}var dN=rV();function rV(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=hN(n,e),n.unshift(e)},remove(e){n=hN(n,e),n[0]?.resume()}}}function hN(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function aV(n){return n.filter(e=>e.tagName!=="A")}const sV=["top","right","bottom","left"],dd=Math.min,ho=Math.max,KS=Math.round,ux=Math.floor,Fc=n=>({x:n,y:n}),oV={left:"right",right:"left",bottom:"top",top:"bottom"},lV={start:"end",end:"start"};function nC(n,e,t){return ho(n,dd(e,t))}function Iu(n,e){return typeof n=="function"?n(e):n}function Uu(n){return n.split("-")[0]}function rv(n){return n.split("-")[1]}function DR(n){return n==="x"?"y":"x"}function NR(n){return n==="y"?"height":"width"}const cV=new Set(["top","bottom"]);function Pc(n){return cV.has(Uu(n))?"y":"x"}function LR(n){return DR(Pc(n))}function uV(n,e,t){t===void 0&&(t=!1);const i=rv(n),r=LR(n),a=NR(r);let s=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=$S(s)),[s,$S(s)]}function fV(n){const e=$S(n);return[iC(n),e,iC(e)]}function iC(n){return n.replace(/start|end/g,e=>lV[e])}const pN=["left","right"],mN=["right","left"],dV=["top","bottom"],hV=["bottom","top"];function pV(n,e,t){switch(n){case"top":case"bottom":return t?e?mN:pN:e?pN:mN;case"left":case"right":return e?dV:hV;default:return[]}}function mV(n,e,t,i){const r=rv(n);let a=pV(Uu(n),t==="start",i);return r&&(a=a.map(s=>s+"-"+r),e&&(a=a.concat(a.map(iC)))),a}function $S(n){return n.replace(/left|right|bottom|top/g,e=>oV[e])}function gV(n){return{top:0,right:0,bottom:0,left:0,...n}}function kU(n){return typeof n!="number"?gV(n):{top:n,right:n,bottom:n,left:n}}function QS(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function gN(n,e,t){let{reference:i,floating:r}=n;const a=Pc(e),s=LR(e),o=NR(s),c=Uu(e),f=a==="y",p=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,m=i[o]/2-r[o]/2;let v;switch(c){case"top":v={x:p,y:i.y-r.height};break;case"bottom":v={x:p,y:i.y+i.height};break;case"right":v={x:i.x+i.width,y:d};break;case"left":v={x:i.x-r.width,y:d};break;default:v={x:i.x,y:i.y}}switch(rv(e)){case"start":v[s]-=m*(t&&f?-1:1);break;case"end":v[s]+=m*(t&&f?-1:1);break}return v}const vV=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:s}=t,o=a.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let f=await s.getElementRects({reference:n,floating:e,strategy:r}),{x:p,y:d}=gN(f,i,c),m=i,v={},_=0;for(let b=0;b<o.length;b++){const{name:S,fn:x}=o[b],{x:T,y:M,data:A,reset:D}=await x({x:p,y:d,initialPlacement:i,placement:m,strategy:r,middlewareData:v,rects:f,platform:s,elements:{reference:n,floating:e}});p=T??p,d=M??d,v={...v,[S]:{...v[S],...A}},D&&_<=50&&(_++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(f=D.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:r}):D.rects),{x:p,y:d}=gN(f,m,c)),b=-1)}return{x:p,y:d,placement:m,strategy:r,middlewareData:v}};async function M0(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:s,elements:o,strategy:c}=n,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:d="floating",altBoundary:m=!1,padding:v=0}=Iu(e,n),_=kU(v),S=o[m?d==="floating"?"reference":"floating":d],x=QS(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(S)))==null||t?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:f,rootBoundary:p,strategy:c})),T=d==="floating"?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),A=await(a.isElement==null?void 0:a.isElement(M))?await(a.getScale==null?void 0:a.getScale(M))||{x:1,y:1}:{x:1,y:1},D=QS(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:T,offsetParent:M,strategy:c}):T);return{top:(x.top-D.top+_.top)/A.y,bottom:(D.bottom-x.bottom+_.bottom)/A.y,left:(x.left-D.left+_.left)/A.x,right:(D.right-x.right+_.right)/A.x}}const yV=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:a,platform:s,elements:o,middlewareData:c}=e,{element:f,padding:p=0}=Iu(n,e)||{};if(f==null)return{};const d=kU(p),m={x:t,y:i},v=LR(r),_=NR(v),b=await s.getDimensions(f),S=v==="y",x=S?"top":"left",T=S?"bottom":"right",M=S?"clientHeight":"clientWidth",A=a.reference[_]+a.reference[v]-m[v]-a.floating[_],D=m[v]-a.reference[v],O=await(s.getOffsetParent==null?void 0:s.getOffsetParent(f));let I=O?O[M]:0;(!I||!await(s.isElement==null?void 0:s.isElement(O)))&&(I=o.floating[M]||a.floating[_]);const U=A/2-D/2,N=I/2-b[_]/2-1,L=dd(d[x],N),Y=dd(d[T],N),ee=L,se=I-b[_]-Y,he=I/2-b[_]/2+U,de=nC(ee,he,se),P=!c.arrow&&rv(r)!=null&&he!==de&&a.reference[_]/2-(he<ee?L:Y)-b[_]/2<0,B=P?he<ee?he-ee:he-se:0;return{[v]:m[v]+B,data:{[v]:de,centerOffset:he-de-B,...P&&{alignmentOffset:B}},reset:P}}}),_V=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:a,rects:s,initialPlacement:o,platform:c,elements:f}=e,{mainAxis:p=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:b=!0,...S}=Iu(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const x=Uu(r),T=Pc(o),M=Uu(o)===o,A=await(c.isRTL==null?void 0:c.isRTL(f.floating)),D=m||(M||!b?[$S(o)]:fV(o)),O=_!=="none";!m&&O&&D.push(...mV(o,b,_,A));const I=[o,...D],U=await M0(e,S),N=[];let L=((i=a.flip)==null?void 0:i.overflows)||[];if(p&&N.push(U[x]),d){const he=uV(r,s,A);N.push(U[he[0]],U[he[1]])}if(L=[...L,{placement:r,overflows:N}],!N.every(he=>he<=0)){var Y,ee;const he=(((Y=a.flip)==null?void 0:Y.index)||0)+1,de=I[he];if(de&&(!(d==="alignment"?T!==Pc(de):!1)||L.every(V=>Pc(V.placement)===T?V.overflows[0]>0:!0)))return{data:{index:he,overflows:L},reset:{placement:de}};let P=(ee=L.filter(B=>B.overflows[0]<=0).sort((B,V)=>B.overflows[1]-V.overflows[1])[0])==null?void 0:ee.placement;if(!P)switch(v){case"bestFit":{var se;const B=(se=L.filter(V=>{if(O){const ae=Pc(V.placement);return ae===T||ae==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(ae=>ae>0).reduce((ae,X)=>ae+X,0)]).sort((V,ae)=>V[1]-ae[1])[0])==null?void 0:se[0];B&&(P=B);break}case"initialPlacement":P=o;break}if(r!==P)return{reset:{placement:P}}}return{}}}};function vN(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function yN(n){return sV.some(e=>n[e]>=0)}const bV=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...r}=Iu(n,e);switch(i){case"referenceHidden":{const a=await M0(e,{...r,elementContext:"reference"}),s=vN(a,t.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:yN(s)}}}case"escaped":{const a=await M0(e,{...r,altBoundary:!0}),s=vN(a,t.floating);return{data:{escapedOffsets:s,escaped:yN(s)}}}default:return{}}}}},FU=new Set(["left","top"]);async function xV(n,e){const{placement:t,platform:i,elements:r}=n,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),s=Uu(t),o=rv(t),c=Pc(t)==="y",f=FU.has(s)?-1:1,p=a&&c?-1:1,d=Iu(e,n);let{mainAxis:m,crossAxis:v,alignmentAxis:_}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof _=="number"&&(v=o==="end"?_*-1:_),c?{x:v*p,y:m*f}:{x:m*f,y:v*p}}const SV=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:a,placement:s,middlewareData:o}=e,c=await xV(e,n);return s===((t=o.offset)==null?void 0:t.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:r+c.x,y:a+c.y,data:{...c,placement:s}}}}},EV=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:S=>{let{x,y:T}=S;return{x,y:T}}},...c}=Iu(n,e),f={x:t,y:i},p=await M0(e,c),d=Pc(Uu(r)),m=DR(d);let v=f[m],_=f[d];if(a){const S=m==="y"?"top":"left",x=m==="y"?"bottom":"right",T=v+p[S],M=v-p[x];v=nC(T,v,M)}if(s){const S=d==="y"?"top":"left",x=d==="y"?"bottom":"right",T=_+p[S],M=_-p[x];_=nC(T,_,M)}const b=o.fn({...e,[m]:v,[d]:_});return{...b,data:{x:b.x-t,y:b.y-i,enabled:{[m]:a,[d]:s}}}}}},wV=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:c=!0,crossAxis:f=!0}=Iu(n,e),p={x:t,y:i},d=Pc(r),m=DR(d);let v=p[m],_=p[d];const b=Iu(o,e),S=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(c){const M=m==="y"?"height":"width",A=a.reference[m]-a.floating[M]+S.mainAxis,D=a.reference[m]+a.reference[M]-S.mainAxis;v<A?v=A:v>D&&(v=D)}if(f){var x,T;const M=m==="y"?"width":"height",A=FU.has(Uu(r)),D=a.reference[d]-a.floating[M]+(A&&((x=s.offset)==null?void 0:x[d])||0)+(A?0:S.crossAxis),O=a.reference[d]+a.reference[M]+(A?0:((T=s.offset)==null?void 0:T[d])||0)-(A?S.crossAxis:0);_<D?_=D:_>O&&(_=O)}return{[m]:v,[d]:_}}}},TV=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:r,rects:a,platform:s,elements:o}=e,{apply:c=()=>{},...f}=Iu(n,e),p=await M0(e,f),d=Uu(r),m=rv(r),v=Pc(r)==="y",{width:_,height:b}=a.floating;let S,x;d==="top"||d==="bottom"?(S=d,x=m===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(x=d,S=m==="end"?"top":"bottom");const T=b-p.top-p.bottom,M=_-p.left-p.right,A=dd(b-p[S],T),D=dd(_-p[x],M),O=!e.middlewareData.shift;let I=A,U=D;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(U=M),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(I=T),O&&!m){const L=ho(p.left,0),Y=ho(p.right,0),ee=ho(p.top,0),se=ho(p.bottom,0);v?U=_-2*(L!==0||Y!==0?L+Y:ho(p.left,p.right)):I=b-2*(ee!==0||se!==0?ee+se:ho(p.top,p.bottom))}await c({...e,availableWidth:U,availableHeight:I});const N=await s.getDimensions(o.floating);return _!==N.width||b!==N.height?{reset:{rects:!0}}:{}}}};function w1(){return typeof window<"u"}function av(n){return HU(n)?(n.nodeName||"").toLowerCase():"#document"}function go(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Wc(n){var e;return(e=(HU(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function HU(n){return w1()?n instanceof Node||n instanceof go(n).Node:!1}function Nl(n){return w1()?n instanceof Element||n instanceof go(n).Element:!1}function Yc(n){return w1()?n instanceof HTMLElement||n instanceof go(n).HTMLElement:!1}function _N(n){return!w1()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof go(n).ShadowRoot}const MV=new Set(["inline","contents"]);function u_(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=Ll(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!MV.has(r)}const AV=new Set(["table","td","th"]);function CV(n){return AV.has(av(n))}const RV=[":popover-open",":modal"];function T1(n){return RV.some(e=>{try{return n.matches(e)}catch{return!1}})}const OV=["transform","translate","scale","rotate","perspective"],DV=["transform","translate","scale","rotate","perspective","filter"],NV=["paint","layout","strict","content"];function IR(n){const e=UR(),t=Nl(n)?Ll(n):n;return OV.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||DV.some(i=>(t.willChange||"").includes(i))||NV.some(i=>(t.contain||"").includes(i))}function LV(n){let e=hd(n);for(;Yc(e)&&!Ng(e);){if(IR(e))return e;if(T1(e))return null;e=hd(e)}return null}function UR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const IV=new Set(["html","body","#document"]);function Ng(n){return IV.has(av(n))}function Ll(n){return go(n).getComputedStyle(n)}function M1(n){return Nl(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function hd(n){if(av(n)==="html")return n;const e=n.assignedSlot||n.parentNode||_N(n)&&n.host||Wc(n);return _N(e)?e.host:e}function jU(n){const e=hd(n);return Ng(e)?n.ownerDocument?n.ownerDocument.body:n.body:Yc(e)&&u_(e)?e:jU(e)}function A0(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=jU(n),a=r===((i=n.ownerDocument)==null?void 0:i.body),s=go(r);if(a){const o=rC(s);return e.concat(s,s.visualViewport||[],u_(r)?r:[],o&&t?A0(o):[])}return e.concat(r,A0(r,[],t))}function rC(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function VU(n){const e=Ll(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Yc(n),a=r?n.offsetWidth:t,s=r?n.offsetHeight:i,o=KS(t)!==a||KS(i)!==s;return o&&(t=a,i=s),{width:t,height:i,$:o}}function PR(n){return Nl(n)?n:n.contextElement}function wg(n){const e=PR(n);if(!Yc(e))return Fc(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:a}=VU(e);let s=(a?KS(t.width):t.width)/i,o=(a?KS(t.height):t.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const UV=Fc(0);function GU(n){const e=go(n);return!UR()||!e.visualViewport?UV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function PV(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==go(n)?!1:e}function rp(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),a=PR(n);let s=Fc(1);e&&(i?Nl(i)&&(s=wg(i)):s=wg(n));const o=PV(a,t,i)?GU(a):Fc(0);let c=(r.left+o.x)/s.x,f=(r.top+o.y)/s.y,p=r.width/s.x,d=r.height/s.y;if(a){const m=go(a),v=i&&Nl(i)?go(i):i;let _=m,b=rC(_);for(;b&&i&&v!==_;){const S=wg(b),x=b.getBoundingClientRect(),T=Ll(b),M=x.left+(b.clientLeft+parseFloat(T.paddingLeft))*S.x,A=x.top+(b.clientTop+parseFloat(T.paddingTop))*S.y;c*=S.x,f*=S.y,p*=S.x,d*=S.y,c+=M,f+=A,_=go(b),b=rC(_)}}return QS({width:p,height:d,x:c,y:f})}function A1(n,e){const t=M1(n).scrollLeft;return e?e.left+t:rp(Wc(n)).left+t}function YU(n,e){const t=n.getBoundingClientRect(),i=t.left+e.scrollLeft-A1(n,t),r=t.top+e.scrollTop;return{x:i,y:r}}function zV(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const a=r==="fixed",s=Wc(i),o=e?T1(e.floating):!1;if(i===s||o&&a)return t;let c={scrollLeft:0,scrollTop:0},f=Fc(1);const p=Fc(0),d=Yc(i);if((d||!d&&!a)&&((av(i)!=="body"||u_(s))&&(c=M1(i)),Yc(i))){const v=rp(i);f=wg(i),p.x=v.x+i.clientLeft,p.y=v.y+i.clientTop}const m=s&&!d&&!a?YU(s,c):Fc(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-c.scrollLeft*f.x+p.x+m.x,y:t.y*f.y-c.scrollTop*f.y+p.y+m.y}}function BV(n){return Array.from(n.getClientRects())}function kV(n){const e=Wc(n),t=M1(n),i=n.ownerDocument.body,r=ho(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=ho(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-t.scrollLeft+A1(n);const o=-t.scrollTop;return Ll(i).direction==="rtl"&&(s+=ho(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:s,y:o}}const bN=25;function FV(n,e){const t=go(n),i=Wc(n),r=t.visualViewport;let a=i.clientWidth,s=i.clientHeight,o=0,c=0;if(r){a=r.width,s=r.height;const p=UR();(!p||p&&e==="fixed")&&(o=r.offsetLeft,c=r.offsetTop)}const f=A1(i);if(f<=0){const p=i.ownerDocument,d=p.body,m=getComputedStyle(d),v=p.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,_=Math.abs(i.clientWidth-d.clientWidth-v);_<=bN&&(a-=_)}else f<=bN&&(a+=f);return{width:a,height:s,x:o,y:c}}const HV=new Set(["absolute","fixed"]);function jV(n,e){const t=rp(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,a=Yc(n)?wg(n):Fc(1),s=n.clientWidth*a.x,o=n.clientHeight*a.y,c=r*a.x,f=i*a.y;return{width:s,height:o,x:c,y:f}}function xN(n,e,t){let i;if(e==="viewport")i=FV(n,t);else if(e==="document")i=kV(Wc(n));else if(Nl(e))i=jV(e,t);else{const r=GU(n);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return QS(i)}function WU(n,e){const t=hd(n);return t===e||!Nl(t)||Ng(t)?!1:Ll(t).position==="fixed"||WU(t,e)}function VV(n,e){const t=e.get(n);if(t)return t;let i=A0(n,[],!1).filter(o=>Nl(o)&&av(o)!=="body"),r=null;const a=Ll(n).position==="fixed";let s=a?hd(n):n;for(;Nl(s)&&!Ng(s);){const o=Ll(s),c=IR(s);!c&&o.position==="fixed"&&(r=null),(a?!c&&!r:!c&&o.position==="static"&&!!r&&HV.has(r.position)||u_(s)&&!c&&WU(n,s))?i=i.filter(p=>p!==s):r=o,s=hd(s)}return e.set(n,i),i}function GV(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const s=[...t==="clippingAncestors"?T1(e)?[]:VV(e,this._c):[].concat(t),i],o=s[0],c=s.reduce((f,p)=>{const d=xN(e,p,r);return f.top=ho(d.top,f.top),f.right=dd(d.right,f.right),f.bottom=dd(d.bottom,f.bottom),f.left=ho(d.left,f.left),f},xN(e,o,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function YV(n){const{width:e,height:t}=VU(n);return{width:e,height:t}}function WV(n,e,t){const i=Yc(e),r=Wc(e),a=t==="fixed",s=rp(n,!0,a,e);let o={scrollLeft:0,scrollTop:0};const c=Fc(0);function f(){c.x=A1(r)}if(i||!i&&!a)if((av(e)!=="body"||u_(r))&&(o=M1(e)),i){const v=rp(e,!0,a,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else r&&f();a&&!i&&r&&f();const p=r&&!i&&!a?YU(r,o):Fc(0),d=s.left+o.scrollLeft-c.x-p.x,m=s.top+o.scrollTop-c.y-p.y;return{x:d,y:m,width:s.width,height:s.height}}function YT(n){return Ll(n).position==="static"}function SN(n,e){if(!Yc(n)||Ll(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Wc(n)===t&&(t=t.ownerDocument.body),t}function ZU(n,e){const t=go(n);if(T1(n))return t;if(!Yc(n)){let r=hd(n);for(;r&&!Ng(r);){if(Nl(r)&&!YT(r))return r;r=hd(r)}return t}let i=SN(n,e);for(;i&&CV(i)&&YT(i);)i=SN(i,e);return i&&Ng(i)&&YT(i)&&!IR(i)?t:i||LV(n)||t}const ZV=async function(n){const e=this.getOffsetParent||ZU,t=this.getDimensions,i=await t(n.floating);return{reference:WV(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function XV(n){return Ll(n).direction==="rtl"}const qV={convertOffsetParentRelativeRectToViewportRelativeRect:zV,getDocumentElement:Wc,getClippingRect:GV,getOffsetParent:ZU,getElementRects:ZV,getClientRects:BV,getDimensions:YV,getScale:wg,isElement:Nl,isRTL:XV};function XU(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function KV(n,e){let t=null,i;const r=Wc(n);function a(){var o;clearTimeout(i),(o=t)==null||o.disconnect(),t=null}function s(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),a();const f=n.getBoundingClientRect(),{left:p,top:d,width:m,height:v}=f;if(o||e(),!m||!v)return;const _=ux(d),b=ux(r.clientWidth-(p+m)),S=ux(r.clientHeight-(d+v)),x=ux(p),M={rootMargin:-_+"px "+-b+"px "+-S+"px "+-x+"px",threshold:ho(0,dd(1,c))||1};let A=!0;function D(O){const I=O[0].intersectionRatio;if(I!==c){if(!A)return s();I?s(!1,I):i=setTimeout(()=>{s(!1,1e-7)},1e3)}I===1&&!XU(f,n.getBoundingClientRect())&&s(),A=!1}try{t=new IntersectionObserver(D,{...M,root:r.ownerDocument})}catch{t=new IntersectionObserver(D,M)}t.observe(n)}return s(!0),a}function $V(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,f=PR(n),p=r||a?[...f?A0(f):[],...A0(e)]:[];p.forEach(x=>{r&&x.addEventListener("scroll",t,{passive:!0}),a&&x.addEventListener("resize",t)});const d=f&&o?KV(f,t):null;let m=-1,v=null;s&&(v=new ResizeObserver(x=>{let[T]=x;T&&T.target===f&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var M;(M=v)==null||M.observe(e)})),t()}),f&&!c&&v.observe(f),v.observe(e));let _,b=c?rp(n):null;c&&S();function S(){const x=rp(n);b&&!XU(b,x)&&t(),b=x,_=requestAnimationFrame(S)}return t(),()=>{var x;p.forEach(T=>{r&&T.removeEventListener("scroll",t),a&&T.removeEventListener("resize",t)}),d?.(),(x=v)==null||x.disconnect(),v=null,c&&cancelAnimationFrame(_)}}const QV=SV,JV=EV,eG=_V,tG=TV,nG=bV,EN=yV,iG=wV,rG=(n,e,t)=>{const i=new Map,r={platform:qV,...t},a={...r.platform,_c:i};return vV(n,e,{...r,platform:a})};var aG=typeof document<"u",sG=function(){},NS=aG?F.useLayoutEffect:sG;function JS(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!JS(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const a=r[i];if(!(a==="_owner"&&n.$$typeof)&&!JS(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function qU(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function wN(n,e){const t=qU(n);return Math.round(e*t)/t}function WT(n){const e=F.useRef(n);return NS(()=>{e.current=n}),e}function oG(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:c,open:f}=n,[p,d]=F.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,v]=F.useState(i);JS(m,i)||v(i);const[_,b]=F.useState(null),[S,x]=F.useState(null),T=F.useCallback(V=>{V!==O.current&&(O.current=V,b(V))},[]),M=F.useCallback(V=>{V!==I.current&&(I.current=V,x(V))},[]),A=a||_,D=s||S,O=F.useRef(null),I=F.useRef(null),U=F.useRef(p),N=c!=null,L=WT(c),Y=WT(r),ee=WT(f),se=F.useCallback(()=>{if(!O.current||!I.current)return;const V={placement:e,strategy:t,middleware:m};Y.current&&(V.platform=Y.current),rG(O.current,I.current,V).then(ae=>{const X={...ae,isPositioned:ee.current!==!1};he.current&&!JS(U.current,X)&&(U.current=X,l_.flushSync(()=>{d(X)}))})},[m,e,t,Y,ee]);NS(()=>{f===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[f]);const he=F.useRef(!1);NS(()=>(he.current=!0,()=>{he.current=!1}),[]),NS(()=>{if(A&&(O.current=A),D&&(I.current=D),A&&D){if(L.current)return L.current(A,D,se);se()}},[A,D,se,L,N]);const de=F.useMemo(()=>({reference:O,floating:I,setReference:T,setFloating:M}),[T,M]),P=F.useMemo(()=>({reference:A,floating:D}),[A,D]),B=F.useMemo(()=>{const V={position:t,left:0,top:0};if(!P.floating)return V;const ae=wN(P.floating,p.x),X=wN(P.floating,p.y);return o?{...V,transform:"translate("+ae+"px, "+X+"px)",...qU(P.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ae,top:X}},[t,o,P.floating,p.x,p.y]);return F.useMemo(()=>({...p,update:se,refs:de,elements:P,floatingStyles:B}),[p,se,de,P,B])}const lG=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:r}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?EN({element:i.current,padding:r}).fn(t):{}:i?EN({element:i,padding:r}).fn(t):{}}}},cG=(n,e)=>({...QV(n),options:[n,e]}),uG=(n,e)=>({...JV(n),options:[n,e]}),fG=(n,e)=>({...iG(n),options:[n,e]}),dG=(n,e)=>({...eG(n),options:[n,e]}),hG=(n,e)=>({...tG(n),options:[n,e]}),pG=(n,e)=>({...nG(n),options:[n,e]}),mG=(n,e)=>({...lG(n),options:[n,e]});var gG="Arrow",KU=F.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...a}=n;return q.jsx(ln.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:q.jsx("polygon",{points:"0,0 30,0 15,10"})})});KU.displayName=gG;var vG=KU;function zR(n){const[e,t]=F.useState(void 0);return sa(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let s,o;if("borderBoxSize"in a){const c=a.borderBoxSize,f=Array.isArray(c)?c[0]:c;s=f.inlineSize,o=f.blockSize}else s=n.offsetWidth,o=n.offsetHeight;t({width:s,height:o})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var BR="Popper",[$U,C1]=Ul(BR),[yG,QU]=$U(BR),JU=n=>{const{__scopePopper:e,children:t}=n,[i,r]=F.useState(null);return q.jsx(yG,{scope:e,anchor:i,onAnchorChange:r,children:t})};JU.displayName=BR;var eP="PopperAnchor",tP=F.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,a=QU(eP,t),s=F.useRef(null),o=Ln(e,s),c=F.useRef(null);return F.useEffect(()=>{const f=c.current;c.current=i?.current||s.current,f!==c.current&&a.onAnchorChange(c.current)}),i?null:q.jsx(ln.div,{...r,ref:o})});tP.displayName=eP;var kR="PopperContent",[_G,bG]=$U(kR),nP=F.forwardRef((n,e)=>{const{__scopePopper:t,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:d="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:_,...b}=n,S=QU(kR,t),[x,T]=F.useState(null),M=Ln(e,re=>T(re)),[A,D]=F.useState(null),O=zR(A),I=O?.width??0,U=O?.height??0,N=i+(a!=="center"?"-"+a:""),L=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},Y=Array.isArray(f)?f:[f],ee=Y.length>0,se={padding:L,boundary:Y.filter(SG),altBoundary:ee},{refs:he,floatingStyles:de,placement:P,isPositioned:B,middlewareData:V}=oG({strategy:"fixed",placement:N,whileElementsMounted:(...re)=>$V(...re,{animationFrame:v==="always"}),elements:{reference:S.anchor},middleware:[cG({mainAxis:r+U,alignmentAxis:s}),c&&uG({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?fG():void 0,...se}),c&&dG({...se}),hG({...se,apply:({elements:re,rects:ge,availableWidth:Ae,availableHeight:Pe})=>{const{width:We,height:it}=ge.reference,te=re.floating.style;te.setProperty("--radix-popper-available-width",`${Ae}px`),te.setProperty("--radix-popper-available-height",`${Pe}px`),te.setProperty("--radix-popper-anchor-width",`${We}px`),te.setProperty("--radix-popper-anchor-height",`${it}px`)}}),A&&mG({element:A,padding:o}),EG({arrowWidth:I,arrowHeight:U}),m&&pG({strategy:"referenceHidden",...se})]}),[ae,X]=aP(P),oe=Ca(_);sa(()=>{B&&oe?.()},[B,oe]);const me=V.arrow?.x,J=V.arrow?.y,le=V.arrow?.centerOffset!==0,[Se,Ee]=F.useState();return sa(()=>{x&&Ee(window.getComputedStyle(x).zIndex)},[x]),q.jsx("div",{ref:he.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:B?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Se,"--radix-popper-transform-origin":[V.transformOrigin?.x,V.transformOrigin?.y].join(" "),...V.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:q.jsx(_G,{scope:t,placedSide:ae,onArrowChange:D,arrowX:me,arrowY:J,shouldHideArrow:le,children:q.jsx(ln.div,{"data-side":ae,"data-align":X,...b,ref:M,style:{...b.style,animation:B?void 0:"none"}})})})});nP.displayName=kR;var iP="PopperArrow",xG={top:"bottom",right:"left",bottom:"top",left:"right"},rP=F.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,a=bG(iP,i),s=xG[a.placedSide];return q.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:q.jsx(vG,{...r,ref:t,style:{...r.style,display:"block"}})})});rP.displayName=iP;function SG(n){return n!==null}var EG=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:i,middlewareData:r}=e,s=r.arrow?.centerOffset!==0,o=s?0:n.arrowWidth,c=s?0:n.arrowHeight,[f,p]=aP(t),d={start:"0%",center:"50%",end:"100%"}[p],m=(r.arrow?.x??0)+o/2,v=(r.arrow?.y??0)+c/2;let _="",b="";return f==="bottom"?(_=s?d:`${m}px`,b=`${-c}px`):f==="top"?(_=s?d:`${m}px`,b=`${i.floating.height+c}px`):f==="right"?(_=`${-c}px`,b=s?d:`${v}px`):f==="left"&&(_=`${i.floating.width+c}px`,b=s?d:`${v}px`),{data:{x:_,y:b}}}});function aP(n){const[e,t="center"]=n.split("-");return[e,t]}var sP=JU,oP=tP,lP=nP,cP=rP,wG="Portal",FR=F.forwardRef((n,e)=>{const{container:t,...i}=n,[r,a]=F.useState(!1);sa(()=>a(!0),[]);const s=t||r&&globalThis?.document?.body;return s?DU.createPortal(q.jsx(ln.div,{...i,ref:e}),s):null});FR.displayName=wG;function TG(n,e){return F.useReducer((t,i)=>e[t][i]??t,n)}var Pl=n=>{const{present:e,children:t}=n,i=MG(e),r=typeof t=="function"?t({present:i.isPresent}):F.Children.only(t),a=Ln(i.ref,AG(r));return typeof t=="function"||i.isPresent?F.cloneElement(r,{ref:a}):null};Pl.displayName="Presence";function MG(n){const[e,t]=F.useState(),i=F.useRef(null),r=F.useRef(n),a=F.useRef("none"),s=n?"mounted":"unmounted",[o,c]=TG(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const f=fx(i.current);a.current=o==="mounted"?f:"none"},[o]),sa(()=>{const f=i.current,p=r.current;if(p!==n){const m=a.current,v=fx(f);n?c("MOUNT"):v==="none"||f?.display==="none"?c("UNMOUNT"):c(p&&m!==v?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,c]),sa(()=>{if(e){let f;const p=e.ownerDocument.defaultView??window,d=v=>{const b=fx(i.current).includes(CSS.escape(v.animationName));if(v.target===e&&b&&(c("ANIMATION_END"),!r.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",f=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},m=v=>{v.target===e&&(a.current=fx(i.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{p.clearTimeout(f),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:F.useCallback(f=>{i.current=f?getComputedStyle(f):null,t(f)},[])}}function fx(n){return n?.animationName||"none"}function AG(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var CG=CR[" useInsertionEffect ".trim().toString()]||sa;function pd({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[r,a,s]=RG({defaultProp:e,onChange:t}),o=n!==void 0,c=o?n:r;{const p=F.useRef(n!==void 0);F.useEffect(()=>{const d=p.current;d!==o&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=o},[o,i])}const f=F.useCallback(p=>{if(o){const d=OG(p)?p(n):p;d!==n&&s.current?.(d)}else a(p)},[o,n,a,s]);return[c,f]}function RG({defaultProp:n,onChange:e}){const[t,i]=F.useState(n),r=F.useRef(t),a=F.useRef(e);return CG(()=>{a.current=e},[e]),F.useEffect(()=>{r.current!==t&&(a.current?.(t),r.current=t)},[t,r]),[t,i,a]}function OG(n){return typeof n=="function"}var ZT="rovingFocusGroup.onEntryFocus",DG={bubbles:!1,cancelable:!0},f_="RovingFocusGroup",[aC,uP,NG]=c_(f_),[LG,R1]=Ul(f_,[NG]),[IG,UG]=LG(f_),fP=F.forwardRef((n,e)=>q.jsx(aC.Provider,{scope:n.__scopeRovingFocusGroup,children:q.jsx(aC.Slot,{scope:n.__scopeRovingFocusGroup,children:q.jsx(PG,{...n,ref:e})})}));fP.displayName=f_;var PG=F.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:r=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:f,preventScrollOnEntryFocus:p=!1,...d}=n,m=F.useRef(null),v=Ln(e,m),_=iv(a),[b,S]=pd({prop:s,defaultProp:o??null,onChange:c,caller:f_}),[x,T]=F.useState(!1),M=Ca(f),A=uP(t),D=F.useRef(!1),[O,I]=F.useState(0);return F.useEffect(()=>{const U=m.current;if(U)return U.addEventListener(ZT,M),()=>U.removeEventListener(ZT,M)},[M]),q.jsx(IG,{scope:t,orientation:i,dir:_,loop:r,currentTabStopId:b,onItemFocus:F.useCallback(U=>S(U),[S]),onItemShiftTab:F.useCallback(()=>T(!0),[]),onFocusableItemAdd:F.useCallback(()=>I(U=>U+1),[]),onFocusableItemRemove:F.useCallback(()=>I(U=>U-1),[]),children:q.jsx(ln.div,{tabIndex:x||O===0?-1:0,"data-orientation":i,...d,ref:v,style:{outline:"none",...n.style},onMouseDown:Ut(n.onMouseDown,()=>{D.current=!0}),onFocus:Ut(n.onFocus,U=>{const N=!D.current;if(U.target===U.currentTarget&&N&&!x){const L=new CustomEvent(ZT,DG);if(U.currentTarget.dispatchEvent(L),!L.defaultPrevented){const Y=A().filter(P=>P.focusable),ee=Y.find(P=>P.active),se=Y.find(P=>P.id===b),de=[ee,se,...Y].filter(Boolean).map(P=>P.ref.current);pP(de,p)}}D.current=!1}),onBlur:Ut(n.onBlur,()=>T(!1))})})}),dP="RovingFocusGroupItem",hP=F.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:r=!1,tabStopId:a,children:s,...o}=n,c=kc(),f=a||c,p=UG(dP,t),d=p.currentTabStopId===f,m=uP(t),{onFocusableItemAdd:v,onFocusableItemRemove:_,currentTabStopId:b}=p;return F.useEffect(()=>{if(i)return v(),()=>_()},[i,v,_]),q.jsx(aC.ItemSlot,{scope:t,id:f,focusable:i,active:r,children:q.jsx(ln.span,{tabIndex:d?0:-1,"data-orientation":p.orientation,...o,ref:e,onMouseDown:Ut(n.onMouseDown,S=>{i?p.onItemFocus(f):S.preventDefault()}),onFocus:Ut(n.onFocus,()=>p.onItemFocus(f)),onKeyDown:Ut(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){p.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const x=kG(S,p.orientation,p.dir);if(x!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let M=m().filter(A=>A.focusable).map(A=>A.ref.current);if(x==="last")M.reverse();else if(x==="prev"||x==="next"){x==="prev"&&M.reverse();const A=M.indexOf(S.currentTarget);M=p.loop?FG(M,A+1):M.slice(A+1)}setTimeout(()=>pP(M))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:b!=null}):s})})});hP.displayName=dP;var zG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BG(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function kG(n,e,t){const i=BG(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return zG[i]}function pP(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function FG(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var mP=fP,gP=hP,HG=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Om=new WeakMap,dx=new WeakMap,hx={},XT=0,vP=function(n){return n&&(n.host||vP(n.parentNode))},jG=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=vP(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},VG=function(n,e,t,i){var r=jG(e,Array.isArray(n)?n:[n]);hx[t]||(hx[t]=new WeakMap);var a=hx[t],s=[],o=new Set,c=new Set(r),f=function(d){!d||o.has(d)||(o.add(d),f(d.parentNode))};r.forEach(f);var p=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(m){if(o.has(m))p(m);else try{var v=m.getAttribute(i),_=v!==null&&v!=="false",b=(Om.get(m)||0)+1,S=(a.get(m)||0)+1;Om.set(m,b),a.set(m,S),s.push(m),b===1&&_&&dx.set(m,!0),S===1&&m.setAttribute(t,"true"),_||m.setAttribute(i,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return p(e),o.clear(),XT++,function(){s.forEach(function(d){var m=Om.get(d)-1,v=a.get(d)-1;Om.set(d,m),a.set(d,v),m||(dx.has(d)||d.removeAttribute(i),dx.delete(d)),v||d.removeAttribute(t)}),XT--,XT||(Om=new WeakMap,Om=new WeakMap,dx=new WeakMap,hx={})}},yP=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),r=HG(n);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),VG(i,r,t,"aria-hidden")):function(){return null}},Dc=function(){return Dc=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Dc.apply(this,arguments)};function _P(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function GG(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return n.concat(a||Array.prototype.slice.call(e))}var LS="right-scroll-bar-position",IS="width-before-scroll-bar",YG="with-scroll-bars-hidden",WG="--removed-body-scroll-bar-size";function qT(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function ZG(n,e){var t=F.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var r=t.value;r!==i&&(t.value=i,t.callback(i,r))}}}})[0];return t.callback=e,t.facade}var XG=typeof window<"u"?F.useLayoutEffect:F.useEffect,TN=new WeakMap;function qG(n,e){var t=ZG(null,function(i){return n.forEach(function(r){return qT(r,i)})});return XG(function(){var i=TN.get(t);if(i){var r=new Set(i),a=new Set(n),s=t.current;r.forEach(function(o){a.has(o)||qT(o,null)}),a.forEach(function(o){r.has(o)||qT(o,s)})}TN.set(t,n)},[n]),t}function KG(n){return n}function $G(n,e){e===void 0&&(e=KG);var t=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var s=e(a,i);return t.push(s),function(){t=t.filter(function(o){return o!==s})}},assignSyncMedium:function(a){for(i=!0;t.length;){var s=t;t=[],s.forEach(a)}t={push:function(o){return a(o)},filter:function(){return t}}},assignMedium:function(a){i=!0;var s=[];if(t.length){var o=t;t=[],o.forEach(a),s=t}var c=function(){var p=s;s=[],p.forEach(a)},f=function(){return Promise.resolve().then(c)};f(),t={push:function(p){s.push(p),f()},filter:function(p){return s=s.filter(p),t}}}};return r}function QG(n){n===void 0&&(n={});var e=$G(null);return e.options=Dc({async:!0,ssr:!1},n),e}var bP=function(n){var e=n.sideCar,t=_P(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return F.createElement(i,Dc({},t))};bP.isSideCarExport=!0;function JG(n,e){return n.useMedium(e),bP}var xP=QG(),KT=function(){},O1=F.forwardRef(function(n,e){var t=F.useRef(null),i=F.useState({onScrollCapture:KT,onWheelCapture:KT,onTouchMoveCapture:KT}),r=i[0],a=i[1],s=n.forwardProps,o=n.children,c=n.className,f=n.removeScrollBar,p=n.enabled,d=n.shards,m=n.sideCar,v=n.noRelative,_=n.noIsolation,b=n.inert,S=n.allowPinchZoom,x=n.as,T=x===void 0?"div":x,M=n.gapMode,A=_P(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=m,O=qG([t,e]),I=Dc(Dc({},A),r);return F.createElement(F.Fragment,null,p&&F.createElement(D,{sideCar:xP,removeScrollBar:f,shards:d,noRelative:v,noIsolation:_,inert:b,setCallbacks:a,allowPinchZoom:!!S,lockRef:t,gapMode:M}),s?F.cloneElement(F.Children.only(o),Dc(Dc({},I),{ref:O})):F.createElement(T,Dc({},I,{className:c,ref:O}),o))});O1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};O1.classNames={fullWidth:IS,zeroRight:LS};var e7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function t7(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=e7();return e&&n.setAttribute("nonce",e),n}function n7(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function i7(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var r7=function(){var n=0,e=null;return{add:function(t){n==0&&(e=t7())&&(n7(e,t),i7(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},a7=function(){var n=r7();return function(e,t){F.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},SP=function(){var n=a7(),e=function(t){var i=t.styles,r=t.dynamic;return n(i,r),null};return e},s7={left:0,top:0,right:0,gap:0},$T=function(n){return parseInt(n||"",10)||0},o7=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],r=e[n==="padding"?"paddingRight":"marginRight"];return[$T(t),$T(i),$T(r)]},l7=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return s7;var e=o7(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},c7=SP(),Tg="data-scroll-locked",u7=function(n,e,t,i){var r=n.left,a=n.top,s=n.right,o=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(YG,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(o,"px ").concat(i,`;
  }
  body[`).concat(Tg,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(LS,` {
    right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(IS,` {
    margin-right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(LS," .").concat(LS,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(IS," .").concat(IS,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Tg,`] {
    `).concat(WG,": ").concat(o,`px;
  }
`)},MN=function(){var n=parseInt(document.body.getAttribute(Tg)||"0",10);return isFinite(n)?n:0},f7=function(){F.useEffect(function(){return document.body.setAttribute(Tg,(MN()+1).toString()),function(){var n=MN()-1;n<=0?document.body.removeAttribute(Tg):document.body.setAttribute(Tg,n.toString())}},[])},d7=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,r=i===void 0?"margin":i;f7();var a=F.useMemo(function(){return l7(r)},[r]);return F.createElement(c7,{styles:u7(a,!e,r,t?"":"!important")})},sC=!1;if(typeof window<"u")try{var px=Object.defineProperty({},"passive",{get:function(){return sC=!0,!0}});window.addEventListener("test",px,px),window.removeEventListener("test",px,px)}catch{sC=!1}var Dm=sC?{passive:!1}:!1,h7=function(n){return n.tagName==="TEXTAREA"},EP=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!h7(n)&&t[e]==="visible")},p7=function(n){return EP(n,"overflowY")},m7=function(n){return EP(n,"overflowX")},AN=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=wP(n,i);if(r){var a=TP(n,i),s=a[1],o=a[2];if(s>o)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},g7=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},v7=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},wP=function(n,e){return n==="v"?p7(e):m7(e)},TP=function(n,e){return n==="v"?g7(e):v7(e)},y7=function(n,e){return n==="h"&&e==="rtl"?-1:1},_7=function(n,e,t,i,r){var a=y7(n,window.getComputedStyle(e).direction),s=a*i,o=t.target,c=e.contains(o),f=!1,p=s>0,d=0,m=0;do{if(!o)break;var v=TP(n,o),_=v[0],b=v[1],S=v[2],x=b-S-a*_;(_||x)&&wP(n,o)&&(d+=x,m+=_);var T=o.parentNode;o=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!c&&o!==document.body||c&&(e.contains(o)||e===o));return(p&&Math.abs(d)<1||!p&&Math.abs(m)<1)&&(f=!0),f},mx=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},CN=function(n){return[n.deltaX,n.deltaY]},RN=function(n){return n&&"current"in n?n.current:n},b7=function(n,e){return n[0]===e[0]&&n[1]===e[1]},x7=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},S7=0,Nm=[];function E7(n){var e=F.useRef([]),t=F.useRef([0,0]),i=F.useRef(),r=F.useState(S7++)[0],a=F.useState(SP)[0],s=F.useRef(n);F.useEffect(function(){s.current=n},[n]),F.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var b=GG([n.lockRef.current],(n.shards||[]).map(RN),!0).filter(Boolean);return b.forEach(function(S){return S.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),b.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var o=F.useCallback(function(b,S){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var x=mx(b),T=t.current,M="deltaX"in b?b.deltaX:T[0]-x[0],A="deltaY"in b?b.deltaY:T[1]-x[1],D,O=b.target,I=Math.abs(M)>Math.abs(A)?"h":"v";if("touches"in b&&I==="h"&&O.type==="range")return!1;var U=AN(I,O);if(!U)return!0;if(U?D=I:(D=I==="v"?"h":"v",U=AN(I,O)),!U)return!1;if(!i.current&&"changedTouches"in b&&(M||A)&&(i.current=D),!D)return!0;var N=i.current||D;return _7(N,S,b,N==="h"?M:A)},[]),c=F.useCallback(function(b){var S=b;if(!(!Nm.length||Nm[Nm.length-1]!==a)){var x="deltaY"in S?CN(S):mx(S),T=e.current.filter(function(D){return D.name===S.type&&(D.target===S.target||S.target===D.shadowParent)&&b7(D.delta,x)})[0];if(T&&T.should){S.cancelable&&S.preventDefault();return}if(!T){var M=(s.current.shards||[]).map(RN).filter(Boolean).filter(function(D){return D.contains(S.target)}),A=M.length>0?o(S,M[0]):!s.current.noIsolation;A&&S.cancelable&&S.preventDefault()}}},[]),f=F.useCallback(function(b,S,x,T){var M={name:b,delta:S,target:x,should:T,shadowParent:w7(x)};e.current.push(M),setTimeout(function(){e.current=e.current.filter(function(A){return A!==M})},1)},[]),p=F.useCallback(function(b){t.current=mx(b),i.current=void 0},[]),d=F.useCallback(function(b){f(b.type,CN(b),b.target,o(b,n.lockRef.current))},[]),m=F.useCallback(function(b){f(b.type,mx(b),b.target,o(b,n.lockRef.current))},[]);F.useEffect(function(){return Nm.push(a),n.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Dm),document.addEventListener("touchmove",c,Dm),document.addEventListener("touchstart",p,Dm),function(){Nm=Nm.filter(function(b){return b!==a}),document.removeEventListener("wheel",c,Dm),document.removeEventListener("touchmove",c,Dm),document.removeEventListener("touchstart",p,Dm)}},[]);var v=n.removeScrollBar,_=n.inert;return F.createElement(F.Fragment,null,_?F.createElement(a,{styles:x7(r)}):null,v?F.createElement(d7,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function w7(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const T7=JG(xP,E7);var HR=F.forwardRef(function(n,e){return F.createElement(O1,Dc({},n,{ref:e,sideCar:T7}))});HR.classNames=O1.classNames;var oC=["Enter"," "],M7=["ArrowDown","PageUp","Home"],MP=["ArrowUp","PageDown","End"],A7=[...M7,...MP],C7={ltr:[...oC,"ArrowRight"],rtl:[...oC,"ArrowLeft"]},R7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},d_="Menu",[C0,O7,D7]=c_(d_),[vp,jR]=Ul(d_,[D7,C1,R1]),D1=C1(),AP=R1(),[N7,yp]=vp(d_),[L7,h_]=vp(d_),CP=n=>{const{__scopeMenu:e,open:t=!1,children:i,dir:r,onOpenChange:a,modal:s=!0}=n,o=D1(e),[c,f]=F.useState(null),p=F.useRef(!1),d=Ca(a),m=iv(r);return F.useEffect(()=>{const v=()=>{p.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>p.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),q.jsx(sP,{...o,children:q.jsx(N7,{scope:e,open:t,onOpenChange:d,content:c,onContentChange:f,children:q.jsx(L7,{scope:e,onClose:F.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:p,dir:m,modal:s,children:i})})})};CP.displayName=d_;var I7="MenuAnchor",VR=F.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,r=D1(t);return q.jsx(oP,{...r,...i,ref:e})});VR.displayName=I7;var GR="MenuPortal",[U7,RP]=vp(GR,{forceMount:void 0}),OP=n=>{const{__scopeMenu:e,forceMount:t,children:i,container:r}=n,a=yp(GR,e);return q.jsx(U7,{scope:e,forceMount:t,children:q.jsx(Pl,{present:t||a.open,children:q.jsx(FR,{asChild:!0,container:r,children:i})})})};OP.displayName=GR;var Go="MenuContent",[P7,YR]=vp(Go),DP=F.forwardRef((n,e)=>{const t=RP(Go,n.__scopeMenu),{forceMount:i=t.forceMount,...r}=n,a=yp(Go,n.__scopeMenu),s=h_(Go,n.__scopeMenu);return q.jsx(C0.Provider,{scope:n.__scopeMenu,children:q.jsx(Pl,{present:i||a.open,children:q.jsx(C0.Slot,{scope:n.__scopeMenu,children:s.modal?q.jsx(z7,{...r,ref:e}):q.jsx(B7,{...r,ref:e})})})})}),z7=F.forwardRef((n,e)=>{const t=yp(Go,n.__scopeMenu),i=F.useRef(null),r=Ln(e,i);return F.useEffect(()=>{const a=i.current;if(a)return yP(a)},[]),q.jsx(WR,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Ut(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),B7=F.forwardRef((n,e)=>{const t=yp(Go,n.__scopeMenu);return q.jsx(WR,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),k7=Dg("MenuContent.ScrollLock"),WR=F.forwardRef((n,e)=>{const{__scopeMenu:t,loop:i=!1,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:m,onDismiss:v,disableOutsideScroll:_,...b}=n,S=yp(Go,t),x=h_(Go,t),T=D1(t),M=AP(t),A=O7(t),[D,O]=F.useState(null),I=F.useRef(null),U=Ln(e,I,S.onContentChange),N=F.useRef(0),L=F.useRef(""),Y=F.useRef(0),ee=F.useRef(null),se=F.useRef("right"),he=F.useRef(0),de=_?HR:F.Fragment,P=_?{as:k7,allowPinchZoom:!0}:void 0,B=ae=>{const X=L.current+ae,oe=A().filter(re=>!re.disabled),me=document.activeElement,J=oe.find(re=>re.ref.current===me)?.textValue,le=oe.map(re=>re.textValue),Se=$7(le,X,J),Ee=oe.find(re=>re.textValue===Se)?.ref.current;(function re(ge){L.current=ge,window.clearTimeout(N.current),ge!==""&&(N.current=window.setTimeout(()=>re(""),1e3))})(X),Ee&&setTimeout(()=>Ee.focus())};F.useEffect(()=>()=>window.clearTimeout(N.current),[]),zU();const V=F.useCallback(ae=>se.current===ee.current?.side&&J7(ae,ee.current?.area),[]);return q.jsx(P7,{scope:t,searchRef:L,onItemEnter:F.useCallback(ae=>{V(ae)&&ae.preventDefault()},[V]),onItemLeave:F.useCallback(ae=>{V(ae)||(I.current?.focus(),O(null))},[V]),onTriggerLeave:F.useCallback(ae=>{V(ae)&&ae.preventDefault()},[V]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:F.useCallback(ae=>{ee.current=ae},[]),children:q.jsx(de,{...P,children:q.jsx(OR,{asChild:!0,trapped:r,onMountAutoFocus:Ut(a,ae=>{ae.preventDefault(),I.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:q.jsx(RR,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:m,onDismiss:v,children:q.jsx(mP,{asChild:!0,...M,dir:x.dir,orientation:"vertical",loop:i,currentTabStopId:D,onCurrentTabStopIdChange:O,onEntryFocus:Ut(c,ae=>{x.isUsingKeyboardRef.current||ae.preventDefault()}),preventScrollOnEntryFocus:!0,children:q.jsx(lP,{role:"menu","aria-orientation":"vertical","data-state":ZP(S.open),"data-radix-menu-content":"",dir:x.dir,...T,...b,ref:U,style:{outline:"none",...b.style},onKeyDown:Ut(b.onKeyDown,ae=>{const oe=ae.target.closest("[data-radix-menu-content]")===ae.currentTarget,me=ae.ctrlKey||ae.altKey||ae.metaKey,J=ae.key.length===1;oe&&(ae.key==="Tab"&&ae.preventDefault(),!me&&J&&B(ae.key));const le=I.current;if(ae.target!==le||!A7.includes(ae.key))return;ae.preventDefault();const Ee=A().filter(re=>!re.disabled).map(re=>re.ref.current);MP.includes(ae.key)&&Ee.reverse(),q7(Ee)}),onBlur:Ut(n.onBlur,ae=>{ae.currentTarget.contains(ae.target)||(window.clearTimeout(N.current),L.current="")}),onPointerMove:Ut(n.onPointerMove,R0(ae=>{const X=ae.target,oe=he.current!==ae.clientX;if(ae.currentTarget.contains(X)&&oe){const me=ae.clientX>he.current?"right":"left";se.current=me,he.current=ae.clientX}}))})})})})})})});DP.displayName=Go;var F7="MenuGroup",ZR=F.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return q.jsx(ln.div,{role:"group",...i,ref:e})});ZR.displayName=F7;var H7="MenuLabel",NP=F.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return q.jsx(ln.div,{...i,ref:e})});NP.displayName=H7;var eE="MenuItem",ON="menu.itemSelect",N1=F.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:i,...r}=n,a=F.useRef(null),s=h_(eE,n.__scopeMenu),o=YR(eE,n.__scopeMenu),c=Ln(e,a),f=F.useRef(!1),p=()=>{const d=a.current;if(!t&&d){const m=new CustomEvent(ON,{bubbles:!0,cancelable:!0});d.addEventListener(ON,v=>i?.(v),{once:!0}),IU(d,m),m.defaultPrevented?f.current=!1:s.onClose()}};return q.jsx(LP,{...r,ref:c,disabled:t,onClick:Ut(n.onClick,p),onPointerDown:d=>{n.onPointerDown?.(d),f.current=!0},onPointerUp:Ut(n.onPointerUp,d=>{f.current||d.currentTarget?.click()}),onKeyDown:Ut(n.onKeyDown,d=>{const m=o.searchRef.current!=="";t||m&&d.key===" "||oC.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});N1.displayName=eE;var LP=F.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:i=!1,textValue:r,...a}=n,s=YR(eE,t),o=AP(t),c=F.useRef(null),f=Ln(e,c),[p,d]=F.useState(!1),[m,v]=F.useState("");return F.useEffect(()=>{const _=c.current;_&&v((_.textContent??"").trim())},[a.children]),q.jsx(C0.ItemSlot,{scope:t,disabled:i,textValue:r??m,children:q.jsx(gP,{asChild:!0,...o,focusable:!i,children:q.jsx(ln.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...a,ref:f,onPointerMove:Ut(n.onPointerMove,R0(_=>{i?s.onItemLeave(_):(s.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ut(n.onPointerLeave,R0(_=>s.onItemLeave(_))),onFocus:Ut(n.onFocus,()=>d(!0)),onBlur:Ut(n.onBlur,()=>d(!1))})})})}),j7="MenuCheckboxItem",IP=F.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:i,...r}=n;return q.jsx(kP,{scope:n.__scopeMenu,checked:t,children:q.jsx(N1,{role:"menuitemcheckbox","aria-checked":tE(t)?"mixed":t,...r,ref:e,"data-state":qR(t),onSelect:Ut(r.onSelect,()=>i?.(tE(t)?!0:!t),{checkForDefaultPrevented:!1})})})});IP.displayName=j7;var UP="MenuRadioGroup",[V7,G7]=vp(UP,{value:void 0,onValueChange:()=>{}}),PP=F.forwardRef((n,e)=>{const{value:t,onValueChange:i,...r}=n,a=Ca(i);return q.jsx(V7,{scope:n.__scopeMenu,value:t,onValueChange:a,children:q.jsx(ZR,{...r,ref:e})})});PP.displayName=UP;var zP="MenuRadioItem",BP=F.forwardRef((n,e)=>{const{value:t,...i}=n,r=G7(zP,n.__scopeMenu),a=t===r.value;return q.jsx(kP,{scope:n.__scopeMenu,checked:a,children:q.jsx(N1,{role:"menuitemradio","aria-checked":a,...i,ref:e,"data-state":qR(a),onSelect:Ut(i.onSelect,()=>r.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});BP.displayName=zP;var XR="MenuItemIndicator",[kP,Y7]=vp(XR,{checked:!1}),FP=F.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:i,...r}=n,a=Y7(XR,t);return q.jsx(Pl,{present:i||tE(a.checked)||a.checked===!0,children:q.jsx(ln.span,{...r,ref:e,"data-state":qR(a.checked)})})});FP.displayName=XR;var W7="MenuSeparator",HP=F.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return q.jsx(ln.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});HP.displayName=W7;var Z7="MenuArrow",jP=F.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,r=D1(t);return q.jsx(cP,{...r,...i,ref:e})});jP.displayName=Z7;var X7="MenuSub",[qme,VP]=vp(X7),t0="MenuSubTrigger",GP=F.forwardRef((n,e)=>{const t=yp(t0,n.__scopeMenu),i=h_(t0,n.__scopeMenu),r=VP(t0,n.__scopeMenu),a=YR(t0,n.__scopeMenu),s=F.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=a,f={__scopeMenu:n.__scopeMenu},p=F.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return F.useEffect(()=>p,[p]),F.useEffect(()=>{const d=o.current;return()=>{window.clearTimeout(d),c(null)}},[o,c]),q.jsx(VR,{asChild:!0,...f,children:q.jsx(LP,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":r.contentId,"data-state":ZP(t.open),...n,ref:E1(e,r.onTriggerChange),onClick:d=>{n.onClick?.(d),!(n.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Ut(n.onPointerMove,R0(d=>{a.onItemEnter(d),!d.defaultPrevented&&!n.disabled&&!t.open&&!s.current&&(a.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{t.onOpenChange(!0),p()},100))})),onPointerLeave:Ut(n.onPointerLeave,R0(d=>{p();const m=t.content?.getBoundingClientRect();if(m){const v=t.content?.dataset.side,_=v==="right",b=_?-5:5,S=m[_?"left":"right"],x=m[_?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x:S,y:m.top},{x,y:m.top},{x,y:m.bottom},{x:S,y:m.bottom}],side:v}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ut(n.onKeyDown,d=>{const m=a.searchRef.current!=="";n.disabled||m&&d.key===" "||C7[i.dir].includes(d.key)&&(t.onOpenChange(!0),t.content?.focus(),d.preventDefault())})})})});GP.displayName=t0;var YP="MenuSubContent",WP=F.forwardRef((n,e)=>{const t=RP(Go,n.__scopeMenu),{forceMount:i=t.forceMount,...r}=n,a=yp(Go,n.__scopeMenu),s=h_(Go,n.__scopeMenu),o=VP(YP,n.__scopeMenu),c=F.useRef(null),f=Ln(e,c);return q.jsx(C0.Provider,{scope:n.__scopeMenu,children:q.jsx(Pl,{present:i||a.open,children:q.jsx(C0.Slot,{scope:n.__scopeMenu,children:q.jsx(WR,{id:o.contentId,"aria-labelledby":o.triggerId,...r,ref:f,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{s.isUsingKeyboardRef.current&&c.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:Ut(n.onFocusOutside,p=>{p.target!==o.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ut(n.onEscapeKeyDown,p=>{s.onClose(),p.preventDefault()}),onKeyDown:Ut(n.onKeyDown,p=>{const d=p.currentTarget.contains(p.target),m=R7[s.dir].includes(p.key);d&&m&&(a.onOpenChange(!1),o.trigger?.focus(),p.preventDefault())})})})})})});WP.displayName=YP;function ZP(n){return n?"open":"closed"}function tE(n){return n==="indeterminate"}function qR(n){return tE(n)?"indeterminate":n?"checked":"unchecked"}function q7(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function K7(n,e){return n.map((t,i)=>n[(e+i)%n.length])}function $7(n,e,t){const r=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let s=K7(n,Math.max(a,0));r.length===1&&(s=s.filter(f=>f!==t));const c=s.find(f=>f.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function Q7(n,e){const{x:t,y:i}=n;let r=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a],c=e[s],f=o.x,p=o.y,d=c.x,m=c.y;p>i!=m>i&&t<(d-f)*(i-p)/(m-p)+f&&(r=!r)}return r}function J7(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Q7(t,e)}function R0(n){return e=>e.pointerType==="mouse"?n(e):void 0}var XP=CP,qP=VR,KP=OP,$P=DP,QP=ZR,JP=NP,ez=N1,tz=IP,nz=PP,iz=BP,rz=FP,az=HP,sz=jP,oz=GP,lz=WP,p_="Menubar",[lC,e9,t9]=c_(p_),[cz,Kme]=Ul(p_,[t9,R1]),xs=jR(),uz=R1(),[n9,KR]=cz(p_),fz=F.forwardRef((n,e)=>{const{__scopeMenubar:t,value:i,onValueChange:r,defaultValue:a,loop:s=!0,dir:o,...c}=n,f=iv(o),p=uz(t),[d,m]=pd({prop:i,onChange:r,defaultProp:a??"",caller:p_}),[v,_]=F.useState(null);return q.jsx(n9,{scope:t,value:d,onMenuOpen:F.useCallback(b=>{m(b),_(b)},[m]),onMenuClose:F.useCallback(()=>m(""),[m]),onMenuToggle:F.useCallback(b=>{m(S=>S?"":b),_(b)},[m]),dir:f,loop:s,children:q.jsx(lC.Provider,{scope:t,children:q.jsx(lC.Slot,{scope:t,children:q.jsx(mP,{asChild:!0,...p,orientation:"horizontal",loop:s,dir:f,currentTabStopId:v,onCurrentTabStopIdChange:_,children:q.jsx(ln.div,{role:"menubar",...c,ref:e})})})})})});fz.displayName=p_;var $R="MenubarMenu",[i9,dz]=cz($R),hz=n=>{const{__scopeMenubar:e,value:t,...i}=n,r=kc(),a=t||r||"LEGACY_REACT_AUTO_VALUE",s=KR($R,e),o=xs(e),c=F.useRef(null),f=F.useRef(!1),p=s.value===a;return F.useEffect(()=>{p||(f.current=!1)},[p]),q.jsx(i9,{scope:e,value:a,triggerId:kc(),triggerRef:c,contentId:kc(),wasKeyboardTriggerOpenRef:f,children:q.jsx(XP,{...o,open:p,onOpenChange:d=>{d||s.onMenuClose()},modal:!1,dir:s.dir,...i})})};hz.displayName=$R;var cC="MenubarTrigger",pz=F.forwardRef((n,e)=>{const{__scopeMenubar:t,disabled:i=!1,...r}=n,a=uz(t),s=xs(t),o=KR(cC,t),c=dz(cC,t),f=F.useRef(null),p=Ln(e,f,c.triggerRef),[d,m]=F.useState(!1),v=o.value===c.value;return q.jsx(lC.ItemSlot,{scope:t,value:c.value,disabled:i,children:q.jsx(gP,{asChild:!0,...a,focusable:!i,tabStopId:c.value,children:q.jsx(qP,{asChild:!0,...s,children:q.jsx(ln.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":v,"aria-controls":v?c.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":v?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:p,onPointerDown:Ut(n.onPointerDown,_=>{!i&&_.button===0&&_.ctrlKey===!1&&(o.onMenuOpen(c.value),v||_.preventDefault())}),onPointerEnter:Ut(n.onPointerEnter,()=>{!!o.value&&!v&&(o.onMenuOpen(c.value),f.current?.focus())}),onKeyDown:Ut(n.onKeyDown,_=>{i||(["Enter"," "].includes(_.key)&&o.onMenuToggle(c.value),_.key==="ArrowDown"&&o.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(_.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,_.preventDefault()))}),onFocus:Ut(n.onFocus,()=>m(!0)),onBlur:Ut(n.onBlur,()=>m(!1))})})})})});pz.displayName=cC;var r9="MenubarPortal",mz=n=>{const{__scopeMenubar:e,...t}=n,i=xs(e);return q.jsx(KP,{...i,...t})};mz.displayName=r9;var uC="MenubarContent",gz=F.forwardRef((n,e)=>{const{__scopeMenubar:t,align:i="start",...r}=n,a=xs(t),s=KR(uC,t),o=dz(uC,t),c=e9(t),f=F.useRef(!1);return q.jsx($P,{id:o.contentId,"aria-labelledby":o.triggerId,"data-radix-menubar-content":"",...a,...r,ref:e,align:i,onCloseAutoFocus:Ut(n.onCloseAutoFocus,p=>{!!!s.value&&!f.current&&o.triggerRef.current?.focus(),f.current=!1,p.preventDefault()}),onFocusOutside:Ut(n.onFocusOutside,p=>{const d=p.target;c().some(v=>v.ref.current?.contains(d))&&p.preventDefault()}),onInteractOutside:Ut(n.onInteractOutside,()=>{f.current=!0}),onEntryFocus:p=>{o.wasKeyboardTriggerOpenRef.current||p.preventDefault()},onKeyDown:Ut(n.onKeyDown,p=>{if(["ArrowRight","ArrowLeft"].includes(p.key)){const d=p.target,m=d.hasAttribute("data-radix-menubar-subtrigger"),v=d.closest("[data-radix-menubar-content]")!==p.currentTarget,b=(s.dir==="rtl"?"ArrowRight":"ArrowLeft")===p.key;if(!b&&m||v&&b)return;let T=c().filter(D=>!D.disabled).map(D=>D.value);b&&T.reverse();const M=T.indexOf(o.value);T=s.loop?M9(T,M+1):T.slice(M+1);const[A]=T;A&&s.onMenuOpen(A)}},{checkForDefaultPrevented:!1}),style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});gz.displayName=uC;var a9="MenubarGroup",s9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(QP,{...r,...i,ref:e})});s9.displayName=a9;var o9="MenubarLabel",l9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(JP,{...r,...i,ref:e})});l9.displayName=o9;var c9="MenubarItem",vz=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(ez,{...r,...i,ref:e})});vz.displayName=c9;var u9="MenubarCheckboxItem",f9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(tz,{...r,...i,ref:e})});f9.displayName=u9;var d9="MenubarRadioGroup",h9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(nz,{...r,...i,ref:e})});h9.displayName=d9;var p9="MenubarRadioItem",m9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(iz,{...r,...i,ref:e})});m9.displayName=p9;var g9="MenubarItemIndicator",v9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(rz,{...r,...i,ref:e})});v9.displayName=g9;var y9="MenubarSeparator",_9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(az,{...r,...i,ref:e})});_9.displayName=y9;var b9="MenubarArrow",x9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(sz,{...r,...i,ref:e})});x9.displayName=b9;var S9="MenubarSubTrigger",E9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(oz,{"data-radix-menubar-subtrigger":"",...r,...i,ref:e})});E9.displayName=S9;var w9="MenubarSubContent",T9=F.forwardRef((n,e)=>{const{__scopeMenubar:t,...i}=n,r=xs(t);return q.jsx(lz,{...r,"data-radix-menubar-content":"",...i,ref:e,style:{...n.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});T9.displayName=w9;function M9(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var A9=fz,C9=hz,R9=pz,O9=mz,D9=gz,N9=vz;const L9=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I9=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),DN=n=>{const e=I9(n);return e.charAt(0).toUpperCase()+e.slice(1)},yz=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),U9=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var P9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const z9=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:s,...o},c)=>F.createElement("svg",{ref:c,...P9,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:yz("lucide",r),...!a&&!U9(o)&&{"aria-hidden":"true"},...o},[...s.map(([f,p])=>F.createElement(f,p)),...Array.isArray(a)?a:[a]]));const Na=(n,e)=>{const t=F.forwardRef(({className:i,...r},a)=>F.createElement(z9,{ref:a,iconNode:e,className:yz(`lucide-${L9(DN(n))}`,`lucide-${n}`,i),...r}));return t.displayName=DN(n),t};const B9=[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]],k9=Na("anchor",B9);const F9=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],_z=Na("box",F9);const H9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bz=Na("check",H9);const j9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xz=Na("chevron-down",j9);const V9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],G9=Na("chevron-up",V9);const Y9=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],ld=Na("chevrons-up-down",Y9);const W9=[["path",{d:"M14.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"16lz6z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 13.1a2 2 0 0 0-1 1.76v3.24a2 2 0 0 0 .97 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01Z",key:"99pj1s"}],["path",{d:"M7 17v5",key:"1yj1jh"}],["path",{d:"M11.7 14.2 7 17l-4.7-2.8",key:"1yk8tc"}]],Z9=Na("file-box",W9);const X9=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],q9=Na("grip-vertical",X9);const K9=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$9=Na("layers",K9);const Q9=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],J9=Na("mouse-pointer",Q9);const eY=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],tY=Na("move-3d",eY);const nY=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],Sz=Na("package-plus",nY);const iY=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],rY=Na("refresh-ccw",iY);const aY=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],sY=Na("route",aY);const oY=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],lY=Na("sliders-horizontal",oY);const cY=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ez=Na("trash",cY);const uY=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],fY=Na("wrench",uY);function wz(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=wz(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Tz(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=wz(n))&&(i&&(i+=" "),i+=e);return i}const QR="-",dY=n=>{const e=pY(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:s=>{const o=s.split(QR);return o[0]===""&&o.length!==1&&o.shift(),Mz(o,e)||hY(s)},getConflictingClassGroupIds:(s,o)=>{const c=t[s]||[];return o&&i[s]?[...c,...i[s]]:c}}},Mz=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),r=i?Mz(n.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const a=n.join(QR);return e.validators.find(({validator:s})=>s(a))?.classGroupId},NN=/^\[(.+)\]$/,hY=n=>{if(NN.test(n)){const e=NN.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},pY=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const r in t)fC(t[r],i,r,e);return i},fC=(n,e,t,i)=>{n.forEach(r=>{if(typeof r=="string"){const a=r===""?e:LN(e,r);a.classGroupId=t;return}if(typeof r=="function"){if(mY(r)){fC(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([a,s])=>{fC(s,LN(e,a),t,i)})})},LN=(n,e)=>{let t=n;return e.split(QR).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},mY=n=>n.isThemeGetter,gY=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const r=(a,s)=>{t.set(a,s),e++,e>n&&(e=0,i=t,t=new Map)};return{get(a){let s=t.get(a);if(s!==void 0)return s;if((s=i.get(a))!==void 0)return r(a,s),s},set(a,s){t.has(a)?t.set(a,s):r(a,s)}}},dC="!",hC=":",vY=hC.length,yY=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=r=>{const a=[];let s=0,o=0,c=0,f;for(let _=0;_<r.length;_++){let b=r[_];if(s===0&&o===0){if(b===hC){a.push(r.slice(c,_)),c=_+vY;continue}if(b==="/"){f=_;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const p=a.length===0?r:r.substring(c),d=_Y(p),m=d!==p,v=f&&f>c?f-c:void 0;return{modifiers:a,hasImportantModifier:m,baseClassName:d,maybePostfixModifierPosition:v}};if(e){const r=e+hC,a=i;i=s=>s.startsWith(r)?a(s.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const r=i;i=a=>t({className:a,parseClassName:r})}return i},_Y=n=>n.endsWith(dC)?n.substring(0,n.length-1):n.startsWith(dC)?n.substring(1):n,bY=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const r=[];let a=[];return i.forEach(s=>{s[0]==="["||e[s]?(r.push(...a.sort(),s),a=[]):a.push(s)}),r.push(...a.sort()),r}},xY=n=>({cache:gY(n.cacheSize),parseClassName:yY(n),sortModifiers:bY(n),...dY(n)}),SY=/\s+/,EY=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:a}=e,s=[],o=n.trim().split(SY);let c="";for(let f=o.length-1;f>=0;f-=1){const p=o[f],{isExternal:d,modifiers:m,hasImportantModifier:v,baseClassName:_,maybePostfixModifierPosition:b}=t(p);if(d){c=p+(c.length>0?" "+c:c);continue}let S=!!b,x=i(S?_.substring(0,b):_);if(!x){if(!S){c=p+(c.length>0?" "+c:c);continue}if(x=i(_),!x){c=p+(c.length>0?" "+c:c);continue}S=!1}const T=a(m).join(":"),M=v?T+dC:T,A=M+x;if(s.includes(A))continue;s.push(A);const D=r(x,S);for(let O=0;O<D.length;++O){const I=D[O];s.push(M+I)}c=p+(c.length>0?" "+c:c)}return c};function wY(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Az(e))&&(i&&(i+=" "),i+=t);return i}const Az=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=Az(n[i]))&&(t&&(t+=" "),t+=e);return t};function TY(n,...e){let t,i,r,a=s;function s(c){const f=e.reduce((p,d)=>d(p),n());return t=xY(f),i=t.cache.get,r=t.cache.set,a=o,o(c)}function o(c){const f=i(c);if(f)return f;const p=EY(c,t);return r(c,p),p}return function(){return a(wY.apply(null,arguments))}}const Vr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Cz=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Rz=/^\((?:(\w[\w-]*):)?(.+)\)$/i,MY=/^\d+\/\d+$/,AY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,OY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lm=n=>MY.test(n),Pn=n=>!!n&&!Number.isNaN(Number(n)),Pf=n=>!!n&&Number.isInteger(Number(n)),QT=n=>n.endsWith("%")&&Pn(n.slice(0,-1)),bu=n=>AY.test(n),NY=()=>!0,LY=n=>CY.test(n)&&!RY.test(n),Oz=()=>!1,IY=n=>OY.test(n),UY=n=>DY.test(n),PY=n=>!jt(n)&&!Vt(n),zY=n=>sv(n,Lz,Oz),jt=n=>Cz.test(n),_h=n=>sv(n,Iz,LY),JT=n=>sv(n,jY,Pn),IN=n=>sv(n,Dz,Oz),BY=n=>sv(n,Nz,UY),gx=n=>sv(n,Uz,IY),Vt=n=>Rz.test(n),Iy=n=>ov(n,Iz),kY=n=>ov(n,VY),UN=n=>ov(n,Dz),FY=n=>ov(n,Lz),HY=n=>ov(n,Nz),vx=n=>ov(n,Uz,!0),sv=(n,e,t)=>{const i=Cz.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},ov=(n,e,t=!1)=>{const i=Rz.exec(n);return i?i[1]?e(i[1]):t:!1},Dz=n=>n==="position"||n==="percentage",Nz=n=>n==="image"||n==="url",Lz=n=>n==="length"||n==="size"||n==="bg-size",Iz=n=>n==="length",jY=n=>n==="number",VY=n=>n==="family-name",Uz=n=>n==="shadow",GY=()=>{const n=Vr("color"),e=Vr("font"),t=Vr("text"),i=Vr("font-weight"),r=Vr("tracking"),a=Vr("leading"),s=Vr("breakpoint"),o=Vr("container"),c=Vr("spacing"),f=Vr("radius"),p=Vr("shadow"),d=Vr("inset-shadow"),m=Vr("text-shadow"),v=Vr("drop-shadow"),_=Vr("blur"),b=Vr("perspective"),S=Vr("aspect"),x=Vr("ease"),T=Vr("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...A(),Vt,jt],O=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],U=()=>[Vt,jt,c],N=()=>[Lm,"full","auto",...U()],L=()=>[Pf,"none","subgrid",Vt,jt],Y=()=>["auto",{span:["full",Pf,Vt,jt]},Pf,Vt,jt],ee=()=>[Pf,"auto",Vt,jt],se=()=>["auto","min","max","fr",Vt,jt],he=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],de=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...U()],B=()=>[Lm,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...U()],V=()=>[n,Vt,jt],ae=()=>[...A(),UN,IN,{position:[Vt,jt]}],X=()=>["no-repeat",{repeat:["","x","y","space","round"]}],oe=()=>["auto","cover","contain",FY,zY,{size:[Vt,jt]}],me=()=>[QT,Iy,_h],J=()=>["","none","full",f,Vt,jt],le=()=>["",Pn,Iy,_h],Se=()=>["solid","dashed","dotted","double"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[Pn,QT,UN,IN],ge=()=>["","none",_,Vt,jt],Ae=()=>["none",Pn,Vt,jt],Pe=()=>["none",Pn,Vt,jt],We=()=>[Pn,Vt,jt],it=()=>[Lm,"full",...U()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[bu],breakpoint:[bu],color:[NY],container:[bu],"drop-shadow":[bu],ease:["in","out","in-out"],font:[PY],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[bu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[bu],shadow:[bu],spacing:["px",Pn],text:[bu],"text-shadow":[bu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Lm,jt,Vt,S]}],container:["container"],columns:[{columns:[Pn,jt,Vt,o]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Pf,"auto",Vt,jt]}],basis:[{basis:[Lm,"full","auto",o,...U()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Pn,Lm,"auto","initial","none",jt]}],grow:[{grow:["",Pn,Vt,jt]}],shrink:[{shrink:["",Pn,Vt,jt]}],order:[{order:[Pf,"first","last","none",Vt,jt]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":se()}],"auto-rows":[{"auto-rows":se()}],gap:[{gap:U()}],"gap-x":[{"gap-x":U()}],"gap-y":[{"gap-y":U()}],"justify-content":[{justify:[...he(),"normal"]}],"justify-items":[{"justify-items":[...de(),"normal"]}],"justify-self":[{"justify-self":["auto",...de()]}],"align-content":[{content:["normal",...he()]}],"align-items":[{items:[...de(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...de(),{baseline:["","last"]}]}],"place-content":[{"place-content":he()}],"place-items":[{"place-items":[...de(),"baseline"]}],"place-self":[{"place-self":["auto",...de()]}],p:[{p:U()}],px:[{px:U()}],py:[{py:U()}],ps:[{ps:U()}],pe:[{pe:U()}],pt:[{pt:U()}],pr:[{pr:U()}],pb:[{pb:U()}],pl:[{pl:U()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":U()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":U()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[o,"screen",...B()]}],"min-w":[{"min-w":[o,"screen","none",...B()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",t,Iy,_h]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Vt,JT]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",QT,jt]}],"font-family":[{font:[kY,jt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Vt,jt]}],"line-clamp":[{"line-clamp":[Pn,"none",Vt,JT]}],leading:[{leading:[a,...U()]}],"list-image":[{"list-image":["none",Vt,jt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Vt,jt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Se(),"wavy"]}],"text-decoration-thickness":[{decoration:[Pn,"from-font","auto",Vt,_h]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[Pn,"auto",Vt,jt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vt,jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vt,jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:X()}],"bg-size":[{bg:oe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pf,Vt,jt],radial:["",Vt,jt],conic:[Pf,Vt,jt]},HY,BY]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:me()}],"gradient-via-pos":[{via:me()}],"gradient-to-pos":[{to:me()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:J()}],"rounded-s":[{"rounded-s":J()}],"rounded-e":[{"rounded-e":J()}],"rounded-t":[{"rounded-t":J()}],"rounded-r":[{"rounded-r":J()}],"rounded-b":[{"rounded-b":J()}],"rounded-l":[{"rounded-l":J()}],"rounded-ss":[{"rounded-ss":J()}],"rounded-se":[{"rounded-se":J()}],"rounded-ee":[{"rounded-ee":J()}],"rounded-es":[{"rounded-es":J()}],"rounded-tl":[{"rounded-tl":J()}],"rounded-tr":[{"rounded-tr":J()}],"rounded-br":[{"rounded-br":J()}],"rounded-bl":[{"rounded-bl":J()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Se(),"hidden","none"]}],"divide-style":[{divide:[...Se(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...Se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Pn,Vt,jt]}],"outline-w":[{outline:["",Pn,Iy,_h]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",p,vx,gx]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",d,vx,gx]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[Pn,_h]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",m,vx,gx]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[Pn,Vt,jt]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Pn]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[Vt,jt]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Pn]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:X()}],"mask-size":[{mask:oe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Vt,jt]}],filter:[{filter:["","none",Vt,jt]}],blur:[{blur:ge()}],brightness:[{brightness:[Pn,Vt,jt]}],contrast:[{contrast:[Pn,Vt,jt]}],"drop-shadow":[{"drop-shadow":["","none",v,vx,gx]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",Pn,Vt,jt]}],"hue-rotate":[{"hue-rotate":[Pn,Vt,jt]}],invert:[{invert:["",Pn,Vt,jt]}],saturate:[{saturate:[Pn,Vt,jt]}],sepia:[{sepia:["",Pn,Vt,jt]}],"backdrop-filter":[{"backdrop-filter":["","none",Vt,jt]}],"backdrop-blur":[{"backdrop-blur":ge()}],"backdrop-brightness":[{"backdrop-brightness":[Pn,Vt,jt]}],"backdrop-contrast":[{"backdrop-contrast":[Pn,Vt,jt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Pn,Vt,jt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Pn,Vt,jt]}],"backdrop-invert":[{"backdrop-invert":["",Pn,Vt,jt]}],"backdrop-opacity":[{"backdrop-opacity":[Pn,Vt,jt]}],"backdrop-saturate":[{"backdrop-saturate":[Pn,Vt,jt]}],"backdrop-sepia":[{"backdrop-sepia":["",Pn,Vt,jt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":U()}],"border-spacing-x":[{"border-spacing-x":U()}],"border-spacing-y":[{"border-spacing-y":U()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Vt,jt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Pn,"initial",Vt,jt]}],ease:[{ease:["linear","initial",x,Vt,jt]}],delay:[{delay:[Pn,Vt,jt]}],animate:[{animate:["none",T,Vt,jt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Vt,jt]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:Ae()}],"rotate-x":[{"rotate-x":Ae()}],"rotate-y":[{"rotate-y":Ae()}],"rotate-z":[{"rotate-z":Ae()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:We()}],"skew-x":[{"skew-x":We()}],"skew-y":[{"skew-y":We()}],transform:[{transform:[Vt,jt,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:it()}],"translate-x":[{"translate-x":it()}],"translate-y":[{"translate-y":it()}],"translate-z":[{"translate-z":it()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vt,jt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vt,jt]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[Pn,Iy,_h,JT]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},YY=TY(GY);function Zi(...n){return YY(Tz(n))}function WY({className:n,...e}){return q.jsx(A9,{"data-slot":"menubar",className:Zi("bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",n),...e})}function ZY({...n}){return q.jsx(C9,{"data-slot":"menubar-menu",...n})}function XY({...n}){return q.jsx(O9,{"data-slot":"menubar-portal",...n})}function qY({className:n,...e}){return q.jsx(R9,{"data-slot":"menubar-trigger",className:Zi("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",n),...e})}function KY({className:n,align:e="start",alignOffset:t=-4,sideOffset:i=8,...r}){return q.jsx(XY,{children:q.jsx(D9,{"data-slot":"menubar-content",align:e,alignOffset:t,sideOffset:i,className:Zi("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",n),...r})})}function PN({className:n,inset:e,variant:t="default",...i}){return q.jsx(N9,{"data-slot":"menubar-item","data-inset":e,"data-variant":t,className:Zi("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...i})}var eM={},Uy={},zN;function $Y(){if(zN)return Uy;zN=1,Uy.byteLength=o,Uy.toByteArray=f,Uy.fromByteArray=m;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=i.length;r<a;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(v){var _=v.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=v.indexOf("=");b===-1&&(b=_);var S=b===_?0:4-b%4;return[b,S]}function o(v){var _=s(v),b=_[0],S=_[1];return(b+S)*3/4-S}function c(v,_,b){return(_+b)*3/4-b}function f(v){var _,b=s(v),S=b[0],x=b[1],T=new t(c(v,S,x)),M=0,A=x>0?S-4:S,D;for(D=0;D<A;D+=4)_=e[v.charCodeAt(D)]<<18|e[v.charCodeAt(D+1)]<<12|e[v.charCodeAt(D+2)]<<6|e[v.charCodeAt(D+3)],T[M++]=_>>16&255,T[M++]=_>>8&255,T[M++]=_&255;return x===2&&(_=e[v.charCodeAt(D)]<<2|e[v.charCodeAt(D+1)]>>4,T[M++]=_&255),x===1&&(_=e[v.charCodeAt(D)]<<10|e[v.charCodeAt(D+1)]<<4|e[v.charCodeAt(D+2)]>>2,T[M++]=_>>8&255,T[M++]=_&255),T}function p(v){return n[v>>18&63]+n[v>>12&63]+n[v>>6&63]+n[v&63]}function d(v,_,b){for(var S,x=[],T=_;T<b;T+=3)S=(v[T]<<16&16711680)+(v[T+1]<<8&65280)+(v[T+2]&255),x.push(p(S));return x.join("")}function m(v){for(var _,b=v.length,S=b%3,x=[],T=16383,M=0,A=b-S;M<A;M+=T)x.push(d(v,M,M+T>A?A:M+T));return S===1?(_=v[b-1],x.push(n[_>>2]+n[_<<4&63]+"==")):S===2&&(_=(v[b-2]<<8)+v[b-1],x.push(n[_>>10]+n[_>>4&63]+n[_<<2&63]+"=")),x.join("")}return Uy}var yx={};var BN;function QY(){return BN||(BN=1,yx.read=function(n,e,t,i,r){var a,s,o=r*8-i-1,c=(1<<o)-1,f=c>>1,p=-7,d=t?r-1:0,m=t?-1:1,v=n[e+d];for(d+=m,a=v&(1<<-p)-1,v>>=-p,p+=o;p>0;a=a*256+n[e+d],d+=m,p-=8);for(s=a&(1<<-p)-1,a>>=-p,p+=i;p>0;s=s*256+n[e+d],d+=m,p-=8);if(a===0)a=1-f;else{if(a===c)return s?NaN:(v?-1:1)*(1/0);s=s+Math.pow(2,i),a=a-f}return(v?-1:1)*s*Math.pow(2,a-i)},yx.write=function(n,e,t,i,r,a){var s,o,c,f=a*8-r-1,p=(1<<f)-1,d=p>>1,m=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=i?0:a-1,_=i?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+d>=1?e+=m/c:e+=m*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=p?(o=0,s=p):s+d>=1?(o=(e*c-1)*Math.pow(2,r),s=s+d):(o=e*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;n[t+v]=o&255,v+=_,o/=256,r-=8);for(s=s<<r|o,f+=r;f>0;n[t+v]=s&255,v+=_,s/=256,f-=8);n[t+v-_]|=b*128}),yx}var kN;function JY(){return kN||(kN=1,(function(n){const e=$Y(),t=QY(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=T,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=a(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const ne=new Uint8Array(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,Uint8Array.prototype),Object.setPrototypeOf(ne,H),ne.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function s(ne){if(ne>r)throw new RangeError('The value "'+ne+'" is invalid for option "size"');const H=new Uint8Array(ne);return Object.setPrototypeOf(H,o.prototype),H}function o(ne,H,Z){if(typeof ne=="number"){if(typeof H=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(ne)}return c(ne,H,Z)}o.poolSize=8192;function c(ne,H,Z){if(typeof ne=="string")return m(ne,H);if(ArrayBuffer.isView(ne))return _(ne);if(ne==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ne);if(K(ne,ArrayBuffer)||ne&&K(ne.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(K(ne,SharedArrayBuffer)||ne&&K(ne.buffer,SharedArrayBuffer)))return b(ne,H,Z);if(typeof ne=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ye=ne.valueOf&&ne.valueOf();if(ye!=null&&ye!==ne)return o.from(ye,H,Z);const Oe=S(ne);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ne[Symbol.toPrimitive]=="function")return o.from(ne[Symbol.toPrimitive]("string"),H,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ne)}o.from=function(ne,H,Z){return c(ne,H,Z)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function f(ne){if(typeof ne!="number")throw new TypeError('"size" argument must be of type number');if(ne<0)throw new RangeError('The value "'+ne+'" is invalid for option "size"')}function p(ne,H,Z){return f(ne),ne<=0?s(ne):H!==void 0?typeof Z=="string"?s(ne).fill(H,Z):s(ne).fill(H):s(ne)}o.alloc=function(ne,H,Z){return p(ne,H,Z)};function d(ne){return f(ne),s(ne<0?0:x(ne)|0)}o.allocUnsafe=function(ne){return d(ne)},o.allocUnsafeSlow=function(ne){return d(ne)};function m(ne,H){if((typeof H!="string"||H==="")&&(H="utf8"),!o.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const Z=M(ne,H)|0;let ye=s(Z);const Oe=ye.write(ne,H);return Oe!==Z&&(ye=ye.slice(0,Oe)),ye}function v(ne){const H=ne.length<0?0:x(ne.length)|0,Z=s(H);for(let ye=0;ye<H;ye+=1)Z[ye]=ne[ye]&255;return Z}function _(ne){if(K(ne,Uint8Array)){const H=new Uint8Array(ne);return b(H.buffer,H.byteOffset,H.byteLength)}return v(ne)}function b(ne,H,Z){if(H<0||ne.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(ne.byteLength<H+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let ye;return H===void 0&&Z===void 0?ye=new Uint8Array(ne):Z===void 0?ye=new Uint8Array(ne,H):ye=new Uint8Array(ne,H,Z),Object.setPrototypeOf(ye,o.prototype),ye}function S(ne){if(o.isBuffer(ne)){const H=x(ne.length)|0,Z=s(H);return Z.length===0||ne.copy(Z,0,0,H),Z}if(ne.length!==void 0)return typeof ne.length!="number"||j(ne.length)?s(0):v(ne);if(ne.type==="Buffer"&&Array.isArray(ne.data))return v(ne.data)}function x(ne){if(ne>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return ne|0}function T(ne){return+ne!=ne&&(ne=0),o.alloc(+ne)}o.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==o.prototype},o.compare=function(H,Z){if(K(H,Uint8Array)&&(H=o.from(H,H.offset,H.byteLength)),K(Z,Uint8Array)&&(Z=o.from(Z,Z.offset,Z.byteLength)),!o.isBuffer(H)||!o.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===Z)return 0;let ye=H.length,Oe=Z.length;for(let Be=0,Ue=Math.min(ye,Oe);Be<Ue;++Be)if(H[Be]!==Z[Be]){ye=H[Be],Oe=Z[Be];break}return ye<Oe?-1:Oe<ye?1:0},o.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(H,Z){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return o.alloc(0);let ye;if(Z===void 0)for(Z=0,ye=0;ye<H.length;++ye)Z+=H[ye].length;const Oe=o.allocUnsafe(Z);let Be=0;for(ye=0;ye<H.length;++ye){let Ue=H[ye];if(K(Ue,Uint8Array))Be+Ue.length>Oe.length?(o.isBuffer(Ue)||(Ue=o.from(Ue)),Ue.copy(Oe,Be)):Uint8Array.prototype.set.call(Oe,Ue,Be);else if(o.isBuffer(Ue))Ue.copy(Oe,Be);else throw new TypeError('"list" argument must be an Array of Buffers');Be+=Ue.length}return Oe};function M(ne,H){if(o.isBuffer(ne))return ne.length;if(ArrayBuffer.isView(ne)||K(ne,ArrayBuffer))return ne.byteLength;if(typeof ne!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ne);const Z=ne.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&Z===0)return 0;let Oe=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return Ce(ne).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return ie(ne).length;default:if(Oe)return ye?-1:Ce(ne).length;H=(""+H).toLowerCase(),Oe=!0}}o.byteLength=M;function A(ne,H,Z){let ye=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,H>>>=0,Z<=H))return"";for(ne||(ne="utf8");;)switch(ne){case"hex":return ae(this,H,Z);case"utf8":case"utf-8":return he(this,H,Z);case"ascii":return B(this,H,Z);case"latin1":case"binary":return V(this,H,Z);case"base64":return se(this,H,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,H,Z);default:if(ye)throw new TypeError("Unknown encoding: "+ne);ne=(ne+"").toLowerCase(),ye=!0}}o.prototype._isBuffer=!0;function D(ne,H,Z){const ye=ne[H];ne[H]=ne[Z],ne[Z]=ye}o.prototype.swap16=function(){const H=this.length;if(H%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<H;Z+=2)D(this,Z,Z+1);return this},o.prototype.swap32=function(){const H=this.length;if(H%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<H;Z+=4)D(this,Z,Z+3),D(this,Z+1,Z+2);return this},o.prototype.swap64=function(){const H=this.length;if(H%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<H;Z+=8)D(this,Z,Z+7),D(this,Z+1,Z+6),D(this,Z+2,Z+5),D(this,Z+3,Z+4);return this},o.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?he(this,0,H):A.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(H){if(!o.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:o.compare(this,H)===0},o.prototype.inspect=function(){let H="";const Z=n.INSPECT_MAX_BYTES;return H=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(H+=" ... "),"<Buffer "+H+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(H,Z,ye,Oe,Be){if(K(H,Uint8Array)&&(H=o.from(H,H.offset,H.byteLength)),!o.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(Z===void 0&&(Z=0),ye===void 0&&(ye=H?H.length:0),Oe===void 0&&(Oe=0),Be===void 0&&(Be=this.length),Z<0||ye>H.length||Oe<0||Be>this.length)throw new RangeError("out of range index");if(Oe>=Be&&Z>=ye)return 0;if(Oe>=Be)return-1;if(Z>=ye)return 1;if(Z>>>=0,ye>>>=0,Oe>>>=0,Be>>>=0,this===H)return 0;let Ue=Be-Oe,pt=ye-Z;const St=Math.min(Ue,pt),_e=this.slice(Oe,Be),Ve=H.slice(Z,ye);for(let nt=0;nt<St;++nt)if(_e[nt]!==Ve[nt]){Ue=_e[nt],pt=Ve[nt];break}return Ue<pt?-1:pt<Ue?1:0};function O(ne,H,Z,ye,Oe){if(ne.length===0)return-1;if(typeof Z=="string"?(ye=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,j(Z)&&(Z=Oe?0:ne.length-1),Z<0&&(Z=ne.length+Z),Z>=ne.length){if(Oe)return-1;Z=ne.length-1}else if(Z<0)if(Oe)Z=0;else return-1;if(typeof H=="string"&&(H=o.from(H,ye)),o.isBuffer(H))return H.length===0?-1:I(ne,H,Z,ye,Oe);if(typeof H=="number")return H=H&255,typeof Uint8Array.prototype.indexOf=="function"?Oe?Uint8Array.prototype.indexOf.call(ne,H,Z):Uint8Array.prototype.lastIndexOf.call(ne,H,Z):I(ne,[H],Z,ye,Oe);throw new TypeError("val must be string, number or Buffer")}function I(ne,H,Z,ye,Oe){let Be=1,Ue=ne.length,pt=H.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(ne.length<2||H.length<2)return-1;Be=2,Ue/=2,pt/=2,Z/=2}function St(Ve,nt){return Be===1?Ve[nt]:Ve.readUInt16BE(nt*Be)}let _e;if(Oe){let Ve=-1;for(_e=Z;_e<Ue;_e++)if(St(ne,_e)===St(H,Ve===-1?0:_e-Ve)){if(Ve===-1&&(Ve=_e),_e-Ve+1===pt)return Ve*Be}else Ve!==-1&&(_e-=_e-Ve),Ve=-1}else for(Z+pt>Ue&&(Z=Ue-pt),_e=Z;_e>=0;_e--){let Ve=!0;for(let nt=0;nt<pt;nt++)if(St(ne,_e+nt)!==St(H,nt)){Ve=!1;break}if(Ve)return _e}return-1}o.prototype.includes=function(H,Z,ye){return this.indexOf(H,Z,ye)!==-1},o.prototype.indexOf=function(H,Z,ye){return O(this,H,Z,ye,!0)},o.prototype.lastIndexOf=function(H,Z,ye){return O(this,H,Z,ye,!1)};function U(ne,H,Z,ye){Z=Number(Z)||0;const Oe=ne.length-Z;ye?(ye=Number(ye),ye>Oe&&(ye=Oe)):ye=Oe;const Be=H.length;ye>Be/2&&(ye=Be/2);let Ue;for(Ue=0;Ue<ye;++Ue){const pt=parseInt(H.substr(Ue*2,2),16);if(j(pt))return Ue;ne[Z+Ue]=pt}return Ue}function N(ne,H,Z,ye){return W(Ce(H,ne.length-Z),ne,Z,ye)}function L(ne,H,Z,ye){return W(ce(H),ne,Z,ye)}function Y(ne,H,Z,ye){return W(ie(H),ne,Z,ye)}function ee(ne,H,Z,ye){return W(pe(H,ne.length-Z),ne,Z,ye)}o.prototype.write=function(H,Z,ye,Oe){if(Z===void 0)Oe="utf8",ye=this.length,Z=0;else if(ye===void 0&&typeof Z=="string")Oe=Z,ye=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(ye)?(ye=ye>>>0,Oe===void 0&&(Oe="utf8")):(Oe=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Be=this.length-Z;if((ye===void 0||ye>Be)&&(ye=Be),H.length>0&&(ye<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let Ue=!1;for(;;)switch(Oe){case"hex":return U(this,H,Z,ye);case"utf8":case"utf-8":return N(this,H,Z,ye);case"ascii":case"latin1":case"binary":return L(this,H,Z,ye);case"base64":return Y(this,H,Z,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,H,Z,ye);default:if(Ue)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),Ue=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(ne,H,Z){return H===0&&Z===ne.length?e.fromByteArray(ne):e.fromByteArray(ne.slice(H,Z))}function he(ne,H,Z){Z=Math.min(ne.length,Z);const ye=[];let Oe=H;for(;Oe<Z;){const Be=ne[Oe];let Ue=null,pt=Be>239?4:Be>223?3:Be>191?2:1;if(Oe+pt<=Z){let St,_e,Ve,nt;switch(pt){case 1:Be<128&&(Ue=Be);break;case 2:St=ne[Oe+1],(St&192)===128&&(nt=(Be&31)<<6|St&63,nt>127&&(Ue=nt));break;case 3:St=ne[Oe+1],_e=ne[Oe+2],(St&192)===128&&(_e&192)===128&&(nt=(Be&15)<<12|(St&63)<<6|_e&63,nt>2047&&(nt<55296||nt>57343)&&(Ue=nt));break;case 4:St=ne[Oe+1],_e=ne[Oe+2],Ve=ne[Oe+3],(St&192)===128&&(_e&192)===128&&(Ve&192)===128&&(nt=(Be&15)<<18|(St&63)<<12|(_e&63)<<6|Ve&63,nt>65535&&nt<1114112&&(Ue=nt))}}Ue===null?(Ue=65533,pt=1):Ue>65535&&(Ue-=65536,ye.push(Ue>>>10&1023|55296),Ue=56320|Ue&1023),ye.push(Ue),Oe+=pt}return P(ye)}const de=4096;function P(ne){const H=ne.length;if(H<=de)return String.fromCharCode.apply(String,ne);let Z="",ye=0;for(;ye<H;)Z+=String.fromCharCode.apply(String,ne.slice(ye,ye+=de));return Z}function B(ne,H,Z){let ye="";Z=Math.min(ne.length,Z);for(let Oe=H;Oe<Z;++Oe)ye+=String.fromCharCode(ne[Oe]&127);return ye}function V(ne,H,Z){let ye="";Z=Math.min(ne.length,Z);for(let Oe=H;Oe<Z;++Oe)ye+=String.fromCharCode(ne[Oe]);return ye}function ae(ne,H,Z){const ye=ne.length;(!H||H<0)&&(H=0),(!Z||Z<0||Z>ye)&&(Z=ye);let Oe="";for(let Be=H;Be<Z;++Be)Oe+=$[ne[Be]];return Oe}function X(ne,H,Z){const ye=ne.slice(H,Z);let Oe="";for(let Be=0;Be<ye.length-1;Be+=2)Oe+=String.fromCharCode(ye[Be]+ye[Be+1]*256);return Oe}o.prototype.slice=function(H,Z){const ye=this.length;H=~~H,Z=Z===void 0?ye:~~Z,H<0?(H+=ye,H<0&&(H=0)):H>ye&&(H=ye),Z<0?(Z+=ye,Z<0&&(Z=0)):Z>ye&&(Z=ye),Z<H&&(Z=H);const Oe=this.subarray(H,Z);return Object.setPrototypeOf(Oe,o.prototype),Oe};function oe(ne,H,Z){if(ne%1!==0||ne<0)throw new RangeError("offset is not uint");if(ne+H>Z)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(H,Z,ye){H=H>>>0,Z=Z>>>0,ye||oe(H,Z,this.length);let Oe=this[H],Be=1,Ue=0;for(;++Ue<Z&&(Be*=256);)Oe+=this[H+Ue]*Be;return Oe},o.prototype.readUintBE=o.prototype.readUIntBE=function(H,Z,ye){H=H>>>0,Z=Z>>>0,ye||oe(H,Z,this.length);let Oe=this[H+--Z],Be=1;for(;Z>0&&(Be*=256);)Oe+=this[H+--Z]*Be;return Oe},o.prototype.readUint8=o.prototype.readUInt8=function(H,Z){return H=H>>>0,Z||oe(H,1,this.length),this[H]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(H,Z){return H=H>>>0,Z||oe(H,2,this.length),this[H]|this[H+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(H,Z){return H=H>>>0,Z||oe(H,2,this.length),this[H]<<8|this[H+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(H,Z){return H=H>>>0,Z||oe(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+this[H+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(H,Z){return H=H>>>0,Z||oe(H,4,this.length),this[H]*16777216+(this[H+1]<<16|this[H+2]<<8|this[H+3])},o.prototype.readBigUInt64LE=Re(function(H){H=H>>>0,te(H,"offset");const Z=this[H],ye=this[H+7];(Z===void 0||ye===void 0)&&xe(H,this.length-8);const Oe=Z+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24,Be=this[++H]+this[++H]*2**8+this[++H]*2**16+ye*2**24;return BigInt(Oe)+(BigInt(Be)<<BigInt(32))}),o.prototype.readBigUInt64BE=Re(function(H){H=H>>>0,te(H,"offset");const Z=this[H],ye=this[H+7];(Z===void 0||ye===void 0)&&xe(H,this.length-8);const Oe=Z*2**24+this[++H]*2**16+this[++H]*2**8+this[++H],Be=this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+ye;return(BigInt(Oe)<<BigInt(32))+BigInt(Be)}),o.prototype.readIntLE=function(H,Z,ye){H=H>>>0,Z=Z>>>0,ye||oe(H,Z,this.length);let Oe=this[H],Be=1,Ue=0;for(;++Ue<Z&&(Be*=256);)Oe+=this[H+Ue]*Be;return Be*=128,Oe>=Be&&(Oe-=Math.pow(2,8*Z)),Oe},o.prototype.readIntBE=function(H,Z,ye){H=H>>>0,Z=Z>>>0,ye||oe(H,Z,this.length);let Oe=Z,Be=1,Ue=this[H+--Oe];for(;Oe>0&&(Be*=256);)Ue+=this[H+--Oe]*Be;return Be*=128,Ue>=Be&&(Ue-=Math.pow(2,8*Z)),Ue},o.prototype.readInt8=function(H,Z){return H=H>>>0,Z||oe(H,1,this.length),this[H]&128?(255-this[H]+1)*-1:this[H]},o.prototype.readInt16LE=function(H,Z){H=H>>>0,Z||oe(H,2,this.length);const ye=this[H]|this[H+1]<<8;return ye&32768?ye|4294901760:ye},o.prototype.readInt16BE=function(H,Z){H=H>>>0,Z||oe(H,2,this.length);const ye=this[H+1]|this[H]<<8;return ye&32768?ye|4294901760:ye},o.prototype.readInt32LE=function(H,Z){return H=H>>>0,Z||oe(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},o.prototype.readInt32BE=function(H,Z){return H=H>>>0,Z||oe(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},o.prototype.readBigInt64LE=Re(function(H){H=H>>>0,te(H,"offset");const Z=this[H],ye=this[H+7];(Z===void 0||ye===void 0)&&xe(H,this.length-8);const Oe=this[H+4]+this[H+5]*2**8+this[H+6]*2**16+(ye<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(Z+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24)}),o.prototype.readBigInt64BE=Re(function(H){H=H>>>0,te(H,"offset");const Z=this[H],ye=this[H+7];(Z===void 0||ye===void 0)&&xe(H,this.length-8);const Oe=(Z<<24)+this[++H]*2**16+this[++H]*2**8+this[++H];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+ye)}),o.prototype.readFloatLE=function(H,Z){return H=H>>>0,Z||oe(H,4,this.length),t.read(this,H,!0,23,4)},o.prototype.readFloatBE=function(H,Z){return H=H>>>0,Z||oe(H,4,this.length),t.read(this,H,!1,23,4)},o.prototype.readDoubleLE=function(H,Z){return H=H>>>0,Z||oe(H,8,this.length),t.read(this,H,!0,52,8)},o.prototype.readDoubleBE=function(H,Z){return H=H>>>0,Z||oe(H,8,this.length),t.read(this,H,!1,52,8)};function me(ne,H,Z,ye,Oe,Be){if(!o.isBuffer(ne))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Oe||H<Be)throw new RangeError('"value" argument is out of bounds');if(Z+ye>ne.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(H,Z,ye,Oe){if(H=+H,Z=Z>>>0,ye=ye>>>0,!Oe){const pt=Math.pow(2,8*ye)-1;me(this,H,Z,ye,pt,0)}let Be=1,Ue=0;for(this[Z]=H&255;++Ue<ye&&(Be*=256);)this[Z+Ue]=H/Be&255;return Z+ye},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(H,Z,ye,Oe){if(H=+H,Z=Z>>>0,ye=ye>>>0,!Oe){const pt=Math.pow(2,8*ye)-1;me(this,H,Z,ye,pt,0)}let Be=ye-1,Ue=1;for(this[Z+Be]=H&255;--Be>=0&&(Ue*=256);)this[Z+Be]=H/Ue&255;return Z+ye},o.prototype.writeUint8=o.prototype.writeUInt8=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,1,255,0),this[Z]=H&255,Z+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,2,65535,0),this[Z]=H&255,this[Z+1]=H>>>8,Z+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,2,65535,0),this[Z]=H>>>8,this[Z+1]=H&255,Z+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,4,4294967295,0),this[Z+3]=H>>>24,this[Z+2]=H>>>16,this[Z+1]=H>>>8,this[Z]=H&255,Z+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,4,4294967295,0),this[Z]=H>>>24,this[Z+1]=H>>>16,this[Z+2]=H>>>8,this[Z+3]=H&255,Z+4};function J(ne,H,Z,ye,Oe){it(H,ye,Oe,ne,Z,7);let Be=Number(H&BigInt(4294967295));ne[Z++]=Be,Be=Be>>8,ne[Z++]=Be,Be=Be>>8,ne[Z++]=Be,Be=Be>>8,ne[Z++]=Be;let Ue=Number(H>>BigInt(32)&BigInt(4294967295));return ne[Z++]=Ue,Ue=Ue>>8,ne[Z++]=Ue,Ue=Ue>>8,ne[Z++]=Ue,Ue=Ue>>8,ne[Z++]=Ue,Z}function le(ne,H,Z,ye,Oe){it(H,ye,Oe,ne,Z,7);let Be=Number(H&BigInt(4294967295));ne[Z+7]=Be,Be=Be>>8,ne[Z+6]=Be,Be=Be>>8,ne[Z+5]=Be,Be=Be>>8,ne[Z+4]=Be;let Ue=Number(H>>BigInt(32)&BigInt(4294967295));return ne[Z+3]=Ue,Ue=Ue>>8,ne[Z+2]=Ue,Ue=Ue>>8,ne[Z+1]=Ue,Ue=Ue>>8,ne[Z]=Ue,Z+8}o.prototype.writeBigUInt64LE=Re(function(H,Z=0){return J(this,H,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Re(function(H,Z=0){return le(this,H,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(H,Z,ye,Oe){if(H=+H,Z=Z>>>0,!Oe){const St=Math.pow(2,8*ye-1);me(this,H,Z,ye,St-1,-St)}let Be=0,Ue=1,pt=0;for(this[Z]=H&255;++Be<ye&&(Ue*=256);)H<0&&pt===0&&this[Z+Be-1]!==0&&(pt=1),this[Z+Be]=(H/Ue>>0)-pt&255;return Z+ye},o.prototype.writeIntBE=function(H,Z,ye,Oe){if(H=+H,Z=Z>>>0,!Oe){const St=Math.pow(2,8*ye-1);me(this,H,Z,ye,St-1,-St)}let Be=ye-1,Ue=1,pt=0;for(this[Z+Be]=H&255;--Be>=0&&(Ue*=256);)H<0&&pt===0&&this[Z+Be+1]!==0&&(pt=1),this[Z+Be]=(H/Ue>>0)-pt&255;return Z+ye},o.prototype.writeInt8=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,1,127,-128),H<0&&(H=255+H+1),this[Z]=H&255,Z+1},o.prototype.writeInt16LE=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,2,32767,-32768),this[Z]=H&255,this[Z+1]=H>>>8,Z+2},o.prototype.writeInt16BE=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,2,32767,-32768),this[Z]=H>>>8,this[Z+1]=H&255,Z+2},o.prototype.writeInt32LE=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,4,2147483647,-2147483648),this[Z]=H&255,this[Z+1]=H>>>8,this[Z+2]=H>>>16,this[Z+3]=H>>>24,Z+4},o.prototype.writeInt32BE=function(H,Z,ye){return H=+H,Z=Z>>>0,ye||me(this,H,Z,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[Z]=H>>>24,this[Z+1]=H>>>16,this[Z+2]=H>>>8,this[Z+3]=H&255,Z+4},o.prototype.writeBigInt64LE=Re(function(H,Z=0){return J(this,H,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Re(function(H,Z=0){return le(this,H,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Se(ne,H,Z,ye,Oe,Be){if(Z+ye>ne.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function Ee(ne,H,Z,ye,Oe){return H=+H,Z=Z>>>0,Oe||Se(ne,H,Z,4),t.write(ne,H,Z,ye,23,4),Z+4}o.prototype.writeFloatLE=function(H,Z,ye){return Ee(this,H,Z,!0,ye)},o.prototype.writeFloatBE=function(H,Z,ye){return Ee(this,H,Z,!1,ye)};function re(ne,H,Z,ye,Oe){return H=+H,Z=Z>>>0,Oe||Se(ne,H,Z,8),t.write(ne,H,Z,ye,52,8),Z+8}o.prototype.writeDoubleLE=function(H,Z,ye){return re(this,H,Z,!0,ye)},o.prototype.writeDoubleBE=function(H,Z,ye){return re(this,H,Z,!1,ye)},o.prototype.copy=function(H,Z,ye,Oe){if(!o.isBuffer(H))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!Oe&&Oe!==0&&(Oe=this.length),Z>=H.length&&(Z=H.length),Z||(Z=0),Oe>0&&Oe<ye&&(Oe=ye),Oe===ye||H.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),H.length-Z<Oe-ye&&(Oe=H.length-Z+ye);const Be=Oe-ye;return this===H&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Z,ye,Oe):Uint8Array.prototype.set.call(H,this.subarray(ye,Oe),Z),Be},o.prototype.fill=function(H,Z,ye,Oe){if(typeof H=="string"){if(typeof Z=="string"?(Oe=Z,Z=0,ye=this.length):typeof ye=="string"&&(Oe=ye,ye=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!o.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(H.length===1){const Ue=H.charCodeAt(0);(Oe==="utf8"&&Ue<128||Oe==="latin1")&&(H=Ue)}}else typeof H=="number"?H=H&255:typeof H=="boolean"&&(H=Number(H));if(Z<0||this.length<Z||this.length<ye)throw new RangeError("Out of range index");if(ye<=Z)return this;Z=Z>>>0,ye=ye===void 0?this.length:ye>>>0,H||(H=0);let Be;if(typeof H=="number")for(Be=Z;Be<ye;++Be)this[Be]=H;else{const Ue=o.isBuffer(H)?H:o.from(H,Oe),pt=Ue.length;if(pt===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Be=0;Be<ye-Z;++Be)this[Be+Z]=Ue[Be%pt]}return this};const ge={};function Ae(ne,H,Z){ge[ne]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ne}]`,this.stack,delete this.name}get code(){return ne}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ne}]: ${this.message}`}}}Ae("ERR_BUFFER_OUT_OF_BOUNDS",function(ne){return ne?`${ne} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ae("ERR_INVALID_ARG_TYPE",function(ne,H){return`The "${ne}" argument must be of type number. Received type ${typeof H}`},TypeError),Ae("ERR_OUT_OF_RANGE",function(ne,H,Z){let ye=`The value of "${ne}" is out of range.`,Oe=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?Oe=Pe(String(Z)):typeof Z=="bigint"&&(Oe=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Oe=Pe(Oe)),Oe+="n"),ye+=` It must be ${H}. Received ${Oe}`,ye},RangeError);function Pe(ne){let H="",Z=ne.length;const ye=ne[0]==="-"?1:0;for(;Z>=ye+4;Z-=3)H=`_${ne.slice(Z-3,Z)}${H}`;return`${ne.slice(0,Z)}${H}`}function We(ne,H,Z){te(H,"offset"),(ne[H]===void 0||ne[H+Z]===void 0)&&xe(H,ne.length-(Z+1))}function it(ne,H,Z,ye,Oe,Be){if(ne>Z||ne<H){const Ue=typeof H=="bigint"?"n":"";let pt;throw H===0||H===BigInt(0)?pt=`>= 0${Ue} and < 2${Ue} ** ${(Be+1)*8}${Ue}`:pt=`>= -(2${Ue} ** ${(Be+1)*8-1}${Ue}) and < 2 ** ${(Be+1)*8-1}${Ue}`,new ge.ERR_OUT_OF_RANGE("value",pt,ne)}We(ye,Oe,Be)}function te(ne,H){if(typeof ne!="number")throw new ge.ERR_INVALID_ARG_TYPE(H,"number",ne)}function xe(ne,H,Z){throw Math.floor(ne)!==ne?(te(ne,Z),new ge.ERR_OUT_OF_RANGE("offset","an integer",ne)):H<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${H}`,ne)}const De=/[^+/0-9A-Za-z-_]/g;function He(ne){if(ne=ne.split("=")[0],ne=ne.trim().replace(De,""),ne.length<2)return"";for(;ne.length%4!==0;)ne=ne+"=";return ne}function Ce(ne,H){H=H||1/0;let Z;const ye=ne.length;let Oe=null;const Be=[];for(let Ue=0;Ue<ye;++Ue){if(Z=ne.charCodeAt(Ue),Z>55295&&Z<57344){if(!Oe){if(Z>56319){(H-=3)>-1&&Be.push(239,191,189);continue}else if(Ue+1===ye){(H-=3)>-1&&Be.push(239,191,189);continue}Oe=Z;continue}if(Z<56320){(H-=3)>-1&&Be.push(239,191,189),Oe=Z;continue}Z=(Oe-55296<<10|Z-56320)+65536}else Oe&&(H-=3)>-1&&Be.push(239,191,189);if(Oe=null,Z<128){if((H-=1)<0)break;Be.push(Z)}else if(Z<2048){if((H-=2)<0)break;Be.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((H-=3)<0)break;Be.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((H-=4)<0)break;Be.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return Be}function ce(ne){const H=[];for(let Z=0;Z<ne.length;++Z)H.push(ne.charCodeAt(Z)&255);return H}function pe(ne,H){let Z,ye,Oe;const Be=[];for(let Ue=0;Ue<ne.length&&!((H-=2)<0);++Ue)Z=ne.charCodeAt(Ue),ye=Z>>8,Oe=Z%256,Be.push(Oe),Be.push(ye);return Be}function ie(ne){return e.toByteArray(He(ne))}function W(ne,H,Z,ye){let Oe;for(Oe=0;Oe<ye&&!(Oe+Z>=H.length||Oe>=ne.length);++Oe)H[Oe+Z]=ne[Oe];return Oe}function K(ne,H){return ne instanceof H||ne!=null&&ne.constructor!=null&&ne.constructor.name!=null&&ne.constructor.name===H.name}function j(ne){return ne!==ne}const $=(function(){const ne="0123456789abcdef",H=new Array(256);for(let Z=0;Z<16;++Z){const ye=Z*16;for(let Oe=0;Oe<16;++Oe)H[ye+Oe]=ne[Z]+ne[Oe]}return H})();function Re(ne){return typeof BigInt>"u"?Ie:ne}function Ie(){throw new Error("BigInt not supported")}})(eM)),eM}var nE=JY();const m_="180",eW={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tW={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Pz=0,pC=1,zz=2,nW=3,Bz=0,L1=1,f0=2,Cl=3,Pu=0,bs=1,jo=2,Nu=0,qh=1,mC=2,gC=3,vC=4,kz=5,ed=100,Fz=101,Hz=102,jz=103,Vz=104,Gz=200,Yz=201,Wz=202,Zz=203,iE=204,rE=205,Xz=206,qz=207,Kz=208,$z=209,Qz=210,Jz=211,eB=212,tB=213,nB=214,aE=0,sE=1,oE=2,ap=3,lE=4,cE=5,uE=6,fE=7,g_=0,iB=1,rB=2,Hc=0,aB=1,sB=2,oB=3,JR=4,lB=5,cB=6,uB=7,yC="attached",fB="detached",I1=300,zu=301,md=302,O0=303,D0=304,lv=306,N0=1e3,Vo=1001,L0=1002,Oa=1003,e2=1004,iW=1004,yg=1005,rW=1005,Er=1006,d0=1007,aW=1007,zc=1008,sW=1008,Wo=1009,t2=1010,n2=1011,Lg=1012,U1=1013,Bu=1014,ys=1015,_p=1016,P1=1017,z1=1018,Ig=1020,i2=35902,r2=35899,a2=1021,s2=1022,Wa=1023,Ug=1026,Pg=1027,B1=1028,v_=1029,o2=1030,k1=1031,oW=1032,F1=1033,h0=33776,p0=33777,m0=33778,g0=33779,dE=35840,hE=35841,pE=35842,mE=35843,gE=36196,vE=37492,yE=37496,_E=37808,bE=37809,xE=37810,SE=37811,EE=37812,wE=37813,TE=37814,ME=37815,AE=37816,CE=37817,RE=37818,OE=37819,DE=37820,NE=37821,LE=36492,IE=36494,UE=36495,PE=36283,zE=36284,BE=36285,kE=36286,dB=2200,hB=2201,pB=2202,I0=2300,FE=2301,US=2302,Yh=2400,Wh=2401,U0=2402,H1=2500,l2=2501,lW=0,cW=1,uW=2,mB=3200,gB=3201,fW=3202,dW=3203,xd=0,vB=1,Ru="",Aa="srgb",gd="srgb-linear",P0="linear",gi="srgb",hW=0,Bh=7680,pW=7681,mW=7682,gW=7683,vW=34055,yW=34056,_W=5386,bW=512,xW=513,SW=514,EW=515,wW=516,TW=517,MW=518,_C=519,yB=512,_B=513,bB=514,c2=515,xB=516,SB=517,EB=518,wB=519,z0=35044,AW=35048,CW=35040,RW=35045,OW=35049,DW=35041,NW=35046,LW=35050,IW=35042,UW="100",bC="300 es",po=2e3,zg=2001,PW={COMPUTE:"compute",RENDER:"render"},zW={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},BW={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Zc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const Va=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let FN=1234567;const Kh=Math.PI/180,Bg=180/Math.PI;function vo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Va[n&255]+Va[n>>8&255]+Va[n>>16&255]+Va[n>>24&255]+"-"+Va[e&255]+Va[e>>8&255]+"-"+Va[e>>16&15|64]+Va[e>>24&255]+"-"+Va[t&63|128]+Va[t>>8&255]+"-"+Va[t>>16&255]+Va[t>>24&255]+Va[i&255]+Va[i>>8&255]+Va[i>>16&255]+Va[i>>24&255]).toLowerCase()}function on(n,e,t){return Math.max(e,Math.min(t,n))}function u2(n,e){return(n%e+e)%e}function kW(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function FW(n,e,t){return n!==e?(t-n)/(e-n):0}function v0(n,e,t){return(1-t)*n+t*e}function HW(n,e,t,i){return v0(n,e,1-Math.exp(-t*i))}function jW(n,e=1){return e-Math.abs(u2(n,e*2)-e)}function VW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function GW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function YW(n,e){return n+Math.floor(Math.random()*(e-n+1))}function WW(n,e){return n+Math.random()*(e-n)}function ZW(n){return n*(.5-Math.random())}function XW(n){n!==void 0&&(FN=n);let e=FN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function qW(n){return n*Kh}function KW(n){return n*Bg}function $W(n){return(n&n-1)===0&&n!==0}function QW(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function JW(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function eZ(n,e,t,i,r){const a=Math.cos,s=Math.sin,o=a(t/2),c=s(t/2),f=a((e+i)/2),p=s((e+i)/2),d=a((e-i)/2),m=s((e-i)/2),v=a((i-e)/2),_=s((i-e)/2);switch(r){case"XYX":n.set(o*p,c*d,c*m,o*f);break;case"YZY":n.set(c*m,o*p,c*d,o*f);break;case"ZXZ":n.set(c*d,c*m,o*p,o*f);break;case"XZX":n.set(o*p,c*_,c*v,o*f);break;case"YXY":n.set(c*v,o*p,c*_,o*f);break;case"ZYZ":n.set(c*_,c*v,o*p,o*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function vs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function En(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const j1={DEG2RAD:Kh,RAD2DEG:Bg,generateUUID:vo,clamp:on,euclideanModulo:u2,mapLinear:kW,inverseLerp:FW,lerp:v0,damp:HW,pingpong:jW,smoothstep:VW,smootherstep:GW,randInt:YW,randFloat:WW,randFloatSpread:ZW,seededRandom:XW,degToRad:qW,radToDeg:KW,isPowerOfTwo:$W,ceilPowerOfTwo:QW,floorPowerOfTwo:JW,setQuaternionFromProperEuler:eZ,normalize:En,denormalize:vs};class _t{constructor(e=0,t=0){_t.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=on(this.x,e.x,t.x),this.y=on(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=on(this.x,e,t),this.y=on(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(on(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(on(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Or{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,s,o){let c=i[r+0],f=i[r+1],p=i[r+2],d=i[r+3];const m=a[s+0],v=a[s+1],_=a[s+2],b=a[s+3];if(o===0){e[t+0]=c,e[t+1]=f,e[t+2]=p,e[t+3]=d;return}if(o===1){e[t+0]=m,e[t+1]=v,e[t+2]=_,e[t+3]=b;return}if(d!==b||c!==m||f!==v||p!==_){let S=1-o;const x=c*m+f*v+p*_+d*b,T=x>=0?1:-1,M=1-x*x;if(M>Number.EPSILON){const D=Math.sqrt(M),O=Math.atan2(D,x*T);S=Math.sin(S*O)/D,o=Math.sin(o*O)/D}const A=o*T;if(c=c*S+m*A,f=f*S+v*A,p=p*S+_*A,d=d*S+b*A,S===1-o){const D=1/Math.sqrt(c*c+f*f+p*p+d*d);c*=D,f*=D,p*=D,d*=D}}e[t]=c,e[t+1]=f,e[t+2]=p,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,a,s){const o=i[r],c=i[r+1],f=i[r+2],p=i[r+3],d=a[s],m=a[s+1],v=a[s+2],_=a[s+3];return e[t]=o*_+p*d+c*v-f*m,e[t+1]=c*_+p*m+f*d-o*v,e[t+2]=f*_+p*v+o*m-c*d,e[t+3]=p*_-o*d-c*m-f*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,f=o(i/2),p=o(r/2),d=o(a/2),m=c(i/2),v=c(r/2),_=c(a/2);switch(s){case"XYZ":this._x=m*p*d+f*v*_,this._y=f*v*d-m*p*_,this._z=f*p*_+m*v*d,this._w=f*p*d-m*v*_;break;case"YXZ":this._x=m*p*d+f*v*_,this._y=f*v*d-m*p*_,this._z=f*p*_-m*v*d,this._w=f*p*d+m*v*_;break;case"ZXY":this._x=m*p*d-f*v*_,this._y=f*v*d+m*p*_,this._z=f*p*_+m*v*d,this._w=f*p*d-m*v*_;break;case"ZYX":this._x=m*p*d-f*v*_,this._y=f*v*d+m*p*_,this._z=f*p*_-m*v*d,this._w=f*p*d+m*v*_;break;case"YZX":this._x=m*p*d+f*v*_,this._y=f*v*d+m*p*_,this._z=f*p*_-m*v*d,this._w=f*p*d-m*v*_;break;case"XZY":this._x=m*p*d-f*v*_,this._y=f*v*d-m*p*_,this._z=f*p*_+m*v*d,this._w=f*p*d+m*v*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],s=t[1],o=t[5],c=t[9],f=t[2],p=t[6],d=t[10],m=i+o+d;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(p-c)*v,this._y=(a-f)*v,this._z=(s-r)*v}else if(i>o&&i>d){const v=2*Math.sqrt(1+i-o-d);this._w=(p-c)/v,this._x=.25*v,this._y=(r+s)/v,this._z=(a+f)/v}else if(o>d){const v=2*Math.sqrt(1+o-i-d);this._w=(a-f)/v,this._x=(r+s)/v,this._y=.25*v,this._z=(c+p)/v}else{const v=2*Math.sqrt(1+d-i-o);this._w=(s-r)/v,this._x=(a+f)/v,this._y=(c+p)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(on(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,s=e._w,o=t._x,c=t._y,f=t._z,p=t._w;return this._x=i*p+s*o+r*f-a*c,this._y=r*p+s*c+a*o-i*f,this._z=a*p+s*f+i*c-r*o,this._w=s*p-i*o-r*c-a*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,a=this._z,s=this._w;let o=s*e._w+i*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=i,this._y=r,this._z=a,this;const c=1-o*o;if(c<=Number.EPSILON){const v=1-t;return this._w=v*s+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*a+t*this._z,this.normalize(),this}const f=Math.sqrt(c),p=Math.atan2(f,o),d=Math.sin((1-t)*p)/f,m=Math.sin(t*p)/f;return this._w=s*d+this._w*m,this._x=i*d+this._x*m,this._y=r*d+this._y*m,this._z=a*d+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ve{constructor(e=0,t=0,i=0){ve.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(HN.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(HN.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,s=e.y,o=e.z,c=e.w,f=2*(s*r-o*i),p=2*(o*t-a*r),d=2*(a*i-s*t);return this.x=t+c*f+s*d-o*p,this.y=i+c*p+o*f-a*d,this.z=r+c*d+a*p-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=on(this.x,e.x,t.x),this.y=on(this.y,e.y,t.y),this.z=on(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=on(this.x,e,t),this.y=on(this.y,e,t),this.z=on(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(on(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,s=t.x,o=t.y,c=t.z;return this.x=r*c-a*o,this.y=a*s-i*c,this.z=i*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return tM.copy(this).projectOnVector(e),this.sub(tM)}reflect(e){return this.sub(tM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(on(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const tM=new ve,HN=new Or;class xn{constructor(e,t,i,r,a,s,o,c,f){xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,o,c,f)}set(e,t,i,r,a,s,o,c,f){const p=this.elements;return p[0]=e,p[1]=r,p[2]=o,p[3]=t,p[4]=a,p[5]=c,p[6]=i,p[7]=s,p[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],o=i[3],c=i[6],f=i[1],p=i[4],d=i[7],m=i[2],v=i[5],_=i[8],b=r[0],S=r[3],x=r[6],T=r[1],M=r[4],A=r[7],D=r[2],O=r[5],I=r[8];return a[0]=s*b+o*T+c*D,a[3]=s*S+o*M+c*O,a[6]=s*x+o*A+c*I,a[1]=f*b+p*T+d*D,a[4]=f*S+p*M+d*O,a[7]=f*x+p*A+d*I,a[2]=m*b+v*T+_*D,a[5]=m*S+v*M+_*O,a[8]=m*x+v*A+_*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],p=e[8];return t*s*p-t*o*f-i*a*p+i*o*c+r*a*f-r*s*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],p=e[8],d=p*s-o*f,m=o*c-p*a,v=f*a-s*c,_=t*d+i*m+r*v;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/_;return e[0]=d*b,e[1]=(r*f-p*i)*b,e[2]=(o*i-r*s)*b,e[3]=m*b,e[4]=(p*t-r*c)*b,e[5]=(r*a-o*t)*b,e[6]=v*b,e[7]=(i*c-f*t)*b,e[8]=(s*t-i*a)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,s,o){const c=Math.cos(a),f=Math.sin(a);return this.set(i*c,i*f,-i*(c*s+f*o)+s+e,-r*f,r*c,-r*(-f*s+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(nM.makeScale(e,t)),this}rotate(e){return this.premultiply(nM.makeRotation(-e)),this}translate(e,t){return this.premultiply(nM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const nM=new xn;function TB(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const tZ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function _g(n,e){return new tZ[n](e)}function B0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function MB(){const n=B0("canvas");return n.style.display="block",n}const jN={};function k0(n){n in jN||(jN[n]=!0,console.warn(n))}function nZ(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}const VN=new xn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),GN=new xn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function iZ(){const n={enabled:!0,workingColorSpace:gd,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===gi&&(r.r=Lu(r.r),r.g=Lu(r.g),r.b=Lu(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===gi&&(r.r=Mg(r.r),r.g=Mg(r.g),r.b=Mg(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ru?P0:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return k0("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return k0("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[gd]:{primaries:e,whitePoint:i,transfer:P0,toXYZ:VN,fromXYZ:GN,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Aa},outputColorSpaceConfig:{drawingBufferColorSpace:Aa}},[Aa]:{primaries:e,whitePoint:i,transfer:gi,toXYZ:VN,fromXYZ:GN,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Aa}}}),n}const qn=iZ();function Lu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Mg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Im;class AB{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Im===void 0&&(Im=B0("canvas")),Im.width=e.width,Im.height=e.height;const r=Im.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Im}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=B0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=Lu(a[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Lu(t[i]/255)*255):t[i]=Lu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let rZ=0;class ad{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rZ++}),this.uuid=vo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(iM(r[s].image)):a.push(iM(r[s]))}else a=iM(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function iM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?AB.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aZ=0;const rM=new ve;class dr extends Zc{constructor(e=dr.DEFAULT_IMAGE,t=dr.DEFAULT_MAPPING,i=Vo,r=Vo,a=Er,s=zc,o=Wa,c=Wo,f=dr.DEFAULT_ANISOTROPY,p=Ru){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aZ++}),this.uuid=vo(),this.name="",this.source=new ad(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=o,this.internalFormat=null,this.type=c,this.offset=new _t(0,0),this.repeat=new _t(1,1),this.center=new _t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(rM).x}get height(){return this.source.getSize(rM).y}get depth(){return this.source.getSize(rM).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==I1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case N0:e.x=e.x-Math.floor(e.x);break;case Vo:e.x=e.x<0?0:1;break;case L0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case N0:e.y=e.y-Math.floor(e.y);break;case Vo:e.y=e.y<0?0:1;break;case L0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}dr.DEFAULT_IMAGE=null;dr.DEFAULT_MAPPING=I1;dr.DEFAULT_ANISOTROPY=1;class mn{constructor(e=0,t=0,i=0,r=1){mn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const c=e.elements,f=c[0],p=c[4],d=c[8],m=c[1],v=c[5],_=c[9],b=c[2],S=c[6],x=c[10];if(Math.abs(p-m)<.01&&Math.abs(d-b)<.01&&Math.abs(_-S)<.01){if(Math.abs(p+m)<.1&&Math.abs(d+b)<.1&&Math.abs(_+S)<.1&&Math.abs(f+v+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(f+1)/2,A=(v+1)/2,D=(x+1)/2,O=(p+m)/4,I=(d+b)/4,U=(_+S)/4;return M>A&&M>D?M<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(M),r=O/i,a=I/i):A>D?A<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(A),i=O/r,a=U/r):D<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(D),i=I/a,r=U/a),this.set(i,r,a,t),this}let T=Math.sqrt((S-_)*(S-_)+(d-b)*(d-b)+(m-p)*(m-p));return Math.abs(T)<.001&&(T=1),this.x=(S-_)/T,this.y=(d-b)/T,this.z=(m-p)/T,this.w=Math.acos((f+v+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=on(this.x,e.x,t.x),this.y=on(this.y,e.y,t.y),this.z=on(this.z,e.z,t.z),this.w=on(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=on(this.x,e,t),this.y=on(this.y,e,t),this.z=on(this.z,e,t),this.w=on(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(on(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class f2 extends Zc{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Er,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new mn(0,0,e,t),this.scissorTest=!1,this.viewport=new mn(0,0,e,t);const r={width:e,height:t,depth:i.depth},a=new dr(r);this.textures=[];const s=i.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Er,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new ad(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Il extends f2{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class V1 extends dr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Oa,this.minFilter=Oa,this.wrapR=Vo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class sZ extends Il{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new V1(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class G1 extends dr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Oa,this.minFilter=Oa,this.wrapR=Vo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oZ extends Il{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new G1(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Hi{constructor(e=new ve(1/0,1/0,1/0),t=new ve(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Sl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Sl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Sl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Sl):Sl.fromBufferAttribute(a,s),Sl.applyMatrix4(e.matrixWorld),this.expandByPoint(Sl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),_x.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),_x.copy(i.boundingBox)),_x.applyMatrix4(e.matrixWorld),this.union(_x)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Sl),Sl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Py),bx.subVectors(this.max,Py),Um.subVectors(e.a,Py),Pm.subVectors(e.b,Py),zm.subVectors(e.c,Py),zf.subVectors(Pm,Um),Bf.subVectors(zm,Pm),bh.subVectors(Um,zm);let t=[0,-zf.z,zf.y,0,-Bf.z,Bf.y,0,-bh.z,bh.y,zf.z,0,-zf.x,Bf.z,0,-Bf.x,bh.z,0,-bh.x,-zf.y,zf.x,0,-Bf.y,Bf.x,0,-bh.y,bh.x,0];return!aM(t,Um,Pm,zm,bx)||(t=[1,0,0,0,1,0,0,0,1],!aM(t,Um,Pm,zm,bx))?!1:(xx.crossVectors(zf,Bf),t=[xx.x,xx.y,xx.z],aM(t,Um,Pm,zm,bx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Sl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Sl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(xu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),xu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),xu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),xu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),xu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),xu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),xu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),xu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(xu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const xu=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve],Sl=new ve,_x=new Hi,Um=new ve,Pm=new ve,zm=new ve,zf=new ve,Bf=new ve,bh=new ve,Py=new ve,bx=new ve,xx=new ve,xh=new ve;function aM(n,e,t,i,r){for(let a=0,s=n.length-3;a<=s;a+=3){xh.fromArray(n,a);const o=r.x*Math.abs(xh.x)+r.y*Math.abs(xh.y)+r.z*Math.abs(xh.z),c=e.dot(xh),f=t.dot(xh),p=i.dot(xh);if(Math.max(-Math.max(c,f,p),Math.min(c,f,p))>o)return!1}return!0}const lZ=new Hi,zy=new ve,sM=new ve;class hr{constructor(e=new ve,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):lZ.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zy.subVectors(e,this.center);const t=zy.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(zy,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(sM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zy.copy(e.center).add(sM)),this.expandByPoint(zy.copy(e.center).sub(sM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Su=new ve,oM=new ve,Sx=new ve,kf=new ve,lM=new ve,Ex=new ve,cM=new ve;class cv{constructor(e=new ve,t=new ve(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Su)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Su.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Su.copy(this.origin).addScaledVector(this.direction,t),Su.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){oM.copy(e).add(t).multiplyScalar(.5),Sx.copy(t).sub(e).normalize(),kf.copy(this.origin).sub(oM);const a=e.distanceTo(t)*.5,s=-this.direction.dot(Sx),o=kf.dot(this.direction),c=-kf.dot(Sx),f=kf.lengthSq(),p=Math.abs(1-s*s);let d,m,v,_;if(p>0)if(d=s*c-o,m=s*o-c,_=a*p,d>=0)if(m>=-_)if(m<=_){const b=1/p;d*=b,m*=b,v=d*(d+s*m+2*o)+m*(s*d+m+2*c)+f}else m=a,d=Math.max(0,-(s*m+o)),v=-d*d+m*(m+2*c)+f;else m=-a,d=Math.max(0,-(s*m+o)),v=-d*d+m*(m+2*c)+f;else m<=-_?(d=Math.max(0,-(-s*a+o)),m=d>0?-a:Math.min(Math.max(-a,-c),a),v=-d*d+m*(m+2*c)+f):m<=_?(d=0,m=Math.min(Math.max(-a,-c),a),v=m*(m+2*c)+f):(d=Math.max(0,-(s*a+o)),m=d>0?a:Math.min(Math.max(-a,-c),a),v=-d*d+m*(m+2*c)+f);else m=s>0?-a:a,d=Math.max(0,-(s*m+o)),v=-d*d+m*(m+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(oM).addScaledVector(Sx,m),v}intersectSphere(e,t){Su.subVectors(e.center,this.origin);const i=Su.dot(this.direction),r=Su.dot(Su)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),o=i-s,c=i+s;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,s,o,c;const f=1/this.direction.x,p=1/this.direction.y,d=1/this.direction.z,m=this.origin;return f>=0?(i=(e.min.x-m.x)*f,r=(e.max.x-m.x)*f):(i=(e.max.x-m.x)*f,r=(e.min.x-m.x)*f),p>=0?(a=(e.min.y-m.y)*p,s=(e.max.y-m.y)*p):(a=(e.max.y-m.y)*p,s=(e.min.y-m.y)*p),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),d>=0?(o=(e.min.z-m.z)*d,c=(e.max.z-m.z)*d):(o=(e.max.z-m.z)*d,c=(e.min.z-m.z)*d),i>c||o>r)||((o>i||i!==i)&&(i=o),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Su)!==null}intersectTriangle(e,t,i,r,a){lM.subVectors(t,e),Ex.subVectors(i,e),cM.crossVectors(lM,Ex);let s=this.direction.dot(cM),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;kf.subVectors(this.origin,e);const c=o*this.direction.dot(Ex.crossVectors(kf,Ex));if(c<0)return null;const f=o*this.direction.dot(lM.cross(kf));if(f<0||c+f>s)return null;const p=-o*kf.dot(cM);return p<0?null:this.at(p/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ft{constructor(e,t,i,r,a,s,o,c,f,p,d,m,v,_,b,S){Ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,o,c,f,p,d,m,v,_,b,S)}set(e,t,i,r,a,s,o,c,f,p,d,m,v,_,b,S){const x=this.elements;return x[0]=e,x[4]=t,x[8]=i,x[12]=r,x[1]=a,x[5]=s,x[9]=o,x[13]=c,x[2]=f,x[6]=p,x[10]=d,x[14]=m,x[3]=v,x[7]=_,x[11]=b,x[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ft().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Bm.setFromMatrixColumn(e,0).length(),a=1/Bm.setFromMatrixColumn(e,1).length(),s=1/Bm.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),o=Math.sin(i),c=Math.cos(r),f=Math.sin(r),p=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const m=s*p,v=s*d,_=o*p,b=o*d;t[0]=c*p,t[4]=-c*d,t[8]=f,t[1]=v+_*f,t[5]=m-b*f,t[9]=-o*c,t[2]=b-m*f,t[6]=_+v*f,t[10]=s*c}else if(e.order==="YXZ"){const m=c*p,v=c*d,_=f*p,b=f*d;t[0]=m+b*o,t[4]=_*o-v,t[8]=s*f,t[1]=s*d,t[5]=s*p,t[9]=-o,t[2]=v*o-_,t[6]=b+m*o,t[10]=s*c}else if(e.order==="ZXY"){const m=c*p,v=c*d,_=f*p,b=f*d;t[0]=m-b*o,t[4]=-s*d,t[8]=_+v*o,t[1]=v+_*o,t[5]=s*p,t[9]=b-m*o,t[2]=-s*f,t[6]=o,t[10]=s*c}else if(e.order==="ZYX"){const m=s*p,v=s*d,_=o*p,b=o*d;t[0]=c*p,t[4]=_*f-v,t[8]=m*f+b,t[1]=c*d,t[5]=b*f+m,t[9]=v*f-_,t[2]=-f,t[6]=o*c,t[10]=s*c}else if(e.order==="YZX"){const m=s*c,v=s*f,_=o*c,b=o*f;t[0]=c*p,t[4]=b-m*d,t[8]=_*d+v,t[1]=d,t[5]=s*p,t[9]=-o*p,t[2]=-f*p,t[6]=v*d+_,t[10]=m-b*d}else if(e.order==="XZY"){const m=s*c,v=s*f,_=o*c,b=o*f;t[0]=c*p,t[4]=-d,t[8]=f*p,t[1]=m*d+b,t[5]=s*p,t[9]=v*d-_,t[2]=_*d-v,t[6]=o*p,t[10]=b*d+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(cZ,e,uZ)}lookAt(e,t,i){const r=this.elements;return oo.subVectors(e,t),oo.lengthSq()===0&&(oo.z=1),oo.normalize(),Ff.crossVectors(i,oo),Ff.lengthSq()===0&&(Math.abs(i.z)===1?oo.x+=1e-4:oo.z+=1e-4,oo.normalize(),Ff.crossVectors(i,oo)),Ff.normalize(),wx.crossVectors(oo,Ff),r[0]=Ff.x,r[4]=wx.x,r[8]=oo.x,r[1]=Ff.y,r[5]=wx.y,r[9]=oo.y,r[2]=Ff.z,r[6]=wx.z,r[10]=oo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],o=i[4],c=i[8],f=i[12],p=i[1],d=i[5],m=i[9],v=i[13],_=i[2],b=i[6],S=i[10],x=i[14],T=i[3],M=i[7],A=i[11],D=i[15],O=r[0],I=r[4],U=r[8],N=r[12],L=r[1],Y=r[5],ee=r[9],se=r[13],he=r[2],de=r[6],P=r[10],B=r[14],V=r[3],ae=r[7],X=r[11],oe=r[15];return a[0]=s*O+o*L+c*he+f*V,a[4]=s*I+o*Y+c*de+f*ae,a[8]=s*U+o*ee+c*P+f*X,a[12]=s*N+o*se+c*B+f*oe,a[1]=p*O+d*L+m*he+v*V,a[5]=p*I+d*Y+m*de+v*ae,a[9]=p*U+d*ee+m*P+v*X,a[13]=p*N+d*se+m*B+v*oe,a[2]=_*O+b*L+S*he+x*V,a[6]=_*I+b*Y+S*de+x*ae,a[10]=_*U+b*ee+S*P+x*X,a[14]=_*N+b*se+S*B+x*oe,a[3]=T*O+M*L+A*he+D*V,a[7]=T*I+M*Y+A*de+D*ae,a[11]=T*U+M*ee+A*P+D*X,a[15]=T*N+M*se+A*B+D*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],s=e[1],o=e[5],c=e[9],f=e[13],p=e[2],d=e[6],m=e[10],v=e[14],_=e[3],b=e[7],S=e[11],x=e[15];return _*(+a*c*d-r*f*d-a*o*m+i*f*m+r*o*v-i*c*v)+b*(+t*c*v-t*f*m+a*s*m-r*s*v+r*f*p-a*c*p)+S*(+t*f*d-t*o*v-a*s*d+i*s*v+a*o*p-i*f*p)+x*(-r*o*p-t*c*d+t*o*m+r*s*d-i*s*m+i*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],p=e[8],d=e[9],m=e[10],v=e[11],_=e[12],b=e[13],S=e[14],x=e[15],T=d*S*f-b*m*f+b*c*v-o*S*v-d*c*x+o*m*x,M=_*m*f-p*S*f-_*c*v+s*S*v+p*c*x-s*m*x,A=p*b*f-_*d*f+_*o*v-s*b*v-p*o*x+s*d*x,D=_*d*c-p*b*c-_*o*m+s*b*m+p*o*S-s*d*S,O=t*T+i*M+r*A+a*D;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/O;return e[0]=T*I,e[1]=(b*m*a-d*S*a-b*r*v+i*S*v+d*r*x-i*m*x)*I,e[2]=(o*S*a-b*c*a+b*r*f-i*S*f-o*r*x+i*c*x)*I,e[3]=(d*c*a-o*m*a-d*r*f+i*m*f+o*r*v-i*c*v)*I,e[4]=M*I,e[5]=(p*S*a-_*m*a+_*r*v-t*S*v-p*r*x+t*m*x)*I,e[6]=(_*c*a-s*S*a-_*r*f+t*S*f+s*r*x-t*c*x)*I,e[7]=(s*m*a-p*c*a+p*r*f-t*m*f-s*r*v+t*c*v)*I,e[8]=A*I,e[9]=(_*d*a-p*b*a-_*i*v+t*b*v+p*i*x-t*d*x)*I,e[10]=(s*b*a-_*o*a+_*i*f-t*b*f-s*i*x+t*o*x)*I,e[11]=(p*o*a-s*d*a-p*i*f+t*d*f+s*i*v-t*o*v)*I,e[12]=D*I,e[13]=(p*b*r-_*d*r+_*i*m-t*b*m-p*i*S+t*d*S)*I,e[14]=(_*o*r-s*b*r-_*i*c+t*b*c+s*i*S-t*o*S)*I,e[15]=(s*d*r-p*o*r+p*i*c-t*d*c-s*i*m+t*o*m)*I,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,s=e.x,o=e.y,c=e.z,f=a*s,p=a*o;return this.set(f*s+i,f*o-r*c,f*c+r*o,0,f*o+r*c,p*o+i,p*c-r*s,0,f*c-r*o,p*c+r*s,a*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,s=t._y,o=t._z,c=t._w,f=a+a,p=s+s,d=o+o,m=a*f,v=a*p,_=a*d,b=s*p,S=s*d,x=o*d,T=c*f,M=c*p,A=c*d,D=i.x,O=i.y,I=i.z;return r[0]=(1-(b+x))*D,r[1]=(v+A)*D,r[2]=(_-M)*D,r[3]=0,r[4]=(v-A)*O,r[5]=(1-(m+x))*O,r[6]=(S+T)*O,r[7]=0,r[8]=(_+M)*I,r[9]=(S-T)*I,r[10]=(1-(m+b))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let a=Bm.set(r[0],r[1],r[2]).length();const s=Bm.set(r[4],r[5],r[6]).length(),o=Bm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],El.copy(this);const f=1/a,p=1/s,d=1/o;return El.elements[0]*=f,El.elements[1]*=f,El.elements[2]*=f,El.elements[4]*=p,El.elements[5]*=p,El.elements[6]*=p,El.elements[8]*=d,El.elements[9]*=d,El.elements[10]*=d,t.setFromRotationMatrix(El),i.x=a,i.y=s,i.z=o,this}makePerspective(e,t,i,r,a,s,o=po,c=!1){const f=this.elements,p=2*a/(t-e),d=2*a/(i-r),m=(t+e)/(t-e),v=(i+r)/(i-r);let _,b;if(c)_=a/(s-a),b=s*a/(s-a);else if(o===po)_=-(s+a)/(s-a),b=-2*s*a/(s-a);else if(o===zg)_=-s/(s-a),b=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return f[0]=p,f[4]=0,f[8]=m,f[12]=0,f[1]=0,f[5]=d,f[9]=v,f[13]=0,f[2]=0,f[6]=0,f[10]=_,f[14]=b,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,i,r,a,s,o=po,c=!1){const f=this.elements,p=2/(t-e),d=2/(i-r),m=-(t+e)/(t-e),v=-(i+r)/(i-r);let _,b;if(c)_=1/(s-a),b=s/(s-a);else if(o===po)_=-2/(s-a),b=-(s+a)/(s-a);else if(o===zg)_=-1/(s-a),b=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return f[0]=p,f[4]=0,f[8]=0,f[12]=m,f[1]=0,f[5]=d,f[9]=0,f[13]=v,f[2]=0,f[6]=0,f[10]=_,f[14]=b,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Bm=new ve,El=new Ft,cZ=new ve(0,0,0),uZ=new ve(1,1,1),Ff=new ve,wx=new ve,oo=new ve,YN=new Ft,WN=new Or;class Fn{constructor(e=0,t=0,i=0,r=Fn.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],o=r[8],c=r[1],f=r[5],p=r[9],d=r[2],m=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(on(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-p,v),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(m,f),this._z=0);break;case"YXZ":this._x=Math.asin(-on(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(o,v),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(on(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-d,v),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-on(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(on(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,f),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,v));break;case"XZY":this._z=Math.asin(-on(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(m,f),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-p,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return YN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(YN,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return WN.setFromEuler(this),this.setFromQuaternion(WN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Fn.DEFAULT_ORDER="XYZ";let kg=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},fZ=0;const ZN=new ve,km=new Or,Eu=new Ft,Tx=new ve,By=new ve,dZ=new ve,hZ=new Or,XN=new ve(1,0,0),qN=new ve(0,1,0),KN=new ve(0,0,1),$N={type:"added"},pZ={type:"removed"},Fm={type:"childadded",child:null},uM={type:"childremoved",child:null};class Kn extends Zc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fZ++}),this.uuid=vo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Kn.DEFAULT_UP.clone();const e=new ve,t=new Fn,i=new Or,r=new ve(1,1,1);function a(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ft},normalMatrix:{value:new xn}}),this.matrix=new Ft,this.matrixWorld=new Ft,this.matrixAutoUpdate=Kn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new kg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return km.setFromAxisAngle(e,t),this.quaternion.multiply(km),this}rotateOnWorldAxis(e,t){return km.setFromAxisAngle(e,t),this.quaternion.premultiply(km),this}rotateX(e){return this.rotateOnAxis(XN,e)}rotateY(e){return this.rotateOnAxis(qN,e)}rotateZ(e){return this.rotateOnAxis(KN,e)}translateOnAxis(e,t){return ZN.copy(e).applyQuaternion(this.quaternion),this.position.add(ZN.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(XN,e)}translateY(e){return this.translateOnAxis(qN,e)}translateZ(e){return this.translateOnAxis(KN,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Eu.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Tx.copy(e):Tx.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),By.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Eu.lookAt(By,Tx,this.up):Eu.lookAt(Tx,By,this.up),this.quaternion.setFromRotationMatrix(Eu),r&&(Eu.extractRotation(r.matrixWorld),km.setFromRotationMatrix(Eu),this.quaternion.premultiply(km.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent($N),Fm.child=e,this.dispatchEvent(Fm),Fm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(pZ),uM.child=e,this.dispatchEvent(uM),uM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Eu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Eu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Eu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent($N),Fm.child=e,this.dispatchEvent(Fm),Fm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(By,e,dZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(By,hZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let f=0,p=c.length;f<p;f++){const d=c[f];a(e.shapes,d)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,f=this.material.length;c<f;c++)o.push(a(e.materials,this.material[c]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];r.animations.push(a(e.animations,c))}}if(t){const o=s(e.geometries),c=s(e.materials),f=s(e.textures),p=s(e.images),d=s(e.shapes),m=s(e.skeletons),v=s(e.animations),_=s(e.nodes);o.length>0&&(i.geometries=o),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),p.length>0&&(i.images=p),d.length>0&&(i.shapes=d),m.length>0&&(i.skeletons=m),v.length>0&&(i.animations=v),_.length>0&&(i.nodes=_)}return i.object=r,i;function s(o){const c=[];for(const f in o){const p=o[f];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Kn.DEFAULT_UP=new ve(0,1,0);Kn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const wl=new ve,wu=new ve,fM=new ve,Tu=new ve,Hm=new ve,jm=new ve,QN=new ve,dM=new ve,hM=new ve,pM=new ve,mM=new mn,gM=new mn,vM=new mn;class Ys{constructor(e=new ve,t=new ve,i=new ve){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),wl.subVectors(e,t),r.cross(wl);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){wl.subVectors(r,t),wu.subVectors(i,t),fM.subVectors(e,t);const s=wl.dot(wl),o=wl.dot(wu),c=wl.dot(fM),f=wu.dot(wu),p=wu.dot(fM),d=s*f-o*o;if(d===0)return a.set(0,0,0),null;const m=1/d,v=(f*c-o*p)*m,_=(s*p-o*c)*m;return a.set(1-v-_,_,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Tu)===null?!1:Tu.x>=0&&Tu.y>=0&&Tu.x+Tu.y<=1}static getInterpolation(e,t,i,r,a,s,o,c){return this.getBarycoord(e,t,i,r,Tu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,Tu.x),c.addScaledVector(s,Tu.y),c.addScaledVector(o,Tu.z),c)}static getInterpolatedAttribute(e,t,i,r,a,s){return mM.setScalar(0),gM.setScalar(0),vM.setScalar(0),mM.fromBufferAttribute(e,t),gM.fromBufferAttribute(e,i),vM.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(mM,a.x),s.addScaledVector(gM,a.y),s.addScaledVector(vM,a.z),s}static isFrontFacing(e,t,i,r){return wl.subVectors(i,t),wu.subVectors(e,t),wl.cross(wu).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return wl.subVectors(this.c,this.b),wu.subVectors(this.a,this.b),wl.cross(wu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ys.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ys.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return Ys.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return Ys.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ys.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let s,o;Hm.subVectors(r,i),jm.subVectors(a,i),dM.subVectors(e,i);const c=Hm.dot(dM),f=jm.dot(dM);if(c<=0&&f<=0)return t.copy(i);hM.subVectors(e,r);const p=Hm.dot(hM),d=jm.dot(hM);if(p>=0&&d<=p)return t.copy(r);const m=c*d-p*f;if(m<=0&&c>=0&&p<=0)return s=c/(c-p),t.copy(i).addScaledVector(Hm,s);pM.subVectors(e,a);const v=Hm.dot(pM),_=jm.dot(pM);if(_>=0&&v<=_)return t.copy(a);const b=v*f-c*_;if(b<=0&&f>=0&&_<=0)return o=f/(f-_),t.copy(i).addScaledVector(jm,o);const S=p*_-v*d;if(S<=0&&d-p>=0&&v-_>=0)return QN.subVectors(a,r),o=(d-p)/(d-p+(v-_)),t.copy(r).addScaledVector(QN,o);const x=1/(S+b+m);return s=b*x,o=m*x,t.copy(i).addScaledVector(Hm,s).addScaledVector(jm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const CB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Hf={h:0,s:0,l:0},Mx={h:0,s:0,l:0};function yM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class zt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Aa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=qn.workingColorSpace){return this.r=e,this.g=t,this.b=i,qn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=qn.workingColorSpace){if(e=u2(e,1),t=on(t,0,1),i=on(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,s=2*i-a;this.r=yM(s,a,e+1/3),this.g=yM(s,a,e),this.b=yM(s,a,e-1/3)}return qn.colorSpaceToWorking(this,r),this}setStyle(e,t=Aa){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Aa){const i=CB[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lu(e.r),this.g=Lu(e.g),this.b=Lu(e.b),this}copyLinearToSRGB(e){return this.r=Mg(e.r),this.g=Mg(e.g),this.b=Mg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Aa){return qn.workingToColorSpace(Ga.copy(this),e),Math.round(on(Ga.r*255,0,255))*65536+Math.round(on(Ga.g*255,0,255))*256+Math.round(on(Ga.b*255,0,255))}getHexString(e=Aa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qn.workingColorSpace){qn.workingToColorSpace(Ga.copy(this),t);const i=Ga.r,r=Ga.g,a=Ga.b,s=Math.max(i,r,a),o=Math.min(i,r,a);let c,f;const p=(o+s)/2;if(o===s)c=0,f=0;else{const d=s-o;switch(f=p<=.5?d/(s+o):d/(2-s-o),s){case i:c=(r-a)/d+(r<a?6:0);break;case r:c=(a-i)/d+2;break;case a:c=(i-r)/d+4;break}c/=6}return e.h=c,e.s=f,e.l=p,e}getRGB(e,t=qn.workingColorSpace){return qn.workingToColorSpace(Ga.copy(this),t),e.r=Ga.r,e.g=Ga.g,e.b=Ga.b,e}getStyle(e=Aa){qn.workingToColorSpace(Ga.copy(this),e);const t=Ga.r,i=Ga.g,r=Ga.b;return e!==Aa?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Hf),this.setHSL(Hf.h+e,Hf.s+t,Hf.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Hf),e.getHSL(Mx);const i=v0(Hf.h,Mx.h,t),r=v0(Hf.s,Mx.s,t),a=v0(Hf.l,Mx.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ga=new zt;zt.NAMES=CB;let mZ=0;class Xa extends Zc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mZ++}),this.uuid=vo(),this.name="",this.type="Material",this.blending=qh,this.side=Pu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=iE,this.blendDst=rE,this.blendEquation=ed,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new zt(0,0,0),this.blendAlpha=0,this.depthFunc=ap,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_C,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bh,this.stencilZFail=Bh,this.stencilZPass=Bh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==qh&&(i.blending=this.blending),this.side!==Pu&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==iE&&(i.blendSrc=this.blendSrc),this.blendDst!==rE&&(i.blendDst=this.blendDst),this.blendEquation!==ed&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ap&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==_C&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bh&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Bh&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Bh&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const o in a){const c=a[o];delete c.metadata,s.push(c)}return s}if(t){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class oa extends Xa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fn,this.combine=g_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ou=gZ();function gZ(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,p=0;for(;(f&8388608)===0;)f<<=1,p-=8388608;f&=-8388609,p+=947912704,a[c]=f|p}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function Hs(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=on(n,-65504,65504),Ou.floatView[0]=n;const e=Ou.uint32View[0],t=e>>23&511;return Ou.baseTable[t]+((e&8388607)>>Ou.shiftTable[t])}function n0(n){const e=n>>10;return Ou.uint32View[0]=Ou.mantissaTable[Ou.offsetTable[e]+(n&1023)]+Ou.exponentTable[e],Ou.floatView[0]}class vZ{static toHalfFloat(e){return Hs(e)}static fromHalfFloat(e){return n0(e)}}const Rr=new ve,Ax=new _t;let yZ=0;class wi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:yZ++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=z0,this.updateRanges=[],this.gpuType=ys,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Ax.fromBufferAttribute(this,t),Ax.applyMatrix3(e),this.setXY(t,Ax.x,Ax.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Rr.fromBufferAttribute(this,t),Rr.applyMatrix3(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Rr.fromBufferAttribute(this,t),Rr.applyMatrix4(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Rr.fromBufferAttribute(this,t),Rr.applyNormalMatrix(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Rr.fromBufferAttribute(this,t),Rr.transformDirection(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=vs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=En(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=vs(t,this.array)),t}setX(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=vs(t,this.array)),t}setY(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=vs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=vs(t,this.array)),t}setW(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),i=En(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),i=En(i,this.array),r=En(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),i=En(i,this.array),r=En(r,this.array),a=En(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==z0&&(e.usage=this.usage),e}}class _Z extends wi{constructor(e,t,i){super(new Int8Array(e),t,i)}}class bZ extends wi{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class xZ extends wi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class SZ extends wi{constructor(e,t,i){super(new Int16Array(e),t,i)}}class d2 extends wi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class EZ extends wi{constructor(e,t,i){super(new Int32Array(e),t,i)}}class h2 extends wi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class wZ extends wi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=n0(this.array[e*this.itemSize]);return this.normalized&&(t=vs(t,this.array)),t}setX(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize]=Hs(t),this}getY(e){let t=n0(this.array[e*this.itemSize+1]);return this.normalized&&(t=vs(t,this.array)),t}setY(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+1]=Hs(t),this}getZ(e){let t=n0(this.array[e*this.itemSize+2]);return this.normalized&&(t=vs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+2]=Hs(t),this}getW(e){let t=n0(this.array[e*this.itemSize+3]);return this.normalized&&(t=vs(t,this.array)),t}setW(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+3]=Hs(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),i=En(i,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),i=En(i,this.array),r=En(r,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(i),this.array[e+2]=Hs(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),i=En(i,this.array),r=En(r,this.array),a=En(a,this.array)),this.array[e+0]=Hs(t),this.array[e+1]=Hs(i),this.array[e+2]=Hs(r),this.array[e+3]=Hs(a),this}}class kt extends wi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let TZ=0;const Bo=new Ft,_M=new Kn,Vm=new ve,lo=new Hi,ky=new Hi,ia=new ve;class wn extends Zc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:TZ++}),this.uuid=vo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(TB(e)?h2:d2)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new xn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bo.makeRotationFromQuaternion(e),this.applyMatrix4(Bo),this}rotateX(e){return Bo.makeRotationX(e),this.applyMatrix4(Bo),this}rotateY(e){return Bo.makeRotationY(e),this.applyMatrix4(Bo),this}rotateZ(e){return Bo.makeRotationZ(e),this.applyMatrix4(Bo),this}translate(e,t,i){return Bo.makeTranslation(e,t,i),this.applyMatrix4(Bo),this}scale(e,t,i){return Bo.makeScale(e,t,i),this.applyMatrix4(Bo),this}lookAt(e){return _M.lookAt(e),_M.updateMatrix(),this.applyMatrix4(_M.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vm).negate(),this.translate(Vm.x,Vm.y,Vm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new kt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ve(-1/0,-1/0,-1/0),new ve(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];lo.setFromBufferAttribute(a),this.morphTargetsRelative?(ia.addVectors(this.boundingBox.min,lo.min),this.boundingBox.expandByPoint(ia),ia.addVectors(this.boundingBox.max,lo.max),this.boundingBox.expandByPoint(ia)):(this.boundingBox.expandByPoint(lo.min),this.boundingBox.expandByPoint(lo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ve,1/0);return}if(e){const i=this.boundingSphere.center;if(lo.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];ky.setFromBufferAttribute(o),this.morphTargetsRelative?(ia.addVectors(lo.min,ky.min),lo.expandByPoint(ia),ia.addVectors(lo.max,ky.max),lo.expandByPoint(ia)):(lo.expandByPoint(ky.min),lo.expandByPoint(ky.max))}lo.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)ia.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(ia));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],c=this.morphTargetsRelative;for(let f=0,p=o.count;f<p;f++)ia.fromBufferAttribute(o,f),c&&(Vm.fromBufferAttribute(e,f),ia.add(Vm)),r=Math.max(r,i.distanceToSquared(ia))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new wi(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),o=[],c=[];for(let U=0;U<i.count;U++)o[U]=new ve,c[U]=new ve;const f=new ve,p=new ve,d=new ve,m=new _t,v=new _t,_=new _t,b=new ve,S=new ve;function x(U,N,L){f.fromBufferAttribute(i,U),p.fromBufferAttribute(i,N),d.fromBufferAttribute(i,L),m.fromBufferAttribute(a,U),v.fromBufferAttribute(a,N),_.fromBufferAttribute(a,L),p.sub(f),d.sub(f),v.sub(m),_.sub(m);const Y=1/(v.x*_.y-_.x*v.y);isFinite(Y)&&(b.copy(p).multiplyScalar(_.y).addScaledVector(d,-v.y).multiplyScalar(Y),S.copy(d).multiplyScalar(v.x).addScaledVector(p,-_.x).multiplyScalar(Y),o[U].add(b),o[N].add(b),o[L].add(b),c[U].add(S),c[N].add(S),c[L].add(S))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let U=0,N=T.length;U<N;++U){const L=T[U],Y=L.start,ee=L.count;for(let se=Y,he=Y+ee;se<he;se+=3)x(e.getX(se+0),e.getX(se+1),e.getX(se+2))}const M=new ve,A=new ve,D=new ve,O=new ve;function I(U){D.fromBufferAttribute(r,U),O.copy(D);const N=o[U];M.copy(N),M.sub(D.multiplyScalar(D.dot(N))).normalize(),A.crossVectors(O,N);const Y=A.dot(c[U])<0?-1:1;s.setXYZW(U,M.x,M.y,M.z,Y)}for(let U=0,N=T.length;U<N;++U){const L=T[U],Y=L.start,ee=L.count;for(let se=Y,he=Y+ee;se<he;se+=3)I(e.getX(se+0)),I(e.getX(se+1)),I(e.getX(se+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new wi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,v=i.count;m<v;m++)i.setXYZ(m,0,0,0);const r=new ve,a=new ve,s=new ve,o=new ve,c=new ve,f=new ve,p=new ve,d=new ve;if(e)for(let m=0,v=e.count;m<v;m+=3){const _=e.getX(m+0),b=e.getX(m+1),S=e.getX(m+2);r.fromBufferAttribute(t,_),a.fromBufferAttribute(t,b),s.fromBufferAttribute(t,S),p.subVectors(s,a),d.subVectors(r,a),p.cross(d),o.fromBufferAttribute(i,_),c.fromBufferAttribute(i,b),f.fromBufferAttribute(i,S),o.add(p),c.add(p),f.add(p),i.setXYZ(_,o.x,o.y,o.z),i.setXYZ(b,c.x,c.y,c.z),i.setXYZ(S,f.x,f.y,f.z)}else for(let m=0,v=t.count;m<v;m+=3)r.fromBufferAttribute(t,m+0),a.fromBufferAttribute(t,m+1),s.fromBufferAttribute(t,m+2),p.subVectors(s,a),d.subVectors(r,a),p.cross(d),i.setXYZ(m+0,p.x,p.y,p.z),i.setXYZ(m+1,p.x,p.y,p.z),i.setXYZ(m+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ia.fromBufferAttribute(e,t),ia.normalize(),e.setXYZ(t,ia.x,ia.y,ia.z)}toNonIndexed(){function e(o,c){const f=o.array,p=o.itemSize,d=o.normalized,m=new f.constructor(c.length*p);let v=0,_=0;for(let b=0,S=c.length;b<S;b++){o.isInterleavedBufferAttribute?v=c[b]*o.data.stride+o.offset:v=c[b]*p;for(let x=0;x<p;x++)m[_++]=f[v++]}return new wi(m,p,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new wn,i=this.index.array,r=this.attributes;for(const o in r){const c=r[o],f=e(c,i);t.setAttribute(o,f)}const a=this.morphAttributes;for(const o in a){const c=[],f=a[o];for(let p=0,d=f.length;p<d;p++){const m=f[p],v=e(m,i);c.push(v)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const f=s[o];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let a=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],p=[];for(let d=0,m=f.length;d<m;d++){const v=f[d];p.push(v.toJSON(e.data))}p.length>0&&(r[c]=p,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const f in r){const p=r[f];this.setAttribute(f,p.clone(t))}const a=e.morphAttributes;for(const f in a){const p=[],d=a[f];for(let m=0,v=d.length;m<v;m++)p.push(d[m].clone(t));this.morphAttributes[f]=p}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,p=s.length;f<p;f++){const d=s[f];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const JN=new Ft,Sh=new cv,Cx=new hr,eL=new ve,Rx=new ve,Ox=new ve,Dx=new ve,bM=new ve,Nx=new ve,tL=new ve,Lx=new ve;class Ei extends Kn{constructor(e=new wn,t=new oa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(a&&o){Nx.set(0,0,0);for(let c=0,f=a.length;c<f;c++){const p=o[c],d=a[c];p!==0&&(bM.fromBufferAttribute(d,e),s?Nx.addScaledVector(bM,p):Nx.addScaledVector(bM.sub(t),p))}t.add(Nx)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Cx.copy(i.boundingSphere),Cx.applyMatrix4(a),Sh.copy(e.ray).recast(e.near),!(Cx.containsPoint(Sh.origin)===!1&&(Sh.intersectSphere(Cx,eL)===null||Sh.origin.distanceToSquared(eL)>(e.far-e.near)**2))&&(JN.copy(a).invert(),Sh.copy(e.ray).applyMatrix4(JN),!(i.boundingBox!==null&&Sh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Sh)))}_computeIntersections(e,t,i){let r;const a=this.geometry,s=this.material,o=a.index,c=a.attributes.position,f=a.attributes.uv,p=a.attributes.uv1,d=a.attributes.normal,m=a.groups,v=a.drawRange;if(o!==null)if(Array.isArray(s))for(let _=0,b=m.length;_<b;_++){const S=m[_],x=s[S.materialIndex],T=Math.max(S.start,v.start),M=Math.min(o.count,Math.min(S.start+S.count,v.start+v.count));for(let A=T,D=M;A<D;A+=3){const O=o.getX(A),I=o.getX(A+1),U=o.getX(A+2);r=Ix(this,x,e,i,f,p,d,O,I,U),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,v.start),b=Math.min(o.count,v.start+v.count);for(let S=_,x=b;S<x;S+=3){const T=o.getX(S),M=o.getX(S+1),A=o.getX(S+2);r=Ix(this,s,e,i,f,p,d,T,M,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let _=0,b=m.length;_<b;_++){const S=m[_],x=s[S.materialIndex],T=Math.max(S.start,v.start),M=Math.min(c.count,Math.min(S.start+S.count,v.start+v.count));for(let A=T,D=M;A<D;A+=3){const O=A,I=A+1,U=A+2;r=Ix(this,x,e,i,f,p,d,O,I,U),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const _=Math.max(0,v.start),b=Math.min(c.count,v.start+v.count);for(let S=_,x=b;S<x;S+=3){const T=S,M=S+1,A=S+2;r=Ix(this,s,e,i,f,p,d,T,M,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function MZ(n,e,t,i,r,a,s,o){let c;if(e.side===bs?c=i.intersectTriangle(s,a,r,!0,o):c=i.intersectTriangle(r,a,s,e.side===Pu,o),c===null)return null;Lx.copy(o),Lx.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Lx);return f<t.near||f>t.far?null:{distance:f,point:Lx.clone(),object:n}}function Ix(n,e,t,i,r,a,s,o,c,f){n.getVertexPosition(o,Rx),n.getVertexPosition(c,Ox),n.getVertexPosition(f,Dx);const p=MZ(n,e,t,i,Rx,Ox,Dx,tL);if(p){const d=new ve;Ys.getBarycoord(tL,Rx,Ox,Dx,d),r&&(p.uv=Ys.getInterpolatedAttribute(r,o,c,f,d,new _t)),a&&(p.uv1=Ys.getInterpolatedAttribute(a,o,c,f,d,new _t)),s&&(p.normal=Ys.getInterpolatedAttribute(s,o,c,f,d,new ve),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const m={a:o,b:c,c:f,normal:new ve,materialIndex:0};Ys.getNormal(Rx,Ox,Dx,m.normal),p.face=m,p.barycoord=d}return p}class bp extends wn{constructor(e=1,t=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const c=[],f=[],p=[],d=[];let m=0,v=0;_("z","y","x",-1,-1,i,t,e,s,a,0),_("z","y","x",1,-1,i,t,-e,s,a,1),_("x","z","y",1,1,e,i,t,r,s,2),_("x","z","y",1,-1,e,i,-t,r,s,3),_("x","y","z",1,-1,e,t,i,r,a,4),_("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(c),this.setAttribute("position",new kt(f,3)),this.setAttribute("normal",new kt(p,3)),this.setAttribute("uv",new kt(d,2));function _(b,S,x,T,M,A,D,O,I,U,N){const L=A/I,Y=D/U,ee=A/2,se=D/2,he=O/2,de=I+1,P=U+1;let B=0,V=0;const ae=new ve;for(let X=0;X<P;X++){const oe=X*Y-se;for(let me=0;me<de;me++){const J=me*L-ee;ae[b]=J*T,ae[S]=oe*M,ae[x]=he,f.push(ae.x,ae.y,ae.z),ae[b]=0,ae[S]=0,ae[x]=O>0?1:-1,p.push(ae.x,ae.y,ae.z),d.push(me/I),d.push(1-X/U),B+=1}}for(let X=0;X<U;X++)for(let oe=0;oe<I;oe++){const me=m+oe+de*X,J=m+oe+de*(X+1),le=m+(oe+1)+de*(X+1),Se=m+(oe+1)+de*X;c.push(me,J,Se),c.push(J,le,Se),V+=6}o.addGroup(v,V,N),v+=V,m+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Fg(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function hs(n){const e={};for(let t=0;t<n.length;t++){const i=Fg(n[t]);for(const r in i)e[r]=i[r]}return e}function AZ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function RB(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qn.workingColorSpace}const Hg={clone:Fg,merge:hs};var CZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,RZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yo extends Xa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=CZ,this.fragmentShader=RZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fg(e.uniforms),this.uniformsGroups=AZ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Y1 extends Kn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ft,this.projectionMatrix=new Ft,this.projectionMatrixInverse=new Ft,this.coordinateSystem=po,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const jf=new ve,nL=new _t,iL=new _t;class aa extends Y1{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Bg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Kh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Bg*2*Math.atan(Math.tan(Kh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){jf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(jf.x,jf.y).multiplyScalar(-e/jf.z),jf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(jf.x,jf.y).multiplyScalar(-e/jf.z)}getViewSize(e,t){return this.getViewBounds(e,nL,iL),t.subVectors(iL,nL)}setViewOffset(e,t,i,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Kh*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,f=s.fullHeight;a+=s.offsetX*r/c,t-=s.offsetY*i/f,r*=s.width/c,i*=s.height/f}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Gm=-90,Ym=1;class OB extends Kn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new aa(Gm,Ym,e,t);r.layers=this.layers,this.add(r);const a=new aa(Gm,Ym,e,t);a.layers=this.layers,this.add(a);const s=new aa(Gm,Ym,e,t);s.layers=this.layers,this.add(s);const o=new aa(Gm,Ym,e,t);o.layers=this.layers,this.add(o);const c=new aa(Gm,Ym,e,t);c.layers=this.layers,this.add(c);const f=new aa(Gm,Ym,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,s,o,c]=t;for(const f of t)this.remove(f);if(e===po)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===zg)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,c,f,p]=this.children,d=e.getRenderTarget(),m=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=b,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(d,m,v),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class y_ extends dr{constructor(e=[],t=zu,i,r,a,s,o,c,f,p){super(e,t,i,r,a,s,o,c,f,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class DB extends Il{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new y_(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new bp(5,5,5),a=new yo({name:"CubemapFromEquirect",uniforms:Fg(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:bs,blending:Nu});a.uniforms.tEquirect.value=t;const s=new Ei(r,a),o=t.minFilter;return t.minFilter===zc&&(t.minFilter=Er),new OB(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(a)}}class _s extends Kn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const OZ={type:"move"};class PS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _s,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _s,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _s,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ve),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,s=null;const o=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const b of e.hand.values()){const S=t.getJointPose(b,i),x=this._getHandJoint(f,b);S!==null&&(x.matrix.fromArray(S.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=S.radius),x.visible=S!==null}const p=f.joints["index-finger-tip"],d=f.joints["thumb-tip"],m=p.position.distanceTo(d.position),v=.02,_=.005;f.inputState.pinching&&m>v+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&m<=v-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(OZ)))}return o!==null&&(o.visible=r!==null),c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new _s;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class W1{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new zt(e),this.density=t}clone(){return new W1(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Z1{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new zt(e),this.near=t,this.far=i}clone(){return new Z1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let X1=class extends Kn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Fn,this.environmentIntensity=1,this.environmentRotation=new Fn,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class q1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=z0,this.updateRanges=[],this.version=0,this.uuid=vo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fs=new ve;class Wr{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)fs.fromBufferAttribute(this,t),fs.applyMatrix4(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)fs.fromBufferAttribute(this,t),fs.applyNormalMatrix(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)fs.fromBufferAttribute(this,t),fs.transformDirection(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=vs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=En(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=En(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=En(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=En(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=En(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=vs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=vs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=vs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=vs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=En(t,this.array),i=En(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=En(t,this.array),i=En(i,this.array),r=En(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=En(t,this.array),i=En(i,this.array),r=En(r,this.array),a=En(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new wi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Wr(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class p2 extends Xa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Wm;const Fy=new ve,Zm=new ve,Xm=new ve,qm=new _t,Hy=new _t,NB=new Ft,Ux=new ve,jy=new ve,Px=new ve,rL=new _t,xM=new _t,aL=new _t;class LB extends Kn{constructor(e=new p2){if(super(),this.isSprite=!0,this.type="Sprite",Wm===void 0){Wm=new wn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new q1(t,5);Wm.setIndex([0,1,2,0,2,3]),Wm.setAttribute("position",new Wr(i,3,0,!1)),Wm.setAttribute("uv",new Wr(i,2,3,!1))}this.geometry=Wm,this.material=e,this.center=new _t(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zm.setFromMatrixScale(this.matrixWorld),NB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Xm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zm.multiplyScalar(-Xm.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;zx(Ux.set(-.5,-.5,0),Xm,s,Zm,r,a),zx(jy.set(.5,-.5,0),Xm,s,Zm,r,a),zx(Px.set(.5,.5,0),Xm,s,Zm,r,a),rL.set(0,0),xM.set(1,0),aL.set(1,1);let o=e.ray.intersectTriangle(Ux,jy,Px,!1,Fy);if(o===null&&(zx(jy.set(-.5,.5,0),Xm,s,Zm,r,a),xM.set(0,1),o=e.ray.intersectTriangle(Ux,Px,jy,!1,Fy),o===null))return;const c=e.ray.origin.distanceTo(Fy);c<e.near||c>e.far||t.push({distance:c,point:Fy.clone(),uv:Ys.getInterpolation(Fy,Ux,jy,Px,rL,xM,aL,new _t),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function zx(n,e,t,i,r,a){qm.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Hy.x=a*qm.x-r*qm.y,Hy.y=r*qm.x+a*qm.y):Hy.copy(qm),n.copy(e),n.x+=Hy.x,n.y+=Hy.y,n.applyMatrix4(NB)}const Bx=new ve,sL=new ve;class IB extends Kn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Bx.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Bx);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Bx.setFromMatrixPosition(e.matrixWorld),sL.setFromMatrixPosition(this.matrixWorld);const i=Bx.distanceTo(sL)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),i>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const oL=new ve,lL=new mn,cL=new mn,DZ=new ve,uL=new Ft,kx=new ve,SM=new hr,fL=new Ft,EM=new cv;class UB extends Ei{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yC,this.bindMatrix=new Ft,this.bindMatrixInverse=new Ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Hi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,kx),this.boundingBox.expandByPoint(kx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new hr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,kx),this.boundingSphere.expandByPoint(kx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),SM.copy(this.boundingSphere),SM.applyMatrix4(r),e.ray.intersectsSphere(SM)!==!1&&(fL.copy(r).invert(),EM.copy(e.ray).applyMatrix4(fL),!(this.boundingBox!==null&&EM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,EM)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new mn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===yC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===fB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;lL.fromBufferAttribute(r.attributes.skinIndex,e),cL.fromBufferAttribute(r.attributes.skinWeight,e),oL.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=cL.getComponent(a);if(s!==0){const o=lL.getComponent(a);uL.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(DZ.copy(oL).applyMatrix4(uL),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class m2 extends Kn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yo extends dr{constructor(e=null,t=1,i=1,r,a,s,o,c,f=Oa,p=Oa,d,m){super(null,s,o,c,f,p,r,a,d,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const dL=new Ft,NZ=new Ft;class K1{constructor(e=[],t=[]){this.uuid=vo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ft;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:NZ;dL.multiplyMatrices(o,t[a]),dL.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new K1(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Yo(t,e,e,Wa,ys);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new m2),this.bones.push(s),this.boneInverses.push(new Ft().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const s=t[r];e.bones.push(s.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class jg extends wi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Km=new Ft,hL=new Ft,Fx=[],pL=new Hi,LZ=new Ft,Vy=new Ei,Gy=new hr;class PB extends Ei{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new jg(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,LZ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Hi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Km),pL.copy(e.boundingBox).applyMatrix4(Km),this.boundingBox.union(pL)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new hr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Km),Gy.copy(e.boundingSphere).applyMatrix4(Km),this.boundingSphere.union(Gy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let o=0;o<i.length;o++)i[o]=r[s+o]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Vy.geometry=this.geometry,Vy.material=this.material,Vy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gy.copy(this.boundingSphere),Gy.applyMatrix4(i),e.ray.intersectsSphere(Gy)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,Km),hL.multiplyMatrices(i,Km),Vy.matrixWorld=hL,Vy.raycast(e,Fx);for(let s=0,o=Fx.length;s<o;s++){const c=Fx[s];c.instanceId=a,c.object=this,t.push(c)}Fx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new jg(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Yo(new Float32Array(r*this.count),r,this.count,B1,ys));const a=this.morphTexture.source.data.data;let s=0;for(let f=0;f<i.length;f++)s+=i[f];const o=this.geometry.morphTargetsRelative?1:1-s,c=r*e;a[c]=o,a.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const wM=new ve,IZ=new ve,UZ=new xn;class Jf{constructor(e=new ve(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=wM.subVectors(i,t).cross(IZ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(wM),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||UZ.getNormalMatrix(e),r=this.coplanarPoint(wM).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Eh=new hr,PZ=new _t(.5,.5),Hx=new ve;class uv{constructor(e=new Jf,t=new Jf,i=new Jf,r=new Jf,a=new Jf,s=new Jf){this.planes=[e,t,i,r,a,s]}set(e,t,i,r,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=po,i=!1){const r=this.planes,a=e.elements,s=a[0],o=a[1],c=a[2],f=a[3],p=a[4],d=a[5],m=a[6],v=a[7],_=a[8],b=a[9],S=a[10],x=a[11],T=a[12],M=a[13],A=a[14],D=a[15];if(r[0].setComponents(f-s,v-p,x-_,D-T).normalize(),r[1].setComponents(f+s,v+p,x+_,D+T).normalize(),r[2].setComponents(f+o,v+d,x+b,D+M).normalize(),r[3].setComponents(f-o,v-d,x-b,D-M).normalize(),i)r[4].setComponents(c,m,S,A).normalize(),r[5].setComponents(f-c,v-m,x-S,D-A).normalize();else if(r[4].setComponents(f-c,v-m,x-S,D-A).normalize(),t===po)r[5].setComponents(f+c,v+m,x+S,D+A).normalize();else if(t===zg)r[5].setComponents(c,m,S,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Eh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Eh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Eh)}intersectsSprite(e){Eh.center.set(0,0,0);const t=PZ.distanceTo(e.center);return Eh.radius=.7071067811865476+t,Eh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Eh)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Hx.x=r.normal.x>0?e.max.x:e.min.x,Hx.y=r.normal.y>0?e.max.y:e.min.y,Hx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Hx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const _c=new Ft,bc=new uv;class $1{constructor(){this.coordinateSystem=po}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(_c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),bc.setFromProjectionMatrix(_c,r.coordinateSystem,r.reversedDepth),bc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(_c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),bc.setFromProjectionMatrix(_c,r.coordinateSystem,r.reversedDepth),bc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(_c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),bc.setFromProjectionMatrix(_c,r.coordinateSystem,r.reversedDepth),bc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(_c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),bc.setFromProjectionMatrix(_c,r.coordinateSystem,r.reversedDepth),bc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(_c.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),bc.setFromProjectionMatrix(_c,r.coordinateSystem,r.reversedDepth),bc.containsPoint(e))return!0}return!1}clone(){return new $1}}function TM(n,e){return n-e}function zZ(n,e){return n.z-e.z}function BZ(n,e){return e.z-n.z}class kZ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const Bs=new Ft,FZ=new zt(1,1,1),mL=new uv,HZ=new $1,jx=new Hi,wh=new hr,Yy=new ve,gL=new ve,jZ=new ve,MM=new kZ,Ya=new Ei,Vx=[];function VZ(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Th(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class zB extends Ei{constructor(e,t,i=t*2,r){super(new wn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Yo(t,e,e,Wa,ys);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Yo(t,e,e,v_,Bu);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Yo(t,e,e,Wa,ys);i.colorSpace=qn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:c,normalized:f}=s,p=new o.constructor(i*c),d=new wi(p,c,f);t.setAttribute(a,d)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new wi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hi);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Bs),this.getBoundingBoxAt(a,jx).applyMatrix4(Bs),e.union(jx)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Bs),this.getBoundingSphereAt(a,wh).applyMatrix4(Bs),e.union(wh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(TM),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Bs.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(FZ.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(TM),c=this._availableGeometryIds.shift(),a[c]=r):(c=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=t.getIndex(),o=this._geometryInfo[e];if(r&&s.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,f=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const p in i.attributes){const d=t.getAttribute(p),m=i.getAttribute(p);VZ(d,m,c);const v=d.itemSize;for(let _=d.count,b=f;_<b;_++){const S=c+_;for(let x=0;x<v;x++)m.setComponent(S,x,0)}m.needsUpdate=!0,m.addUpdateRange(c*v,f*v)}if(r){const p=o.indexStart,d=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let m=0;m<s.count;m++)a.setX(p+m,c+s.getX(m));for(let m=s.count,v=d;m<v;m++)a.setX(p+m,c);a.needsUpdate=!0,a.addUpdateRange(p,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((s,o)=>o).sort((s,o)=>i[s].vertexStart-i[o].vertexStart),a=this.geometry;for(let s=0,o=i.length;s<o;s++){const c=r[s],f=i[c];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==t){const{indexStart:p,vertexStart:d,reservedIndexCount:m}=f,v=a.index,_=v.array,b=e-d;for(let S=p;S<p+m;S++)_[S]=_[S]+b;v.array.copyWithin(t,p,p+m),v.addUpdateRange(t,m),f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:p,reservedVertexCount:d}=f,m=a.attributes;for(const v in m){const _=m[v],{array:b,itemSize:S}=_;b.copyWithin(e*S,p*S,(p+d)*S),_.addUpdateRange(e*S,d*S)}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new Hi,s=i.index,o=i.attributes.position;for(let c=r.start,f=r.start+r.count;c<f;c++){let p=c;s&&(p=s.getX(p)),a.expandByPoint(Yy.fromBufferAttribute(o,p))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new hr;this.getBoundingBoxAt(e,jx),jx.getCenter(a.center);const s=i.index,o=i.attributes.position;let c=0;for(let f=r.start,p=r.start+r.count;f<p;f++){let d=f;s&&(d=s.getX(d)),Yy.fromBufferAttribute(o,d),c=Math.max(c,a.center.distanceToSquared(Yy))}a.radius=Math.sqrt(c),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(TM);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);Th(this._multiDrawCounts,r),Th(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Th(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Th(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Th(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new wn,this._initializeGeometry(a));const s=this.geometry;a.index&&Th(a.index.array,s.index.array);for(const o in a.attributes)Th(a.attributes[o].array,s.attributes[o].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;Ya.material=this.material,Ya.geometry.index=s.index,Ya.geometry.attributes=s.attributes,Ya.geometry.boundingBox===null&&(Ya.geometry.boundingBox=new Hi),Ya.geometry.boundingSphere===null&&(Ya.geometry.boundingSphere=new hr);for(let o=0,c=i.length;o<c;o++){if(!i[o].visible||!i[o].active)continue;const f=i[o].geometryIndex,p=r[f];Ya.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(o,Ya.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,Ya.geometry.boundingBox),this.getBoundingSphereAt(f,Ya.geometry.boundingSphere),Ya.raycast(e,Vx);for(let d=0,m=Vx.length;d<m;d++){const v=Vx[d];v.object=this,v.batchId=o,t.push(v)}Vx.length=0}Ya.material=null,Ya.geometry.index=null,Ya.geometry.attributes={},Ya.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,p=this._multiDrawCounts,d=this._geometryInfo,m=this.perObjectFrustumCulled,v=this._indirectTexture,_=v.image.data,b=i.isArrayCamera?HZ:mL;m&&!i.isArrayCamera&&(Bs.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),mL.setFromProjectionMatrix(Bs,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){Bs.copy(this.matrixWorld).invert(),Yy.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Bs),gL.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Bs);for(let M=0,A=c.length;M<A;M++)if(c[M].visible&&c[M].active){const D=c[M].geometryIndex;this.getMatrixAt(M,Bs),this.getBoundingSphereAt(D,wh).applyMatrix4(Bs);let O=!1;if(m&&(O=!b.intersectsSphere(wh,i)),!O){const I=d[D],U=jZ.subVectors(wh.center,Yy).dot(gL);MM.push(I.start,I.count,U,M)}}const x=MM.list,T=this.customSort;T===null?x.sort(a.transparent?BZ:zZ):T.call(this,x,i);for(let M=0,A=x.length;M<A;M++){const D=x[M];f[S]=D.start*o,p[S]=D.count,_[S]=D.index,S++}MM.reset()}else for(let x=0,T=c.length;x<T;x++)if(c[x].visible&&c[x].active){const M=c[x].geometryIndex;let A=!1;if(m&&(this.getMatrixAt(x,Bs),this.getBoundingSphereAt(M,wh).applyMatrix4(Bs),A=!b.intersectsSphere(wh,i)),!A){const D=d[M];f[S]=D.start*o,p[S]=D.count,_[S]=x,S++}}v.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class Ss extends Xa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new zt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const HE=new ve,jE=new ve,vL=new Ft,Wy=new cv,Gx=new hr,AM=new ve,yL=new ve;let vd=class extends Kn{constructor(e=new wn,t=new Ss){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)HE.fromBufferAttribute(t,r-1),jE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=HE.distanceTo(jE);e.setAttribute("lineDistance",new kt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Gx.copy(i.boundingSphere),Gx.applyMatrix4(r),Gx.radius+=a,e.ray.intersectsSphere(Gx)===!1)return;vL.copy(r).invert(),Wy.copy(e.ray).applyMatrix4(vL);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=this.isLineSegments?2:1,p=i.index,m=i.attributes.position;if(p!==null){const v=Math.max(0,s.start),_=Math.min(p.count,s.start+s.count);for(let b=v,S=_-1;b<S;b+=f){const x=p.getX(b),T=p.getX(b+1),M=Yx(this,e,Wy,c,x,T,b);M&&t.push(M)}if(this.isLineLoop){const b=p.getX(_-1),S=p.getX(v),x=Yx(this,e,Wy,c,b,S,_-1);x&&t.push(x)}}else{const v=Math.max(0,s.start),_=Math.min(m.count,s.start+s.count);for(let b=v,S=_-1;b<S;b+=f){const x=Yx(this,e,Wy,c,b,b+1,b);x&&t.push(x)}if(this.isLineLoop){const b=Yx(this,e,Wy,c,_-1,v,_-1);b&&t.push(b)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}};function Yx(n,e,t,i,r,a,s){const o=n.geometry.attributes.position;if(HE.fromBufferAttribute(o,r),jE.fromBufferAttribute(o,a),t.distanceSqToSegment(HE,jE,AM,yL)>i)return;AM.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(AM);if(!(f<e.near||f>e.far))return{distance:f,point:yL.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const _L=new ve,bL=new ve;class Xc extends vd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)_L.fromBufferAttribute(t,r),bL.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+_L.distanceTo(bL);e.setAttribute("lineDistance",new kt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class BB extends vd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class g2 extends Xa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const xL=new Ft,xC=new cv,Wx=new hr,Zx=new ve;class kB extends Kn{constructor(e=new wn,t=new g2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Wx.copy(i.boundingSphere),Wx.applyMatrix4(r),Wx.radius+=a,e.ray.intersectsSphere(Wx)===!1)return;xL.copy(r).invert(),xC.copy(e.ray).applyMatrix4(xL);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,f=i.index,d=i.attributes.position;if(f!==null){const m=Math.max(0,s.start),v=Math.min(f.count,s.start+s.count);for(let _=m,b=v;_<b;_++){const S=f.getX(_);Zx.fromBufferAttribute(d,S),SL(Zx,S,c,r,e,t,this)}}else{const m=Math.max(0,s.start),v=Math.min(d.count,s.start+s.count);for(let _=m,b=v;_<b;_++)Zx.fromBufferAttribute(d,_),SL(Zx,_,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function SL(n,e,t,i,r,a,s){const o=xC.distanceSqToPoint(n);if(o<t){const c=new ve;xC.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;a.push({distance:f,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class FB extends dr{constructor(e,t,i,r,a=Er,s=Er,o,c,f){super(e,t,i,r,a,s,o,c,f),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const p=this;function d(){p.needsUpdate=!0,p._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class GZ extends FB{constructor(e,t,i,r,a,s,o,c){super({},e,t,i,r,a,s,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class YZ extends dr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Oa,this.minFilter=Oa,this.generateMipmaps=!1,this.needsUpdate=!0}}class Q1 extends dr{constructor(e,t,i,r,a,s,o,c,f,p,d,m){super(null,s,o,c,f,p,r,a,d,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class WZ extends Q1{constructor(e,t,i,r,a,s){super(e,t,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Vo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ZZ extends Q1{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,zu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class HB extends dr{constructor(e,t,i,r,a,s,o,c,f){super(e,t,i,r,a,s,o,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class J1 extends dr{constructor(e,t,i=Bu,r,a,s,o=Oa,c=Oa,f,p=Ug,d=1){if(p!==Ug&&p!==Pg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:t,depth:d};super(m,r,a,s,o,c,p,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ad(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class v2 extends dr{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class ew extends wn{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],o=[],c=[],f=[],p=t/2,d=Math.PI/2*e,m=t,v=2*d+m,_=i*2+a,b=r+1,S=new ve,x=new ve;for(let T=0;T<=_;T++){let M=0,A=0,D=0,O=0;if(T<=i){const N=T/i,L=N*Math.PI/2;A=-p-e*Math.cos(L),D=e*Math.sin(L),O=-e*Math.cos(L),M=N*d}else if(T<=i+a){const N=(T-i)/a;A=-p+N*t,D=e,O=0,M=d+N*m}else{const N=(T-i-a)/i,L=N*Math.PI/2;A=p+e*Math.sin(L),D=e*Math.cos(L),O=e*Math.sin(L),M=d+m+N*d}const I=Math.max(0,Math.min(1,M/v));let U=0;T===0?U=.5/r:T===_&&(U=-.5/r);for(let N=0;N<=r;N++){const L=N/r,Y=L*Math.PI*2,ee=Math.sin(Y),se=Math.cos(Y);x.x=-D*se,x.y=A,x.z=D*ee,o.push(x.x,x.y,x.z),S.set(-D*se,O,D*ee),S.normalize(),c.push(S.x,S.y,S.z),f.push(L+U,I)}if(T>0){const N=(T-1)*b;for(let L=0;L<r;L++){const Y=N+L,ee=N+L+1,se=T*b+L,he=T*b+L+1;s.push(Y,ee,se),s.push(ee,he,se)}}}this.setIndex(s),this.setAttribute("position",new kt(o,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ew(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class xp extends wn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],s=[],o=[],c=[],f=new ve,p=new _t;s.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let d=0,m=3;d<=t;d++,m+=3){const v=i+d/t*r;f.x=e*Math.cos(v),f.y=e*Math.sin(v),s.push(f.x,f.y,f.z),o.push(0,0,1),p.x=(s[m]/e+1)/2,p.y=(s[m+1]/e+1)/2,c.push(p.x,p.y)}for(let d=1;d<=t;d++)a.push(d,d+1,0);this.setIndex(a),this.setAttribute("position",new kt(s,3)),this.setAttribute("normal",new kt(o,3)),this.setAttribute("uv",new kt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class __ extends wn{constructor(e=1,t=1,i=1,r=32,a=1,s=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c};const f=this;r=Math.floor(r),a=Math.floor(a);const p=[],d=[],m=[],v=[];let _=0;const b=[],S=i/2;let x=0;T(),s===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(p),this.setAttribute("position",new kt(d,3)),this.setAttribute("normal",new kt(m,3)),this.setAttribute("uv",new kt(v,2));function T(){const A=new ve,D=new ve;let O=0;const I=(t-e)/i;for(let U=0;U<=a;U++){const N=[],L=U/a,Y=L*(t-e)+e;for(let ee=0;ee<=r;ee++){const se=ee/r,he=se*c+o,de=Math.sin(he),P=Math.cos(he);D.x=Y*de,D.y=-L*i+S,D.z=Y*P,d.push(D.x,D.y,D.z),A.set(de,I,P).normalize(),m.push(A.x,A.y,A.z),v.push(se,1-L),N.push(_++)}b.push(N)}for(let U=0;U<r;U++)for(let N=0;N<a;N++){const L=b[N][U],Y=b[N+1][U],ee=b[N+1][U+1],se=b[N][U+1];(e>0||N!==0)&&(p.push(L,Y,se),O+=3),(t>0||N!==a-1)&&(p.push(Y,ee,se),O+=3)}f.addGroup(x,O,0),x+=O}function M(A){const D=_,O=new _t,I=new ve;let U=0;const N=A===!0?e:t,L=A===!0?1:-1;for(let ee=1;ee<=r;ee++)d.push(0,S*L,0),m.push(0,L,0),v.push(.5,.5),_++;const Y=_;for(let ee=0;ee<=r;ee++){const he=ee/r*c+o,de=Math.cos(he),P=Math.sin(he);I.x=N*P,I.y=S*L,I.z=N*de,d.push(I.x,I.y,I.z),m.push(0,L,0),O.x=de*.5+.5,O.y=P*.5*L+.5,v.push(O.x,O.y),_++}for(let ee=0;ee<r;ee++){const se=D+ee,he=Y+ee;A===!0?p.push(he,he+1,se):p.push(he+1,he,se),U+=3}f.addGroup(x,U,A===!0?1:2),x+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new __(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class b_ extends __{constructor(e=1,t=1,i=32,r=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,i,r,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new b_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sd extends wn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],s=[];o(r),f(i),p(),this.setAttribute("position",new kt(a,3)),this.setAttribute("normal",new kt(a.slice(),3)),this.setAttribute("uv",new kt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(T){const M=new ve,A=new ve,D=new ve;for(let O=0;O<t.length;O+=3)v(t[O+0],M),v(t[O+1],A),v(t[O+2],D),c(M,A,D,T)}function c(T,M,A,D){const O=D+1,I=[];for(let U=0;U<=O;U++){I[U]=[];const N=T.clone().lerp(A,U/O),L=M.clone().lerp(A,U/O),Y=O-U;for(let ee=0;ee<=Y;ee++)ee===0&&U===O?I[U][ee]=N:I[U][ee]=N.clone().lerp(L,ee/Y)}for(let U=0;U<O;U++)for(let N=0;N<2*(O-U)-1;N++){const L=Math.floor(N/2);N%2===0?(m(I[U][L+1]),m(I[U+1][L]),m(I[U][L])):(m(I[U][L+1]),m(I[U+1][L+1]),m(I[U+1][L]))}}function f(T){const M=new ve;for(let A=0;A<a.length;A+=3)M.x=a[A+0],M.y=a[A+1],M.z=a[A+2],M.normalize().multiplyScalar(T),a[A+0]=M.x,a[A+1]=M.y,a[A+2]=M.z}function p(){const T=new ve;for(let M=0;M<a.length;M+=3){T.x=a[M+0],T.y=a[M+1],T.z=a[M+2];const A=S(T)/2/Math.PI+.5,D=x(T)/Math.PI+.5;s.push(A,1-D)}_(),d()}function d(){for(let T=0;T<s.length;T+=6){const M=s[T+0],A=s[T+2],D=s[T+4],O=Math.max(M,A,D),I=Math.min(M,A,D);O>.9&&I<.1&&(M<.2&&(s[T+0]+=1),A<.2&&(s[T+2]+=1),D<.2&&(s[T+4]+=1))}}function m(T){a.push(T.x,T.y,T.z)}function v(T,M){const A=T*3;M.x=e[A+0],M.y=e[A+1],M.z=e[A+2]}function _(){const T=new ve,M=new ve,A=new ve,D=new ve,O=new _t,I=new _t,U=new _t;for(let N=0,L=0;N<a.length;N+=9,L+=6){T.set(a[N+0],a[N+1],a[N+2]),M.set(a[N+3],a[N+4],a[N+5]),A.set(a[N+6],a[N+7],a[N+8]),O.set(s[L+0],s[L+1]),I.set(s[L+2],s[L+3]),U.set(s[L+4],s[L+5]),D.copy(T).add(M).add(A).divideScalar(3);const Y=S(D);b(O,L+0,T,Y),b(I,L+2,M,Y),b(U,L+4,A,Y)}}function b(T,M,A,D){D<0&&T.x===1&&(s[M]=T.x-1),A.x===0&&A.z===0&&(s[M]=D/2/Math.PI+.5)}function S(T){return Math.atan2(T.z,-T.x)}function x(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sd(e.vertices,e.indices,e.radius,e.details)}}class tw extends Sd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tw(e.radius,e.detail)}}const Xx=new ve,qx=new ve,CM=new ve,Kx=new Ys;class jB extends wn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(Kh*t),s=e.getIndex(),o=e.getAttribute("position"),c=s?s.count:o.count,f=[0,0,0],p=["a","b","c"],d=new Array(3),m={},v=[];for(let _=0;_<c;_+=3){s?(f[0]=s.getX(_),f[1]=s.getX(_+1),f[2]=s.getX(_+2)):(f[0]=_,f[1]=_+1,f[2]=_+2);const{a:b,b:S,c:x}=Kx;if(b.fromBufferAttribute(o,f[0]),S.fromBufferAttribute(o,f[1]),x.fromBufferAttribute(o,f[2]),Kx.getNormal(CM),d[0]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,d[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,d[2]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let T=0;T<3;T++){const M=(T+1)%3,A=d[T],D=d[M],O=Kx[p[T]],I=Kx[p[M]],U=`${A}_${D}`,N=`${D}_${A}`;N in m&&m[N]?(CM.dot(m[N].normal)<=a&&(v.push(O.x,O.y,O.z),v.push(I.x,I.y,I.z)),m[N]=null):U in m||(m[U]={index0:f[T],index1:f[M],normal:CM.clone()})}}for(const _ in m)if(m[_]){const{index0:b,index1:S}=m[_];Xx.fromBufferAttribute(o,b),qx.fromBufferAttribute(o,S),v.push(Xx.x,Xx.y,Xx.z),v.push(qx.x,qx.y,qx.z)}this.setAttribute("position",new kt(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class zl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let s;t?s=t:s=e*i[a-1];let o=0,c=a-1,f;for(;o<=c;)if(r=Math.floor(o+(c-o)/2),f=i[r]-s,f<0)o=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===s)return r/(a-1);const p=i[r],m=i[r+1]-p,v=(s-p)/m;return(r+v)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),o=this.getPoint(a),c=t||(s.isVector2?new _t:new ve);return c.copy(o).sub(s).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new ve,r=[],a=[],s=[],o=new ve,c=new Ft;for(let v=0;v<=e;v++){const _=v/e;r[v]=this.getTangentAt(_,new ve)}a[0]=new ve,s[0]=new ve;let f=Number.MAX_VALUE;const p=Math.abs(r[0].x),d=Math.abs(r[0].y),m=Math.abs(r[0].z);p<=f&&(f=p,i.set(1,0,0)),d<=f&&(f=d,i.set(0,1,0)),m<=f&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]);for(let v=1;v<=e;v++){if(a[v]=a[v-1].clone(),s[v]=s[v-1].clone(),o.crossVectors(r[v-1],r[v]),o.length()>Number.EPSILON){o.normalize();const _=Math.acos(on(r[v-1].dot(r[v]),-1,1));a[v].applyMatrix4(c.makeRotationAxis(o,_))}s[v].crossVectors(r[v],a[v])}if(t===!0){let v=Math.acos(on(a[0].dot(a[e]),-1,1));v/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(v=-v);for(let _=1;_<=e;_++)a[_].applyMatrix4(c.makeRotationAxis(r[_],v*_)),s[_].crossVectors(r[_],a[_])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class nw extends zl{constructor(e=0,t=0,i=1,r=1,a=0,s=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=c}getPoint(e,t=new _t){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(o),f=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const p=Math.cos(this.aRotation),d=Math.sin(this.aRotation),m=c-this.aX,v=f-this.aY;c=m*p-v*d+this.aX,f=m*d+v*p+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class VB extends nw{constructor(e,t,i,r,a,s){super(e,t,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function y2(){let n=0,e=0,t=0,i=0;function r(a,s,o,c){n=a,e=o,t=-3*a+3*s-2*o-c,i=2*a-2*s+o+c}return{initCatmullRom:function(a,s,o,c,f){r(s,o,f*(o-a),f*(c-s))},initNonuniformCatmullRom:function(a,s,o,c,f,p,d){let m=(s-a)/f-(o-a)/(f+p)+(o-s)/p,v=(o-s)/p-(c-s)/(p+d)+(c-o)/d;m*=p,v*=p,r(s,o,m,v)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+i*o}}}const $x=new ve,RM=new y2,OM=new y2,DM=new y2;class GB extends zl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ve){const i=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),c=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:c===0&&o===a-1&&(o=a-2,c=1);let f,p;this.closed||o>0?f=r[(o-1)%a]:($x.subVectors(r[0],r[1]).add(r[0]),f=$x);const d=r[o%a],m=r[(o+1)%a];if(this.closed||o+2<a?p=r[(o+2)%a]:($x.subVectors(r[a-1],r[a-2]).add(r[a-1]),p=$x),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(d),v),b=Math.pow(d.distanceToSquared(m),v),S=Math.pow(m.distanceToSquared(p),v);b<1e-4&&(b=1),_<1e-4&&(_=b),S<1e-4&&(S=b),RM.initNonuniformCatmullRom(f.x,d.x,m.x,p.x,_,b,S),OM.initNonuniformCatmullRom(f.y,d.y,m.y,p.y,_,b,S),DM.initNonuniformCatmullRom(f.z,d.z,m.z,p.z,_,b,S)}else this.curveType==="catmullrom"&&(RM.initCatmullRom(f.x,d.x,m.x,p.x,this.tension),OM.initCatmullRom(f.y,d.y,m.y,p.y,this.tension),DM.initCatmullRom(f.z,d.z,m.z,p.z,this.tension));return i.set(RM.calc(c),OM.calc(c),DM.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ve().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function EL(n,e,t,i,r){const a=(i-e)*.5,s=(r-t)*.5,o=n*n,c=n*o;return(2*t-2*i+a+s)*c+(-3*t+3*i-2*a-s)*o+a*n+t}function XZ(n,e){const t=1-n;return t*t*e}function qZ(n,e){return 2*(1-n)*n*e}function KZ(n,e){return n*n*e}function y0(n,e,t,i){return XZ(n,e)+qZ(n,t)+KZ(n,i)}function $Z(n,e){const t=1-n;return t*t*t*e}function QZ(n,e){const t=1-n;return 3*t*t*n*e}function JZ(n,e){return 3*(1-n)*n*n*e}function eX(n,e){return n*n*n*e}function _0(n,e,t,i,r){return $Z(n,e)+QZ(n,t)+JZ(n,i)+eX(n,r)}class _2 extends zl{constructor(e=new _t,t=new _t,i=new _t,r=new _t){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new _t){const i=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(_0(e,r.x,a.x,s.x,o.x),_0(e,r.y,a.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YB extends zl{constructor(e=new ve,t=new ve,i=new ve,r=new ve){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ve){const i=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(_0(e,r.x,a.x,s.x,o.x),_0(e,r.y,a.y,s.y,o.y),_0(e,r.z,a.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class b2 extends zl{constructor(e=new _t,t=new _t){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new _t){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new _t){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WB extends zl{constructor(e=new ve,t=new ve){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ve){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class x2 extends zl{constructor(e=new _t,t=new _t,i=new _t){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new _t){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(y0(e,r.x,a.x,s.x),y0(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iw extends zl{constructor(e=new ve,t=new ve,i=new ve){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ve){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(y0(e,r.x,a.x,s.x),y0(e,r.y,a.y,s.y),y0(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class S2 extends zl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new _t){const i=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),o=a-s,c=r[s===0?s:s-1],f=r[s],p=r[s>r.length-2?r.length-1:s+1],d=r[s>r.length-3?r.length-1:s+2];return i.set(EL(o,c.x,f.x,p.x,d.x),EL(o,c.y,f.y,p.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new _t().fromArray(r))}return this}}var VE=Object.freeze({__proto__:null,ArcCurve:VB,CatmullRomCurve3:GB,CubicBezierCurve:_2,CubicBezierCurve3:YB,EllipseCurve:nw,LineCurve:b2,LineCurve3:WB,QuadraticBezierCurve:x2,QuadraticBezierCurve3:iw,SplineCurve:S2});class ZB extends zl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new VE[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,o=this.curves[a],c=o.getLength(),f=c===0?0:1-s/c;return o.getPointAt(f,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(o);for(let f=0;f<c.length;f++){const p=c[f];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new VE[r.type]().fromJSON(r))}return this}}let GE=class extends ZB{constructor(e){super(),this.type="Path",this.currentPoint=new _t,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new b2(this.currentPoint.clone(),new _t(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new x2(this.currentPoint.clone(),new _t(e,t),new _t(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,s){const o=new _2(this.currentPoint.clone(),new _t(e,t),new _t(i,r),new _t(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new S2(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,s){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,i,r,a,s),this}absarc(e,t,i,r,a,s){return this.absellipse(e,t,i,i,r,a,s),this}ellipse(e,t,i,r,a,s,o,c){const f=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+f,t+p,i,r,a,s,o,c),this}absellipse(e,t,i,r,a,s,o,c){const f=new nw(e,t,i,r,a,s,o,c);if(this.curves.length>0){const d=f.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(f);const p=f.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class $h extends GE{constructor(e){super(e),this.uuid=vo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new GE().fromJSON(r))}return this}}function tX(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=XB(n,0,r,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,c,f;if(i&&(a=sX(n,e,a,t)),n.length>80*t){o=1/0,c=1/0;let p=-1/0,d=-1/0;for(let m=t;m<r;m+=t){const v=n[m],_=n[m+1];v<o&&(o=v),_<c&&(c=_),v>p&&(p=v),_>d&&(d=_)}f=Math.max(p-o,d-c),f=f!==0?32767/f:0}return F0(a,s,t,o,c,f,0),s}function XB(n,e,t,i,r){let a;if(r===vX(n,e,t,i)>0)for(let s=e;s<t;s+=i)a=wL(s/i|0,n[s],n[s+1],a);else for(let s=t-i;s>=e;s-=i)a=wL(s/i|0,n[s],n[s+1],a);return a&&Vg(a,a.next)&&(j0(a),a=a.next),a}function sp(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Vg(t,t.next)||rr(t.prev,t,t.next)===0)){if(j0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function F0(n,e,t,i,r,a,s){if(!n)return;!s&&a&&fX(n,i,r,a);let o=n;for(;n.prev!==n.next;){const c=n.prev,f=n.next;if(a?iX(n,i,r,a):nX(n)){e.push(c.i,n.i,f.i),j0(n),n=f.next,o=f.next;continue}if(n=f,n===o){s?s===1?(n=rX(sp(n),e),F0(n,e,t,i,r,a,2)):s===2&&aX(n,e,t,i,r,a):F0(sp(n),e,t,i,r,a,1);break}}}function nX(n){const e=n.prev,t=n,i=n.next;if(rr(e,t,i)>=0)return!1;const r=e.x,a=t.x,s=i.x,o=e.y,c=t.y,f=i.y,p=Math.min(r,a,s),d=Math.min(o,c,f),m=Math.max(r,a,s),v=Math.max(o,c,f);let _=i.next;for(;_!==e;){if(_.x>=p&&_.x<=m&&_.y>=d&&_.y<=v&&i0(r,o,a,c,s,f,_.x,_.y)&&rr(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function iX(n,e,t,i){const r=n.prev,a=n,s=n.next;if(rr(r,a,s)>=0)return!1;const o=r.x,c=a.x,f=s.x,p=r.y,d=a.y,m=s.y,v=Math.min(o,c,f),_=Math.min(p,d,m),b=Math.max(o,c,f),S=Math.max(p,d,m),x=SC(v,_,e,t,i),T=SC(b,S,e,t,i);let M=n.prevZ,A=n.nextZ;for(;M&&M.z>=x&&A&&A.z<=T;){if(M.x>=v&&M.x<=b&&M.y>=_&&M.y<=S&&M!==r&&M!==s&&i0(o,p,c,d,f,m,M.x,M.y)&&rr(M.prev,M,M.next)>=0||(M=M.prevZ,A.x>=v&&A.x<=b&&A.y>=_&&A.y<=S&&A!==r&&A!==s&&i0(o,p,c,d,f,m,A.x,A.y)&&rr(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;M&&M.z>=x;){if(M.x>=v&&M.x<=b&&M.y>=_&&M.y<=S&&M!==r&&M!==s&&i0(o,p,c,d,f,m,M.x,M.y)&&rr(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;A&&A.z<=T;){if(A.x>=v&&A.x<=b&&A.y>=_&&A.y<=S&&A!==r&&A!==s&&i0(o,p,c,d,f,m,A.x,A.y)&&rr(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function rX(n,e){let t=n;do{const i=t.prev,r=t.next.next;!Vg(i,r)&&KB(i,t,t.next,r)&&H0(i,r)&&H0(r,i)&&(e.push(i.i,t.i,r.i),j0(t),j0(t.next),t=n=r),t=t.next}while(t!==n);return sp(t)}function aX(n,e,t,i,r,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&pX(s,o)){let c=$B(s,o);s=sp(s,s.next),c=sp(c,c.next),F0(s,e,t,i,r,a,0),F0(c,e,t,i,r,a,0);return}o=o.next}s=s.next}while(s!==n)}function sX(n,e,t,i){const r=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*i,c=a<s-1?e[a+1]*i:n.length,f=XB(n,o,c,i,!1);f===f.next&&(f.steiner=!0),r.push(hX(f))}r.sort(oX);for(let a=0;a<r.length;a++)t=lX(r[a],t);return t}function oX(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function lX(n,e){const t=cX(n,e);if(!t)return e;const i=$B(t,n);return sp(i,i.next),sp(t,t.next)}function cX(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,s;if(Vg(n,t))return t;do{if(Vg(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>a&&(a=d,s=t.x<t.next.x?t:t.next,d===i))return s}t=t.next}while(t!==e);if(!s)return null;const o=s,c=s.x,f=s.y;let p=1/0;t=s;do{if(i>=t.x&&t.x>=c&&i!==t.x&&qB(r<f?i:a,r,c,f,r<f?a:i,r,t.x,t.y)){const d=Math.abs(r-t.y)/(i-t.x);H0(t,n)&&(d<p||d===p&&(t.x>s.x||t.x===s.x&&uX(s,t)))&&(s=t,p=d)}t=t.next}while(t!==o);return s}function uX(n,e){return rr(n.prev,n,e.prev)<0&&rr(e.next,n,n.next)<0}function fX(n,e,t,i){let r=n;do r.z===0&&(r.z=SC(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,dX(r)}function dX(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let s=i,o=0;for(let f=0;f<t&&(o++,s=s.nextZ,!!s);f++);let c=t;for(;o>0||c>0&&s;)o!==0&&(c===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,o--):(r=s,s=s.nextZ,c--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=s}a.nextZ=null,t*=2}while(e>1);return n}function SC(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function hX(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function qB(n,e,t,i,r,a,s,o){return(r-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(i-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(r-s)*(i-o)}function i0(n,e,t,i,r,a,s,o){return!(n===s&&e===o)&&qB(n,e,t,i,r,a,s,o)}function pX(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!mX(n,e)&&(H0(n,e)&&H0(e,n)&&gX(n,e)&&(rr(n.prev,n,e.prev)||rr(n,e.prev,e))||Vg(n,e)&&rr(n.prev,n,n.next)>0&&rr(e.prev,e,e.next)>0)}function rr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Vg(n,e){return n.x===e.x&&n.y===e.y}function KB(n,e,t,i){const r=Jx(rr(n,e,t)),a=Jx(rr(n,e,i)),s=Jx(rr(t,i,n)),o=Jx(rr(t,i,e));return!!(r!==a&&s!==o||r===0&&Qx(n,t,e)||a===0&&Qx(n,i,e)||s===0&&Qx(t,n,i)||o===0&&Qx(t,e,i))}function Qx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Jx(n){return n>0?1:n<0?-1:0}function mX(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&KB(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function H0(n,e){return rr(n.prev,n,n.next)<0?rr(n,e,n.next)>=0&&rr(n,n.prev,e)>=0:rr(n,e,n.prev)<0||rr(n,n.next,e)<0}function gX(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function $B(n,e){const t=EC(n.i,n.x,n.y),i=EC(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function wL(n,e,t,i){const r=EC(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function j0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function EC(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function vX(n,e,t,i){let r=0;for(let a=e,s=t-i;a<t;a+=i)r+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return r}class yX{static triangulate(e,t,i=2){return tX(e,t,i)}}class Ol{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Ol.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];TL(e),ML(i,e);let s=e.length;t.forEach(TL);for(let c=0;c<t.length;c++)r.push(s),s+=t[c].length,ML(i,t[c]);const o=yX.triangulate(i,r);for(let c=0;c<o.length;c+=3)a.push(o.slice(c,c+3));return a}}function TL(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function ML(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class rw extends wn{constructor(e=new $h([new _t(.5,.5),new _t(-.5,.5),new _t(-.5,-.5),new _t(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let o=0,c=e.length;o<c;o++){const f=e[o];s(f)}this.setAttribute("position",new kt(r,3)),this.setAttribute("uv",new kt(a,2)),this.computeVertexNormals();function s(o){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:v-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:_X;let M,A=!1,D,O,I,U;x&&(M=x.getSpacedPoints(p),A=!0,m=!1,D=x.computeFrenetFrames(p,!1),O=new ve,I=new ve,U=new ve),m||(S=0,v=0,_=0,b=0);const N=o.extractPoints(f);let L=N.shape;const Y=N.holes;if(!Ol.isClockWise(L)){L=L.reverse();for(let xe=0,De=Y.length;xe<De;xe++){const He=Y[xe];Ol.isClockWise(He)&&(Y[xe]=He.reverse())}}function se(xe){const He=10000000000000001e-36;let Ce=xe[0];for(let ce=1;ce<=xe.length;ce++){const pe=ce%xe.length,ie=xe[pe],W=ie.x-Ce.x,K=ie.y-Ce.y,j=W*W+K*K,$=Math.max(Math.abs(ie.x),Math.abs(ie.y),Math.abs(Ce.x),Math.abs(Ce.y)),Re=He*$*$;if(j<=Re){xe.splice(pe,1),ce--;continue}Ce=ie}}se(L),Y.forEach(se);const he=Y.length,de=L;for(let xe=0;xe<he;xe++){const De=Y[xe];L=L.concat(De)}function P(xe,De,He){return De||console.error("THREE.ExtrudeGeometry: vec does not exist"),xe.clone().addScaledVector(De,He)}const B=L.length;function V(xe,De,He){let Ce,ce,pe;const ie=xe.x-De.x,W=xe.y-De.y,K=He.x-xe.x,j=He.y-xe.y,$=ie*ie+W*W,Re=ie*j-W*K;if(Math.abs(Re)>Number.EPSILON){const Ie=Math.sqrt($),ne=Math.sqrt(K*K+j*j),H=De.x-W/Ie,Z=De.y+ie/Ie,ye=He.x-j/ne,Oe=He.y+K/ne,Be=((ye-H)*j-(Oe-Z)*K)/(ie*j-W*K);Ce=H+ie*Be-xe.x,ce=Z+W*Be-xe.y;const Ue=Ce*Ce+ce*ce;if(Ue<=2)return new _t(Ce,ce);pe=Math.sqrt(Ue/2)}else{let Ie=!1;ie>Number.EPSILON?K>Number.EPSILON&&(Ie=!0):ie<-Number.EPSILON?K<-Number.EPSILON&&(Ie=!0):Math.sign(W)===Math.sign(j)&&(Ie=!0),Ie?(Ce=-W,ce=ie,pe=Math.sqrt($)):(Ce=ie,ce=W,pe=Math.sqrt($/2))}return new _t(Ce/pe,ce/pe)}const ae=[];for(let xe=0,De=de.length,He=De-1,Ce=xe+1;xe<De;xe++,He++,Ce++)He===De&&(He=0),Ce===De&&(Ce=0),ae[xe]=V(de[xe],de[He],de[Ce]);const X=[];let oe,me=ae.concat();for(let xe=0,De=he;xe<De;xe++){const He=Y[xe];oe=[];for(let Ce=0,ce=He.length,pe=ce-1,ie=Ce+1;Ce<ce;Ce++,pe++,ie++)pe===ce&&(pe=0),ie===ce&&(ie=0),oe[Ce]=V(He[Ce],He[pe],He[ie]);X.push(oe),me=me.concat(oe)}let J;if(S===0)J=Ol.triangulateShape(de,Y);else{const xe=[],De=[];for(let He=0;He<S;He++){const Ce=He/S,ce=v*Math.cos(Ce*Math.PI/2),pe=_*Math.sin(Ce*Math.PI/2)+b;for(let ie=0,W=de.length;ie<W;ie++){const K=P(de[ie],ae[ie],pe);Ae(K.x,K.y,-ce),Ce===0&&xe.push(K)}for(let ie=0,W=he;ie<W;ie++){const K=Y[ie];oe=X[ie];const j=[];for(let $=0,Re=K.length;$<Re;$++){const Ie=P(K[$],oe[$],pe);Ae(Ie.x,Ie.y,-ce),Ce===0&&j.push(Ie)}Ce===0&&De.push(j)}}J=Ol.triangulateShape(xe,De)}const le=J.length,Se=_+b;for(let xe=0;xe<B;xe++){const De=m?P(L[xe],me[xe],Se):L[xe];A?(I.copy(D.normals[0]).multiplyScalar(De.x),O.copy(D.binormals[0]).multiplyScalar(De.y),U.copy(M[0]).add(I).add(O),Ae(U.x,U.y,U.z)):Ae(De.x,De.y,0)}for(let xe=1;xe<=p;xe++)for(let De=0;De<B;De++){const He=m?P(L[De],me[De],Se):L[De];A?(I.copy(D.normals[xe]).multiplyScalar(He.x),O.copy(D.binormals[xe]).multiplyScalar(He.y),U.copy(M[xe]).add(I).add(O),Ae(U.x,U.y,U.z)):Ae(He.x,He.y,d/p*xe)}for(let xe=S-1;xe>=0;xe--){const De=xe/S,He=v*Math.cos(De*Math.PI/2),Ce=_*Math.sin(De*Math.PI/2)+b;for(let ce=0,pe=de.length;ce<pe;ce++){const ie=P(de[ce],ae[ce],Ce);Ae(ie.x,ie.y,d+He)}for(let ce=0,pe=Y.length;ce<pe;ce++){const ie=Y[ce];oe=X[ce];for(let W=0,K=ie.length;W<K;W++){const j=P(ie[W],oe[W],Ce);A?Ae(j.x,j.y+M[p-1].y,M[p-1].x+He):Ae(j.x,j.y,d+He)}}}Ee(),re();function Ee(){const xe=r.length/3;if(m){let De=0,He=B*De;for(let Ce=0;Ce<le;Ce++){const ce=J[Ce];Pe(ce[2]+He,ce[1]+He,ce[0]+He)}De=p+S*2,He=B*De;for(let Ce=0;Ce<le;Ce++){const ce=J[Ce];Pe(ce[0]+He,ce[1]+He,ce[2]+He)}}else{for(let De=0;De<le;De++){const He=J[De];Pe(He[2],He[1],He[0])}for(let De=0;De<le;De++){const He=J[De];Pe(He[0]+B*p,He[1]+B*p,He[2]+B*p)}}i.addGroup(xe,r.length/3-xe,0)}function re(){const xe=r.length/3;let De=0;ge(de,De),De+=de.length;for(let He=0,Ce=Y.length;He<Ce;He++){const ce=Y[He];ge(ce,De),De+=ce.length}i.addGroup(xe,r.length/3-xe,1)}function ge(xe,De){let He=xe.length;for(;--He>=0;){const Ce=He;let ce=He-1;ce<0&&(ce=xe.length-1);for(let pe=0,ie=p+S*2;pe<ie;pe++){const W=B*pe,K=B*(pe+1),j=De+Ce+W,$=De+ce+W,Re=De+ce+K,Ie=De+Ce+K;We(j,$,Re,Ie)}}}function Ae(xe,De,He){c.push(xe),c.push(De),c.push(He)}function Pe(xe,De,He){it(xe),it(De),it(He);const Ce=r.length/3,ce=T.generateTopUV(i,r,Ce-3,Ce-2,Ce-1);te(ce[0]),te(ce[1]),te(ce[2])}function We(xe,De,He,Ce){it(xe),it(De),it(Ce),it(De),it(He),it(Ce);const ce=r.length/3,pe=T.generateSideWallUV(i,r,ce-6,ce-3,ce-2,ce-1);te(pe[0]),te(pe[1]),te(pe[3]),te(pe[1]),te(pe[2]),te(pe[3])}function it(xe){r.push(c[xe*3+0]),r.push(c[xe*3+1]),r.push(c[xe*3+2])}function te(xe){a.push(xe.x),a.push(xe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return bX(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new VE[r.type]().fromJSON(r)),new rw(i,e.options)}}const _X={generateTopUV:function(n,e,t,i,r){const a=e[t*3],s=e[t*3+1],o=e[i*3],c=e[i*3+1],f=e[r*3],p=e[r*3+1];return[new _t(a,s),new _t(o,c),new _t(f,p)]},generateSideWallUV:function(n,e,t,i,r,a){const s=e[t*3],o=e[t*3+1],c=e[t*3+2],f=e[i*3],p=e[i*3+1],d=e[i*3+2],m=e[r*3],v=e[r*3+1],_=e[r*3+2],b=e[a*3],S=e[a*3+1],x=e[a*3+2];return Math.abs(o-p)<Math.abs(s-f)?[new _t(s,1-c),new _t(f,1-d),new _t(m,1-_),new _t(b,1-x)]:[new _t(o,1-c),new _t(p,1-d),new _t(v,1-_),new _t(S,1-x)]}};function bX(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class aw extends Sd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aw(e.radius,e.detail)}}class sw extends wn{constructor(e=[new _t(0,-.5),new _t(.5,0),new _t(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=on(r,0,Math.PI*2);const a=[],s=[],o=[],c=[],f=[],p=1/t,d=new ve,m=new _t,v=new ve,_=new ve,b=new ve;let S=0,x=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:S=e[T+1].x-e[T].x,x=e[T+1].y-e[T].y,v.x=x*1,v.y=-S,v.z=x*0,b.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case e.length-1:c.push(b.x,b.y,b.z);break;default:S=e[T+1].x-e[T].x,x=e[T+1].y-e[T].y,v.x=x*1,v.y=-S,v.z=x*0,_.copy(v),v.x+=b.x,v.y+=b.y,v.z+=b.z,v.normalize(),c.push(v.x,v.y,v.z),b.copy(_)}for(let T=0;T<=t;T++){const M=i+T*p*r,A=Math.sin(M),D=Math.cos(M);for(let O=0;O<=e.length-1;O++){d.x=e[O].x*A,d.y=e[O].y,d.z=e[O].x*D,s.push(d.x,d.y,d.z),m.x=T/t,m.y=O/(e.length-1),o.push(m.x,m.y);const I=c[3*O+0]*A,U=c[3*O+1],N=c[3*O+0]*D;f.push(I,U,N)}}for(let T=0;T<t;T++)for(let M=0;M<e.length-1;M++){const A=M+T*e.length,D=A,O=A+e.length,I=A+e.length+1,U=A+1;a.push(D,O,U),a.push(I,U,O)}this.setIndex(a),this.setAttribute("position",new kt(s,3)),this.setAttribute("uv",new kt(o,2)),this.setAttribute("normal",new kt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sw(e.points,e.segments,e.phiStart,e.phiLength)}}class x_ extends Sd{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new x_(e.radius,e.detail)}}class Ws extends wn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,s=t/2,o=Math.floor(i),c=Math.floor(r),f=o+1,p=c+1,d=e/o,m=t/c,v=[],_=[],b=[],S=[];for(let x=0;x<p;x++){const T=x*m-s;for(let M=0;M<f;M++){const A=M*d-a;_.push(A,-T,0),b.push(0,0,1),S.push(M/o),S.push(1-x/c)}}for(let x=0;x<c;x++)for(let T=0;T<o;T++){const M=T+f*x,A=T+f*(x+1),D=T+1+f*(x+1),O=T+1+f*x;v.push(M,A,O),v.push(A,D,O)}this.setIndex(v),this.setAttribute("position",new kt(_,3)),this.setAttribute("normal",new kt(b,3)),this.setAttribute("uv",new kt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ws(e.width,e.height,e.widthSegments,e.heightSegments)}}class ow extends wn{constructor(e=.5,t=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const o=[],c=[],f=[],p=[];let d=e;const m=(t-e)/r,v=new ve,_=new _t;for(let b=0;b<=r;b++){for(let S=0;S<=i;S++){const x=a+S/i*s;v.x=d*Math.cos(x),v.y=d*Math.sin(x),c.push(v.x,v.y,v.z),f.push(0,0,1),_.x=(v.x/t+1)/2,_.y=(v.y/t+1)/2,p.push(_.x,_.y)}d+=m}for(let b=0;b<r;b++){const S=b*(i+1);for(let x=0;x<i;x++){const T=x+S,M=T,A=T+i+1,D=T+i+2,O=T+1;o.push(M,A,O),o.push(A,D,O)}}this.setIndex(o),this.setAttribute("position",new kt(c,3)),this.setAttribute("normal",new kt(f,3)),this.setAttribute("uv",new kt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ow(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class lw extends wn{constructor(e=new $h([new _t(0,.5),new _t(-.5,-.5),new _t(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],s=[];let o=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let p=0;p<e.length;p++)f(e[p]),this.addGroup(o,c,p),o+=c,c=0;this.setIndex(i),this.setAttribute("position",new kt(r,3)),this.setAttribute("normal",new kt(a,3)),this.setAttribute("uv",new kt(s,2));function f(p){const d=r.length/3,m=p.extractPoints(t);let v=m.shape;const _=m.holes;Ol.isClockWise(v)===!1&&(v=v.reverse());for(let S=0,x=_.length;S<x;S++){const T=_[S];Ol.isClockWise(T)===!0&&(_[S]=T.reverse())}const b=Ol.triangulateShape(v,_);for(let S=0,x=_.length;S<x;S++){const T=_[S];v=v.concat(T)}for(let S=0,x=v.length;S<x;S++){const T=v[S];r.push(T.x,T.y,0),a.push(0,0,1),s.push(T.x,T.y)}for(let S=0,x=b.length;S<x;S++){const T=b[S],M=T[0]+d,A=T[1]+d,D=T[2]+d;i.push(M,A,D),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return xX(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=t[e.shapes[r]];i.push(s)}return new lw(i,e.curveSegments)}}function xX(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class S_ extends wn{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(s+o,Math.PI);let f=0;const p=[],d=new ve,m=new ve,v=[],_=[],b=[],S=[];for(let x=0;x<=i;x++){const T=[],M=x/i;let A=0;x===0&&s===0?A=.5/t:x===i&&c===Math.PI&&(A=-.5/t);for(let D=0;D<=t;D++){const O=D/t;d.x=-e*Math.cos(r+O*a)*Math.sin(s+M*o),d.y=e*Math.cos(s+M*o),d.z=e*Math.sin(r+O*a)*Math.sin(s+M*o),_.push(d.x,d.y,d.z),m.copy(d).normalize(),b.push(m.x,m.y,m.z),S.push(O+A,1-M),T.push(f++)}p.push(T)}for(let x=0;x<i;x++)for(let T=0;T<t;T++){const M=p[x][T+1],A=p[x][T],D=p[x+1][T],O=p[x+1][T+1];(x!==0||s>0)&&v.push(M,A,O),(x!==i-1||c<Math.PI)&&v.push(A,D,O)}this.setIndex(v),this.setAttribute("position",new kt(_,3)),this.setAttribute("normal",new kt(b,3)),this.setAttribute("uv",new kt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class cw extends Sd{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cw(e.radius,e.detail)}}class uw extends wn{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],o=[],c=[],f=[],p=new ve,d=new ve,m=new ve;for(let v=0;v<=i;v++)for(let _=0;_<=r;_++){const b=_/r*a,S=v/i*Math.PI*2;d.x=(e+t*Math.cos(S))*Math.cos(b),d.y=(e+t*Math.cos(S))*Math.sin(b),d.z=t*Math.sin(S),o.push(d.x,d.y,d.z),p.x=e*Math.cos(b),p.y=e*Math.sin(b),m.subVectors(d,p).normalize(),c.push(m.x,m.y,m.z),f.push(_/r),f.push(v/i)}for(let v=1;v<=i;v++)for(let _=1;_<=r;_++){const b=(r+1)*v+_-1,S=(r+1)*(v-1)+_-1,x=(r+1)*(v-1)+_,T=(r+1)*v+_;s.push(b,S,T),s.push(S,x,T)}this.setIndex(s),this.setAttribute("position",new kt(o,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class fw extends wn{constructor(e=1,t=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const o=[],c=[],f=[],p=[],d=new ve,m=new ve,v=new ve,_=new ve,b=new ve,S=new ve,x=new ve;for(let M=0;M<=i;++M){const A=M/i*a*Math.PI*2;T(A,a,s,e,v),T(A+.01,a,s,e,_),S.subVectors(_,v),x.addVectors(_,v),b.crossVectors(S,x),x.crossVectors(b,S),b.normalize(),x.normalize();for(let D=0;D<=r;++D){const O=D/r*Math.PI*2,I=-t*Math.cos(O),U=t*Math.sin(O);d.x=v.x+(I*x.x+U*b.x),d.y=v.y+(I*x.y+U*b.y),d.z=v.z+(I*x.z+U*b.z),c.push(d.x,d.y,d.z),m.subVectors(d,v).normalize(),f.push(m.x,m.y,m.z),p.push(M/i),p.push(D/r)}}for(let M=1;M<=i;M++)for(let A=1;A<=r;A++){const D=(r+1)*(M-1)+(A-1),O=(r+1)*M+(A-1),I=(r+1)*M+A,U=(r+1)*(M-1)+A;o.push(D,O,U),o.push(O,I,U)}this.setIndex(o),this.setAttribute("position",new kt(c,3)),this.setAttribute("normal",new kt(f,3)),this.setAttribute("uv",new kt(p,2));function T(M,A,D,O,I){const U=Math.cos(M),N=Math.sin(M),L=D/A*M,Y=Math.cos(L);I.x=O*(2+Y)*.5*U,I.y=O*(2+Y)*N*.5,I.z=O*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class dw extends wn{constructor(e=new iw(new ve(-1,-1,0),new ve(-1,1,0),new ve(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new ve,c=new ve,f=new _t;let p=new ve;const d=[],m=[],v=[],_=[];b(),this.setIndex(_),this.setAttribute("position",new kt(d,3)),this.setAttribute("normal",new kt(m,3)),this.setAttribute("uv",new kt(v,2));function b(){for(let M=0;M<t;M++)S(M);S(a===!1?t:0),T(),x()}function S(M){p=e.getPointAt(M/t,p);const A=s.normals[M],D=s.binormals[M];for(let O=0;O<=r;O++){const I=O/r*Math.PI*2,U=Math.sin(I),N=-Math.cos(I);c.x=N*A.x+U*D.x,c.y=N*A.y+U*D.y,c.z=N*A.z+U*D.z,c.normalize(),m.push(c.x,c.y,c.z),o.x=p.x+i*c.x,o.y=p.y+i*c.y,o.z=p.z+i*c.z,d.push(o.x,o.y,o.z)}}function x(){for(let M=1;M<=t;M++)for(let A=1;A<=r;A++){const D=(r+1)*(M-1)+(A-1),O=(r+1)*M+(A-1),I=(r+1)*M+A,U=(r+1)*(M-1)+A;_.push(D,O,U),_.push(O,I,U)}}function T(){for(let M=0;M<=t;M++)for(let A=0;A<=r;A++)f.x=M/t,f.y=A/r,v.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new dw(new VE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class hw extends wn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ve,a=new ve;if(e.index!==null){const s=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let f=0,p=c.length;f<p;++f){const d=c[f],m=d.start,v=d.count;for(let _=m,b=m+v;_<b;_+=3)for(let S=0;S<3;S++){const x=o.getX(_+S),T=o.getX(_+(S+1)%3);r.fromBufferAttribute(s,x),a.fromBufferAttribute(s,T),AL(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,c=s.count/3;o<c;o++)for(let f=0;f<3;f++){const p=3*o+f,d=3*o+(f+1)%3;r.fromBufferAttribute(s,p),a.fromBufferAttribute(s,d),AL(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new kt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function AL(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var CL=Object.freeze({__proto__:null,BoxGeometry:bp,CapsuleGeometry:ew,CircleGeometry:xp,ConeGeometry:b_,CylinderGeometry:__,DodecahedronGeometry:tw,EdgesGeometry:jB,ExtrudeGeometry:rw,IcosahedronGeometry:aw,LatheGeometry:sw,OctahedronGeometry:x_,PlaneGeometry:Ws,PolyhedronGeometry:Sd,RingGeometry:ow,ShapeGeometry:lw,SphereGeometry:S_,TetrahedronGeometry:cw,TorusGeometry:uw,TorusKnotGeometry:fw,TubeGeometry:dw,WireframeGeometry:hw});class QB extends Xa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class JB extends yo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class E2 extends Xa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xd,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fn,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class e4 extends E2{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _t(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return on(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new zt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class t4 extends Xa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new zt(16777215),this.specular=new zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xd,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fn,this.combine=g_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class n4 extends Xa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xd,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class i4 extends Xa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xd,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class r4 extends Xa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xd,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fn,this.combine=g_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class w2 extends Xa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=mB,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class T2 extends Xa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class a4 extends Xa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xd,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class s4 extends Ss{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Zh(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function o4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function l4(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function wC(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,s=0;s!==i;++a){const o=t[a]*e;for(let c=0;c!==e;++c)r[s++]=n[o+c]}return r}function M2(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),t.push(s)),a=n[r++];while(a!==void 0)}function SX(n,e,t,i,r=30){const a=n.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const f=a.tracks[c],p=f.getValueSize(),d=[],m=[];for(let v=0;v<f.times.length;++v){const _=f.times[v]*r;if(!(_<t||_>=i)){d.push(f.times[v]);for(let b=0;b<p;++b)m.push(f.values[v*p+b])}}d.length!==0&&(f.times=Zh(d,f.times.constructor),f.values=Zh(m,f.values.constructor),s.push(f))}a.tracks=s;let o=1/0;for(let c=0;c<a.tracks.length;++c)o>a.tracks[c].times[0]&&(o=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*o);return a.resetDuration(),a}function EX(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let s=0;s<r;++s){const o=t.tracks[s],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(x){return x.name===o.name&&x.ValueTypeName===c});if(f===void 0)continue;let p=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=d/3);let m=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const _=o.times.length-1;let b;if(a<=o.times[0]){const x=p,T=d-p;b=o.values.slice(x,T)}else if(a>=o.times[_]){const x=_*d+p,T=x+d-p;b=o.values.slice(x,T)}else{const x=o.createInterpolant(),T=p,M=d-p;x.evaluate(a),b=x.resultBuffer.slice(T,M)}c==="quaternion"&&new Or().fromArray(b).normalize().conjugate().toArray(b);const S=f.times.length;for(let x=0;x<S;++x){const T=x*v+m;if(c==="quaternion")Or.multiplyQuaternionsFlat(f.values,T,b,0,f.values,T);else{const M=v-m*2;for(let A=0;A<M;++A)f.values[T+A]-=b[A]}}}return n.blendMode=l2,n}class wX{static convertArray(e,t){return Zh(e,t)}static isTypedArray(e){return o4(e)}static getKeyframeOrder(e){return l4(e)}static sortedArray(e,t,i){return wC(e,t,i)}static flattenJSON(e,t,i,r){M2(e,t,i,r)}static subclip(e,t,i,r,a=30){return SX(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return EX(e,t,i,r)}}class E_{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(a=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(i=2,a=o);for(let c=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=a,a=t[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const o=i+s>>>1;e<t[o]?s=o:i=o+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=i[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class c4 extends E_{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Yh,endingEnd:Yh}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,s=e+1,o=r[a],c=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case Wh:a=e,o=2*t-i;break;case U0:a=r.length-2,o=t+r[a]-r[a+1];break;default:a=e,o=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Wh:s=e,c=2*i-t;break;case U0:s=1,c=i+r[1]-r[0];break;default:s=e-1,c=t}const f=(i-t)*.5,p=this.valueSize;this._weightPrev=f/(t-o),this._weightNext=f/(c-i),this._offsetPrev=a*p,this._offsetNext=s*p}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,p=this._offsetPrev,d=this._offsetNext,m=this._weightPrev,v=this._weightNext,_=(i-t)/(r-t),b=_*_,S=b*_,x=-m*S+2*m*b-m*_,T=(1+m)*S+(-1.5-2*m)*b+(-.5+m)*_+1,M=(-1-v)*S+(1.5+v)*b+.5*_,A=v*S-v*b;for(let D=0;D!==o;++D)a[D]=x*s[p+D]+T*s[f+D]+M*s[c+D]+A*s[d+D];return a}}class A2 extends E_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,f=c-o,p=(i-t)/(r-t),d=1-p;for(let m=0;m!==o;++m)a[m]=s[f+m]*d+s[c+m]*p;return a}}class u4 extends E_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Zh(t,this.TimeBufferType),this.values=Zh(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Zh(e.times,Array),values:Zh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new u4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new A2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new c4(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case I0:t=this.InterpolantFactoryMethodDiscrete;break;case FE:t=this.InterpolantFactoryMethodLinear;break;case US:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return I0;case this.InterpolantFactoryMethodLinear:return FE;case this.InterpolantFactoryMethodSmooth:return US}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const c=i[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,s),e=!1;break}s=c}if(r!==void 0&&o4(r))for(let o=0,c=r.length;o!==c;++o){const f=r[o];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===US,a=e.length-1;let s=1;for(let o=1;o<a;++o){let c=!1;const f=e[o],p=e[o+1];if(f!==p&&(o!==1||f!==e[0]))if(r)c=!0;else{const d=o*i,m=d-i,v=d+i;for(let _=0;_!==i;++_){const b=t[d+_];if(b!==t[m+_]||b!==t[v+_]){c=!0;break}}}if(c){if(o!==s){e[s]=e[o];const d=o*i,m=s*i;for(let v=0;v!==i;++v)t[m+v]=t[d+v]}++s}}if(a>0){e[s]=e[a];for(let o=a*i,c=s*i,f=0;f!==i;++f)t[c+f]=t[o+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Zo.prototype.ValueTypeName="";Zo.prototype.TimeBufferType=Float32Array;Zo.prototype.ValueBufferType=Float32Array;Zo.prototype.DefaultInterpolation=FE;class Sp extends Zo{constructor(e,t,i){super(e,t,i)}}Sp.prototype.ValueTypeName="bool";Sp.prototype.ValueBufferType=Array;Sp.prototype.DefaultInterpolation=I0;Sp.prototype.InterpolantFactoryMethodLinear=void 0;Sp.prototype.InterpolantFactoryMethodSmooth=void 0;class C2 extends Zo{constructor(e,t,i,r){super(e,t,i,r)}}C2.prototype.ValueTypeName="color";class V0 extends Zo{constructor(e,t,i,r){super(e,t,i,r)}}V0.prototype.ValueTypeName="number";class f4 extends E_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=(i-t)/(r-t);let f=e*o;for(let p=f+o;f!==p;f+=4)Or.slerpFlat(a,0,s,f-o,s,f,c);return a}}class w_ extends Zo{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new f4(this.times,this.values,this.getValueSize(),e)}}w_.prototype.ValueTypeName="quaternion";w_.prototype.InterpolantFactoryMethodSmooth=void 0;class Ep extends Zo{constructor(e,t,i){super(e,t,i)}}Ep.prototype.ValueTypeName="string";Ep.prototype.ValueBufferType=Array;Ep.prototype.DefaultInterpolation=I0;Ep.prototype.InterpolantFactoryMethodLinear=void 0;Ep.prototype.InterpolantFactoryMethodSmooth=void 0;class G0 extends Zo{constructor(e,t,i,r){super(e,t,i,r)}}G0.prototype.ValueTypeName="vector";class Y0{constructor(e="",t=-1,i=[],r=H1){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=vo(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,o=i.length;s!==o;++s)t.push(MX(i[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=i.length;a!==s;++a)t.push(Zo.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,s=[];for(let o=0;o<a;o++){let c=[],f=[];c.push((o+a-1)%a,o,(o+1)%a),f.push(0,1,0);const p=l4(c);c=wC(c,1,p),f=wC(f,1,p),!r&&c[0]===0&&(c.push(a),f.push(f[0])),s.push(new V0(".morphTargetInfluences["+t[o].name+"]",c,f).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const f=e[o],p=f.name.match(a);if(p&&p.length>1){const d=p[1];let m=r[d];m||(r[d]=m=[]),m.push(f)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,m,v,_,b){if(v.length!==0){const S=[],x=[];M2(v,S,x,_),S.length!==0&&b.push(new d(m,S,x))}},r=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let d=0;d<f.length;d++){const m=f[d].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let _;for(_=0;_<m.length;_++)if(m[_].morphTargets)for(let b=0;b<m[_].morphTargets.length;b++)v[m[_].morphTargets[b]]=-1;for(const b in v){const S=[],x=[];for(let T=0;T!==m[_].morphTargets.length;++T){const M=m[_];S.push(M.time),x.push(M.morphTarget===b?1:0)}r.push(new V0(".morphTargetInfluence["+b+"]",S,x))}c=v.length*s}else{const v=".bones["+t[d].name+"]";i(G0,v+".position",m,"pos",r),i(w_,v+".quaternion",m,"rot",r),i(G0,v+".scale",m,"scl",r)}}return r.length===0?null:new this(a,c,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function TX(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return V0;case"vector":case"vector2":case"vector3":case"vector4":return G0;case"color":return C2;case"quaternion":return w_;case"bool":case"boolean":return Sp;case"string":return Ep}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function MX(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=TX(n.type);if(n.times===void 0){const t=[],i=[];M2(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Bc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class R2{constructor(e,t,i){const r=this;let a=!1,s=0,o=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.abortController=new AbortController,this.itemStart=function(p){o++,a===!1&&r.onStart!==void 0&&r.onStart(p,s,o),a=!0},this.itemEnd=function(p){s++,r.onProgress!==void 0&&r.onProgress(p,s,o),s===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,d){return f.push(p,d),this},this.removeHandler=function(p){const d=f.indexOf(p);return d!==-1&&f.splice(d,2),this},this.getHandler=function(p){for(let d=0,m=f.length;d<m;d+=2){const v=f[d],_=f[d+1];if(v.global&&(v.lastIndex=0),v.test(p))return _}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const d4=new R2;class Zs{constructor(e){this.manager=e!==void 0?e:d4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Zs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Mu={};class AX extends Error{constructor(e,t){super(e),this.response=t}}class ku extends Zs{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Bc.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Mu[e]!==void 0){Mu[e].push({onLoad:t,onProgress:i,onError:r});return}Mu[e]=[],Mu[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,c=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const p=Mu[e],d=f.body.getReader(),m=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),v=m?parseInt(m):0,_=v!==0;let b=0;const S=new ReadableStream({start(x){T();function T(){d.read().then(({done:M,value:A})=>{if(M)x.close();else{b+=A.byteLength;const D=new ProgressEvent("progress",{lengthComputable:_,loaded:b,total:v});for(let O=0,I=p.length;O<I;O++){const U=p[O];U.onProgress&&U.onProgress(D)}x.enqueue(A),T()}},M=>{x.error(M)})}}});return new Response(S)}else throw new AX(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(p=>new DOMParser().parseFromString(p,o));case"json":return f.json();default:if(o==="")return f.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),m=d&&d[1]?d[1].toLowerCase():void 0,v=new TextDecoder(m);return f.arrayBuffer().then(_=>v.decode(_))}}}).then(f=>{Bc.add(`file:${e}`,f);const p=Mu[e];delete Mu[e];for(let d=0,m=p.length;d<m;d++){const v=p[d];v.onLoad&&v.onLoad(f)}}).catch(f=>{const p=Mu[e];if(p===void 0)throw this.manager.itemError(e),f;delete Mu[e];for(let d=0,m=p.length;d<m;d++){const v=p[d];v.onError&&v.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class CX extends Zs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ku(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Y0.parse(e[i]);t.push(r)}return t}}class RX extends Zs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=[],o=new Q1,c=new ku(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let f=0;function p(d){c.load(e[d],function(m){const v=a.parse(m,!0);s[d]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},f+=1,f===6&&(v.mipmapCount===1&&(o.minFilter=Er),o.image=s,o.format=v.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let d=0,m=e.length;d<m;++d)p(d);else c.load(e,function(d){const m=a.parse(d,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let _=0;_<v;_++){s[_]={mipmaps:[]};for(let b=0;b<m.mipmapCount;b++)s[_].mipmaps.push(m.mipmaps[_*m.mipmapCount+b]),s[_].format=m.format,s[_].width=m.width,s[_].height=m.height}o.image=s}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=Er),o.format=m.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}const $m=new WeakMap;class W0 extends Zs{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Bc.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let d=$m.get(s);d===void 0&&(d=[],$m.set(s,d)),d.push({onLoad:t,onError:r})}return s}const o=B0("img");function c(){p(),t&&t(this);const d=$m.get(this)||[];for(let m=0;m<d.length;m++){const v=d[m];v.onLoad&&v.onLoad(this)}$m.delete(this),a.manager.itemEnd(e)}function f(d){p(),r&&r(d),Bc.remove(`image:${e}`);const m=$m.get(this)||[];for(let v=0;v<m.length;v++){const _=m[v];_.onError&&_.onError(d)}$m.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function p(){o.removeEventListener("load",c,!1),o.removeEventListener("error",f,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Bc.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class OX extends Zs{constructor(e){super(e)}load(e,t,i,r){const a=new y_;a.colorSpace=Aa;const s=new W0(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function c(f){s.load(e[f],function(p){a.images[f]=p,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return a}}class DX extends Zs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Yo,o=new ku(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(c){let f;try{f=a.parse(c)}catch(p){if(r!==void 0)r(p);else{console.error(p);return}}f.image!==void 0?s.image=f.image:f.data!==void 0&&(s.image.width=f.width,s.image.height=f.height,s.image.data=f.data),s.wrapS=f.wrapS!==void 0?f.wrapS:Vo,s.wrapT=f.wrapT!==void 0?f.wrapT:Vo,s.magFilter=f.magFilter!==void 0?f.magFilter:Er,s.minFilter=f.minFilter!==void 0?f.minFilter:Er,s.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(s.colorSpace=f.colorSpace),f.flipY!==void 0&&(s.flipY=f.flipY),f.format!==void 0&&(s.format=f.format),f.type!==void 0&&(s.type=f.type),f.mipmaps!==void 0&&(s.mipmaps=f.mipmaps,s.minFilter=zc),f.mipmapCount===1&&(s.minFilter=Er),f.generateMipmaps!==void 0&&(s.generateMipmaps=f.generateMipmaps),s.needsUpdate=!0,t&&t(s,f)},i,r),s}}class NX extends Zs{constructor(e){super(e)}load(e,t,i,r){const a=new dr,s=new W0(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class Ed extends Kn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new zt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class h4 extends Ed{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Kn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new zt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const NM=new Ft,RL=new ve,OL=new ve;class O2{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _t(512,512),this.mapType=Wo,this.map=null,this.mapPass=null,this.matrix=new Ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new uv,this._frameExtents=new _t(1,1),this._viewportCount=1,this._viewports=[new mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;RL.setFromMatrixPosition(e.matrixWorld),t.position.copy(RL),OL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(OL),t.updateMatrixWorld(),NM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(NM,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(NM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class LX extends O2{constructor(){super(new aa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Bg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class p4 extends Ed{constructor(e,t,i=0,r=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Kn.DEFAULT_UP),this.updateMatrix(),this.target=new Kn,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new LX}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const DL=new Ft,Zy=new ve,LM=new ve;class IX extends O2{constructor(){super(new aa(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _t(4,2),this._viewportCount=6,this._viewports=[new mn(2,1,1,1),new mn(0,1,1,1),new mn(3,1,1,1),new mn(1,1,1,1),new mn(3,0,1,1),new mn(1,0,1,1)],this._cubeDirections=[new ve(1,0,0),new ve(-1,0,0),new ve(0,0,1),new ve(0,0,-1),new ve(0,1,0),new ve(0,-1,0)],this._cubeUps=[new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,0,1),new ve(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),Zy.setFromMatrixPosition(e.matrixWorld),i.position.copy(Zy),LM.copy(i.position),LM.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(LM),i.updateMatrixWorld(),r.makeTranslation(-Zy.x,-Zy.y,-Zy.z),DL.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DL,i.coordinateSystem,i.reversedDepth)}}class m4 extends Ed{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new IX}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}let T_=class extends Y1{constructor(e=-1,t=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,o=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,o-=p*this.view.offsetY,c=o-p*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};class UX extends O2{constructor(){super(new T_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class g4 extends Ed{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Kn.DEFAULT_UP),this.updateMatrix(),this.target=new Kn,this.shadow=new UX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class v4 extends Ed{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class y4 extends Ed{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class _4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ve)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(i*a)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*i*a),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class b4 extends Ed{constructor(e=new _4,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class pw extends Zs{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,s=new ku(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new zt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new zt().setHex(s.value);break;case"v2":r.uniforms[a].value=new _t().fromArray(s.value);break;case"v3":r.uniforms[a].value=new ve().fromArray(s.value);break;case"v4":r.uniforms[a].value=new mn().fromArray(s.value);break;case"m3":r.uniforms[a].value=new xn().fromArray(s.value);break;case"m4":r.uniforms[a].value=new Ft().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new _t().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new _t().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return pw.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:QB,SpriteMaterial:p2,RawShaderMaterial:JB,ShaderMaterial:yo,PointsMaterial:g2,MeshPhysicalMaterial:e4,MeshStandardMaterial:E2,MeshPhongMaterial:t4,MeshToonMaterial:n4,MeshNormalMaterial:i4,MeshLambertMaterial:r4,MeshDepthMaterial:w2,MeshDistanceMaterial:T2,MeshBasicMaterial:oa,MeshMatcapMaterial:a4,LineDashedMaterial:s4,LineBasicMaterial:Ss,Material:Xa};return new t[e]}}class TC{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class mw extends wn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class x4 extends Zs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ku(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,_){if(t[_]!==void 0)return t[_];const S=v.interleavedBuffers[_],x=a(v,S.buffer),T=_g(S.type,x),M=new q1(T,S.stride);return M.uuid=S.uuid,t[_]=M,M}function a(v,_){if(i[_]!==void 0)return i[_];const S=v.arrayBuffers[_],x=new Uint32Array(S).buffer;return i[_]=x,x}const s=e.isInstancedBufferGeometry?new mw:new wn,o=e.data.index;if(o!==void 0){const v=_g(o.type,o.array);s.setIndex(new wi(v,1))}const c=e.data.attributes;for(const v in c){const _=c[v];let b;if(_.isInterleavedBufferAttribute){const S=r(e.data,_.data);b=new Wr(S,_.itemSize,_.offset,_.normalized)}else{const S=_g(_.type,_.array),x=_.isInstancedBufferAttribute?jg:wi;b=new x(S,_.itemSize,_.normalized)}_.name!==void 0&&(b.name=_.name),_.usage!==void 0&&b.setUsage(_.usage),s.setAttribute(v,b)}const f=e.data.morphAttributes;if(f)for(const v in f){const _=f[v],b=[];for(let S=0,x=_.length;S<x;S++){const T=_[S];let M;if(T.isInterleavedBufferAttribute){const A=r(e.data,T.data);M=new Wr(A,T.itemSize,T.offset,T.normalized)}else{const A=_g(T.type,T.array);M=new wi(A,T.itemSize,T.normalized)}T.name!==void 0&&(M.name=T.name),b.push(M)}s.morphAttributes[v]=b}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let v=0,_=d.length;v!==_;++v){const b=d[v];s.addGroup(b.start,b.count,b.materialIndex)}const m=e.data.boundingSphere;return m!==void 0&&(s.boundingSphere=new hr().fromJSON(m)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class PX extends Zs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=this.path===""?TC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new ku(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const p=f.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?TC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new ku(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(f)}),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,a,c,o,i),p=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,p),this.bindLightTargets(f),t!==void 0){let d=!1;for(const m in s)if(s[m].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,r,o,s,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new $h().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new K1().fromJSON(e[a],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new x4;for(let a=0,s=e.length;a<s;a++){let o;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(c);break;default:c.type in CL?o=CL[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),i[c.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new pw;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const c=e[s];i[c.uuid]===void 0&&(i[c.uuid]=a.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=Y0.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function s(c){return i.manager.itemStart(c),a.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const f=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return s(p)}else return c.data?{data:_g(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new R2(t);a=new W0(c),a.setCrossOrigin(this.crossOrigin);for(let f=0,p=e.length;f<p;f++){const d=e[f],m=d.url;if(Array.isArray(m)){const v=[];for(let _=0,b=m.length;_<b;_++){const S=m[_],x=o(S);x!==null&&(x instanceof HTMLImageElement?v.push(x):v.push(new Yo(x.data,x.width,x.height)))}r[d.uuid]=new ad(v)}else{const v=o(d.url);r[d.uuid]=new ad(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(s){if(typeof s=="string"){const o=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(c)}else return s.data?{data:_g(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new W0(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const c=e[s],f=c.url;if(Array.isArray(f)){const p=[];for(let d=0,m=f.length;d<m;d++){const v=f[d],_=await a(v);_!==null&&(_ instanceof HTMLImageElement?p.push(_):p.push(new Yo(_.data,_.width,_.height)))}i[c.uuid]=new ad(p)}else{const p=await a(c.url);i[c.uuid]=new ad(p)}}}return i}parseTextures(e,t){function i(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const c=t[o.image],f=c.data;let p;Array.isArray(f)?(p=new y_,f.length===6&&(p.needsUpdate=!0)):(f&&f.data?p=new Yo:p=new dr,f&&(p.needsUpdate=!0)),p.source=c,p.uuid=o.uuid,o.name!==void 0&&(p.name=o.name),o.mapping!==void 0&&(p.mapping=i(o.mapping,zX)),o.channel!==void 0&&(p.channel=o.channel),o.offset!==void 0&&p.offset.fromArray(o.offset),o.repeat!==void 0&&p.repeat.fromArray(o.repeat),o.center!==void 0&&p.center.fromArray(o.center),o.rotation!==void 0&&(p.rotation=o.rotation),o.wrap!==void 0&&(p.wrapS=i(o.wrap[0],NL),p.wrapT=i(o.wrap[1],NL)),o.format!==void 0&&(p.format=o.format),o.internalFormat!==void 0&&(p.internalFormat=o.internalFormat),o.type!==void 0&&(p.type=o.type),o.colorSpace!==void 0&&(p.colorSpace=o.colorSpace),o.minFilter!==void 0&&(p.minFilter=i(o.minFilter,LL)),o.magFilter!==void 0&&(p.magFilter=i(o.magFilter,LL)),o.anisotropy!==void 0&&(p.anisotropy=o.anisotropy),o.flipY!==void 0&&(p.flipY=o.flipY),o.generateMipmaps!==void 0&&(p.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(p.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(p.compareFunction=o.compareFunction),o.userData!==void 0&&(p.userData=o.userData),r[o.uuid]=p}return r}parseObject(e,t,i,r,a){let s;function o(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let _=0,b=m.length;_<b;_++){const S=m[_];i[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),v.push(i[S])}return v}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function f(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let p,d;switch(e.type){case"Scene":s=new X1,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new zt(e.background):s.background=f(e.background)),e.environment!==void 0&&(s.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Z1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new W1(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new aa(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new T_(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new v4(e.color,e.intensity);break;case"DirectionalLight":s=new g4(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new m4(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new y4(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new p4(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new h4(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new b4().fromJSON(e);break;case"SkinnedMesh":p=o(e.geometry),d=c(e.material),s=new UB(p,d),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":p=o(e.geometry),d=c(e.material),s=new Ei(p,d);break;case"InstancedMesh":p=o(e.geometry),d=c(e.material);const m=e.count,v=e.instanceMatrix,_=e.instanceColor;s=new PB(p,d,m),s.instanceMatrix=new jg(new Float32Array(v.array),16),_!==void 0&&(s.instanceColor=new jg(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":p=o(e.geometry),d=c(e.material),s=new zB(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),s.geometry=p,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(b=>{let S=null,x=null;return b.boundingBox!==void 0&&(S=new Hi().fromJSON(b.boundingBox)),b.boundingSphere!==void 0&&(x=new hr().fromJSON(b.boundingSphere)),{...b,boundingBox:S,boundingSphere:x}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=f(e.matricesTexture.uuid),s._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new hr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new Hi().fromJSON(e.boundingBox));break;case"LOD":s=new IB;break;case"Line":s=new vd(o(e.geometry),c(e.material));break;case"LineLoop":s=new BB(o(e.geometry),c(e.material));break;case"LineSegments":s=new Xc(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new kB(o(e.geometry),c(e.material));break;case"Sprite":s=new LB(c(e.material));break;case"Group":s=new _s;break;case"Bone":s=new m2;break;default:s=new Kn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)s.add(this.parseObject(m[v],t,i,r,a))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const _=m[v];s.animations.push(a[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const _=m[v],b=s.getObjectByProperty("uuid",_.object);b!==void 0&&s.addLevel(b,_.distance,_.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Kn}})}}const zX={UVMapping:I1,CubeReflectionMapping:zu,CubeRefractionMapping:md,EquirectangularReflectionMapping:O0,EquirectangularRefractionMapping:D0,CubeUVReflectionMapping:lv},NL={RepeatWrapping:N0,ClampToEdgeWrapping:Vo,MirroredRepeatWrapping:L0},LL={NearestFilter:Oa,NearestMipmapNearestFilter:e2,NearestMipmapLinearFilter:yg,LinearFilter:Er,LinearMipmapNearestFilter:d0,LinearMipmapLinearFilter:zc},IM=new WeakMap;class BX extends Zs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Bc.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(f=>{if(IM.has(s)===!0)r&&r(IM.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,o).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return Bc.add(`image-bitmap:${e}`,f),t&&t(f),a.manager.itemEnd(e),f}).catch(function(f){r&&r(f),IM.set(c,f),Bc.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Bc.add(`image-bitmap:${e}`,c),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let eS;class D2{static getContext(){return eS===void 0&&(eS=new(window.AudioContext||window.webkitAudioContext)),eS}static setContext(e){eS=e}}class kX extends Zs{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ku(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const f=c.slice(0);D2.getContext().decodeAudioData(f,function(d){t(d)}).catch(o)}catch(f){o(f)}},i,r);function o(c){r?r(c):console.error(c),a.manager.itemError(e)}}}const IL=new Ft,UL=new Ft,Mh=new Ft;class FX{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new aa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new aa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Mh.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,s=t.near*Math.tan(Kh*t.fov*.5)/t.zoom;let o,c;UL.elements[12]=-r,IL.elements[12]=r,o=-s*t.aspect+a,c=s*t.aspect+a,Mh.elements[0]=2*t.near/(c-o),Mh.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(Mh),o=-s*t.aspect-a,c=s*t.aspect-a,Mh.elements[0]=2*t.near/(c-o),Mh.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(Mh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(UL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(IL)}}class S4 extends aa{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class N2{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Ah=new ve,UM=new Or,HX=new ve,Ch=new ve,Rh=new ve;class jX extends Kn{constructor(){super(),this.type="AudioListener",this.context=D2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new N2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ah,UM,HX),Ch.set(0,0,-1).applyQuaternion(UM),Rh.set(0,1,0).applyQuaternion(UM),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ah.x,i),t.positionY.linearRampToValueAtTime(Ah.y,i),t.positionZ.linearRampToValueAtTime(Ah.z,i),t.forwardX.linearRampToValueAtTime(Ch.x,i),t.forwardY.linearRampToValueAtTime(Ch.y,i),t.forwardZ.linearRampToValueAtTime(Ch.z,i),t.upX.linearRampToValueAtTime(Rh.x,i),t.upY.linearRampToValueAtTime(Rh.y,i),t.upZ.linearRampToValueAtTime(Rh.z,i)}else t.setPosition(Ah.x,Ah.y,Ah.z),t.setOrientation(Ch.x,Ch.y,Ch.z,Rh.x,Rh.y,Rh.z)}}class E4 extends Kn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Oh=new ve,PL=new Or,VX=new ve,Dh=new ve;class GX extends E4{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Oh,PL,VX),Dh.set(0,0,1).applyQuaternion(PL);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Oh.x,i),t.positionY.linearRampToValueAtTime(Oh.y,i),t.positionZ.linearRampToValueAtTime(Oh.z,i),t.orientationX.linearRampToValueAtTime(Dh.x,i),t.orientationY.linearRampToValueAtTime(Dh.y,i),t.orientationZ.linearRampToValueAtTime(Dh.z,i)}else t.setPosition(Oh.x,Oh.y,Oh.z),t.setOrientation(Dh.x,Dh.y,Dh.z)}}class YX{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class w4{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)i[a+o]=i[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(i,a,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,s=r;a!==s;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){Or.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const s=this._workIndex*a;Or.multiplyQuaternionsFlat(e,s,e,t,e,i),Or.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,a){const s=1-r;for(let o=0;o!==a;++o){const c=t+o;e[c]=e[c]*s+e[i+o]*r}}_lerpAdditive(e,t,i,r,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[i+s]*r}}}const L2="\\[\\]\\.:\\/",WX=new RegExp("["+L2+"]","g"),I2="[^"+L2+"]",ZX="[^"+L2.replace("\\.","")+"]",XX=/((?:WC+[\/:])*)/.source.replace("WC",I2),qX=/(WCOD+)?/.source.replace("WCOD",ZX),KX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",I2),$X=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",I2),QX=new RegExp("^"+XX+qX+KX+$X+"$"),JX=["material","materials","bones","map"];class eq{constructor(e,t,i){const r=i||Jn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Jn{constructor(e,t,i){this.path=t,this.parsedPath=i||Jn.parseTrackName(t),this.node=Jn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Jn.Composite(e,t,i):new Jn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(WX,"")}static parseTrackName(e){const t=QX.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);JX.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const c=i(o.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=Jn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===f){f=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Jn.Composite=eq;Jn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Jn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Jn.prototype.GetterByBindingType=[Jn.prototype._getValue_direct,Jn.prototype._getValue_array,Jn.prototype._getValue_arrayElement,Jn.prototype._getValue_toArray];Jn.prototype.SetterByBindingTypeAndVersioning=[[Jn.prototype._setValue_direct,Jn.prototype._setValue_direct_setNeedsUpdate,Jn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_array,Jn.prototype._setValue_array_setNeedsUpdate,Jn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_arrayElement,Jn.prototype._setValue_arrayElement_setNeedsUpdate,Jn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jn.prototype._setValue_fromArray,Jn.prototype._setValue_fromArray_setNeedsUpdate,Jn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tq{constructor(){this.isAnimationObjectGroup=!0,this.uuid=vo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let o,c=e.length,f=this.nCachedObjects_;for(let p=0,d=arguments.length;p!==d;++p){const m=arguments[p],v=m.uuid;let _=t[v];if(_===void 0){_=c++,t[v]=_,e.push(m);for(let b=0,S=s;b!==S;++b)a[b].push(new Jn(m,i[b],r[b]))}else if(_<f){o=e[_];const b=--f,S=e[b];t[S.uuid]=_,e[_]=S,t[v]=b,e[b]=m;for(let x=0,T=s;x!==T;++x){const M=a[x],A=M[b];let D=M[_];M[_]=A,D===void 0&&(D=new Jn(m,i[x],r[x])),M[b]=D}}else e[_]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const c=arguments[s],f=c.uuid,p=t[f];if(p!==void 0&&p>=a){const d=a++,m=e[d];t[m.uuid]=p,e[p]=m,t[f]=d,e[d]=c;for(let v=0,_=r;v!==_;++v){const b=i[v],S=b[d],x=b[p];b[p]=S,b[d]=x}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],p=f.uuid,d=t[p];if(d!==void 0)if(delete t[p],d<a){const m=--a,v=e[m],_=--s,b=e[_];t[v.uuid]=d,e[d]=v,t[b.uuid]=m,e[m]=b,e.pop();for(let S=0,x=r;S!==x;++S){const T=i[S],M=T[m],A=T[_];T[d]=M,T[m]=A,T.pop()}}else{const m=--s,v=e[m];m>0&&(t[v.uuid]=d),e[d]=v,e.pop();for(let _=0,b=r;_!==b;++_){const S=i[_];S[d]=S[m],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,o=this._parsedPaths,c=this._objects,f=c.length,p=this.nCachedObjects_,d=new Array(f);r=a.length,i[e]=r,s.push(e),o.push(t),a.push(d);for(let m=p,v=c.length;m!==v;++m){const _=c[m];d[m]=new Jn(_,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,c=s[o],f=e[o];t[f]=i,s[i]=c,s.pop(),a[i]=a[o],a.pop(),r[i]=r[o],r.pop()}}}class T4{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,s=a.length,o=new Array(s),c={endingStart:Yh,endingEnd:Yh};for(let f=0;f!==s;++f){const p=a[f].createInterpolant(null);o[f]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=hB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,o=r/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=a,c[1]=a+i,f[0]=e/s,f[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case l2:for(let p=0,d=c.length;p!==d;++p)c[p].evaluate(s),f[p].accumulateAdditive(o);break;case H1:default:for(let p=0,d=c.length;p!==d;++p)c[p].evaluate(s),f[p].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===pB;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(i===dB){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Wh,r.endingEnd=Wh):(e?r.endingStart=this.zeroSlopeAtStart?Wh:Yh:r.endingStart=U0,t?r.endingEnd=this.zeroSlopeAtEnd?Wh:Yh:r.endingEnd=U0)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,c=s.sampleValues;return o[0]=a,c[0]=t,o[1]=a+e,c[1]=i,this}}const nq=new Float32Array(1);class iq extends Zc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,o=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let p=f[c];p===void 0&&(p={},f[c]=p);for(let d=0;d!==a;++d){const m=r[d],v=m.name;let _=p[v];if(_!==void 0)++_.referenceCount,s[d]=_;else{if(_=s[d],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,v));continue}const b=t&&t._propertyBindings[d].binding.parsedPath;_=new w4(Jn.create(i,v,b),m.ValueTypeName,m.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,v),s[d]=_}o[d].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],c=o.knownActions,f=c[c.length-1],p=e._byClipCacheIndex;f._byClipCacheIndex=p,c[p]=f,c.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete d[m],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,o=s[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new A2(new Float32Array(2),new Float32Array(2),1,nq),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?Y0.findByName(r,e):e;const o=s!==null?s.uuid:e,c=this._actionsByClip[o];let f=null;if(i===void 0&&(s!==null?i=s.blendMode:i=H1),c!==void 0){const d=c.actionByRoot[a];if(d!==void 0&&d.blendMode===i)return d;f=c.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const p=new T4(this,s,t,i);return this._bindAction(p,f),this._addInactiveAction(p,o,a),p}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?Y0.findByName(i,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,a,s);const o=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)o[f].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let o=0,c=s.length;o!==c;++o){const f=s[o];this._deactivateAction(f);const p=f._cacheIndex,d=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,d._cacheIndex=p,t[p]=d,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const o=i[s].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class rq extends f2{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new G1(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class U2{constructor(e){this.value=e}clone(){return new U2(this.value.clone===void 0?this.value:this.value.clone())}}let aq=0;class sq extends Zc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:aq++}),this.name="",this.usage=z0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class op extends q1{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class oq{constructor(e,t,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const zL=new Ft;class M_{constructor(e,t,i=0,r=1/0){this.ray=new cv(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new kg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return zL.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(zL),this}intersectObject(e,t=!0,i=[]){return MC(e,this,i,t),i.sort(BL),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)MC(e[r],this,i,t);return i.sort(BL),i}}function BL(n,e){return n.distance-e.distance}function MC(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let s=0,o=a.length;s<o;s++)MC(a[s],e,t,!0)}}class lq{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=cq.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function cq(){this._document.hidden===!1&&this.reset()}class M4{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=on(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(on(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uq{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class P2{constructor(e,t,i,r){P2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const kL=new _t;class fq{constructor(e=new _t(1/0,1/0),t=new _t(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=kL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const FL=new ve,tS=new ve,Qm=new ve,Jm=new ve,PM=new ve,dq=new ve,hq=new ve;class z2{constructor(e=new ve,t=new ve){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){FL.subVectors(e,this.start),tS.subVectors(this.end,this.start);const i=tS.dot(tS);let a=tS.dot(FL)/i;return t&&(a=on(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=dq,i=hq){const r=10000000000000001e-32;let a,s;const o=this.start,c=e.start,f=this.end,p=e.end;Qm.subVectors(f,o),Jm.subVectors(p,c),PM.subVectors(o,c);const d=Qm.dot(Qm),m=Jm.dot(Jm),v=Jm.dot(PM);if(d<=r&&m<=r)return t.copy(o),i.copy(c),t.sub(i),t.dot(t);if(d<=r)a=0,s=v/m,s=on(s,0,1);else{const _=Qm.dot(PM);if(m<=r)s=0,a=on(-_/d,0,1);else{const b=Qm.dot(Jm),S=d*m-b*b;S!==0?a=on((b*v-_*m)/S,0,1):a=0,s=(b*a+v)/m,s<0?(s=0,a=on(-_/d,0,1)):s>1&&(s=1,a=on((b-_)/d,0,1))}}return t.copy(o).add(Qm.multiplyScalar(a)),i.copy(c).add(Jm.multiplyScalar(s)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const HL=new ve;class pq extends Kn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new wn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,c=32;s<c;s++,o++){const f=s/c*Math.PI*2,p=o/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new kt(r,3));const a=new Ss({fog:!1,toneMapped:!1});this.cone=new Xc(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),HL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(HL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Vf=new ve,nS=new Ft,zM=new Ft;class mq extends Xc{constructor(e){const t=A4(e),i=new wn,r=[],a=[];for(let f=0;f<t.length;f++){const p=t[f];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new kt(r,3)),i.setAttribute("color",new kt(a,3));const s=new Ss({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new zt(255),c=new zt(65280);this.setColors(o,c)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");zM.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(nS.multiplyMatrices(zM,o.matrixWorld),Vf.setFromMatrixPosition(nS),r.setXYZ(s,Vf.x,Vf.y,Vf.z),nS.multiplyMatrices(zM,o.parent.matrixWorld),Vf.setFromMatrixPosition(nS),r.setXYZ(s+1,Vf.x,Vf.y,Vf.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function A4(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...A4(n.children[t]));return e}class gq extends Ei{constructor(e,t,i){const r=new S_(t,4,2),a=new oa({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const vq=new ve,jL=new zt,VL=new zt;class yq extends Kn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new x_(t);r.rotateY(Math.PI*.5),this.material=new oa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new wi(s,3)),this.add(new Ei(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");jL.copy(this.light.color),VL.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?jL:VL;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(vq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class B2 extends Xc{constructor(e=10,t=10,i=4473924,r=8947848){i=new zt(i),r=new zt(r);const a=t/2,s=e/t,o=e/2,c=[],f=[];for(let m=0,v=0,_=-o;m<=t;m++,_+=s){c.push(-o,0,_,o,0,_),c.push(_,0,-o,_,0,o);const b=m===a?i:r;b.toArray(f,v),v+=3,b.toArray(f,v),v+=3,b.toArray(f,v),v+=3,b.toArray(f,v),v+=3}const p=new wn;p.setAttribute("position",new kt(c,3)),p.setAttribute("color",new kt(f,3));const d=new Ss({vertexColors:!0,toneMapped:!1});super(p,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class _q extends Xc{constructor(e=10,t=16,i=8,r=64,a=4473924,s=8947848){a=new zt(a),s=new zt(s);const o=[],c=[];if(t>1)for(let d=0;d<t;d++){const m=d/t*(Math.PI*2),v=Math.sin(m)*e,_=Math.cos(m)*e;o.push(0,0,0),o.push(v,0,_);const b=d&1?a:s;c.push(b.r,b.g,b.b),c.push(b.r,b.g,b.b)}for(let d=0;d<i;d++){const m=d&1?a:s,v=e-e/i*d;for(let _=0;_<r;_++){let b=_/r*(Math.PI*2),S=Math.sin(b)*v,x=Math.cos(b)*v;o.push(S,0,x),c.push(m.r,m.g,m.b),b=(_+1)/r*(Math.PI*2),S=Math.sin(b)*v,x=Math.cos(b)*v,o.push(S,0,x),c.push(m.r,m.g,m.b)}}const f=new wn;f.setAttribute("position",new kt(o,3)),f.setAttribute("color",new kt(c,3));const p=new Ss({vertexColors:!0,toneMapped:!1});super(f,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const GL=new ve,iS=new ve,YL=new ve;class bq extends Kn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new wn;r.setAttribute("position",new kt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Ss({fog:!1,toneMapped:!1});this.lightPlane=new vd(r,a),this.add(this.lightPlane),r=new wn,r.setAttribute("position",new kt([0,0,0,0,0,1],3)),this.targetLine=new vd(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),GL.setFromMatrixPosition(this.light.matrixWorld),iS.setFromMatrixPosition(this.light.target.matrixWorld),YL.subVectors(iS,GL),this.lightPlane.lookAt(iS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(iS),this.targetLine.scale.z=YL.length()}}const rS=new ve,cr=new Y1;class xq extends Xc{constructor(e){const t=new wn,i=new Ss({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(_,b){c(_),c(b)}function c(_){r.push(0,0,0),a.push(0,0,0),s[_]===void 0&&(s[_]=[]),s[_].push(r.length/3-1)}t.setAttribute("position",new kt(r,3)),t.setAttribute("color",new kt(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const f=new zt(16755200),p=new zt(16711680),d=new zt(43775),m=new zt(16777215),v=new zt(3355443);this.setColors(f,p,d,m,v)}setColors(e,t,i,r,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let a,s;if(cr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===po)a=-1,s=1;else if(this.camera.coordinateSystem===zg)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);xr("c",t,e,cr,0,0,a),xr("t",t,e,cr,0,0,s),xr("n1",t,e,cr,-i,-r,a),xr("n2",t,e,cr,i,-r,a),xr("n3",t,e,cr,-i,r,a),xr("n4",t,e,cr,i,r,a),xr("f1",t,e,cr,-i,-r,s),xr("f2",t,e,cr,i,-r,s),xr("f3",t,e,cr,-i,r,s),xr("f4",t,e,cr,i,r,s),xr("u1",t,e,cr,i*.7,r*1.1,a),xr("u2",t,e,cr,-i*.7,r*1.1,a),xr("u3",t,e,cr,0,r*2,a),xr("cf1",t,e,cr,-i,0,s),xr("cf2",t,e,cr,i,0,s),xr("cf3",t,e,cr,0,-r,s),xr("cf4",t,e,cr,0,r,s),xr("cn1",t,e,cr,-i,0,a),xr("cn2",t,e,cr,i,0,a),xr("cn3",t,e,cr,0,-r,a),xr("cn4",t,e,cr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function xr(n,e,t,i,r,a,s){rS.set(r,a,s).unproject(i);const o=e[n];if(o!==void 0){const c=t.getAttribute("position");for(let f=0,p=o.length;f<p;f++)c.setXYZ(o[f],rS.x,rS.y,rS.z)}}const aS=new Hi;class Sq extends Xc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new wn;a.setIndex(new wi(i,1)),a.setAttribute("position",new wi(r,3)),super(a,new Ss({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&aS.setFromObject(this.object),aS.isEmpty())return;const e=aS.min,t=aS.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Eq extends Xc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new wn;a.setIndex(new wi(i,1)),a.setAttribute("position",new kt(r,3)),super(a,new Ss({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class wq extends vd{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new wn;s.setAttribute("position",new kt(a,3)),s.computeBoundingSphere(),super(s,new Ss({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new wn;c.setAttribute("position",new kt(o,3)),c.computeBoundingSphere(),this.add(new Ei(c,new oa({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const WL=new ve;let sS,BM;class Tq extends Kn{constructor(e=new ve(0,0,1),t=new ve(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",sS===void 0&&(sS=new wn,sS.setAttribute("position",new kt([0,0,0,0,1,0],3)),BM=new b_(.5,1,5,1),BM.translate(0,-.5,0)),this.position.copy(t),this.line=new vd(sS,new Ss({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ei(BM,new oa({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{WL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(WL,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Mq extends Xc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new wn;r.setAttribute("position",new kt(t,3)),r.setAttribute("color",new kt(i,3));const a=new Ss({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new zt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Aq{constructor(){this.type="ShapePath",this.color=new zt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new GE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,s){return this.currentPath.bezierCurveTo(e,t,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const T=[];for(let M=0,A=x.length;M<A;M++){const D=x[M],O=new $h;O.curves=D.curves,T.push(O)}return T}function i(x,T){const M=T.length;let A=!1;for(let D=M-1,O=0;O<M;D=O++){let I=T[D],U=T[O],N=U.x-I.x,L=U.y-I.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(I=T[O],N=-N,U=T[D],L=-L),x.y<I.y||x.y>U.y)continue;if(x.y===I.y){if(x.x===I.x)return!0}else{const Y=L*(x.x-I.x)-N*(x.y-I.y);if(Y===0)return!0;if(Y<0)continue;A=!A}}else{if(x.y!==I.y)continue;if(U.x<=x.x&&x.x<=I.x||I.x<=x.x&&x.x<=U.x)return!0}}return A}const r=Ol.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,c;const f=[];if(a.length===1)return o=a[0],c=new $h,c.curves=o.curves,f.push(c),f;let p=!r(a[0].getPoints());p=e?!p:p;const d=[],m=[];let v=[],_=0,b;m[_]=void 0,v[_]=[];for(let x=0,T=a.length;x<T;x++)o=a[x],b=o.getPoints(),s=r(b),s=e?!s:s,s?(!p&&m[_]&&_++,m[_]={s:new $h,p:b},m[_].s.curves=o.curves,p&&_++,v[_]=[]):v[_].push({h:o,p:b[0]});if(!m[0])return t(a);if(m.length>1){let x=!1,T=0;for(let M=0,A=m.length;M<A;M++)d[M]=[];for(let M=0,A=m.length;M<A;M++){const D=v[M];for(let O=0;O<D.length;O++){const I=D[O];let U=!0;for(let N=0;N<m.length;N++)i(I.p,m[N].p)&&(M!==N&&T++,U?(U=!1,d[N].push(I)):x=!0);U&&d[M].push(I)}}T>0&&x===!1&&(v=d)}let S;for(let x=0,T=m.length;x<T;x++){c=m[x].s,f.push(c),S=v[x];for(let M=0,A=S.length;M<A;M++)c.holes.push(S[M].h)}return f}}let Cq=class extends Zc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function Rq(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Oq(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Dq(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function AC(n,e,t,i){const r=Nq(i);switch(t){case a2:return n*e;case B1:return n*e/r.components*r.byteLength;case v_:return n*e/r.components*r.byteLength;case o2:return n*e*2/r.components*r.byteLength;case k1:return n*e*2/r.components*r.byteLength;case s2:return n*e*3/r.components*r.byteLength;case Wa:return n*e*4/r.components*r.byteLength;case F1:return n*e*4/r.components*r.byteLength;case h0:case p0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case m0:case g0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case hE:case mE:return Math.max(n,16)*Math.max(e,8)/4;case dE:case pE:return Math.max(n,8)*Math.max(e,8)/2;case gE:case vE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case yE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case _E:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case bE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case xE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case SE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case EE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case wE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case TE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case ME:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case AE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case CE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case RE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case OE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case DE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case NE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case LE:case IE:case UE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case PE:case zE:return Math.ceil(n/4)*Math.ceil(e/4)*8;case BE:case kE:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Nq(n){switch(n){case Wo:case t2:return{byteLength:1,components:1};case Lg:case n2:case _p:return{byteLength:2,components:1};case P1:case z1:return{byteLength:2,components:4};case Bu:case U1:case ys:return{byteLength:4,components:1};case i2:case r2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class Lq{static contain(e,t){return Rq(e,t)}static cover(e,t){return Oq(e,t)}static fill(e){return Dq(e)}static getByteLength(e,t,i,r){return AC(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:m_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=m_);function C4(){let n=null,e=!1,t=null,i=null;function r(a,s){t(a,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function Iq(n){const e=new WeakMap;function t(o,c){const f=o.array,p=o.usage,d=f.byteLength,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,f,p),o.onUploadCallback();let v;if(f instanceof Float32Array)v=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)v=n.HALF_FLOAT;else if(f instanceof Uint16Array)o.isFloat16BufferAttribute?v=n.HALF_FLOAT:v=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=n.SHORT;else if(f instanceof Uint32Array)v=n.UNSIGNED_INT;else if(f instanceof Int32Array)v=n.INT;else if(f instanceof Int8Array)v=n.BYTE;else if(f instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,c,f){const p=c.array,d=c.updateRanges;if(n.bindBuffer(f,o),d.length===0)n.bufferSubData(f,0,p);else{d.sort((v,_)=>v.start-_.start);let m=0;for(let v=1;v<d.length;v++){const _=d[m],b=d[v];b.start<=_.start+_.count+1?_.count=Math.max(_.count,b.start+b.count-_.start):(++m,d[m]=b)}d.length=m+1;for(let v=0,_=d.length;v<_;v++){const b=d[v];n.bufferSubData(f,b.start*p.BYTES_PER_ELEMENT,p,b.start,b.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(n.deleteBuffer(c.buffer),e.delete(o))}function s(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const p=e.get(o);(!p||p.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const f=e.get(o);if(f===void 0)e.set(o,t(o,c));else if(f.version<o.version){if(f.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,o,c),f.version=o.version}}return{get:r,remove:a,update:s}}var Uq=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Pq=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,zq=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Bq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kq=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Fq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Hq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,jq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Vq=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Gq=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Yq=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Wq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Zq=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Xq=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,qq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Kq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,$q=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Qq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Jq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,eK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,tK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,nK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,iK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,rK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,aK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,sK=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,oK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,lK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,cK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,uK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fK="gl_FragColor = linearToOutputTexel( gl_FragColor );",dK=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,hK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,pK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,mK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,gK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,vK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,yK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,_K=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,bK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,SK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,EK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,wK=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,TK=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,MK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,AK=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,CK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,RK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,OK=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,DK=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,NK=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,LK=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,IK=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,UK=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,PK=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,zK=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,BK=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kK=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,FK=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,HK=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,jK=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,VK=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,GK=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,YK=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,WK=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ZK=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,XK=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,qK=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,KK=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,$K=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,QK=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,JK=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,e$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,t$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,n$=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,i$=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,r$=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,a$=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,s$=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,o$=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,l$=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,c$=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,u$=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,f$=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,d$=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,h$=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,p$=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,m$=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,g$=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,v$=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,y$=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,_$=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,b$=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,x$=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,S$=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,E$=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,w$=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,T$=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,M$=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,A$=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,C$=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,R$=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,O$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,D$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,N$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,L$=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const I$=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,U$=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,P$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,z$=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,B$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,k$=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F$=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,H$=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,j$=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,V$=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,G$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Y$=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,W$=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Z$=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,X$=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,q$=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K$=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$$=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q$=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,J$=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eQ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,tQ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,nQ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iQ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rQ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,aQ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sQ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oQ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lQ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,cQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uQ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fQ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,dQ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,An={alphahash_fragment:Uq,alphahash_pars_fragment:Pq,alphamap_fragment:zq,alphamap_pars_fragment:Bq,alphatest_fragment:kq,alphatest_pars_fragment:Fq,aomap_fragment:Hq,aomap_pars_fragment:jq,batching_pars_vertex:Vq,batching_vertex:Gq,begin_vertex:Yq,beginnormal_vertex:Wq,bsdfs:Zq,iridescence_fragment:Xq,bumpmap_pars_fragment:qq,clipping_planes_fragment:Kq,clipping_planes_pars_fragment:$q,clipping_planes_pars_vertex:Qq,clipping_planes_vertex:Jq,color_fragment:eK,color_pars_fragment:tK,color_pars_vertex:nK,color_vertex:iK,common:rK,cube_uv_reflection_fragment:aK,defaultnormal_vertex:sK,displacementmap_pars_vertex:oK,displacementmap_vertex:lK,emissivemap_fragment:cK,emissivemap_pars_fragment:uK,colorspace_fragment:fK,colorspace_pars_fragment:dK,envmap_fragment:hK,envmap_common_pars_fragment:pK,envmap_pars_fragment:mK,envmap_pars_vertex:gK,envmap_physical_pars_fragment:AK,envmap_vertex:vK,fog_vertex:yK,fog_pars_vertex:_K,fog_fragment:bK,fog_pars_fragment:xK,gradientmap_pars_fragment:SK,lightmap_pars_fragment:EK,lights_lambert_fragment:wK,lights_lambert_pars_fragment:TK,lights_pars_begin:MK,lights_toon_fragment:CK,lights_toon_pars_fragment:RK,lights_phong_fragment:OK,lights_phong_pars_fragment:DK,lights_physical_fragment:NK,lights_physical_pars_fragment:LK,lights_fragment_begin:IK,lights_fragment_maps:UK,lights_fragment_end:PK,logdepthbuf_fragment:zK,logdepthbuf_pars_fragment:BK,logdepthbuf_pars_vertex:kK,logdepthbuf_vertex:FK,map_fragment:HK,map_pars_fragment:jK,map_particle_fragment:VK,map_particle_pars_fragment:GK,metalnessmap_fragment:YK,metalnessmap_pars_fragment:WK,morphinstance_vertex:ZK,morphcolor_vertex:XK,morphnormal_vertex:qK,morphtarget_pars_vertex:KK,morphtarget_vertex:$K,normal_fragment_begin:QK,normal_fragment_maps:JK,normal_pars_fragment:e$,normal_pars_vertex:t$,normal_vertex:n$,normalmap_pars_fragment:i$,clearcoat_normal_fragment_begin:r$,clearcoat_normal_fragment_maps:a$,clearcoat_pars_fragment:s$,iridescence_pars_fragment:o$,opaque_fragment:l$,packing:c$,premultiplied_alpha_fragment:u$,project_vertex:f$,dithering_fragment:d$,dithering_pars_fragment:h$,roughnessmap_fragment:p$,roughnessmap_pars_fragment:m$,shadowmap_pars_fragment:g$,shadowmap_pars_vertex:v$,shadowmap_vertex:y$,shadowmask_pars_fragment:_$,skinbase_vertex:b$,skinning_pars_vertex:x$,skinning_vertex:S$,skinnormal_vertex:E$,specularmap_fragment:w$,specularmap_pars_fragment:T$,tonemapping_fragment:M$,tonemapping_pars_fragment:A$,transmission_fragment:C$,transmission_pars_fragment:R$,uv_pars_fragment:O$,uv_pars_vertex:D$,uv_vertex:N$,worldpos_vertex:L$,background_vert:I$,background_frag:U$,backgroundCube_vert:P$,backgroundCube_frag:z$,cube_vert:B$,cube_frag:k$,depth_vert:F$,depth_frag:H$,distanceRGBA_vert:j$,distanceRGBA_frag:V$,equirect_vert:G$,equirect_frag:Y$,linedashed_vert:W$,linedashed_frag:Z$,meshbasic_vert:X$,meshbasic_frag:q$,meshlambert_vert:K$,meshlambert_frag:$$,meshmatcap_vert:Q$,meshmatcap_frag:J$,meshnormal_vert:eQ,meshnormal_frag:tQ,meshphong_vert:nQ,meshphong_frag:iQ,meshphysical_vert:rQ,meshphysical_frag:aQ,meshtoon_vert:sQ,meshtoon_frag:oQ,points_vert:lQ,points_frag:cQ,shadow_vert:uQ,shadow_frag:fQ,sprite_vert:dQ,sprite_frag:hQ},Dt={common:{diffuse:{value:new zt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xn}},envmap:{envMap:{value:null},envMapRotation:{value:new xn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xn},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new zt(16777215)},opacity:{value:1},center:{value:new _t(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}}},ms={basic:{uniforms:hs([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.fog]),vertexShader:An.meshbasic_vert,fragmentShader:An.meshbasic_frag},lambert:{uniforms:hs([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new zt(0)}}]),vertexShader:An.meshlambert_vert,fragmentShader:An.meshlambert_frag},phong:{uniforms:hs([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new zt(0)},specular:{value:new zt(1118481)},shininess:{value:30}}]),vertexShader:An.meshphong_vert,fragmentShader:An.meshphong_frag},standard:{uniforms:hs([Dt.common,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.roughnessmap,Dt.metalnessmap,Dt.fog,Dt.lights,{emissive:{value:new zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag},toon:{uniforms:hs([Dt.common,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.gradientmap,Dt.fog,Dt.lights,{emissive:{value:new zt(0)}}]),vertexShader:An.meshtoon_vert,fragmentShader:An.meshtoon_frag},matcap:{uniforms:hs([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,{matcap:{value:null}}]),vertexShader:An.meshmatcap_vert,fragmentShader:An.meshmatcap_frag},points:{uniforms:hs([Dt.points,Dt.fog]),vertexShader:An.points_vert,fragmentShader:An.points_frag},dashed:{uniforms:hs([Dt.common,Dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:An.linedashed_vert,fragmentShader:An.linedashed_frag},depth:{uniforms:hs([Dt.common,Dt.displacementmap]),vertexShader:An.depth_vert,fragmentShader:An.depth_frag},normal:{uniforms:hs([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,{opacity:{value:1}}]),vertexShader:An.meshnormal_vert,fragmentShader:An.meshnormal_frag},sprite:{uniforms:hs([Dt.sprite,Dt.fog]),vertexShader:An.sprite_vert,fragmentShader:An.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:An.background_vert,fragmentShader:An.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new xn}},vertexShader:An.backgroundCube_vert,fragmentShader:An.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:An.cube_vert,fragmentShader:An.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:An.equirect_vert,fragmentShader:An.equirect_frag},distanceRGBA:{uniforms:hs([Dt.common,Dt.displacementmap,{referencePosition:{value:new ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:An.distanceRGBA_vert,fragmentShader:An.distanceRGBA_frag},shadow:{uniforms:hs([Dt.lights,Dt.fog,{color:{value:new zt(0)},opacity:{value:1}}]),vertexShader:An.shadow_vert,fragmentShader:An.shadow_frag}};ms.physical={uniforms:hs([ms.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xn},clearcoatNormalScale:{value:new _t(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xn},sheen:{value:0},sheenColor:{value:new zt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xn},transmissionSamplerSize:{value:new _t},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xn},attenuationDistance:{value:0},attenuationColor:{value:new zt(0)},specularColor:{value:new zt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xn},anisotropyVector:{value:new _t},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xn}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag};const oS={r:0,b:0,g:0},Nh=new Fn,pQ=new Ft;function mQ(n,e,t,i,r,a,s){const o=new zt(0);let c=a===!0?0:1,f,p,d=null,m=0,v=null;function _(M){let A=M.isScene===!0?M.background:null;return A&&A.isTexture&&(A=(M.backgroundBlurriness>0?t:e).get(A)),A}function b(M){let A=!1;const D=_(M);D===null?x(o,c):D&&D.isColor&&(x(D,1),A=!0);const O=n.xr.getEnvironmentBlendMode();O==="additive"?i.buffers.color.setClear(0,0,0,1,s):O==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||A)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(M,A){const D=_(A);D&&(D.isCubeTexture||D.mapping===lv)?(p===void 0&&(p=new Ei(new bp(1,1,1),new yo({name:"BackgroundCubeMaterial",uniforms:Fg(ms.backgroundCube.uniforms),vertexShader:ms.backgroundCube.vertexShader,fragmentShader:ms.backgroundCube.fragmentShader,side:bs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(O,I,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),Nh.copy(A.backgroundRotation),Nh.x*=-1,Nh.y*=-1,Nh.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Nh.y*=-1,Nh.z*=-1),p.material.uniforms.envMap.value=D,p.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(pQ.makeRotationFromEuler(Nh)),p.material.toneMapped=qn.getTransfer(D.colorSpace)!==gi,(d!==D||m!==D.version||v!==n.toneMapping)&&(p.material.needsUpdate=!0,d=D,m=D.version,v=n.toneMapping),p.layers.enableAll(),M.unshift(p,p.geometry,p.material,0,0,null)):D&&D.isTexture&&(f===void 0&&(f=new Ei(new Ws(2,2),new yo({name:"BackgroundMaterial",uniforms:Fg(ms.background.uniforms),vertexShader:ms.background.vertexShader,fragmentShader:ms.background.fragmentShader,side:Pu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=D,f.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,f.material.toneMapped=qn.getTransfer(D.colorSpace)!==gi,D.matrixAutoUpdate===!0&&D.updateMatrix(),f.material.uniforms.uvTransform.value.copy(D.matrix),(d!==D||m!==D.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,d=D,m=D.version,v=n.toneMapping),f.layers.enableAll(),M.unshift(f,f.geometry,f.material,0,0,null))}function x(M,A){M.getRGB(oS,RB(n)),i.buffers.color.setClear(oS.r,oS.g,oS.b,A,s)}function T(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return o},setClearColor:function(M,A=1){o.set(M),c=A,x(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(M){c=M,x(o,c)},render:b,addToRenderList:S,dispose:T}}function gQ(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let a=r,s=!1;function o(L,Y,ee,se,he){let de=!1;const P=d(se,ee,Y);a!==P&&(a=P,f(a.object)),de=v(L,se,ee,he),de&&_(L,se,ee,he),he!==null&&e.update(he,n.ELEMENT_ARRAY_BUFFER),(de||s)&&(s=!1,A(L,Y,ee,se),he!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(he).buffer))}function c(){return n.createVertexArray()}function f(L){return n.bindVertexArray(L)}function p(L){return n.deleteVertexArray(L)}function d(L,Y,ee){const se=ee.wireframe===!0;let he=i[L.id];he===void 0&&(he={},i[L.id]=he);let de=he[Y.id];de===void 0&&(de={},he[Y.id]=de);let P=de[se];return P===void 0&&(P=m(c()),de[se]=P),P}function m(L){const Y=[],ee=[],se=[];for(let he=0;he<t;he++)Y[he]=0,ee[he]=0,se[he]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ee,attributeDivisors:se,object:L,attributes:{},index:null}}function v(L,Y,ee,se){const he=a.attributes,de=Y.attributes;let P=0;const B=ee.getAttributes();for(const V in B)if(B[V].location>=0){const X=he[V];let oe=de[V];if(oe===void 0&&(V==="instanceMatrix"&&L.instanceMatrix&&(oe=L.instanceMatrix),V==="instanceColor"&&L.instanceColor&&(oe=L.instanceColor)),X===void 0||X.attribute!==oe||oe&&X.data!==oe.data)return!0;P++}return a.attributesNum!==P||a.index!==se}function _(L,Y,ee,se){const he={},de=Y.attributes;let P=0;const B=ee.getAttributes();for(const V in B)if(B[V].location>=0){let X=de[V];X===void 0&&(V==="instanceMatrix"&&L.instanceMatrix&&(X=L.instanceMatrix),V==="instanceColor"&&L.instanceColor&&(X=L.instanceColor));const oe={};oe.attribute=X,X&&X.data&&(oe.data=X.data),he[V]=oe,P++}a.attributes=he,a.attributesNum=P,a.index=se}function b(){const L=a.newAttributes;for(let Y=0,ee=L.length;Y<ee;Y++)L[Y]=0}function S(L){x(L,0)}function x(L,Y){const ee=a.newAttributes,se=a.enabledAttributes,he=a.attributeDivisors;ee[L]=1,se[L]===0&&(n.enableVertexAttribArray(L),se[L]=1),he[L]!==Y&&(n.vertexAttribDivisor(L,Y),he[L]=Y)}function T(){const L=a.newAttributes,Y=a.enabledAttributes;for(let ee=0,se=Y.length;ee<se;ee++)Y[ee]!==L[ee]&&(n.disableVertexAttribArray(ee),Y[ee]=0)}function M(L,Y,ee,se,he,de,P){P===!0?n.vertexAttribIPointer(L,Y,ee,he,de):n.vertexAttribPointer(L,Y,ee,se,he,de)}function A(L,Y,ee,se){b();const he=se.attributes,de=ee.getAttributes(),P=Y.defaultAttributeValues;for(const B in de){const V=de[B];if(V.location>=0){let ae=he[B];if(ae===void 0&&(B==="instanceMatrix"&&L.instanceMatrix&&(ae=L.instanceMatrix),B==="instanceColor"&&L.instanceColor&&(ae=L.instanceColor)),ae!==void 0){const X=ae.normalized,oe=ae.itemSize,me=e.get(ae);if(me===void 0)continue;const J=me.buffer,le=me.type,Se=me.bytesPerElement,Ee=le===n.INT||le===n.UNSIGNED_INT||ae.gpuType===U1;if(ae.isInterleavedBufferAttribute){const re=ae.data,ge=re.stride,Ae=ae.offset;if(re.isInstancedInterleavedBuffer){for(let Pe=0;Pe<V.locationSize;Pe++)x(V.location+Pe,re.meshPerAttribute);L.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let Pe=0;Pe<V.locationSize;Pe++)S(V.location+Pe);n.bindBuffer(n.ARRAY_BUFFER,J);for(let Pe=0;Pe<V.locationSize;Pe++)M(V.location+Pe,oe/V.locationSize,le,X,ge*Se,(Ae+oe/V.locationSize*Pe)*Se,Ee)}else{if(ae.isInstancedBufferAttribute){for(let re=0;re<V.locationSize;re++)x(V.location+re,ae.meshPerAttribute);L.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let re=0;re<V.locationSize;re++)S(V.location+re);n.bindBuffer(n.ARRAY_BUFFER,J);for(let re=0;re<V.locationSize;re++)M(V.location+re,oe/V.locationSize,le,X,oe*Se,oe/V.locationSize*re*Se,Ee)}}else if(P!==void 0){const X=P[B];if(X!==void 0)switch(X.length){case 2:n.vertexAttrib2fv(V.location,X);break;case 3:n.vertexAttrib3fv(V.location,X);break;case 4:n.vertexAttrib4fv(V.location,X);break;default:n.vertexAttrib1fv(V.location,X)}}}}T()}function D(){U();for(const L in i){const Y=i[L];for(const ee in Y){const se=Y[ee];for(const he in se)p(se[he].object),delete se[he];delete Y[ee]}delete i[L]}}function O(L){if(i[L.id]===void 0)return;const Y=i[L.id];for(const ee in Y){const se=Y[ee];for(const he in se)p(se[he].object),delete se[he];delete Y[ee]}delete i[L.id]}function I(L){for(const Y in i){const ee=i[Y];if(ee[L.id]===void 0)continue;const se=ee[L.id];for(const he in se)p(se[he].object),delete se[he];delete ee[L.id]}}function U(){N(),s=!0,a!==r&&(a=r,f(a.object))}function N(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:U,resetDefaultState:N,dispose:D,releaseStatesOfGeometry:O,releaseStatesOfProgram:I,initAttributes:b,enableAttribute:S,disableUnusedAttributes:T}}function vQ(n,e,t){let i;function r(f){i=f}function a(f,p){n.drawArrays(i,f,p),t.update(p,i,1)}function s(f,p,d){d!==0&&(n.drawArraysInstanced(i,f,p,d),t.update(p,i,d))}function o(f,p,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,p,0,d);let v=0;for(let _=0;_<d;_++)v+=p[_];t.update(v,i,1)}function c(f,p,d,m){if(d===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let _=0;_<f.length;_++)s(f[_],p[_],m[_]);else{v.multiDrawArraysInstancedWEBGL(i,f,0,p,0,m,0,d);let _=0;for(let b=0;b<d;b++)_+=p[b]*m[b];t.update(_,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function yQ(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(I){return!(I!==Wa&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(I){const U=I===_p&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==Wo&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==ys&&!U)}function c(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const p=c(f);p!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",p,"instead."),f=p);const d=t.logarithmicDepthBuffer===!0,m=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),v=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),D=_>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:o,precision:f,logarithmicDepthBuffer:d,reversedDepthBuffer:m,maxTextures:v,maxVertexTextures:_,maxTextureSize:b,maxCubemapSize:S,maxAttributes:x,maxVertexUniforms:T,maxVaryings:M,maxFragmentUniforms:A,vertexTextures:D,maxSamples:O}}function _Q(n){const e=this;let t=null,i=0,r=!1,a=!1;const s=new Jf,o=new xn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,m){const v=d.length!==0||m||i!==0||r;return r=m,i=d.length,v},this.beginShadows=function(){a=!0,p(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,m){t=p(d,m,0)},this.setState=function(d,m,v){const _=d.clippingPlanes,b=d.clipIntersection,S=d.clipShadows,x=n.get(d);if(!r||_===null||_.length===0||a&&!S)a?p(null):f();else{const T=a?0:i,M=T*4;let A=x.clippingState||null;c.value=A,A=p(_,m,M,v);for(let D=0;D!==M;++D)A[D]=t[D];x.clippingState=A,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=T}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(d,m,v,_){const b=d!==null?d.length:0;let S=null;if(b!==0){if(S=c.value,_!==!0||S===null){const x=v+b*4,T=m.matrixWorldInverse;o.getNormalMatrix(T),(S===null||S.length<x)&&(S=new Float32Array(x));for(let M=0,A=v;M!==b;++M,A+=4)s.copy(d[M]).applyMatrix4(T,o),s.normal.toArray(S,A),S[A+3]=s.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,S}}function bQ(n){let e=new WeakMap;function t(s,o){return o===O0?s.mapping=zu:o===D0&&(s.mapping=md),s}function i(s){if(s&&s.isTexture){const o=s.mapping;if(o===O0||o===D0)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const f=new DB(c.height);return f.fromEquirectangularTexture(n,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const bg=4,ZL=[.125,.215,.35,.446,.526,.582],Hh=20,kM=new T_,XL=new zt;let FM=null,HM=0,jM=0,VM=!1;const kh=(1+Math.sqrt(5))/2,eg=1/kh,qL=[new ve(-kh,eg,0),new ve(kh,eg,0),new ve(-eg,0,kh),new ve(eg,0,kh),new ve(0,kh,-eg),new ve(0,kh,eg),new ve(-1,1,-1),new ve(1,1,-1),new ve(-1,1,1),new ve(1,1,1)],xQ=new ve;class CC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,a={}){const{size:s=256,position:o=xQ}=a;FM=this._renderer.getRenderTarget(),HM=this._renderer.getActiveCubeFace(),jM=this._renderer.getActiveMipmapLevel(),VM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=QL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$L(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(FM,HM,jM),this._renderer.xr.enabled=VM,e.scissorTest=!1,lS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zu||e.mapping===md?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),FM=this._renderer.getRenderTarget(),HM=this._renderer.getActiveCubeFace(),jM=this._renderer.getActiveMipmapLevel(),VM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Er,minFilter:Er,generateMipmaps:!1,type:_p,format:Wa,colorSpace:gd,depthBuffer:!1},r=KL(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=KL(e,t,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=SQ(a)),this._blurMaterial=EQ(a,e,t)}return r}_compileMaterial(e){const t=new Ei(this._lodPlanes[0],e);this._renderer.compile(t,kM)}_sceneToCubeUV(e,t,i,r,a){const c=new aa(90,1,t,i),f=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],d=this._renderer,m=d.autoClear,v=d.toneMapping;d.getClearColor(XL),d.toneMapping=Hc,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null));const b=new oa({name:"PMREM.Background",side:bs,depthWrite:!1,depthTest:!1}),S=new Ei(new bp,b);let x=!1;const T=e.background;T?T.isColor&&(b.color.copy(T),e.background=null,x=!0):(b.color.copy(XL),x=!0);for(let M=0;M<6;M++){const A=M%3;A===0?(c.up.set(0,f[M],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+p[M],a.y,a.z)):A===1?(c.up.set(0,0,f[M]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+p[M],a.z)):(c.up.set(0,f[M],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+p[M]));const D=this._cubeSize;lS(r,A*D,M>2?D:0,D,D),d.setRenderTarget(r),x&&d.render(S,c),d.render(e,c)}S.geometry.dispose(),S.material.dispose(),d.toneMapping=v,d.autoClear=m,e.background=T}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===zu||e.mapping===md;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=QL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$L());const a=r?this._cubemapMaterial:this._equirectMaterial,s=new Ei(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const c=this._cubeSize;lS(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(s,kM)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=qL[(r-a-1)%qL.length];this._blur(e,a-1,a,s,o)}t.autoClear=i}_blur(e,t,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,s,o){const c=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,d=new Ei(this._lodPlanes[r],f),m=f.uniforms,v=this._sizeLods[i]-1,_=isFinite(a)?Math.PI/(2*v):2*Math.PI/(2*Hh-1),b=a/_,S=isFinite(a)?1+Math.floor(p*b):Hh;S>Hh&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Hh}`);const x=[];let T=0;for(let I=0;I<Hh;++I){const U=I/b,N=Math.exp(-U*U/2);x.push(N),I===0?T+=N:I<S&&(T+=2*N)}for(let I=0;I<x.length;I++)x[I]=x[I]/T;m.envMap.value=e.texture,m.samples.value=S,m.weights.value=x,m.latitudinal.value=s==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:M}=this;m.dTheta.value=_,m.mipInt.value=M-i;const A=this._sizeLods[r],D=3*A*(r>M-bg?r-M+bg:0),O=4*(this._cubeSize-A);lS(t,D,O,3*A,2*A),c.setRenderTarget(t),c.render(d,kM)}}function SQ(n){const e=[],t=[],i=[];let r=n;const a=n-bg+1+ZL.length;for(let s=0;s<a;s++){const o=Math.pow(2,r);t.push(o);let c=1/o;s>n-bg?c=ZL[s-n+bg-1]:s===0&&(c=0),i.push(c);const f=1/(o-2),p=-f,d=1+f,m=[p,p,d,p,d,d,p,p,d,d,p,d],v=6,_=6,b=3,S=2,x=1,T=new Float32Array(b*_*v),M=new Float32Array(S*_*v),A=new Float32Array(x*_*v);for(let O=0;O<v;O++){const I=O%3*2/3-1,U=O>2?0:-1,N=[I,U,0,I+2/3,U,0,I+2/3,U+1,0,I,U,0,I+2/3,U+1,0,I,U+1,0];T.set(N,b*_*O),M.set(m,S*_*O);const L=[O,O,O,O,O,O];A.set(L,x*_*O)}const D=new wn;D.setAttribute("position",new wi(T,b)),D.setAttribute("uv",new wi(M,S)),D.setAttribute("faceIndex",new wi(A,x)),e.push(D),r>bg&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function KL(n,e,t){const i=new Il(n,e,t);return i.texture.mapping=lv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function lS(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function EQ(n,e,t){const i=new Float32Array(Hh),r=new ve(0,1,0);return new yo({name:"SphericalGaussianBlur",defines:{n:Hh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:k2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nu,depthTest:!1,depthWrite:!1})}function $L(){return new yo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:k2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nu,depthTest:!1,depthWrite:!1})}function QL(){return new yo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:k2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nu,depthTest:!1,depthWrite:!1})}function k2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function wQ(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const c=o.mapping,f=c===O0||c===D0,p=c===zu||c===md;if(f||p){let d=e.get(o);const m=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==m)return t===null&&(t=new CC(n)),d=f?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const v=o.image;return f&&v&&v.height>0||p&&v&&r(v)?(t===null&&(t=new CC(n)),d=f?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",a),d.texture):null}}}return o}function r(o){let c=0;const f=6;for(let p=0;p<f;p++)o[p]!==void 0&&c++;return c===f}function a(o){const c=o.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function TQ(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&k0("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function MQ(n,e,t,i){const r={},a=new WeakMap;function s(d){const m=d.target;m.index!==null&&e.remove(m.index);for(const _ in m.attributes)e.remove(m.attributes[_]);m.removeEventListener("dispose",s),delete r[m.id];const v=a.get(m);v&&(e.remove(v),a.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function o(d,m){return r[m.id]===!0||(m.addEventListener("dispose",s),r[m.id]=!0,t.memory.geometries++),m}function c(d){const m=d.attributes;for(const v in m)e.update(m[v],n.ARRAY_BUFFER)}function f(d){const m=[],v=d.index,_=d.attributes.position;let b=0;if(v!==null){const T=v.array;b=v.version;for(let M=0,A=T.length;M<A;M+=3){const D=T[M+0],O=T[M+1],I=T[M+2];m.push(D,O,O,I,I,D)}}else if(_!==void 0){const T=_.array;b=_.version;for(let M=0,A=T.length/3-1;M<A;M+=3){const D=M+0,O=M+1,I=M+2;m.push(D,O,O,I,I,D)}}else return;const S=new(TB(m)?h2:d2)(m,1);S.version=b;const x=a.get(d);x&&e.remove(x),a.set(d,S)}function p(d){const m=a.get(d);if(m){const v=d.index;v!==null&&m.version<v.version&&f(d)}else f(d);return a.get(d)}return{get:o,update:c,getWireframeAttribute:p}}function AQ(n,e,t){let i;function r(m){i=m}let a,s;function o(m){a=m.type,s=m.bytesPerElement}function c(m,v){n.drawElements(i,v,a,m*s),t.update(v,i,1)}function f(m,v,_){_!==0&&(n.drawElementsInstanced(i,v,a,m*s,_),t.update(v,i,_))}function p(m,v,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,v,0,a,m,0,_);let S=0;for(let x=0;x<_;x++)S+=v[x];t.update(S,i,1)}function d(m,v,_,b){if(_===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let x=0;x<m.length;x++)f(m[x]/s,v[x],b[x]);else{S.multiDrawElementsInstancedWEBGL(i,v,0,a,m,0,b,0,_);let x=0;for(let T=0;T<_;T++)x+=v[T]*b[T];t.update(x,i,1)}}this.setMode=r,this.setIndex=o,this.render=c,this.renderInstances=f,this.renderMultiDraw=p,this.renderMultiDrawInstances=d}function CQ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function RQ(n,e,t){const i=new WeakMap,r=new mn;function a(s,o,c){const f=s.morphTargetInfluences,p=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=p!==void 0?p.length:0;let m=i.get(o);if(m===void 0||m.count!==d){let L=function(){U.dispose(),i.delete(o),o.removeEventListener("dispose",L)};var v=L;m!==void 0&&m.texture.dispose();const _=o.morphAttributes.position!==void 0,b=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,x=o.morphAttributes.position||[],T=o.morphAttributes.normal||[],M=o.morphAttributes.color||[];let A=0;_===!0&&(A=1),b===!0&&(A=2),S===!0&&(A=3);let D=o.attributes.position.count*A,O=1;D>e.maxTextureSize&&(O=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const I=new Float32Array(D*O*4*d),U=new V1(I,D,O,d);U.type=ys,U.needsUpdate=!0;const N=A*4;for(let Y=0;Y<d;Y++){const ee=x[Y],se=T[Y],he=M[Y],de=D*O*4*Y;for(let P=0;P<ee.count;P++){const B=P*N;_===!0&&(r.fromBufferAttribute(ee,P),I[de+B+0]=r.x,I[de+B+1]=r.y,I[de+B+2]=r.z,I[de+B+3]=0),b===!0&&(r.fromBufferAttribute(se,P),I[de+B+4]=r.x,I[de+B+5]=r.y,I[de+B+6]=r.z,I[de+B+7]=0),S===!0&&(r.fromBufferAttribute(he,P),I[de+B+8]=r.x,I[de+B+9]=r.y,I[de+B+10]=r.z,I[de+B+11]=he.itemSize===4?r.w:1)}}m={count:d,texture:U,size:new _t(D,O)},i.set(o,m),o.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let _=0;for(let S=0;S<f.length;S++)_+=f[S];const b=o.morphTargetsRelative?1:1-_;c.getUniforms().setValue(n,"morphTargetBaseInfluence",b),c.getUniforms().setValue(n,"morphTargetInfluences",f)}c.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:a}}function OQ(n,e,t,i){let r=new WeakMap;function a(c){const f=i.render.frame,p=c.geometry,d=e.get(c,p);if(r.get(d)!==f&&(e.update(d),r.set(d,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),r.get(c)!==f&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,f))),c.isSkinnedMesh){const m=c.skeleton;r.get(m)!==f&&(m.update(),r.set(m,f))}return d}function s(){r=new WeakMap}function o(c){const f=c.target;f.removeEventListener("dispose",o),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:s}}const R4=new dr,JL=new J1(1,1),O4=new V1,D4=new G1,N4=new y_,eI=[],tI=[],nI=new Float32Array(16),iI=new Float32Array(9),rI=new Float32Array(4);function fv(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=eI[r];if(a===void 0&&(a=new Float32Array(r),eI[r]=a),e!==0){i.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function Zr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Xr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function gw(n,e){let t=tI[e];t===void 0&&(t=new Int32Array(e),tI[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function DQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function NQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;n.uniform2fv(this.addr,e),Xr(t,e)}}function LQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zr(t,e))return;n.uniform3fv(this.addr,e),Xr(t,e)}}function IQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;n.uniform4fv(this.addr,e),Xr(t,e)}}function UQ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Xr(t,e)}else{if(Zr(t,i))return;rI.set(i),n.uniformMatrix2fv(this.addr,!1,rI),Xr(t,i)}}function PQ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Xr(t,e)}else{if(Zr(t,i))return;iI.set(i),n.uniformMatrix3fv(this.addr,!1,iI),Xr(t,i)}}function zQ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Xr(t,e)}else{if(Zr(t,i))return;nI.set(i),n.uniformMatrix4fv(this.addr,!1,nI),Xr(t,i)}}function BQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function kQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;n.uniform2iv(this.addr,e),Xr(t,e)}}function FQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zr(t,e))return;n.uniform3iv(this.addr,e),Xr(t,e)}}function HQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;n.uniform4iv(this.addr,e),Xr(t,e)}}function jQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function VQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zr(t,e))return;n.uniform2uiv(this.addr,e),Xr(t,e)}}function GQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zr(t,e))return;n.uniform3uiv(this.addr,e),Xr(t,e)}}function YQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zr(t,e))return;n.uniform4uiv(this.addr,e),Xr(t,e)}}function WQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(JL.compareFunction=c2,a=JL):a=R4,t.setTexture2D(e||a,r)}function ZQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||D4,r)}function XQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||N4,r)}function qQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||O4,r)}function KQ(n){switch(n){case 5126:return DQ;case 35664:return NQ;case 35665:return LQ;case 35666:return IQ;case 35674:return UQ;case 35675:return PQ;case 35676:return zQ;case 5124:case 35670:return BQ;case 35667:case 35671:return kQ;case 35668:case 35672:return FQ;case 35669:case 35673:return HQ;case 5125:return jQ;case 36294:return VQ;case 36295:return GQ;case 36296:return YQ;case 35678:case 36198:case 36298:case 36306:case 35682:return WQ;case 35679:case 36299:case 36307:return ZQ;case 35680:case 36300:case 36308:case 36293:return XQ;case 36289:case 36303:case 36311:case 36292:return qQ}}function $Q(n,e){n.uniform1fv(this.addr,e)}function QQ(n,e){const t=fv(e,this.size,2);n.uniform2fv(this.addr,t)}function JQ(n,e){const t=fv(e,this.size,3);n.uniform3fv(this.addr,t)}function eJ(n,e){const t=fv(e,this.size,4);n.uniform4fv(this.addr,t)}function tJ(n,e){const t=fv(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function nJ(n,e){const t=fv(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function iJ(n,e){const t=fv(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function rJ(n,e){n.uniform1iv(this.addr,e)}function aJ(n,e){n.uniform2iv(this.addr,e)}function sJ(n,e){n.uniform3iv(this.addr,e)}function oJ(n,e){n.uniform4iv(this.addr,e)}function lJ(n,e){n.uniform1uiv(this.addr,e)}function cJ(n,e){n.uniform2uiv(this.addr,e)}function uJ(n,e){n.uniform3uiv(this.addr,e)}function fJ(n,e){n.uniform4uiv(this.addr,e)}function dJ(n,e,t){const i=this.cache,r=e.length,a=gw(t,r);Zr(i,a)||(n.uniform1iv(this.addr,a),Xr(i,a));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||R4,a[s])}function hJ(n,e,t){const i=this.cache,r=e.length,a=gw(t,r);Zr(i,a)||(n.uniform1iv(this.addr,a),Xr(i,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||D4,a[s])}function pJ(n,e,t){const i=this.cache,r=e.length,a=gw(t,r);Zr(i,a)||(n.uniform1iv(this.addr,a),Xr(i,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||N4,a[s])}function mJ(n,e,t){const i=this.cache,r=e.length,a=gw(t,r);Zr(i,a)||(n.uniform1iv(this.addr,a),Xr(i,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||O4,a[s])}function gJ(n){switch(n){case 5126:return $Q;case 35664:return QQ;case 35665:return JQ;case 35666:return eJ;case 35674:return tJ;case 35675:return nJ;case 35676:return iJ;case 5124:case 35670:return rJ;case 35667:case 35671:return aJ;case 35668:case 35672:return sJ;case 35669:case 35673:return oJ;case 5125:return lJ;case 36294:return cJ;case 36295:return uJ;case 36296:return fJ;case 35678:case 36198:case 36298:case 36306:case 35682:return dJ;case 35679:case 36299:case 36307:return hJ;case 35680:case 36300:case 36308:case 36293:return pJ;case 36289:case 36303:case 36311:case 36292:return mJ}}class vJ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=KQ(t.type)}}class yJ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=gJ(t.type)}}class _J{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const o=r[a];o.setValue(e,t[o.id],i)}}}const GM=/(\w+)(\])?(\[|\.)?/g;function aI(n,e){n.seq.push(e),n.map[e.id]=e}function bJ(n,e,t){const i=n.name,r=i.length;for(GM.lastIndex=0;;){const a=GM.exec(i),s=GM.lastIndex;let o=a[1];const c=a[2]==="]",f=a[3];if(c&&(o=o|0),f===void 0||f==="["&&s+2===r){aI(t,f===void 0?new vJ(o,n,e):new yJ(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new _J(o),aI(t,d)),t=d}}}class zS{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=e.getActiveUniform(t,r),s=e.getUniformLocation(t,a.name);bJ(a,s,this)}}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,s=t.length;a!==s;++a){const o=t[a],c=i[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function sI(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const xJ=37297;let SJ=0;function EJ(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){const o=s+1;i.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return i.join(`
`)}const oI=new xn;function wJ(n){qn._getMatrix(oI,qn.workingColorSpace,n);const e=`mat3( ${oI.elements.map(t=>t.toFixed(4))} )`;switch(qn.getTransfer(n)){case P0:return[e,"LinearTransferOETF"];case gi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function lI(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+EJ(n.getShaderSource(e),o)}else return a}function TJ(n,e){const t=wJ(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function MJ(n,e){let t;switch(e){case aB:t="Linear";break;case sB:t="Reinhard";break;case oB:t="Cineon";break;case JR:t="ACESFilmic";break;case cB:t="AgX";break;case uB:t="Neutral";break;case lB:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const cS=new ve;function AJ(){qn.getLuminanceCoefficients(cS);const n=cS.x.toFixed(4),e=cS.y.toFixed(4),t=cS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function CJ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(r0).join(`
`)}function RJ(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function OJ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function r0(n){return n!==""}function cI(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function uI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const DJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function RC(n){return n.replace(DJ,LJ)}const NJ=new Map;function LJ(n,e){let t=An[e];if(t===void 0){const i=NJ.get(e);if(i!==void 0)t=An[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return RC(t)}const IJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fI(n){return n.replace(IJ,UJ)}function UJ(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function dI(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function PJ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===L1?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===f0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Cl&&(e="SHADOWMAP_TYPE_VSM"),e}function zJ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case zu:case md:e="ENVMAP_TYPE_CUBE";break;case lv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function BJ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case md:e="ENVMAP_MODE_REFRACTION";break}return e}function kJ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case g_:e="ENVMAP_BLENDING_MULTIPLY";break;case iB:e="ENVMAP_BLENDING_MIX";break;case rB:e="ENVMAP_BLENDING_ADD";break}return e}function FJ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function HJ(n,e,t,i){const r=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const c=PJ(t),f=zJ(t),p=BJ(t),d=kJ(t),m=FJ(t),v=CJ(t),_=RJ(a),b=r.createProgram();let S,x,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(r0).join(`
`),S.length>0&&(S+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(r0).join(`
`),x.length>0&&(x+=`
`)):(S=[dI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(r0).join(`
`),x=[dI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",t.envMap?"#define "+d:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Hc?"#define TONE_MAPPING":"",t.toneMapping!==Hc?An.tonemapping_pars_fragment:"",t.toneMapping!==Hc?MJ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",An.colorspace_pars_fragment,TJ("linearToOutputTexel",t.outputColorSpace),AJ(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(r0).join(`
`)),s=RC(s),s=cI(s,t),s=uI(s,t),o=RC(o),o=cI(o,t),o=uI(o,t),s=fI(s),o=fI(o),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,S=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,x=["#define varying in",t.glslVersion===bC?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===bC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const M=T+S+s,A=T+x+o,D=sI(r,r.VERTEX_SHADER,M),O=sI(r,r.FRAGMENT_SHADER,A);r.attachShader(b,D),r.attachShader(b,O),t.index0AttributeName!==void 0?r.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function I(Y){if(n.debug.checkShaderErrors){const ee=r.getProgramInfoLog(b)||"",se=r.getShaderInfoLog(D)||"",he=r.getShaderInfoLog(O)||"",de=ee.trim(),P=se.trim(),B=he.trim();let V=!0,ae=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(V=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,D,O);else{const X=lI(r,D,"vertex"),oe=lI(r,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+de+`
`+X+`
`+oe)}else de!==""?console.warn("THREE.WebGLProgram: Program Info Log:",de):(P===""||B==="")&&(ae=!1);ae&&(Y.diagnostics={runnable:V,programLog:de,vertexShader:{log:P,prefix:S},fragmentShader:{log:B,prefix:x}})}r.deleteShader(D),r.deleteShader(O),U=new zS(r,b),N=OJ(r,b)}let U;this.getUniforms=function(){return U===void 0&&I(this),U};let N;this.getAttributes=function(){return N===void 0&&I(this),N};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(b,xJ)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=SJ++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=D,this.fragmentShader=O,this}let jJ=0;class VJ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new GJ(e),t.set(e,i)),i}}class GJ{constructor(e){this.id=jJ++,this.code=e,this.usedTimes=0}}function YJ(n,e,t,i,r,a,s){const o=new kg,c=new VJ,f=new Set,p=[],d=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(N){return f.add(N),N===0?"uv":`uv${N}`}function S(N,L,Y,ee,se){const he=ee.fog,de=se.geometry,P=N.isMeshStandardMaterial?ee.environment:null,B=(N.isMeshStandardMaterial?t:e).get(N.envMap||P),V=B&&B.mapping===lv?B.image.height:null,ae=_[N.type];N.precision!==null&&(v=r.getMaxPrecision(N.precision),v!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",v,"instead."));const X=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,oe=X!==void 0?X.length:0;let me=0;de.morphAttributes.position!==void 0&&(me=1),de.morphAttributes.normal!==void 0&&(me=2),de.morphAttributes.color!==void 0&&(me=3);let J,le,Se,Ee;if(ae){const be=ms[ae];J=be.vertexShader,le=be.fragmentShader}else J=N.vertexShader,le=N.fragmentShader,c.update(N),Se=c.getVertexShaderID(N),Ee=c.getFragmentShaderID(N);const re=n.getRenderTarget(),ge=n.state.buffers.depth.getReversed(),Ae=se.isInstancedMesh===!0,Pe=se.isBatchedMesh===!0,We=!!N.map,it=!!N.matcap,te=!!B,xe=!!N.aoMap,De=!!N.lightMap,He=!!N.bumpMap,Ce=!!N.normalMap,ce=!!N.displacementMap,pe=!!N.emissiveMap,ie=!!N.metalnessMap,W=!!N.roughnessMap,K=N.anisotropy>0,j=N.clearcoat>0,$=N.dispersion>0,Re=N.iridescence>0,Ie=N.sheen>0,ne=N.transmission>0,H=K&&!!N.anisotropyMap,Z=j&&!!N.clearcoatMap,ye=j&&!!N.clearcoatNormalMap,Oe=j&&!!N.clearcoatRoughnessMap,Be=Re&&!!N.iridescenceMap,Ue=Re&&!!N.iridescenceThicknessMap,pt=Ie&&!!N.sheenColorMap,St=Ie&&!!N.sheenRoughnessMap,_e=!!N.specularMap,Ve=!!N.specularColorMap,nt=!!N.specularIntensityMap,Le=ne&&!!N.transmissionMap,Ne=ne&&!!N.thicknessMap,je=!!N.gradientMap,fe=!!N.alphaMap,Xe=N.alphaTest>0,Ye=!!N.alphaHash,G=!!N.extensions;let Ge=Hc;N.toneMapped&&(re===null||re.isXRRenderTarget===!0)&&(Ge=n.toneMapping);const $e={shaderID:ae,shaderType:N.type,shaderName:N.name,vertexShader:J,fragmentShader:le,defines:N.defines,customVertexShaderID:Se,customFragmentShaderID:Ee,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:v,batching:Pe,batchingColor:Pe&&se._colorsTexture!==null,instancing:Ae,instancingColor:Ae&&se.instanceColor!==null,instancingMorph:Ae&&se.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:re===null?n.outputColorSpace:re.isXRRenderTarget===!0?re.texture.colorSpace:gd,alphaToCoverage:!!N.alphaToCoverage,map:We,matcap:it,envMap:te,envMapMode:te&&B.mapping,envMapCubeUVHeight:V,aoMap:xe,lightMap:De,bumpMap:He,normalMap:Ce,displacementMap:m&&ce,emissiveMap:pe,normalMapObjectSpace:Ce&&N.normalMapType===vB,normalMapTangentSpace:Ce&&N.normalMapType===xd,metalnessMap:ie,roughnessMap:W,anisotropy:K,anisotropyMap:H,clearcoat:j,clearcoatMap:Z,clearcoatNormalMap:ye,clearcoatRoughnessMap:Oe,dispersion:$,iridescence:Re,iridescenceMap:Be,iridescenceThicknessMap:Ue,sheen:Ie,sheenColorMap:pt,sheenRoughnessMap:St,specularMap:_e,specularColorMap:Ve,specularIntensityMap:nt,transmission:ne,transmissionMap:Le,thicknessMap:Ne,gradientMap:je,opaque:N.transparent===!1&&N.blending===qh&&N.alphaToCoverage===!1,alphaMap:fe,alphaTest:Xe,alphaHash:Ye,combine:N.combine,mapUv:We&&b(N.map.channel),aoMapUv:xe&&b(N.aoMap.channel),lightMapUv:De&&b(N.lightMap.channel),bumpMapUv:He&&b(N.bumpMap.channel),normalMapUv:Ce&&b(N.normalMap.channel),displacementMapUv:ce&&b(N.displacementMap.channel),emissiveMapUv:pe&&b(N.emissiveMap.channel),metalnessMapUv:ie&&b(N.metalnessMap.channel),roughnessMapUv:W&&b(N.roughnessMap.channel),anisotropyMapUv:H&&b(N.anisotropyMap.channel),clearcoatMapUv:Z&&b(N.clearcoatMap.channel),clearcoatNormalMapUv:ye&&b(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&b(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Be&&b(N.iridescenceMap.channel),iridescenceThicknessMapUv:Ue&&b(N.iridescenceThicknessMap.channel),sheenColorMapUv:pt&&b(N.sheenColorMap.channel),sheenRoughnessMapUv:St&&b(N.sheenRoughnessMap.channel),specularMapUv:_e&&b(N.specularMap.channel),specularColorMapUv:Ve&&b(N.specularColorMap.channel),specularIntensityMapUv:nt&&b(N.specularIntensityMap.channel),transmissionMapUv:Le&&b(N.transmissionMap.channel),thicknessMapUv:Ne&&b(N.thicknessMap.channel),alphaMapUv:fe&&b(N.alphaMap.channel),vertexTangents:!!de.attributes.tangent&&(Ce||K),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,pointsUvs:se.isPoints===!0&&!!de.attributes.uv&&(We||fe),fog:!!he,useFog:N.fog===!0,fogExp2:!!he&&he.isFogExp2,flatShading:N.flatShading===!0&&N.wireframe===!1,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:ge,skinning:se.isSkinnedMesh===!0,morphTargets:de.morphAttributes.position!==void 0,morphNormals:de.morphAttributes.normal!==void 0,morphColors:de.morphAttributes.color!==void 0,morphTargetsCount:oe,morphTextureStride:me,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:N.dithering,shadowMapEnabled:n.shadowMap.enabled&&Y.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ge,decodeVideoTexture:We&&N.map.isVideoTexture===!0&&qn.getTransfer(N.map.colorSpace)===gi,decodeVideoTextureEmissive:pe&&N.emissiveMap.isVideoTexture===!0&&qn.getTransfer(N.emissiveMap.colorSpace)===gi,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===jo,flipSided:N.side===bs,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:G&&N.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(G&&N.extensions.multiDraw===!0||Pe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return $e.vertexUv1s=f.has(1),$e.vertexUv2s=f.has(2),$e.vertexUv3s=f.has(3),f.clear(),$e}function x(N){const L=[];if(N.shaderID?L.push(N.shaderID):(L.push(N.customVertexShaderID),L.push(N.customFragmentShaderID)),N.defines!==void 0)for(const Y in N.defines)L.push(Y),L.push(N.defines[Y]);return N.isRawShaderMaterial===!1&&(T(L,N),M(L,N),L.push(n.outputColorSpace)),L.push(N.customProgramCacheKey),L.join()}function T(N,L){N.push(L.precision),N.push(L.outputColorSpace),N.push(L.envMapMode),N.push(L.envMapCubeUVHeight),N.push(L.mapUv),N.push(L.alphaMapUv),N.push(L.lightMapUv),N.push(L.aoMapUv),N.push(L.bumpMapUv),N.push(L.normalMapUv),N.push(L.displacementMapUv),N.push(L.emissiveMapUv),N.push(L.metalnessMapUv),N.push(L.roughnessMapUv),N.push(L.anisotropyMapUv),N.push(L.clearcoatMapUv),N.push(L.clearcoatNormalMapUv),N.push(L.clearcoatRoughnessMapUv),N.push(L.iridescenceMapUv),N.push(L.iridescenceThicknessMapUv),N.push(L.sheenColorMapUv),N.push(L.sheenRoughnessMapUv),N.push(L.specularMapUv),N.push(L.specularColorMapUv),N.push(L.specularIntensityMapUv),N.push(L.transmissionMapUv),N.push(L.thicknessMapUv),N.push(L.combine),N.push(L.fogExp2),N.push(L.sizeAttenuation),N.push(L.morphTargetsCount),N.push(L.morphAttributeCount),N.push(L.numDirLights),N.push(L.numPointLights),N.push(L.numSpotLights),N.push(L.numSpotLightMaps),N.push(L.numHemiLights),N.push(L.numRectAreaLights),N.push(L.numDirLightShadows),N.push(L.numPointLightShadows),N.push(L.numSpotLightShadows),N.push(L.numSpotLightShadowsWithMaps),N.push(L.numLightProbes),N.push(L.shadowMapType),N.push(L.toneMapping),N.push(L.numClippingPlanes),N.push(L.numClipIntersection),N.push(L.depthPacking)}function M(N,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),L.gradientMap&&o.enable(22),N.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reversedDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),N.push(o.mask)}function A(N){const L=_[N.type];let Y;if(L){const ee=ms[L];Y=Hg.clone(ee.uniforms)}else Y=N.uniforms;return Y}function D(N,L){let Y;for(let ee=0,se=p.length;ee<se;ee++){const he=p[ee];if(he.cacheKey===L){Y=he,++Y.usedTimes;break}}return Y===void 0&&(Y=new HJ(n,L,N,a),p.push(Y)),Y}function O(N){if(--N.usedTimes===0){const L=p.indexOf(N);p[L]=p[p.length-1],p.pop(),N.destroy()}}function I(N){c.remove(N)}function U(){c.dispose()}return{getParameters:S,getProgramCacheKey:x,getUniforms:A,acquireProgram:D,releaseProgram:O,releaseShaderCache:I,programs:p,dispose:U}}function WJ(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function i(s){n.delete(s)}function r(s,o,c){n.get(s)[o]=c}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function ZJ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function hI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function pI(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function s(d,m,v,_,b,S){let x=n[e];return x===void 0?(x={id:d.id,object:d,geometry:m,material:v,groupOrder:_,renderOrder:d.renderOrder,z:b,group:S},n[e]=x):(x.id=d.id,x.object=d,x.geometry=m,x.material=v,x.groupOrder=_,x.renderOrder=d.renderOrder,x.z=b,x.group=S),e++,x}function o(d,m,v,_,b,S){const x=s(d,m,v,_,b,S);v.transmission>0?i.push(x):v.transparent===!0?r.push(x):t.push(x)}function c(d,m,v,_,b,S){const x=s(d,m,v,_,b,S);v.transmission>0?i.unshift(x):v.transparent===!0?r.unshift(x):t.unshift(x)}function f(d,m){t.length>1&&t.sort(d||ZJ),i.length>1&&i.sort(m||hI),r.length>1&&r.sort(m||hI)}function p(){for(let d=e,m=n.length;d<m;d++){const v=n[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:o,unshift:c,finish:p,sort:f}}function XJ(){let n=new WeakMap;function e(i,r){const a=n.get(i);let s;return a===void 0?(s=new pI,n.set(i,[s])):r>=a.length?(s=new pI,a.push(s)):s=a[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function qJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ve,color:new zt};break;case"SpotLight":t={position:new ve,direction:new ve,color:new zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ve,color:new zt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ve,skyColor:new zt,groundColor:new zt};break;case"RectAreaLight":t={color:new zt,position:new ve,halfWidth:new ve,halfHeight:new ve};break}return n[e.id]=t,t}}}function KJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let $J=0;function QJ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function JJ(n){const e=new qJ,t=KJ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new ve);const r=new ve,a=new Ft,s=new Ft;function o(f){let p=0,d=0,m=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let v=0,_=0,b=0,S=0,x=0,T=0,M=0,A=0,D=0,O=0,I=0;f.sort(QJ);for(let N=0,L=f.length;N<L;N++){const Y=f[N],ee=Y.color,se=Y.intensity,he=Y.distance,de=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)p+=ee.r*se,d+=ee.g*se,m+=ee.b*se;else if(Y.isLightProbe){for(let P=0;P<9;P++)i.probe[P].addScaledVector(Y.sh.coefficients[P],se);I++}else if(Y.isDirectionalLight){const P=e.get(Y);if(P.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const B=Y.shadow,V=t.get(Y);V.shadowIntensity=B.intensity,V.shadowBias=B.bias,V.shadowNormalBias=B.normalBias,V.shadowRadius=B.radius,V.shadowMapSize=B.mapSize,i.directionalShadow[v]=V,i.directionalShadowMap[v]=de,i.directionalShadowMatrix[v]=Y.shadow.matrix,T++}i.directional[v]=P,v++}else if(Y.isSpotLight){const P=e.get(Y);P.position.setFromMatrixPosition(Y.matrixWorld),P.color.copy(ee).multiplyScalar(se),P.distance=he,P.coneCos=Math.cos(Y.angle),P.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),P.decay=Y.decay,i.spot[b]=P;const B=Y.shadow;if(Y.map&&(i.spotLightMap[D]=Y.map,D++,B.updateMatrices(Y),Y.castShadow&&O++),i.spotLightMatrix[b]=B.matrix,Y.castShadow){const V=t.get(Y);V.shadowIntensity=B.intensity,V.shadowBias=B.bias,V.shadowNormalBias=B.normalBias,V.shadowRadius=B.radius,V.shadowMapSize=B.mapSize,i.spotShadow[b]=V,i.spotShadowMap[b]=de,A++}b++}else if(Y.isRectAreaLight){const P=e.get(Y);P.color.copy(ee).multiplyScalar(se),P.halfWidth.set(Y.width*.5,0,0),P.halfHeight.set(0,Y.height*.5,0),i.rectArea[S]=P,S++}else if(Y.isPointLight){const P=e.get(Y);if(P.color.copy(Y.color).multiplyScalar(Y.intensity),P.distance=Y.distance,P.decay=Y.decay,Y.castShadow){const B=Y.shadow,V=t.get(Y);V.shadowIntensity=B.intensity,V.shadowBias=B.bias,V.shadowNormalBias=B.normalBias,V.shadowRadius=B.radius,V.shadowMapSize=B.mapSize,V.shadowCameraNear=B.camera.near,V.shadowCameraFar=B.camera.far,i.pointShadow[_]=V,i.pointShadowMap[_]=de,i.pointShadowMatrix[_]=Y.shadow.matrix,M++}i.point[_]=P,_++}else if(Y.isHemisphereLight){const P=e.get(Y);P.skyColor.copy(Y.color).multiplyScalar(se),P.groundColor.copy(Y.groundColor).multiplyScalar(se),i.hemi[x]=P,x++}}S>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Dt.LTC_FLOAT_1,i.rectAreaLTC2=Dt.LTC_FLOAT_2):(i.rectAreaLTC1=Dt.LTC_HALF_1,i.rectAreaLTC2=Dt.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=d,i.ambient[2]=m;const U=i.hash;(U.directionalLength!==v||U.pointLength!==_||U.spotLength!==b||U.rectAreaLength!==S||U.hemiLength!==x||U.numDirectionalShadows!==T||U.numPointShadows!==M||U.numSpotShadows!==A||U.numSpotMaps!==D||U.numLightProbes!==I)&&(i.directional.length=v,i.spot.length=b,i.rectArea.length=S,i.point.length=_,i.hemi.length=x,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=A+D-O,i.spotLightMap.length=D,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=I,U.directionalLength=v,U.pointLength=_,U.spotLength=b,U.rectAreaLength=S,U.hemiLength=x,U.numDirectionalShadows=T,U.numPointShadows=M,U.numSpotShadows=A,U.numSpotMaps=D,U.numLightProbes=I,i.version=$J++)}function c(f,p){let d=0,m=0,v=0,_=0,b=0;const S=p.matrixWorldInverse;for(let x=0,T=f.length;x<T;x++){const M=f[x];if(M.isDirectionalLight){const A=i.directional[d];A.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(S),d++}else if(M.isSpotLight){const A=i.spot[v];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(S),A.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(S),v++}else if(M.isRectAreaLight){const A=i.rectArea[_];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(S),s.identity(),a.copy(M.matrixWorld),a.premultiply(S),s.extractRotation(a),A.halfWidth.set(M.width*.5,0,0),A.halfHeight.set(0,M.height*.5,0),A.halfWidth.applyMatrix4(s),A.halfHeight.applyMatrix4(s),_++}else if(M.isPointLight){const A=i.point[m];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(S),m++}else if(M.isHemisphereLight){const A=i.hemi[b];A.direction.setFromMatrixPosition(M.matrixWorld),A.direction.transformDirection(S),b++}}}return{setup:o,setupView:c,state:i}}function mI(n){const e=new JJ(n),t=[],i=[];function r(p){f.camera=p,t.length=0,i.length=0}function a(p){t.push(p)}function s(p){i.push(p)}function o(){e.setup(t)}function c(p){e.setupView(t,p)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:o,setupLightsView:c,pushLight:a,pushShadow:s}}function eee(n){let e=new WeakMap;function t(r,a=0){const s=e.get(r);let o;return s===void 0?(o=new mI(n),e.set(r,[o])):a>=s.length?(o=new mI(n),s.push(o)):o=s[a],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const tee=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,nee=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function iee(n,e,t){let i=new uv;const r=new _t,a=new _t,s=new mn,o=new w2({depthPacking:gB}),c=new T2,f={},p=t.maxTextureSize,d={[Pu]:bs,[bs]:Pu,[jo]:jo},m=new yo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _t},radius:{value:4}},vertexShader:tee,fragmentShader:nee}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const _=new wn;_.setAttribute("position",new wi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Ei(_,m),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=L1;let x=this.type;this.render=function(O,I,U){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||O.length===0)return;const N=n.getRenderTarget(),L=n.getActiveCubeFace(),Y=n.getActiveMipmapLevel(),ee=n.state;ee.setBlending(Nu),ee.buffers.depth.getReversed()===!0?ee.buffers.color.setClear(0,0,0,0):ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const se=x!==Cl&&this.type===Cl,he=x===Cl&&this.type!==Cl;for(let de=0,P=O.length;de<P;de++){const B=O[de],V=B.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;r.copy(V.mapSize);const ae=V.getFrameExtents();if(r.multiply(ae),a.copy(V.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(a.x=Math.floor(p/ae.x),r.x=a.x*ae.x,V.mapSize.x=a.x),r.y>p&&(a.y=Math.floor(p/ae.y),r.y=a.y*ae.y,V.mapSize.y=a.y)),V.map===null||se===!0||he===!0){const oe=this.type!==Cl?{minFilter:Oa,magFilter:Oa}:{};V.map!==null&&V.map.dispose(),V.map=new Il(r.x,r.y,oe),V.map.texture.name=B.name+".shadowMap",V.camera.updateProjectionMatrix()}n.setRenderTarget(V.map),n.clear();const X=V.getViewportCount();for(let oe=0;oe<X;oe++){const me=V.getViewport(oe);s.set(a.x*me.x,a.y*me.y,a.x*me.z,a.y*me.w),ee.viewport(s),V.updateMatrices(B,oe),i=V.getFrustum(),A(I,U,V.camera,B,this.type)}V.isPointLightShadow!==!0&&this.type===Cl&&T(V,U),V.needsUpdate=!1}x=this.type,S.needsUpdate=!1,n.setRenderTarget(N,L,Y)};function T(O,I){const U=e.update(b);m.defines.VSM_SAMPLES!==O.blurSamples&&(m.defines.VSM_SAMPLES=O.blurSamples,v.defines.VSM_SAMPLES=O.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Il(r.x,r.y)),m.uniforms.shadow_pass.value=O.map.texture,m.uniforms.resolution.value=O.mapSize,m.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(I,null,U,m,b,null),v.uniforms.shadow_pass.value=O.mapPass.texture,v.uniforms.resolution.value=O.mapSize,v.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(I,null,U,v,b,null)}function M(O,I,U,N){let L=null;const Y=U.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(Y!==void 0)L=Y;else if(L=U.isPointLight===!0?c:o,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0||I.alphaToCoverage===!0){const ee=L.uuid,se=I.uuid;let he=f[ee];he===void 0&&(he={},f[ee]=he);let de=he[se];de===void 0&&(de=L.clone(),he[se]=de,I.addEventListener("dispose",D)),L=de}if(L.visible=I.visible,L.wireframe=I.wireframe,N===Cl?L.side=I.shadowSide!==null?I.shadowSide:I.side:L.side=I.shadowSide!==null?I.shadowSide:d[I.side],L.alphaMap=I.alphaMap,L.alphaTest=I.alphaToCoverage===!0?.5:I.alphaTest,L.map=I.map,L.clipShadows=I.clipShadows,L.clippingPlanes=I.clippingPlanes,L.clipIntersection=I.clipIntersection,L.displacementMap=I.displacementMap,L.displacementScale=I.displacementScale,L.displacementBias=I.displacementBias,L.wireframeLinewidth=I.wireframeLinewidth,L.linewidth=I.linewidth,U.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const ee=n.properties.get(L);ee.light=U}return L}function A(O,I,U,N,L){if(O.visible===!1)return;if(O.layers.test(I.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&L===Cl)&&(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,O.matrixWorld);const se=e.update(O),he=O.material;if(Array.isArray(he)){const de=se.groups;for(let P=0,B=de.length;P<B;P++){const V=de[P],ae=he[V.materialIndex];if(ae&&ae.visible){const X=M(O,ae,N,L);O.onBeforeShadow(n,O,I,U,se,X,V),n.renderBufferDirect(U,null,se,X,O,V),O.onAfterShadow(n,O,I,U,se,X,V)}}}else if(he.visible){const de=M(O,he,N,L);O.onBeforeShadow(n,O,I,U,se,de,null),n.renderBufferDirect(U,null,se,de,O,null),O.onAfterShadow(n,O,I,U,se,de,null)}}const ee=O.children;for(let se=0,he=ee.length;se<he;se++)A(ee[se],I,U,N,L)}function D(O){O.target.removeEventListener("dispose",D);for(const U in f){const N=f[U],L=O.target.uuid;L in N&&(N[L].dispose(),delete N[L])}}}const ree={[aE]:sE,[oE]:uE,[lE]:fE,[ap]:cE,[sE]:aE,[uE]:oE,[fE]:lE,[cE]:ap};function aee(n,e){function t(){let Le=!1;const Ne=new mn;let je=null;const fe=new mn(0,0,0,0);return{setMask:function(Xe){je!==Xe&&!Le&&(n.colorMask(Xe,Xe,Xe,Xe),je=Xe)},setLocked:function(Xe){Le=Xe},setClear:function(Xe,Ye,G,Ge,$e){$e===!0&&(Xe*=Ge,Ye*=Ge,G*=Ge),Ne.set(Xe,Ye,G,Ge),fe.equals(Ne)===!1&&(n.clearColor(Xe,Ye,G,Ge),fe.copy(Ne))},reset:function(){Le=!1,je=null,fe.set(-1,0,0,0)}}}function i(){let Le=!1,Ne=!1,je=null,fe=null,Xe=null;return{setReversed:function(Ye){if(Ne!==Ye){const G=e.get("EXT_clip_control");Ye?G.clipControlEXT(G.LOWER_LEFT_EXT,G.ZERO_TO_ONE_EXT):G.clipControlEXT(G.LOWER_LEFT_EXT,G.NEGATIVE_ONE_TO_ONE_EXT),Ne=Ye;const Ge=Xe;Xe=null,this.setClear(Ge)}},getReversed:function(){return Ne},setTest:function(Ye){Ye?re(n.DEPTH_TEST):ge(n.DEPTH_TEST)},setMask:function(Ye){je!==Ye&&!Le&&(n.depthMask(Ye),je=Ye)},setFunc:function(Ye){if(Ne&&(Ye=ree[Ye]),fe!==Ye){switch(Ye){case aE:n.depthFunc(n.NEVER);break;case sE:n.depthFunc(n.ALWAYS);break;case oE:n.depthFunc(n.LESS);break;case ap:n.depthFunc(n.LEQUAL);break;case lE:n.depthFunc(n.EQUAL);break;case cE:n.depthFunc(n.GEQUAL);break;case uE:n.depthFunc(n.GREATER);break;case fE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}fe=Ye}},setLocked:function(Ye){Le=Ye},setClear:function(Ye){Xe!==Ye&&(Ne&&(Ye=1-Ye),n.clearDepth(Ye),Xe=Ye)},reset:function(){Le=!1,je=null,fe=null,Xe=null,Ne=!1}}}function r(){let Le=!1,Ne=null,je=null,fe=null,Xe=null,Ye=null,G=null,Ge=null,$e=null;return{setTest:function(be){Le||(be?re(n.STENCIL_TEST):ge(n.STENCIL_TEST))},setMask:function(be){Ne!==be&&!Le&&(n.stencilMask(be),Ne=be)},setFunc:function(be,ze,Qe){(je!==be||fe!==ze||Xe!==Qe)&&(n.stencilFunc(be,ze,Qe),je=be,fe=ze,Xe=Qe)},setOp:function(be,ze,Qe){(Ye!==be||G!==ze||Ge!==Qe)&&(n.stencilOp(be,ze,Qe),Ye=be,G=ze,Ge=Qe)},setLocked:function(be){Le=be},setClear:function(be){$e!==be&&(n.clearStencil(be),$e=be)},reset:function(){Le=!1,Ne=null,je=null,fe=null,Xe=null,Ye=null,G=null,Ge=null,$e=null}}}const a=new t,s=new i,o=new r,c=new WeakMap,f=new WeakMap;let p={},d={},m=new WeakMap,v=[],_=null,b=!1,S=null,x=null,T=null,M=null,A=null,D=null,O=null,I=new zt(0,0,0),U=0,N=!1,L=null,Y=null,ee=null,se=null,he=null;const de=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,B=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(V)[1]),P=B>=1):V.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),P=B>=2);let ae=null,X={};const oe=n.getParameter(n.SCISSOR_BOX),me=n.getParameter(n.VIEWPORT),J=new mn().fromArray(oe),le=new mn().fromArray(me);function Se(Le,Ne,je,fe){const Xe=new Uint8Array(4),Ye=n.createTexture();n.bindTexture(Le,Ye),n.texParameteri(Le,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Le,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let G=0;G<je;G++)Le===n.TEXTURE_3D||Le===n.TEXTURE_2D_ARRAY?n.texImage3D(Ne,0,n.RGBA,1,1,fe,0,n.RGBA,n.UNSIGNED_BYTE,Xe):n.texImage2D(Ne+G,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Xe);return Ye}const Ee={};Ee[n.TEXTURE_2D]=Se(n.TEXTURE_2D,n.TEXTURE_2D,1),Ee[n.TEXTURE_CUBE_MAP]=Se(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ee[n.TEXTURE_2D_ARRAY]=Se(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ee[n.TEXTURE_3D]=Se(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),re(n.DEPTH_TEST),s.setFunc(ap),He(!1),Ce(pC),re(n.CULL_FACE),xe(Nu);function re(Le){p[Le]!==!0&&(n.enable(Le),p[Le]=!0)}function ge(Le){p[Le]!==!1&&(n.disable(Le),p[Le]=!1)}function Ae(Le,Ne){return d[Le]!==Ne?(n.bindFramebuffer(Le,Ne),d[Le]=Ne,Le===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Ne),Le===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Ne),!0):!1}function Pe(Le,Ne){let je=v,fe=!1;if(Le){je=m.get(Ne),je===void 0&&(je=[],m.set(Ne,je));const Xe=Le.textures;if(je.length!==Xe.length||je[0]!==n.COLOR_ATTACHMENT0){for(let Ye=0,G=Xe.length;Ye<G;Ye++)je[Ye]=n.COLOR_ATTACHMENT0+Ye;je.length=Xe.length,fe=!0}}else je[0]!==n.BACK&&(je[0]=n.BACK,fe=!0);fe&&n.drawBuffers(je)}function We(Le){return _!==Le?(n.useProgram(Le),_=Le,!0):!1}const it={[ed]:n.FUNC_ADD,[Fz]:n.FUNC_SUBTRACT,[Hz]:n.FUNC_REVERSE_SUBTRACT};it[jz]=n.MIN,it[Vz]=n.MAX;const te={[Gz]:n.ZERO,[Yz]:n.ONE,[Wz]:n.SRC_COLOR,[iE]:n.SRC_ALPHA,[Qz]:n.SRC_ALPHA_SATURATE,[Kz]:n.DST_COLOR,[Xz]:n.DST_ALPHA,[Zz]:n.ONE_MINUS_SRC_COLOR,[rE]:n.ONE_MINUS_SRC_ALPHA,[$z]:n.ONE_MINUS_DST_COLOR,[qz]:n.ONE_MINUS_DST_ALPHA,[Jz]:n.CONSTANT_COLOR,[eB]:n.ONE_MINUS_CONSTANT_COLOR,[tB]:n.CONSTANT_ALPHA,[nB]:n.ONE_MINUS_CONSTANT_ALPHA};function xe(Le,Ne,je,fe,Xe,Ye,G,Ge,$e,be){if(Le===Nu){b===!0&&(ge(n.BLEND),b=!1);return}if(b===!1&&(re(n.BLEND),b=!0),Le!==kz){if(Le!==S||be!==N){if((x!==ed||A!==ed)&&(n.blendEquation(n.FUNC_ADD),x=ed,A=ed),be)switch(Le){case qh:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mC:n.blendFunc(n.ONE,n.ONE);break;case gC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vC:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}else switch(Le){case qh:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mC:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case gC:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case vC:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}T=null,M=null,D=null,O=null,I.set(0,0,0),U=0,S=Le,N=be}return}Xe=Xe||Ne,Ye=Ye||je,G=G||fe,(Ne!==x||Xe!==A)&&(n.blendEquationSeparate(it[Ne],it[Xe]),x=Ne,A=Xe),(je!==T||fe!==M||Ye!==D||G!==O)&&(n.blendFuncSeparate(te[je],te[fe],te[Ye],te[G]),T=je,M=fe,D=Ye,O=G),(Ge.equals(I)===!1||$e!==U)&&(n.blendColor(Ge.r,Ge.g,Ge.b,$e),I.copy(Ge),U=$e),S=Le,N=!1}function De(Le,Ne){Le.side===jo?ge(n.CULL_FACE):re(n.CULL_FACE);let je=Le.side===bs;Ne&&(je=!je),He(je),Le.blending===qh&&Le.transparent===!1?xe(Nu):xe(Le.blending,Le.blendEquation,Le.blendSrc,Le.blendDst,Le.blendEquationAlpha,Le.blendSrcAlpha,Le.blendDstAlpha,Le.blendColor,Le.blendAlpha,Le.premultipliedAlpha),s.setFunc(Le.depthFunc),s.setTest(Le.depthTest),s.setMask(Le.depthWrite),a.setMask(Le.colorWrite);const fe=Le.stencilWrite;o.setTest(fe),fe&&(o.setMask(Le.stencilWriteMask),o.setFunc(Le.stencilFunc,Le.stencilRef,Le.stencilFuncMask),o.setOp(Le.stencilFail,Le.stencilZFail,Le.stencilZPass)),pe(Le.polygonOffset,Le.polygonOffsetFactor,Le.polygonOffsetUnits),Le.alphaToCoverage===!0?re(n.SAMPLE_ALPHA_TO_COVERAGE):ge(n.SAMPLE_ALPHA_TO_COVERAGE)}function He(Le){L!==Le&&(Le?n.frontFace(n.CW):n.frontFace(n.CCW),L=Le)}function Ce(Le){Le!==Pz?(re(n.CULL_FACE),Le!==Y&&(Le===pC?n.cullFace(n.BACK):Le===zz?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ge(n.CULL_FACE),Y=Le}function ce(Le){Le!==ee&&(P&&n.lineWidth(Le),ee=Le)}function pe(Le,Ne,je){Le?(re(n.POLYGON_OFFSET_FILL),(se!==Ne||he!==je)&&(n.polygonOffset(Ne,je),se=Ne,he=je)):ge(n.POLYGON_OFFSET_FILL)}function ie(Le){Le?re(n.SCISSOR_TEST):ge(n.SCISSOR_TEST)}function W(Le){Le===void 0&&(Le=n.TEXTURE0+de-1),ae!==Le&&(n.activeTexture(Le),ae=Le)}function K(Le,Ne,je){je===void 0&&(ae===null?je=n.TEXTURE0+de-1:je=ae);let fe=X[je];fe===void 0&&(fe={type:void 0,texture:void 0},X[je]=fe),(fe.type!==Le||fe.texture!==Ne)&&(ae!==je&&(n.activeTexture(je),ae=je),n.bindTexture(Le,Ne||Ee[Le]),fe.type=Le,fe.texture=Ne)}function j(){const Le=X[ae];Le!==void 0&&Le.type!==void 0&&(n.bindTexture(Le.type,null),Le.type=void 0,Le.texture=void 0)}function $(){try{n.compressedTexImage2D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Re(){try{n.compressedTexImage3D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ie(){try{n.texSubImage2D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function ne(){try{n.texSubImage3D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function H(){try{n.compressedTexSubImage2D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Z(){try{n.compressedTexSubImage3D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function ye(){try{n.texStorage2D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Oe(){try{n.texStorage3D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Be(){try{n.texImage2D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ue(){try{n.texImage3D(...arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function pt(Le){J.equals(Le)===!1&&(n.scissor(Le.x,Le.y,Le.z,Le.w),J.copy(Le))}function St(Le){le.equals(Le)===!1&&(n.viewport(Le.x,Le.y,Le.z,Le.w),le.copy(Le))}function _e(Le,Ne){let je=f.get(Ne);je===void 0&&(je=new WeakMap,f.set(Ne,je));let fe=je.get(Le);fe===void 0&&(fe=n.getUniformBlockIndex(Ne,Le.name),je.set(Le,fe))}function Ve(Le,Ne){const fe=f.get(Ne).get(Le);c.get(Ne)!==fe&&(n.uniformBlockBinding(Ne,fe,Le.__bindingPointIndex),c.set(Ne,fe))}function nt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},ae=null,X={},d={},m=new WeakMap,v=[],_=null,b=!1,S=null,x=null,T=null,M=null,A=null,D=null,O=null,I=new zt(0,0,0),U=0,N=!1,L=null,Y=null,ee=null,se=null,he=null,J.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:re,disable:ge,bindFramebuffer:Ae,drawBuffers:Pe,useProgram:We,setBlending:xe,setMaterial:De,setFlipSided:He,setCullFace:Ce,setLineWidth:ce,setPolygonOffset:pe,setScissorTest:ie,activeTexture:W,bindTexture:K,unbindTexture:j,compressedTexImage2D:$,compressedTexImage3D:Re,texImage2D:Be,texImage3D:Ue,updateUBOMapping:_e,uniformBlockBinding:Ve,texStorage2D:ye,texStorage3D:Oe,texSubImage2D:Ie,texSubImage3D:ne,compressedTexSubImage2D:H,compressedTexSubImage3D:Z,scissor:pt,viewport:St,reset:nt}}function see(n,e,t,i,r,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new _t,p=new WeakMap;let d;const m=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(j,$){return v?new OffscreenCanvas(j,$):B0("canvas")}function b(j,$,Re){let Ie=1;const ne=K(j);if((ne.width>Re||ne.height>Re)&&(Ie=Re/Math.max(ne.width,ne.height)),Ie<1)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap||typeof VideoFrame<"u"&&j instanceof VideoFrame){const H=Math.floor(Ie*ne.width),Z=Math.floor(Ie*ne.height);d===void 0&&(d=_(H,Z));const ye=$?_(H,Z):d;return ye.width=H,ye.height=Z,ye.getContext("2d").drawImage(j,0,0,H,Z),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ne.width+"x"+ne.height+") to ("+H+"x"+Z+")."),ye}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ne.width+"x"+ne.height+")."),j;return j}function S(j){return j.generateMipmaps}function x(j){n.generateMipmap(j)}function T(j){return j.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:j.isWebGL3DRenderTarget?n.TEXTURE_3D:j.isWebGLArrayRenderTarget||j.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function M(j,$,Re,Ie,ne=!1){if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let H=$;if($===n.RED&&(Re===n.FLOAT&&(H=n.R32F),Re===n.HALF_FLOAT&&(H=n.R16F),Re===n.UNSIGNED_BYTE&&(H=n.R8)),$===n.RED_INTEGER&&(Re===n.UNSIGNED_BYTE&&(H=n.R8UI),Re===n.UNSIGNED_SHORT&&(H=n.R16UI),Re===n.UNSIGNED_INT&&(H=n.R32UI),Re===n.BYTE&&(H=n.R8I),Re===n.SHORT&&(H=n.R16I),Re===n.INT&&(H=n.R32I)),$===n.RG&&(Re===n.FLOAT&&(H=n.RG32F),Re===n.HALF_FLOAT&&(H=n.RG16F),Re===n.UNSIGNED_BYTE&&(H=n.RG8)),$===n.RG_INTEGER&&(Re===n.UNSIGNED_BYTE&&(H=n.RG8UI),Re===n.UNSIGNED_SHORT&&(H=n.RG16UI),Re===n.UNSIGNED_INT&&(H=n.RG32UI),Re===n.BYTE&&(H=n.RG8I),Re===n.SHORT&&(H=n.RG16I),Re===n.INT&&(H=n.RG32I)),$===n.RGB_INTEGER&&(Re===n.UNSIGNED_BYTE&&(H=n.RGB8UI),Re===n.UNSIGNED_SHORT&&(H=n.RGB16UI),Re===n.UNSIGNED_INT&&(H=n.RGB32UI),Re===n.BYTE&&(H=n.RGB8I),Re===n.SHORT&&(H=n.RGB16I),Re===n.INT&&(H=n.RGB32I)),$===n.RGBA_INTEGER&&(Re===n.UNSIGNED_BYTE&&(H=n.RGBA8UI),Re===n.UNSIGNED_SHORT&&(H=n.RGBA16UI),Re===n.UNSIGNED_INT&&(H=n.RGBA32UI),Re===n.BYTE&&(H=n.RGBA8I),Re===n.SHORT&&(H=n.RGBA16I),Re===n.INT&&(H=n.RGBA32I)),$===n.RGB&&(Re===n.UNSIGNED_INT_5_9_9_9_REV&&(H=n.RGB9_E5),Re===n.UNSIGNED_INT_10F_11F_11F_REV&&(H=n.R11F_G11F_B10F)),$===n.RGBA){const Z=ne?P0:qn.getTransfer(Ie);Re===n.FLOAT&&(H=n.RGBA32F),Re===n.HALF_FLOAT&&(H=n.RGBA16F),Re===n.UNSIGNED_BYTE&&(H=Z===gi?n.SRGB8_ALPHA8:n.RGBA8),Re===n.UNSIGNED_SHORT_4_4_4_4&&(H=n.RGBA4),Re===n.UNSIGNED_SHORT_5_5_5_1&&(H=n.RGB5_A1)}return(H===n.R16F||H===n.R32F||H===n.RG16F||H===n.RG32F||H===n.RGBA16F||H===n.RGBA32F)&&e.get("EXT_color_buffer_float"),H}function A(j,$){let Re;return j?$===null||$===Bu||$===Ig?Re=n.DEPTH24_STENCIL8:$===ys?Re=n.DEPTH32F_STENCIL8:$===Lg&&(Re=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):$===null||$===Bu||$===Ig?Re=n.DEPTH_COMPONENT24:$===ys?Re=n.DEPTH_COMPONENT32F:$===Lg&&(Re=n.DEPTH_COMPONENT16),Re}function D(j,$){return S(j)===!0||j.isFramebufferTexture&&j.minFilter!==Oa&&j.minFilter!==Er?Math.log2(Math.max($.width,$.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?$.mipmaps.length:1}function O(j){const $=j.target;$.removeEventListener("dispose",O),U($),$.isVideoTexture&&p.delete($)}function I(j){const $=j.target;$.removeEventListener("dispose",I),L($)}function U(j){const $=i.get(j);if($.__webglInit===void 0)return;const Re=j.source,Ie=m.get(Re);if(Ie){const ne=Ie[$.__cacheKey];ne.usedTimes--,ne.usedTimes===0&&N(j),Object.keys(Ie).length===0&&m.delete(Re)}i.remove(j)}function N(j){const $=i.get(j);n.deleteTexture($.__webglTexture);const Re=j.source,Ie=m.get(Re);delete Ie[$.__cacheKey],s.memory.textures--}function L(j){const $=i.get(j);if(j.depthTexture&&(j.depthTexture.dispose(),i.remove(j.depthTexture)),j.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++){if(Array.isArray($.__webglFramebuffer[Ie]))for(let ne=0;ne<$.__webglFramebuffer[Ie].length;ne++)n.deleteFramebuffer($.__webglFramebuffer[Ie][ne]);else n.deleteFramebuffer($.__webglFramebuffer[Ie]);$.__webglDepthbuffer&&n.deleteRenderbuffer($.__webglDepthbuffer[Ie])}else{if(Array.isArray($.__webglFramebuffer))for(let Ie=0;Ie<$.__webglFramebuffer.length;Ie++)n.deleteFramebuffer($.__webglFramebuffer[Ie]);else n.deleteFramebuffer($.__webglFramebuffer);if($.__webglDepthbuffer&&n.deleteRenderbuffer($.__webglDepthbuffer),$.__webglMultisampledFramebuffer&&n.deleteFramebuffer($.__webglMultisampledFramebuffer),$.__webglColorRenderbuffer)for(let Ie=0;Ie<$.__webglColorRenderbuffer.length;Ie++)$.__webglColorRenderbuffer[Ie]&&n.deleteRenderbuffer($.__webglColorRenderbuffer[Ie]);$.__webglDepthRenderbuffer&&n.deleteRenderbuffer($.__webglDepthRenderbuffer)}const Re=j.textures;for(let Ie=0,ne=Re.length;Ie<ne;Ie++){const H=i.get(Re[Ie]);H.__webglTexture&&(n.deleteTexture(H.__webglTexture),s.memory.textures--),i.remove(Re[Ie])}i.remove(j)}let Y=0;function ee(){Y=0}function se(){const j=Y;return j>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+r.maxTextures),Y+=1,j}function he(j){const $=[];return $.push(j.wrapS),$.push(j.wrapT),$.push(j.wrapR||0),$.push(j.magFilter),$.push(j.minFilter),$.push(j.anisotropy),$.push(j.internalFormat),$.push(j.format),$.push(j.type),$.push(j.generateMipmaps),$.push(j.premultiplyAlpha),$.push(j.flipY),$.push(j.unpackAlignment),$.push(j.colorSpace),$.join()}function de(j,$){const Re=i.get(j);if(j.isVideoTexture&&ie(j),j.isRenderTargetTexture===!1&&j.isExternalTexture!==!0&&j.version>0&&Re.__version!==j.version){const Ie=j.image;if(Ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ee(Re,j,$);return}}else j.isExternalTexture&&(Re.__webglTexture=j.sourceTexture?j.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,Re.__webglTexture,n.TEXTURE0+$)}function P(j,$){const Re=i.get(j);if(j.isRenderTargetTexture===!1&&j.version>0&&Re.__version!==j.version){Ee(Re,j,$);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Re.__webglTexture,n.TEXTURE0+$)}function B(j,$){const Re=i.get(j);if(j.isRenderTargetTexture===!1&&j.version>0&&Re.__version!==j.version){Ee(Re,j,$);return}t.bindTexture(n.TEXTURE_3D,Re.__webglTexture,n.TEXTURE0+$)}function V(j,$){const Re=i.get(j);if(j.version>0&&Re.__version!==j.version){re(Re,j,$);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Re.__webglTexture,n.TEXTURE0+$)}const ae={[N0]:n.REPEAT,[Vo]:n.CLAMP_TO_EDGE,[L0]:n.MIRRORED_REPEAT},X={[Oa]:n.NEAREST,[e2]:n.NEAREST_MIPMAP_NEAREST,[yg]:n.NEAREST_MIPMAP_LINEAR,[Er]:n.LINEAR,[d0]:n.LINEAR_MIPMAP_NEAREST,[zc]:n.LINEAR_MIPMAP_LINEAR},oe={[yB]:n.NEVER,[wB]:n.ALWAYS,[_B]:n.LESS,[c2]:n.LEQUAL,[bB]:n.EQUAL,[EB]:n.GEQUAL,[xB]:n.GREATER,[SB]:n.NOTEQUAL};function me(j,$){if($.type===ys&&e.has("OES_texture_float_linear")===!1&&($.magFilter===Er||$.magFilter===d0||$.magFilter===yg||$.magFilter===zc||$.minFilter===Er||$.minFilter===d0||$.minFilter===yg||$.minFilter===zc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(j,n.TEXTURE_WRAP_S,ae[$.wrapS]),n.texParameteri(j,n.TEXTURE_WRAP_T,ae[$.wrapT]),(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)&&n.texParameteri(j,n.TEXTURE_WRAP_R,ae[$.wrapR]),n.texParameteri(j,n.TEXTURE_MAG_FILTER,X[$.magFilter]),n.texParameteri(j,n.TEXTURE_MIN_FILTER,X[$.minFilter]),$.compareFunction&&(n.texParameteri(j,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(j,n.TEXTURE_COMPARE_FUNC,oe[$.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if($.magFilter===Oa||$.minFilter!==yg&&$.minFilter!==zc||$.type===ys&&e.has("OES_texture_float_linear")===!1)return;if($.anisotropy>1||i.get($).__currentAnisotropy){const Re=e.get("EXT_texture_filter_anisotropic");n.texParameterf(j,Re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($.anisotropy,r.getMaxAnisotropy())),i.get($).__currentAnisotropy=$.anisotropy}}}function J(j,$){let Re=!1;j.__webglInit===void 0&&(j.__webglInit=!0,$.addEventListener("dispose",O));const Ie=$.source;let ne=m.get(Ie);ne===void 0&&(ne={},m.set(Ie,ne));const H=he($);if(H!==j.__cacheKey){ne[H]===void 0&&(ne[H]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,Re=!0),ne[H].usedTimes++;const Z=ne[j.__cacheKey];Z!==void 0&&(ne[j.__cacheKey].usedTimes--,Z.usedTimes===0&&N($)),j.__cacheKey=H,j.__webglTexture=ne[H].texture}return Re}function le(j,$,Re){return Math.floor(Math.floor(j/Re)/$)}function Se(j,$,Re,Ie){const H=j.updateRanges;if(H.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,$.width,$.height,Re,Ie,$.data);else{H.sort((Ue,pt)=>Ue.start-pt.start);let Z=0;for(let Ue=1;Ue<H.length;Ue++){const pt=H[Z],St=H[Ue],_e=pt.start+pt.count,Ve=le(St.start,$.width,4),nt=le(pt.start,$.width,4);St.start<=_e+1&&Ve===nt&&le(St.start+St.count-1,$.width,4)===Ve?pt.count=Math.max(pt.count,St.start+St.count-pt.start):(++Z,H[Z]=St)}H.length=Z+1;const ye=n.getParameter(n.UNPACK_ROW_LENGTH),Oe=n.getParameter(n.UNPACK_SKIP_PIXELS),Be=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,$.width);for(let Ue=0,pt=H.length;Ue<pt;Ue++){const St=H[Ue],_e=Math.floor(St.start/4),Ve=Math.ceil(St.count/4),nt=_e%$.width,Le=Math.floor(_e/$.width),Ne=Ve,je=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,nt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Le),t.texSubImage2D(n.TEXTURE_2D,0,nt,Le,Ne,je,Re,Ie,$.data)}j.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,ye),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Oe),n.pixelStorei(n.UNPACK_SKIP_ROWS,Be)}}function Ee(j,$,Re){let Ie=n.TEXTURE_2D;($.isDataArrayTexture||$.isCompressedArrayTexture)&&(Ie=n.TEXTURE_2D_ARRAY),$.isData3DTexture&&(Ie=n.TEXTURE_3D);const ne=J(j,$),H=$.source;t.bindTexture(Ie,j.__webglTexture,n.TEXTURE0+Re);const Z=i.get(H);if(H.version!==Z.__version||ne===!0){t.activeTexture(n.TEXTURE0+Re);const ye=qn.getPrimaries(qn.workingColorSpace),Oe=$.colorSpace===Ru?null:qn.getPrimaries($.colorSpace),Be=$.colorSpace===Ru||ye===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,$.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,$.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Be);let Ue=b($.image,!1,r.maxTextureSize);Ue=W($,Ue);const pt=a.convert($.format,$.colorSpace),St=a.convert($.type);let _e=M($.internalFormat,pt,St,$.colorSpace,$.isVideoTexture);me(Ie,$);let Ve;const nt=$.mipmaps,Le=$.isVideoTexture!==!0,Ne=Z.__version===void 0||ne===!0,je=H.dataReady,fe=D($,Ue);if($.isDepthTexture)_e=A($.format===Pg,$.type),Ne&&(Le?t.texStorage2D(n.TEXTURE_2D,1,_e,Ue.width,Ue.height):t.texImage2D(n.TEXTURE_2D,0,_e,Ue.width,Ue.height,0,pt,St,null));else if($.isDataTexture)if(nt.length>0){Le&&Ne&&t.texStorage2D(n.TEXTURE_2D,fe,_e,nt[0].width,nt[0].height);for(let Xe=0,Ye=nt.length;Xe<Ye;Xe++)Ve=nt[Xe],Le?je&&t.texSubImage2D(n.TEXTURE_2D,Xe,0,0,Ve.width,Ve.height,pt,St,Ve.data):t.texImage2D(n.TEXTURE_2D,Xe,_e,Ve.width,Ve.height,0,pt,St,Ve.data);$.generateMipmaps=!1}else Le?(Ne&&t.texStorage2D(n.TEXTURE_2D,fe,_e,Ue.width,Ue.height),je&&Se($,Ue,pt,St)):t.texImage2D(n.TEXTURE_2D,0,_e,Ue.width,Ue.height,0,pt,St,Ue.data);else if($.isCompressedTexture)if($.isCompressedArrayTexture){Le&&Ne&&t.texStorage3D(n.TEXTURE_2D_ARRAY,fe,_e,nt[0].width,nt[0].height,Ue.depth);for(let Xe=0,Ye=nt.length;Xe<Ye;Xe++)if(Ve=nt[Xe],$.format!==Wa)if(pt!==null)if(Le){if(je)if($.layerUpdates.size>0){const G=AC(Ve.width,Ve.height,$.format,$.type);for(const Ge of $.layerUpdates){const $e=Ve.data.subarray(Ge*G/Ve.data.BYTES_PER_ELEMENT,(Ge+1)*G/Ve.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Xe,0,0,Ge,Ve.width,Ve.height,1,pt,$e)}$.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Xe,0,0,0,Ve.width,Ve.height,Ue.depth,pt,Ve.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Xe,_e,Ve.width,Ve.height,Ue.depth,0,Ve.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Le?je&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Xe,0,0,0,Ve.width,Ve.height,Ue.depth,pt,St,Ve.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Xe,_e,Ve.width,Ve.height,Ue.depth,0,pt,St,Ve.data)}else{Le&&Ne&&t.texStorage2D(n.TEXTURE_2D,fe,_e,nt[0].width,nt[0].height);for(let Xe=0,Ye=nt.length;Xe<Ye;Xe++)Ve=nt[Xe],$.format!==Wa?pt!==null?Le?je&&t.compressedTexSubImage2D(n.TEXTURE_2D,Xe,0,0,Ve.width,Ve.height,pt,Ve.data):t.compressedTexImage2D(n.TEXTURE_2D,Xe,_e,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?je&&t.texSubImage2D(n.TEXTURE_2D,Xe,0,0,Ve.width,Ve.height,pt,St,Ve.data):t.texImage2D(n.TEXTURE_2D,Xe,_e,Ve.width,Ve.height,0,pt,St,Ve.data)}else if($.isDataArrayTexture)if(Le){if(Ne&&t.texStorage3D(n.TEXTURE_2D_ARRAY,fe,_e,Ue.width,Ue.height,Ue.depth),je)if($.layerUpdates.size>0){const Xe=AC(Ue.width,Ue.height,$.format,$.type);for(const Ye of $.layerUpdates){const G=Ue.data.subarray(Ye*Xe/Ue.data.BYTES_PER_ELEMENT,(Ye+1)*Xe/Ue.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ye,Ue.width,Ue.height,1,pt,St,G)}$.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ue.width,Ue.height,Ue.depth,pt,St,Ue.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,_e,Ue.width,Ue.height,Ue.depth,0,pt,St,Ue.data);else if($.isData3DTexture)Le?(Ne&&t.texStorage3D(n.TEXTURE_3D,fe,_e,Ue.width,Ue.height,Ue.depth),je&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ue.width,Ue.height,Ue.depth,pt,St,Ue.data)):t.texImage3D(n.TEXTURE_3D,0,_e,Ue.width,Ue.height,Ue.depth,0,pt,St,Ue.data);else if($.isFramebufferTexture){if(Ne)if(Le)t.texStorage2D(n.TEXTURE_2D,fe,_e,Ue.width,Ue.height);else{let Xe=Ue.width,Ye=Ue.height;for(let G=0;G<fe;G++)t.texImage2D(n.TEXTURE_2D,G,_e,Xe,Ye,0,pt,St,null),Xe>>=1,Ye>>=1}}else if(nt.length>0){if(Le&&Ne){const Xe=K(nt[0]);t.texStorage2D(n.TEXTURE_2D,fe,_e,Xe.width,Xe.height)}for(let Xe=0,Ye=nt.length;Xe<Ye;Xe++)Ve=nt[Xe],Le?je&&t.texSubImage2D(n.TEXTURE_2D,Xe,0,0,pt,St,Ve):t.texImage2D(n.TEXTURE_2D,Xe,_e,pt,St,Ve);$.generateMipmaps=!1}else if(Le){if(Ne){const Xe=K(Ue);t.texStorage2D(n.TEXTURE_2D,fe,_e,Xe.width,Xe.height)}je&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,pt,St,Ue)}else t.texImage2D(n.TEXTURE_2D,0,_e,pt,St,Ue);S($)&&x(Ie),Z.__version=H.version,$.onUpdate&&$.onUpdate($)}j.__version=$.version}function re(j,$,Re){if($.image.length!==6)return;const Ie=J(j,$),ne=$.source;t.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture,n.TEXTURE0+Re);const H=i.get(ne);if(ne.version!==H.__version||Ie===!0){t.activeTexture(n.TEXTURE0+Re);const Z=qn.getPrimaries(qn.workingColorSpace),ye=$.colorSpace===Ru?null:qn.getPrimaries($.colorSpace),Oe=$.colorSpace===Ru||Z===ye?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,$.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,$.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const Be=$.isCompressedTexture||$.image[0].isCompressedTexture,Ue=$.image[0]&&$.image[0].isDataTexture,pt=[];for(let Ye=0;Ye<6;Ye++)!Be&&!Ue?pt[Ye]=b($.image[Ye],!0,r.maxCubemapSize):pt[Ye]=Ue?$.image[Ye].image:$.image[Ye],pt[Ye]=W($,pt[Ye]);const St=pt[0],_e=a.convert($.format,$.colorSpace),Ve=a.convert($.type),nt=M($.internalFormat,_e,Ve,$.colorSpace),Le=$.isVideoTexture!==!0,Ne=H.__version===void 0||Ie===!0,je=ne.dataReady;let fe=D($,St);me(n.TEXTURE_CUBE_MAP,$);let Xe;if(Be){Le&&Ne&&t.texStorage2D(n.TEXTURE_CUBE_MAP,fe,nt,St.width,St.height);for(let Ye=0;Ye<6;Ye++){Xe=pt[Ye].mipmaps;for(let G=0;G<Xe.length;G++){const Ge=Xe[G];$.format!==Wa?_e!==null?Le?je&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,G,0,0,Ge.width,Ge.height,_e,Ge.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,G,nt,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Le?je&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,G,0,0,Ge.width,Ge.height,_e,Ve,Ge.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,G,nt,Ge.width,Ge.height,0,_e,Ve,Ge.data)}}}else{if(Xe=$.mipmaps,Le&&Ne){Xe.length>0&&fe++;const Ye=K(pt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,fe,nt,Ye.width,Ye.height)}for(let Ye=0;Ye<6;Ye++)if(Ue){Le?je&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,pt[Ye].width,pt[Ye].height,_e,Ve,pt[Ye].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,nt,pt[Ye].width,pt[Ye].height,0,_e,Ve,pt[Ye].data);for(let G=0;G<Xe.length;G++){const $e=Xe[G].image[Ye].image;Le?je&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,G+1,0,0,$e.width,$e.height,_e,Ve,$e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,G+1,nt,$e.width,$e.height,0,_e,Ve,$e.data)}}else{Le?je&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,_e,Ve,pt[Ye]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,nt,_e,Ve,pt[Ye]);for(let G=0;G<Xe.length;G++){const Ge=Xe[G];Le?je&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,G+1,0,0,_e,Ve,Ge.image[Ye]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,G+1,nt,_e,Ve,Ge.image[Ye])}}}S($)&&x(n.TEXTURE_CUBE_MAP),H.__version=ne.version,$.onUpdate&&$.onUpdate($)}j.__version=$.version}function ge(j,$,Re,Ie,ne,H){const Z=a.convert(Re.format,Re.colorSpace),ye=a.convert(Re.type),Oe=M(Re.internalFormat,Z,ye,Re.colorSpace),Be=i.get($),Ue=i.get(Re);if(Ue.__renderTarget=$,!Be.__hasExternalTextures){const pt=Math.max(1,$.width>>H),St=Math.max(1,$.height>>H);ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY?t.texImage3D(ne,H,Oe,pt,St,$.depth,0,Z,ye,null):t.texImage2D(ne,H,Oe,pt,St,0,Z,ye,null)}t.bindFramebuffer(n.FRAMEBUFFER,j),pe($)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ie,ne,Ue.__webglTexture,0,ce($)):(ne===n.TEXTURE_2D||ne>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ne<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ie,ne,Ue.__webglTexture,H),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(j,$,Re){if(n.bindRenderbuffer(n.RENDERBUFFER,j),$.depthBuffer){const Ie=$.depthTexture,ne=Ie&&Ie.isDepthTexture?Ie.type:null,H=A($.stencilBuffer,ne),Z=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=ce($);pe($)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ye,H,$.width,$.height):Re?n.renderbufferStorageMultisample(n.RENDERBUFFER,ye,H,$.width,$.height):n.renderbufferStorage(n.RENDERBUFFER,H,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Z,n.RENDERBUFFER,j)}else{const Ie=$.textures;for(let ne=0;ne<Ie.length;ne++){const H=Ie[ne],Z=a.convert(H.format,H.colorSpace),ye=a.convert(H.type),Oe=M(H.internalFormat,Z,ye,H.colorSpace),Be=ce($);Re&&pe($)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Be,Oe,$.width,$.height):pe($)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Be,Oe,$.width,$.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,$.width,$.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Pe(j,$){if($&&$.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,j),!($.depthTexture&&$.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ie=i.get($.depthTexture);Ie.__renderTarget=$,(!Ie.__webglTexture||$.depthTexture.image.width!==$.width||$.depthTexture.image.height!==$.height)&&($.depthTexture.image.width=$.width,$.depthTexture.image.height=$.height,$.depthTexture.needsUpdate=!0),de($.depthTexture,0);const ne=Ie.__webglTexture,H=ce($);if($.depthTexture.format===Ug)pe($)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ne,0,H):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ne,0);else if($.depthTexture.format===Pg)pe($)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ne,0,H):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ne,0);else throw new Error("Unknown depthTexture format")}function We(j){const $=i.get(j),Re=j.isWebGLCubeRenderTarget===!0;if($.__boundDepthTexture!==j.depthTexture){const Ie=j.depthTexture;if($.__depthDisposeCallback&&$.__depthDisposeCallback(),Ie){const ne=()=>{delete $.__boundDepthTexture,delete $.__depthDisposeCallback,Ie.removeEventListener("dispose",ne)};Ie.addEventListener("dispose",ne),$.__depthDisposeCallback=ne}$.__boundDepthTexture=Ie}if(j.depthTexture&&!$.__autoAllocateDepthBuffer){if(Re)throw new Error("target.depthTexture not supported in Cube render targets");const Ie=j.texture.mipmaps;Ie&&Ie.length>0?Pe($.__webglFramebuffer[0],j):Pe($.__webglFramebuffer,j)}else if(Re){$.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)if(t.bindFramebuffer(n.FRAMEBUFFER,$.__webglFramebuffer[Ie]),$.__webglDepthbuffer[Ie]===void 0)$.__webglDepthbuffer[Ie]=n.createRenderbuffer(),Ae($.__webglDepthbuffer[Ie],j,!1);else{const ne=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,H=$.__webglDepthbuffer[Ie];n.bindRenderbuffer(n.RENDERBUFFER,H),n.framebufferRenderbuffer(n.FRAMEBUFFER,ne,n.RENDERBUFFER,H)}}else{const Ie=j.texture.mipmaps;if(Ie&&Ie.length>0?t.bindFramebuffer(n.FRAMEBUFFER,$.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,$.__webglFramebuffer),$.__webglDepthbuffer===void 0)$.__webglDepthbuffer=n.createRenderbuffer(),Ae($.__webglDepthbuffer,j,!1);else{const ne=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,H=$.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,H),n.framebufferRenderbuffer(n.FRAMEBUFFER,ne,n.RENDERBUFFER,H)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function it(j,$,Re){const Ie=i.get(j);$!==void 0&&ge(Ie.__webglFramebuffer,j,j.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Re!==void 0&&We(j)}function te(j){const $=j.texture,Re=i.get(j),Ie=i.get($);j.addEventListener("dispose",I);const ne=j.textures,H=j.isWebGLCubeRenderTarget===!0,Z=ne.length>1;if(Z||(Ie.__webglTexture===void 0&&(Ie.__webglTexture=n.createTexture()),Ie.__version=$.version,s.memory.textures++),H){Re.__webglFramebuffer=[];for(let ye=0;ye<6;ye++)if($.mipmaps&&$.mipmaps.length>0){Re.__webglFramebuffer[ye]=[];for(let Oe=0;Oe<$.mipmaps.length;Oe++)Re.__webglFramebuffer[ye][Oe]=n.createFramebuffer()}else Re.__webglFramebuffer[ye]=n.createFramebuffer()}else{if($.mipmaps&&$.mipmaps.length>0){Re.__webglFramebuffer=[];for(let ye=0;ye<$.mipmaps.length;ye++)Re.__webglFramebuffer[ye]=n.createFramebuffer()}else Re.__webglFramebuffer=n.createFramebuffer();if(Z)for(let ye=0,Oe=ne.length;ye<Oe;ye++){const Be=i.get(ne[ye]);Be.__webglTexture===void 0&&(Be.__webglTexture=n.createTexture(),s.memory.textures++)}if(j.samples>0&&pe(j)===!1){Re.__webglMultisampledFramebuffer=n.createFramebuffer(),Re.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglMultisampledFramebuffer);for(let ye=0;ye<ne.length;ye++){const Oe=ne[ye];Re.__webglColorRenderbuffer[ye]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Re.__webglColorRenderbuffer[ye]);const Be=a.convert(Oe.format,Oe.colorSpace),Ue=a.convert(Oe.type),pt=M(Oe.internalFormat,Be,Ue,Oe.colorSpace,j.isXRRenderTarget===!0),St=ce(j);n.renderbufferStorageMultisample(n.RENDERBUFFER,St,pt,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.RENDERBUFFER,Re.__webglColorRenderbuffer[ye])}n.bindRenderbuffer(n.RENDERBUFFER,null),j.depthBuffer&&(Re.__webglDepthRenderbuffer=n.createRenderbuffer(),Ae(Re.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(H){t.bindTexture(n.TEXTURE_CUBE_MAP,Ie.__webglTexture),me(n.TEXTURE_CUBE_MAP,$);for(let ye=0;ye<6;ye++)if($.mipmaps&&$.mipmaps.length>0)for(let Oe=0;Oe<$.mipmaps.length;Oe++)ge(Re.__webglFramebuffer[ye][Oe],j,$,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ye,Oe);else ge(Re.__webglFramebuffer[ye],j,$,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0);S($)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Z){for(let ye=0,Oe=ne.length;ye<Oe;ye++){const Be=ne[ye],Ue=i.get(Be);let pt=n.TEXTURE_2D;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(pt=j.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(pt,Ue.__webglTexture),me(pt,Be),ge(Re.__webglFramebuffer,j,Be,n.COLOR_ATTACHMENT0+ye,pt,0),S(Be)&&x(pt)}t.unbindTexture()}else{let ye=n.TEXTURE_2D;if((j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(ye=j.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ye,Ie.__webglTexture),me(ye,$),$.mipmaps&&$.mipmaps.length>0)for(let Oe=0;Oe<$.mipmaps.length;Oe++)ge(Re.__webglFramebuffer[Oe],j,$,n.COLOR_ATTACHMENT0,ye,Oe);else ge(Re.__webglFramebuffer,j,$,n.COLOR_ATTACHMENT0,ye,0);S($)&&x(ye),t.unbindTexture()}j.depthBuffer&&We(j)}function xe(j){const $=j.textures;for(let Re=0,Ie=$.length;Re<Ie;Re++){const ne=$[Re];if(S(ne)){const H=T(j),Z=i.get(ne).__webglTexture;t.bindTexture(H,Z),x(H),t.unbindTexture()}}}const De=[],He=[];function Ce(j){if(j.samples>0){if(pe(j)===!1){const $=j.textures,Re=j.width,Ie=j.height;let ne=n.COLOR_BUFFER_BIT;const H=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Z=i.get(j),ye=$.length>1;if(ye)for(let Be=0;Be<$.length;Be++)t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Be,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Be,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Z.__webglMultisampledFramebuffer);const Oe=j.texture.mipmaps;Oe&&Oe.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Z.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Z.__webglFramebuffer);for(let Be=0;Be<$.length;Be++){if(j.resolveDepthBuffer&&(j.depthBuffer&&(ne|=n.DEPTH_BUFFER_BIT),j.stencilBuffer&&j.resolveStencilBuffer&&(ne|=n.STENCIL_BUFFER_BIT)),ye){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Z.__webglColorRenderbuffer[Be]);const Ue=i.get($[Be]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ue,0)}n.blitFramebuffer(0,0,Re,Ie,0,0,Re,Ie,ne,n.NEAREST),c===!0&&(De.length=0,He.length=0,De.push(n.COLOR_ATTACHMENT0+Be),j.depthBuffer&&j.resolveDepthBuffer===!1&&(De.push(H),He.push(H),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,He)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,De))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ye)for(let Be=0;Be<$.length;Be++){t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Be,n.RENDERBUFFER,Z.__webglColorRenderbuffer[Be]);const Ue=i.get($[Be]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Be,n.TEXTURE_2D,Ue,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Z.__webglMultisampledFramebuffer)}else if(j.depthBuffer&&j.resolveDepthBuffer===!1&&c){const $=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[$])}}}function ce(j){return Math.min(r.maxSamples,j.samples)}function pe(j){const $=i.get(j);return j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&$.__useRenderToTexture!==!1}function ie(j){const $=s.render.frame;p.get(j)!==$&&(p.set(j,$),j.update())}function W(j,$){const Re=j.colorSpace,Ie=j.format,ne=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||Re!==gd&&Re!==Ru&&(qn.getTransfer(Re)===gi?(Ie!==Wa||ne!==Wo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Re)),$}function K(j){return typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement?(f.width=j.naturalWidth||j.width,f.height=j.naturalHeight||j.height):typeof VideoFrame<"u"&&j instanceof VideoFrame?(f.width=j.displayWidth,f.height=j.displayHeight):(f.width=j.width,f.height=j.height),f}this.allocateTextureUnit=se,this.resetTextureUnits=ee,this.setTexture2D=de,this.setTexture2DArray=P,this.setTexture3D=B,this.setTextureCube=V,this.rebindTextures=it,this.setupRenderTarget=te,this.updateRenderTargetMipmap=xe,this.updateMultisampleRenderTarget=Ce,this.setupDepthRenderbuffer=We,this.setupFrameBufferTexture=ge,this.useMultisampledRTT=pe}function L4(n,e){function t(i,r=Ru){let a;const s=qn.getTransfer(r);if(i===Wo)return n.UNSIGNED_BYTE;if(i===P1)return n.UNSIGNED_SHORT_4_4_4_4;if(i===z1)return n.UNSIGNED_SHORT_5_5_5_1;if(i===i2)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===r2)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===t2)return n.BYTE;if(i===n2)return n.SHORT;if(i===Lg)return n.UNSIGNED_SHORT;if(i===U1)return n.INT;if(i===Bu)return n.UNSIGNED_INT;if(i===ys)return n.FLOAT;if(i===_p)return n.HALF_FLOAT;if(i===a2)return n.ALPHA;if(i===s2)return n.RGB;if(i===Wa)return n.RGBA;if(i===Ug)return n.DEPTH_COMPONENT;if(i===Pg)return n.DEPTH_STENCIL;if(i===B1)return n.RED;if(i===v_)return n.RED_INTEGER;if(i===o2)return n.RG;if(i===k1)return n.RG_INTEGER;if(i===F1)return n.RGBA_INTEGER;if(i===h0||i===p0||i===m0||i===g0)if(s===gi)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===h0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===p0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===m0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===g0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===h0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===p0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===m0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===g0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===dE||i===hE||i===pE||i===mE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===dE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===hE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===pE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===mE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===gE||i===vE||i===yE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===gE||i===vE)return s===gi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===yE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===_E||i===bE||i===xE||i===SE||i===EE||i===wE||i===TE||i===ME||i===AE||i===CE||i===RE||i===OE||i===DE||i===NE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===_E)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===bE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===xE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===SE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===EE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===wE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===TE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ME)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===AE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===CE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===RE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===OE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===DE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===NE)return s===gi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===LE||i===IE||i===UE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===LE)return s===gi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===IE)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===UE)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===PE||i===zE||i===BE||i===kE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===PE)return a.COMPRESSED_RED_RGTC1_EXT;if(i===zE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===BE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===kE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ig?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const oee=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lee=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class cee{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new v2(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new yo({vertexShader:oee,fragmentShader:lee,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ei(new Ws(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class uee extends Zc{constructor(e,t){super();const i=this;let r=null,a=1,s=null,o="local-floor",c=1,f=null,p=null,d=null,m=null,v=null,_=null;const b=typeof XRWebGLBinding<"u",S=new cee,x={},T=t.getContextAttributes();let M=null,A=null;const D=[],O=[],I=new _t;let U=null;const N=new aa;N.viewport=new mn;const L=new aa;L.viewport=new mn;const Y=[N,L],ee=new S4;let se=null,he=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ee){let re=D[Ee];return re===void 0&&(re=new PS,D[Ee]=re),re.getTargetRaySpace()},this.getControllerGrip=function(Ee){let re=D[Ee];return re===void 0&&(re=new PS,D[Ee]=re),re.getGripSpace()},this.getHand=function(Ee){let re=D[Ee];return re===void 0&&(re=new PS,D[Ee]=re),re.getHandSpace()};function de(Ee){const re=O.indexOf(Ee.inputSource);if(re===-1)return;const ge=D[re];ge!==void 0&&(ge.update(Ee.inputSource,Ee.frame,f||s),ge.dispatchEvent({type:Ee.type,data:Ee.inputSource}))}function P(){r.removeEventListener("select",de),r.removeEventListener("selectstart",de),r.removeEventListener("selectend",de),r.removeEventListener("squeeze",de),r.removeEventListener("squeezestart",de),r.removeEventListener("squeezeend",de),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",B);for(let Ee=0;Ee<D.length;Ee++){const re=O[Ee];re!==null&&(O[Ee]=null,D[Ee].disconnect(re))}se=null,he=null,S.reset();for(const Ee in x)delete x[Ee];e.setRenderTarget(M),v=null,m=null,d=null,r=null,A=null,Se.stop(),i.isPresenting=!1,e.setPixelRatio(U),e.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ee){a=Ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ee){o=Ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(Ee){f=Ee},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return d===null&&b&&(d=new XRWebGLBinding(r,t)),d},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(Ee){if(r=Ee,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",de),r.addEventListener("selectstart",de),r.addEventListener("selectend",de),r.addEventListener("squeeze",de),r.addEventListener("squeezestart",de),r.addEventListener("squeezeend",de),r.addEventListener("end",P),r.addEventListener("inputsourceschange",B),T.xrCompatible!==!0&&await t.makeXRCompatible(),U=e.getPixelRatio(),e.getSize(I),b&&"createProjectionLayer"in XRWebGLBinding.prototype){let ge=null,Ae=null,Pe=null;T.depth&&(Pe=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ge=T.stencil?Pg:Ug,Ae=T.stencil?Ig:Bu);const We={colorFormat:t.RGBA8,depthFormat:Pe,scaleFactor:a};d=this.getBinding(),m=d.createProjectionLayer(We),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),A=new Il(m.textureWidth,m.textureHeight,{format:Wa,type:Wo,depthTexture:new J1(m.textureWidth,m.textureHeight,Ae,void 0,void 0,void 0,void 0,void 0,void 0,ge),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const ge={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:a};v=new XRWebGLLayer(r,t,ge),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),A=new Il(v.framebufferWidth,v.framebufferHeight,{format:Wa,type:Wo,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(c),f=null,s=await r.requestReferenceSpace(o),Se.setContext(r),Se.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function B(Ee){for(let re=0;re<Ee.removed.length;re++){const ge=Ee.removed[re],Ae=O.indexOf(ge);Ae>=0&&(O[Ae]=null,D[Ae].disconnect(ge))}for(let re=0;re<Ee.added.length;re++){const ge=Ee.added[re];let Ae=O.indexOf(ge);if(Ae===-1){for(let We=0;We<D.length;We++)if(We>=O.length){O.push(ge),Ae=We;break}else if(O[We]===null){O[We]=ge,Ae=We;break}if(Ae===-1)break}const Pe=D[Ae];Pe&&Pe.connect(ge)}}const V=new ve,ae=new ve;function X(Ee,re,ge){V.setFromMatrixPosition(re.matrixWorld),ae.setFromMatrixPosition(ge.matrixWorld);const Ae=V.distanceTo(ae),Pe=re.projectionMatrix.elements,We=ge.projectionMatrix.elements,it=Pe[14]/(Pe[10]-1),te=Pe[14]/(Pe[10]+1),xe=(Pe[9]+1)/Pe[5],De=(Pe[9]-1)/Pe[5],He=(Pe[8]-1)/Pe[0],Ce=(We[8]+1)/We[0],ce=it*He,pe=it*Ce,ie=Ae/(-He+Ce),W=ie*-He;if(re.matrixWorld.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.translateX(W),Ee.translateZ(ie),Ee.matrixWorld.compose(Ee.position,Ee.quaternion,Ee.scale),Ee.matrixWorldInverse.copy(Ee.matrixWorld).invert(),Pe[10]===-1)Ee.projectionMatrix.copy(re.projectionMatrix),Ee.projectionMatrixInverse.copy(re.projectionMatrixInverse);else{const K=it+ie,j=te+ie,$=ce-W,Re=pe+(Ae-W),Ie=xe*te/j*K,ne=De*te/j*K;Ee.projectionMatrix.makePerspective($,Re,Ie,ne,K,j),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert()}}function oe(Ee,re){re===null?Ee.matrixWorld.copy(Ee.matrix):Ee.matrixWorld.multiplyMatrices(re.matrixWorld,Ee.matrix),Ee.matrixWorldInverse.copy(Ee.matrixWorld).invert()}this.updateCamera=function(Ee){if(r===null)return;let re=Ee.near,ge=Ee.far;S.texture!==null&&(S.depthNear>0&&(re=S.depthNear),S.depthFar>0&&(ge=S.depthFar)),ee.near=L.near=N.near=re,ee.far=L.far=N.far=ge,(se!==ee.near||he!==ee.far)&&(r.updateRenderState({depthNear:ee.near,depthFar:ee.far}),se=ee.near,he=ee.far),ee.layers.mask=Ee.layers.mask|6,N.layers.mask=ee.layers.mask&3,L.layers.mask=ee.layers.mask&5;const Ae=Ee.parent,Pe=ee.cameras;oe(ee,Ae);for(let We=0;We<Pe.length;We++)oe(Pe[We],Ae);Pe.length===2?X(ee,N,L):ee.projectionMatrix.copy(N.projectionMatrix),me(Ee,ee,Ae)};function me(Ee,re,ge){ge===null?Ee.matrix.copy(re.matrixWorld):(Ee.matrix.copy(ge.matrixWorld),Ee.matrix.invert(),Ee.matrix.multiply(re.matrixWorld)),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.updateMatrixWorld(!0),Ee.projectionMatrix.copy(re.projectionMatrix),Ee.projectionMatrixInverse.copy(re.projectionMatrixInverse),Ee.isPerspectiveCamera&&(Ee.fov=Bg*2*Math.atan(1/Ee.projectionMatrix.elements[5]),Ee.zoom=1)}this.getCamera=function(){return ee},this.getFoveation=function(){if(!(m===null&&v===null))return c},this.setFoveation=function(Ee){c=Ee,m!==null&&(m.fixedFoveation=Ee),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=Ee)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(ee)},this.getCameraTexture=function(Ee){return x[Ee]};let J=null;function le(Ee,re){if(p=re.getViewerPose(f||s),_=re,p!==null){const ge=p.views;v!==null&&(e.setRenderTargetFramebuffer(A,v.framebuffer),e.setRenderTarget(A));let Ae=!1;ge.length!==ee.cameras.length&&(ee.cameras.length=0,Ae=!0);for(let te=0;te<ge.length;te++){const xe=ge[te];let De=null;if(v!==null)De=v.getViewport(xe);else{const Ce=d.getViewSubImage(m,xe);De=Ce.viewport,te===0&&(e.setRenderTargetTextures(A,Ce.colorTexture,Ce.depthStencilTexture),e.setRenderTarget(A))}let He=Y[te];He===void 0&&(He=new aa,He.layers.enable(te),He.viewport=new mn,Y[te]=He),He.matrix.fromArray(xe.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(xe.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(De.x,De.y,De.width,De.height),te===0&&(ee.matrix.copy(He.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale)),Ae===!0&&ee.cameras.push(He)}const Pe=r.enabledFeatures;if(Pe&&Pe.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&b){d=i.getBinding();const te=d.getDepthInformation(ge[0]);te&&te.isValid&&te.texture&&S.init(te,r.renderState)}if(Pe&&Pe.includes("camera-access")&&b){e.state.unbindTexture(),d=i.getBinding();for(let te=0;te<ge.length;te++){const xe=ge[te].camera;if(xe){let De=x[xe];De||(De=new v2,x[xe]=De);const He=d.getCameraImage(xe);De.sourceTexture=He}}}}for(let ge=0;ge<D.length;ge++){const Ae=O[ge],Pe=D[ge];Ae!==null&&Pe!==void 0&&Pe.update(Ae,re,f||s)}J&&J(Ee,re),re.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:re}),_=null}const Se=new C4;Se.setAnimationLoop(le),this.setAnimationLoop=function(Ee){J=Ee},this.dispose=function(){}}}const Lh=new Fn,fee=new Ft;function dee(n,e){function t(S,x){S.matrixAutoUpdate===!0&&S.updateMatrix(),x.value.copy(S.matrix)}function i(S,x){x.color.getRGB(S.fogColor.value,RB(n)),x.isFog?(S.fogNear.value=x.near,S.fogFar.value=x.far):x.isFogExp2&&(S.fogDensity.value=x.density)}function r(S,x,T,M,A){x.isMeshBasicMaterial||x.isMeshLambertMaterial?a(S,x):x.isMeshToonMaterial?(a(S,x),d(S,x)):x.isMeshPhongMaterial?(a(S,x),p(S,x)):x.isMeshStandardMaterial?(a(S,x),m(S,x),x.isMeshPhysicalMaterial&&v(S,x,A)):x.isMeshMatcapMaterial?(a(S,x),_(S,x)):x.isMeshDepthMaterial?a(S,x):x.isMeshDistanceMaterial?(a(S,x),b(S,x)):x.isMeshNormalMaterial?a(S,x):x.isLineBasicMaterial?(s(S,x),x.isLineDashedMaterial&&o(S,x)):x.isPointsMaterial?c(S,x,T,M):x.isSpriteMaterial?f(S,x):x.isShadowMaterial?(S.color.value.copy(x.color),S.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function a(S,x){S.opacity.value=x.opacity,x.color&&S.diffuse.value.copy(x.color),x.emissive&&S.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(S.map.value=x.map,t(x.map,S.mapTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.bumpMap&&(S.bumpMap.value=x.bumpMap,t(x.bumpMap,S.bumpMapTransform),S.bumpScale.value=x.bumpScale,x.side===bs&&(S.bumpScale.value*=-1)),x.normalMap&&(S.normalMap.value=x.normalMap,t(x.normalMap,S.normalMapTransform),S.normalScale.value.copy(x.normalScale),x.side===bs&&S.normalScale.value.negate()),x.displacementMap&&(S.displacementMap.value=x.displacementMap,t(x.displacementMap,S.displacementMapTransform),S.displacementScale.value=x.displacementScale,S.displacementBias.value=x.displacementBias),x.emissiveMap&&(S.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,S.emissiveMapTransform)),x.specularMap&&(S.specularMap.value=x.specularMap,t(x.specularMap,S.specularMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest);const T=e.get(x),M=T.envMap,A=T.envMapRotation;M&&(S.envMap.value=M,Lh.copy(A),Lh.x*=-1,Lh.y*=-1,Lh.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Lh.y*=-1,Lh.z*=-1),S.envMapRotation.value.setFromMatrix4(fee.makeRotationFromEuler(Lh)),S.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=x.reflectivity,S.ior.value=x.ior,S.refractionRatio.value=x.refractionRatio),x.lightMap&&(S.lightMap.value=x.lightMap,S.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,S.lightMapTransform)),x.aoMap&&(S.aoMap.value=x.aoMap,S.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,S.aoMapTransform))}function s(S,x){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,x.map&&(S.map.value=x.map,t(x.map,S.mapTransform))}function o(S,x){S.dashSize.value=x.dashSize,S.totalSize.value=x.dashSize+x.gapSize,S.scale.value=x.scale}function c(S,x,T,M){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,S.size.value=x.size*T,S.scale.value=M*.5,x.map&&(S.map.value=x.map,t(x.map,S.uvTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest)}function f(S,x){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,S.rotation.value=x.rotation,x.map&&(S.map.value=x.map,t(x.map,S.mapTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest)}function p(S,x){S.specular.value.copy(x.specular),S.shininess.value=Math.max(x.shininess,1e-4)}function d(S,x){x.gradientMap&&(S.gradientMap.value=x.gradientMap)}function m(S,x){S.metalness.value=x.metalness,x.metalnessMap&&(S.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,S.metalnessMapTransform)),S.roughness.value=x.roughness,x.roughnessMap&&(S.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,S.roughnessMapTransform)),x.envMap&&(S.envMapIntensity.value=x.envMapIntensity)}function v(S,x,T){S.ior.value=x.ior,x.sheen>0&&(S.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),S.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(S.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,S.sheenColorMapTransform)),x.sheenRoughnessMap&&(S.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,S.sheenRoughnessMapTransform))),x.clearcoat>0&&(S.clearcoat.value=x.clearcoat,S.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(S.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,S.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(S.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===bs&&S.clearcoatNormalScale.value.negate())),x.dispersion>0&&(S.dispersion.value=x.dispersion),x.iridescence>0&&(S.iridescence.value=x.iridescence,S.iridescenceIOR.value=x.iridescenceIOR,S.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(S.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,S.iridescenceMapTransform)),x.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),x.transmission>0&&(S.transmission.value=x.transmission,S.transmissionSamplerMap.value=T.texture,S.transmissionSamplerSize.value.set(T.width,T.height),x.transmissionMap&&(S.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,S.transmissionMapTransform)),S.thickness.value=x.thickness,x.thicknessMap&&(S.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=x.attenuationDistance,S.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(S.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(S.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=x.specularIntensity,S.specularColor.value.copy(x.specularColor),x.specularColorMap&&(S.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,S.specularColorMapTransform)),x.specularIntensityMap&&(S.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,S.specularIntensityMapTransform))}function _(S,x){x.matcap&&(S.matcap.value=x.matcap)}function b(S,x){const T=e.get(x).light;S.referencePosition.value.setFromMatrixPosition(T.matrixWorld),S.nearDistance.value=T.shadow.camera.near,S.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function hee(n,e,t,i){let r={},a={},s=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(T,M){const A=M.program;i.uniformBlockBinding(T,A)}function f(T,M){let A=r[T.id];A===void 0&&(_(T),A=p(T),r[T.id]=A,T.addEventListener("dispose",S));const D=M.program;i.updateUBOMapping(T,D);const O=e.render.frame;a[T.id]!==O&&(m(T),a[T.id]=O)}function p(T){const M=d();T.__bindingPointIndex=M;const A=n.createBuffer(),D=T.__size,O=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,D,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,A),A}function d(){for(let T=0;T<o;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(T){const M=r[T.id],A=T.uniforms,D=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let O=0,I=A.length;O<I;O++){const U=Array.isArray(A[O])?A[O]:[A[O]];for(let N=0,L=U.length;N<L;N++){const Y=U[N];if(v(Y,O,N,D)===!0){const ee=Y.__offset,se=Array.isArray(Y.value)?Y.value:[Y.value];let he=0;for(let de=0;de<se.length;de++){const P=se[de],B=b(P);typeof P=="number"||typeof P=="boolean"?(Y.__data[0]=P,n.bufferSubData(n.UNIFORM_BUFFER,ee+he,Y.__data)):P.isMatrix3?(Y.__data[0]=P.elements[0],Y.__data[1]=P.elements[1],Y.__data[2]=P.elements[2],Y.__data[3]=0,Y.__data[4]=P.elements[3],Y.__data[5]=P.elements[4],Y.__data[6]=P.elements[5],Y.__data[7]=0,Y.__data[8]=P.elements[6],Y.__data[9]=P.elements[7],Y.__data[10]=P.elements[8],Y.__data[11]=0):(P.toArray(Y.__data,he),he+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ee,Y.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(T,M,A,D){const O=T.value,I=M+"_"+A;if(D[I]===void 0)return typeof O=="number"||typeof O=="boolean"?D[I]=O:D[I]=O.clone(),!0;{const U=D[I];if(typeof O=="number"||typeof O=="boolean"){if(U!==O)return D[I]=O,!0}else if(U.equals(O)===!1)return U.copy(O),!0}return!1}function _(T){const M=T.uniforms;let A=0;const D=16;for(let I=0,U=M.length;I<U;I++){const N=Array.isArray(M[I])?M[I]:[M[I]];for(let L=0,Y=N.length;L<Y;L++){const ee=N[L],se=Array.isArray(ee.value)?ee.value:[ee.value];for(let he=0,de=se.length;he<de;he++){const P=se[he],B=b(P),V=A%D,ae=V%B.boundary,X=V+ae;A+=ae,X!==0&&D-X<B.storage&&(A+=D-X),ee.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=A,A+=B.storage}}}const O=A%D;return O>0&&(A+=D-O),T.__size=A,T.__cache={},this}function b(T){const M={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(M.boundary=4,M.storage=4):T.isVector2?(M.boundary=8,M.storage=8):T.isVector3||T.isColor?(M.boundary=16,M.storage=12):T.isVector4?(M.boundary=16,M.storage=16):T.isMatrix3?(M.boundary=48,M.storage=48):T.isMatrix4?(M.boundary=64,M.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),M}function S(T){const M=T.target;M.removeEventListener("dispose",S);const A=s.indexOf(M.__bindingPointIndex);s.splice(A,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete a[M.id]}function x(){for(const T in r)n.deleteBuffer(r[T]);s=[],r={},a={}}return{bind:c,update:f,dispose:x}}class I4{constructor(e={}){const{canvas:t=MB(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let v;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=i.getContextAttributes().alpha}else v=s;const _=new Uint32Array(4),b=new Int32Array(4);let S=null,x=null;const T=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Hc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const A=this;let D=!1;this._outputColorSpace=Aa;let O=0,I=0,U=null,N=-1,L=null;const Y=new mn,ee=new mn;let se=null;const he=new zt(0);let de=0,P=t.width,B=t.height,V=1,ae=null,X=null;const oe=new mn(0,0,P,B),me=new mn(0,0,P,B);let J=!1;const le=new uv;let Se=!1,Ee=!1;const re=new Ft,ge=new ve,Ae=new mn,Pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let We=!1;function it(){return U===null?V:1}let te=i;function xe(Te,Ke){return t.getContext(Te,Ke)}try{const Te={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${m_}`),t.addEventListener("webglcontextlost",je,!1),t.addEventListener("webglcontextrestored",fe,!1),t.addEventListener("webglcontextcreationerror",Xe,!1),te===null){const Ke="webgl2";if(te=xe(Ke,Te),te===null)throw xe(Ke)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Te){throw console.error("THREE.WebGLRenderer: "+Te.message),Te}let De,He,Ce,ce,pe,ie,W,K,j,$,Re,Ie,ne,H,Z,ye,Oe,Be,Ue,pt,St,_e,Ve,nt;function Le(){De=new TQ(te),De.init(),_e=new L4(te,De),He=new yQ(te,De,e,_e),Ce=new aee(te,De),He.reversedDepthBuffer&&m&&Ce.buffers.depth.setReversed(!0),ce=new CQ(te),pe=new WJ,ie=new see(te,De,Ce,pe,He,_e,ce),W=new bQ(A),K=new wQ(A),j=new Iq(te),Ve=new gQ(te,j),$=new MQ(te,j,ce,Ve),Re=new OQ(te,$,j,ce),Ue=new RQ(te,He,ie),ye=new _Q(pe),Ie=new YJ(A,W,K,De,He,Ve,ye),ne=new dee(A,pe),H=new XJ,Z=new eee(De),Be=new mQ(A,W,K,Ce,Re,v,c),Oe=new iee(A,Re,He),nt=new hee(te,ce,He,Ce),pt=new vQ(te,De,ce),St=new AQ(te,De,ce),ce.programs=Ie.programs,A.capabilities=He,A.extensions=De,A.properties=pe,A.renderLists=H,A.shadowMap=Oe,A.state=Ce,A.info=ce}Le();const Ne=new uee(A,te);this.xr=Ne,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const Te=De.get("WEBGL_lose_context");Te&&Te.loseContext()},this.forceContextRestore=function(){const Te=De.get("WEBGL_lose_context");Te&&Te.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(Te){Te!==void 0&&(V=Te,this.setSize(P,B,!1))},this.getSize=function(Te){return Te.set(P,B)},this.setSize=function(Te,Ke,at=!0){if(Ne.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=Te,B=Ke,t.width=Math.floor(Te*V),t.height=Math.floor(Ke*V),at===!0&&(t.style.width=Te+"px",t.style.height=Ke+"px"),this.setViewport(0,0,Te,Ke)},this.getDrawingBufferSize=function(Te){return Te.set(P*V,B*V).floor()},this.setDrawingBufferSize=function(Te,Ke,at){P=Te,B=Ke,V=at,t.width=Math.floor(Te*at),t.height=Math.floor(Ke*at),this.setViewport(0,0,Te,Ke)},this.getCurrentViewport=function(Te){return Te.copy(Y)},this.getViewport=function(Te){return Te.copy(oe)},this.setViewport=function(Te,Ke,at,dt){Te.isVector4?oe.set(Te.x,Te.y,Te.z,Te.w):oe.set(Te,Ke,at,dt),Ce.viewport(Y.copy(oe).multiplyScalar(V).round())},this.getScissor=function(Te){return Te.copy(me)},this.setScissor=function(Te,Ke,at,dt){Te.isVector4?me.set(Te.x,Te.y,Te.z,Te.w):me.set(Te,Ke,at,dt),Ce.scissor(ee.copy(me).multiplyScalar(V).round())},this.getScissorTest=function(){return J},this.setScissorTest=function(Te){Ce.setScissorTest(J=Te)},this.setOpaqueSort=function(Te){ae=Te},this.setTransparentSort=function(Te){X=Te},this.getClearColor=function(Te){return Te.copy(Be.getClearColor())},this.setClearColor=function(){Be.setClearColor(...arguments)},this.getClearAlpha=function(){return Be.getClearAlpha()},this.setClearAlpha=function(){Be.setClearAlpha(...arguments)},this.clear=function(Te=!0,Ke=!0,at=!0){let dt=0;if(Te){let et=!1;if(U!==null){const wt=U.texture.format;et=wt===F1||wt===k1||wt===v_}if(et){const wt=U.texture.type,Rt=wt===Wo||wt===Bu||wt===Lg||wt===Ig||wt===P1||wt===z1,Bt=Be.getClearColor(),Nt=Be.getClearAlpha(),Wt=Bt.r,Qt=Bt.g,Gt=Bt.b;Rt?(_[0]=Wt,_[1]=Qt,_[2]=Gt,_[3]=Nt,te.clearBufferuiv(te.COLOR,0,_)):(b[0]=Wt,b[1]=Qt,b[2]=Gt,b[3]=Nt,te.clearBufferiv(te.COLOR,0,b))}else dt|=te.COLOR_BUFFER_BIT}Ke&&(dt|=te.DEPTH_BUFFER_BIT),at&&(dt|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(dt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",je,!1),t.removeEventListener("webglcontextrestored",fe,!1),t.removeEventListener("webglcontextcreationerror",Xe,!1),Be.dispose(),H.dispose(),Z.dispose(),pe.dispose(),W.dispose(),K.dispose(),Re.dispose(),Ve.dispose(),nt.dispose(),Ie.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",Qe),Ne.removeEventListener("sessionend",Ot),xt.stop()};function je(Te){Te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const Te=ce.autoReset,Ke=Oe.enabled,at=Oe.autoUpdate,dt=Oe.needsUpdate,et=Oe.type;Le(),ce.autoReset=Te,Oe.enabled=Ke,Oe.autoUpdate=at,Oe.needsUpdate=dt,Oe.type=et}function Xe(Te){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Te.statusMessage)}function Ye(Te){const Ke=Te.target;Ke.removeEventListener("dispose",Ye),G(Ke)}function G(Te){Ge(Te),pe.remove(Te)}function Ge(Te){const Ke=pe.get(Te).programs;Ke!==void 0&&(Ke.forEach(function(at){Ie.releaseProgram(at)}),Te.isShaderMaterial&&Ie.releaseShaderCache(Te))}this.renderBufferDirect=function(Te,Ke,at,dt,et,wt){Ke===null&&(Ke=Pe);const Rt=et.isMesh&&et.matrixWorld.determinant()<0,Bt=ca(Te,Ke,at,dt,et);Ce.setMaterial(dt,Rt);let Nt=at.index,Wt=1;if(dt.wireframe===!0){if(Nt=$.getWireframeAttribute(at),Nt===void 0)return;Wt=2}const Qt=at.drawRange,Gt=at.attributes.position;let _n=Qt.start*Wt,Gn=(Qt.start+Qt.count)*Wt;wt!==null&&(_n=Math.max(_n,wt.start*Wt),Gn=Math.min(Gn,(wt.start+wt.count)*Wt)),Nt!==null?(_n=Math.max(_n,0),Gn=Math.min(Gn,Nt.count)):Gt!=null&&(_n=Math.max(_n,0),Gn=Math.min(Gn,Gt.count));const Ti=Gn-_n;if(Ti<0||Ti===1/0)return;Ve.setup(et,dt,Bt,at,Nt);let si,gn=pt;if(Nt!==null&&(si=j.get(Nt),gn=St,gn.setIndex(si)),et.isMesh)dt.wireframe===!0?(Ce.setLineWidth(dt.wireframeLinewidth*it()),gn.setMode(te.LINES)):gn.setMode(te.TRIANGLES);else if(et.isLine){let Zt=dt.linewidth;Zt===void 0&&(Zt=1),Ce.setLineWidth(Zt*it()),et.isLineSegments?gn.setMode(te.LINES):et.isLineLoop?gn.setMode(te.LINE_LOOP):gn.setMode(te.LINE_STRIP)}else et.isPoints?gn.setMode(te.POINTS):et.isSprite&&gn.setMode(te.TRIANGLES);if(et.isBatchedMesh)if(et._multiDrawInstances!==null)k0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),gn.renderMultiDrawInstances(et._multiDrawStarts,et._multiDrawCounts,et._multiDrawCount,et._multiDrawInstances);else if(De.get("WEBGL_multi_draw"))gn.renderMultiDraw(et._multiDrawStarts,et._multiDrawCounts,et._multiDrawCount);else{const Zt=et._multiDrawStarts,Mi=et._multiDrawCounts,Cn=et._multiDrawCount,Dr=Nt?j.get(Nt).bytesPerElement:1,ws=pe.get(dt).currentProgram.getUniforms();for(let Nr=0;Nr<Cn;Nr++)ws.setValue(te,"_gl_DrawID",Nr),gn.render(Zt[Nr]/Dr,Mi[Nr])}else if(et.isInstancedMesh)gn.renderInstances(_n,Ti,et.count);else if(at.isInstancedBufferGeometry){const Zt=at._maxInstanceCount!==void 0?at._maxInstanceCount:1/0,Mi=Math.min(at.instanceCount,Zt);gn.renderInstances(_n,Ti,Mi)}else gn.render(_n,Ti)};function $e(Te,Ke,at){Te.transparent===!0&&Te.side===jo&&Te.forceSinglePass===!1?(Te.side=bs,Te.needsUpdate=!0,jn(Te,Ke,at),Te.side=Pu,Te.needsUpdate=!0,jn(Te,Ke,at),Te.side=jo):jn(Te,Ke,at)}this.compile=function(Te,Ke,at=null){at===null&&(at=Te),x=Z.get(at),x.init(Ke),M.push(x),at.traverseVisible(function(et){et.isLight&&et.layers.test(Ke.layers)&&(x.pushLight(et),et.castShadow&&x.pushShadow(et))}),Te!==at&&Te.traverseVisible(function(et){et.isLight&&et.layers.test(Ke.layers)&&(x.pushLight(et),et.castShadow&&x.pushShadow(et))}),x.setupLights();const dt=new Set;return Te.traverse(function(et){if(!(et.isMesh||et.isPoints||et.isLine||et.isSprite))return;const wt=et.material;if(wt)if(Array.isArray(wt))for(let Rt=0;Rt<wt.length;Rt++){const Bt=wt[Rt];$e(Bt,at,et),dt.add(Bt)}else $e(wt,at,et),dt.add(wt)}),x=M.pop(),dt},this.compileAsync=function(Te,Ke,at=null){const dt=this.compile(Te,Ke,at);return new Promise(et=>{function wt(){if(dt.forEach(function(Rt){pe.get(Rt).currentProgram.isReady()&&dt.delete(Rt)}),dt.size===0){et(Te);return}setTimeout(wt,10)}De.get("KHR_parallel_shader_compile")!==null?wt():setTimeout(wt,10)})};let be=null;function ze(Te){be&&be(Te)}function Qe(){xt.stop()}function Ot(){xt.start()}const xt=new C4;xt.setAnimationLoop(ze),typeof self<"u"&&xt.setContext(self),this.setAnimationLoop=function(Te){be=Te,Ne.setAnimationLoop(Te),Te===null?xt.stop():xt.start()},Ne.addEventListener("sessionstart",Qe),Ne.addEventListener("sessionend",Ot),this.render=function(Te,Ke){if(Ke!==void 0&&Ke.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;if(Te.matrixWorldAutoUpdate===!0&&Te.updateMatrixWorld(),Ke.parent===null&&Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),Ne.enabled===!0&&Ne.isPresenting===!0&&(Ne.cameraAutoUpdate===!0&&Ne.updateCamera(Ke),Ke=Ne.getCamera()),Te.isScene===!0&&Te.onBeforeRender(A,Te,Ke,U),x=Z.get(Te,M.length),x.init(Ke),M.push(x),re.multiplyMatrices(Ke.projectionMatrix,Ke.matrixWorldInverse),le.setFromProjectionMatrix(re,po,Ke.reversedDepth),Ee=this.localClippingEnabled,Se=ye.init(this.clippingPlanes,Ee),S=H.get(Te,T.length),S.init(),T.push(S),Ne.enabled===!0&&Ne.isPresenting===!0){const wt=A.xr.getDepthSensingMesh();wt!==null&&Mt(wt,Ke,-1/0,A.sortObjects)}Mt(Te,Ke,0,A.sortObjects),S.finish(),A.sortObjects===!0&&S.sort(ae,X),We=Ne.enabled===!1||Ne.isPresenting===!1||Ne.hasDepthSensing()===!1,We&&Be.addToRenderList(S,Te),this.info.render.frame++,Se===!0&&ye.beginShadows();const at=x.state.shadowsArray;Oe.render(at,Te,Ke),Se===!0&&ye.endShadows(),this.info.autoReset===!0&&this.info.reset();const dt=S.opaque,et=S.transmissive;if(x.setupLights(),Ke.isArrayCamera){const wt=Ke.cameras;if(et.length>0)for(let Rt=0,Bt=wt.length;Rt<Bt;Rt++){const Nt=wt[Rt];Ii(dt,et,Te,Nt)}We&&Be.render(Te);for(let Rt=0,Bt=wt.length;Rt<Bt;Rt++){const Nt=wt[Rt];$t(S,Te,Nt,Nt.viewport)}}else et.length>0&&Ii(dt,et,Te,Ke),We&&Be.render(Te),$t(S,Te,Ke);U!==null&&I===0&&(ie.updateMultisampleRenderTarget(U),ie.updateRenderTargetMipmap(U)),Te.isScene===!0&&Te.onAfterRender(A,Te,Ke),Ve.resetDefaultState(),N=-1,L=null,M.pop(),M.length>0?(x=M[M.length-1],Se===!0&&ye.setGlobalState(A.clippingPlanes,x.state.camera)):x=null,T.pop(),T.length>0?S=T[T.length-1]:S=null};function Mt(Te,Ke,at,dt){if(Te.visible===!1)return;if(Te.layers.test(Ke.layers)){if(Te.isGroup)at=Te.renderOrder;else if(Te.isLOD)Te.autoUpdate===!0&&Te.update(Ke);else if(Te.isLight)x.pushLight(Te),Te.castShadow&&x.pushShadow(Te);else if(Te.isSprite){if(!Te.frustumCulled||le.intersectsSprite(Te)){dt&&Ae.setFromMatrixPosition(Te.matrixWorld).applyMatrix4(re);const Rt=Re.update(Te),Bt=Te.material;Bt.visible&&S.push(Te,Rt,Bt,at,Ae.z,null)}}else if((Te.isMesh||Te.isLine||Te.isPoints)&&(!Te.frustumCulled||le.intersectsObject(Te))){const Rt=Re.update(Te),Bt=Te.material;if(dt&&(Te.boundingSphere!==void 0?(Te.boundingSphere===null&&Te.computeBoundingSphere(),Ae.copy(Te.boundingSphere.center)):(Rt.boundingSphere===null&&Rt.computeBoundingSphere(),Ae.copy(Rt.boundingSphere.center)),Ae.applyMatrix4(Te.matrixWorld).applyMatrix4(re)),Array.isArray(Bt)){const Nt=Rt.groups;for(let Wt=0,Qt=Nt.length;Wt<Qt;Wt++){const Gt=Nt[Wt],_n=Bt[Gt.materialIndex];_n&&_n.visible&&S.push(Te,Rt,_n,at,Ae.z,Gt)}}else Bt.visible&&S.push(Te,Rt,Bt,at,Ae.z,null)}}const wt=Te.children;for(let Rt=0,Bt=wt.length;Rt<Bt;Rt++)Mt(wt[Rt],Ke,at,dt)}function $t(Te,Ke,at,dt){const et=Te.opaque,wt=Te.transmissive,Rt=Te.transparent;x.setupLightsView(at),Se===!0&&ye.setGlobalState(A.clippingPlanes,at),dt&&Ce.viewport(Y.copy(dt)),et.length>0&&In(et,Ke,at),wt.length>0&&In(wt,Ke,at),Rt.length>0&&In(Rt,Ke,at),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function Ii(Te,Ke,at,dt){if((at.isScene===!0?at.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[dt.id]===void 0&&(x.state.transmissionRenderTarget[dt.id]=new Il(1,1,{generateMipmaps:!0,type:De.has("EXT_color_buffer_half_float")||De.has("EXT_color_buffer_float")?_p:Wo,minFilter:zc,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qn.workingColorSpace}));const wt=x.state.transmissionRenderTarget[dt.id],Rt=dt.viewport||Y;wt.setSize(Rt.z*A.transmissionResolutionScale,Rt.w*A.transmissionResolutionScale);const Bt=A.getRenderTarget(),Nt=A.getActiveCubeFace(),Wt=A.getActiveMipmapLevel();A.setRenderTarget(wt),A.getClearColor(he),de=A.getClearAlpha(),de<1&&A.setClearColor(16777215,.5),A.clear(),We&&Be.render(at);const Qt=A.toneMapping;A.toneMapping=Hc;const Gt=dt.viewport;if(dt.viewport!==void 0&&(dt.viewport=void 0),x.setupLightsView(dt),Se===!0&&ye.setGlobalState(A.clippingPlanes,dt),In(Te,at,dt),ie.updateMultisampleRenderTarget(wt),ie.updateRenderTargetMipmap(wt),De.has("WEBGL_multisampled_render_to_texture")===!1){let _n=!1;for(let Gn=0,Ti=Ke.length;Gn<Ti;Gn++){const si=Ke[Gn],gn=si.object,Zt=si.geometry,Mi=si.material,Cn=si.group;if(Mi.side===jo&&gn.layers.test(dt.layers)){const Dr=Mi.side;Mi.side=bs,Mi.needsUpdate=!0,rn(gn,at,dt,Zt,Mi,Cn),Mi.side=Dr,Mi.needsUpdate=!0,_n=!0}}_n===!0&&(ie.updateMultisampleRenderTarget(wt),ie.updateRenderTargetMipmap(wt))}A.setRenderTarget(Bt,Nt,Wt),A.setClearColor(he,de),Gt!==void 0&&(dt.viewport=Gt),A.toneMapping=Qt}function In(Te,Ke,at){const dt=Ke.isScene===!0?Ke.overrideMaterial:null;for(let et=0,wt=Te.length;et<wt;et++){const Rt=Te[et],Bt=Rt.object,Nt=Rt.geometry,Wt=Rt.group;let Qt=Rt.material;Qt.allowOverride===!0&&dt!==null&&(Qt=dt),Bt.layers.test(at.layers)&&rn(Bt,Ke,at,Nt,Qt,Wt)}}function rn(Te,Ke,at,dt,et,wt){Te.onBeforeRender(A,Ke,at,dt,et,wt),Te.modelViewMatrix.multiplyMatrices(at.matrixWorldInverse,Te.matrixWorld),Te.normalMatrix.getNormalMatrix(Te.modelViewMatrix),et.onBeforeRender(A,Ke,at,dt,Te,wt),et.transparent===!0&&et.side===jo&&et.forceSinglePass===!1?(et.side=bs,et.needsUpdate=!0,A.renderBufferDirect(at,Ke,dt,et,Te,wt),et.side=Pu,et.needsUpdate=!0,A.renderBufferDirect(at,Ke,dt,et,Te,wt),et.side=jo):A.renderBufferDirect(at,Ke,dt,et,Te,wt),Te.onAfterRender(A,Ke,at,dt,et,wt)}function jn(Te,Ke,at){Ke.isScene!==!0&&(Ke=Pe);const dt=pe.get(Te),et=x.state.lights,wt=x.state.shadowsArray,Rt=et.state.version,Bt=Ie.getParameters(Te,et.state,wt,Ke,at),Nt=Ie.getProgramCacheKey(Bt);let Wt=dt.programs;dt.environment=Te.isMeshStandardMaterial?Ke.environment:null,dt.fog=Ke.fog,dt.envMap=(Te.isMeshStandardMaterial?K:W).get(Te.envMap||dt.environment),dt.envMapRotation=dt.environment!==null&&Te.envMap===null?Ke.environmentRotation:Te.envMapRotation,Wt===void 0&&(Te.addEventListener("dispose",Ye),Wt=new Map,dt.programs=Wt);let Qt=Wt.get(Nt);if(Qt!==void 0){if(dt.currentProgram===Qt&&dt.lightsStateVersion===Rt)return vi(Te,Bt),Qt}else Bt.uniforms=Ie.getUniforms(Te),Te.onBeforeCompile(Bt,A),Qt=Ie.acquireProgram(Bt,Nt),Wt.set(Nt,Qt),dt.uniforms=Bt.uniforms;const Gt=dt.uniforms;return(!Te.isShaderMaterial&&!Te.isRawShaderMaterial||Te.clipping===!0)&&(Gt.clippingPlanes=ye.uniform),vi(Te,Bt),dt.needsLights=ei(Te),dt.lightsStateVersion=Rt,dt.needsLights&&(Gt.ambientLightColor.value=et.state.ambient,Gt.lightProbe.value=et.state.probe,Gt.directionalLights.value=et.state.directional,Gt.directionalLightShadows.value=et.state.directionalShadow,Gt.spotLights.value=et.state.spot,Gt.spotLightShadows.value=et.state.spotShadow,Gt.rectAreaLights.value=et.state.rectArea,Gt.ltc_1.value=et.state.rectAreaLTC1,Gt.ltc_2.value=et.state.rectAreaLTC2,Gt.pointLights.value=et.state.point,Gt.pointLightShadows.value=et.state.pointShadow,Gt.hemisphereLights.value=et.state.hemi,Gt.directionalShadowMap.value=et.state.directionalShadowMap,Gt.directionalShadowMatrix.value=et.state.directionalShadowMatrix,Gt.spotShadowMap.value=et.state.spotShadowMap,Gt.spotLightMatrix.value=et.state.spotLightMatrix,Gt.spotLightMap.value=et.state.spotLightMap,Gt.pointShadowMap.value=et.state.pointShadowMap,Gt.pointShadowMatrix.value=et.state.pointShadowMatrix),dt.currentProgram=Qt,dt.uniformsList=null,Qt}function dn(Te){if(Te.uniformsList===null){const Ke=Te.currentProgram.getUniforms();Te.uniformsList=zS.seqWithValue(Ke.seq,Te.uniforms)}return Te.uniformsList}function vi(Te,Ke){const at=pe.get(Te);at.outputColorSpace=Ke.outputColorSpace,at.batching=Ke.batching,at.batchingColor=Ke.batchingColor,at.instancing=Ke.instancing,at.instancingColor=Ke.instancingColor,at.instancingMorph=Ke.instancingMorph,at.skinning=Ke.skinning,at.morphTargets=Ke.morphTargets,at.morphNormals=Ke.morphNormals,at.morphColors=Ke.morphColors,at.morphTargetsCount=Ke.morphTargetsCount,at.numClippingPlanes=Ke.numClippingPlanes,at.numIntersection=Ke.numClipIntersection,at.vertexAlphas=Ke.vertexAlphas,at.vertexTangents=Ke.vertexTangents,at.toneMapping=Ke.toneMapping}function ca(Te,Ke,at,dt,et){Ke.isScene!==!0&&(Ke=Pe),ie.resetTextureUnits();const wt=Ke.fog,Rt=dt.isMeshStandardMaterial?Ke.environment:null,Bt=U===null?A.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:gd,Nt=(dt.isMeshStandardMaterial?K:W).get(dt.envMap||Rt),Wt=dt.vertexColors===!0&&!!at.attributes.color&&at.attributes.color.itemSize===4,Qt=!!at.attributes.tangent&&(!!dt.normalMap||dt.anisotropy>0),Gt=!!at.morphAttributes.position,_n=!!at.morphAttributes.normal,Gn=!!at.morphAttributes.color;let Ti=Hc;dt.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(Ti=A.toneMapping);const si=at.morphAttributes.position||at.morphAttributes.normal||at.morphAttributes.color,gn=si!==void 0?si.length:0,Zt=pe.get(dt),Mi=x.state.lights;if(Se===!0&&(Ee===!0||Te!==L)){const Ui=Te===L&&dt.id===N;ye.setState(dt,Te,Ui)}let Cn=!1;dt.version===Zt.__version?(Zt.needsLights&&Zt.lightsStateVersion!==Mi.state.version||Zt.outputColorSpace!==Bt||et.isBatchedMesh&&Zt.batching===!1||!et.isBatchedMesh&&Zt.batching===!0||et.isBatchedMesh&&Zt.batchingColor===!0&&et.colorTexture===null||et.isBatchedMesh&&Zt.batchingColor===!1&&et.colorTexture!==null||et.isInstancedMesh&&Zt.instancing===!1||!et.isInstancedMesh&&Zt.instancing===!0||et.isSkinnedMesh&&Zt.skinning===!1||!et.isSkinnedMesh&&Zt.skinning===!0||et.isInstancedMesh&&Zt.instancingColor===!0&&et.instanceColor===null||et.isInstancedMesh&&Zt.instancingColor===!1&&et.instanceColor!==null||et.isInstancedMesh&&Zt.instancingMorph===!0&&et.morphTexture===null||et.isInstancedMesh&&Zt.instancingMorph===!1&&et.morphTexture!==null||Zt.envMap!==Nt||dt.fog===!0&&Zt.fog!==wt||Zt.numClippingPlanes!==void 0&&(Zt.numClippingPlanes!==ye.numPlanes||Zt.numIntersection!==ye.numIntersection)||Zt.vertexAlphas!==Wt||Zt.vertexTangents!==Qt||Zt.morphTargets!==Gt||Zt.morphNormals!==_n||Zt.morphColors!==Gn||Zt.toneMapping!==Ti||Zt.morphTargetsCount!==gn)&&(Cn=!0):(Cn=!0,Zt.__version=dt.version);let Dr=Zt.currentProgram;Cn===!0&&(Dr=jn(dt,Ke,et));let ws=!1,Nr=!1,mr=!1;const ci=Dr.getUniforms(),$r=Zt.uniforms;if(Ce.useProgram(Dr.program)&&(ws=!0,Nr=!0,mr=!0),dt.id!==N&&(N=dt.id,Nr=!0),ws||L!==Te){Ce.buffers.depth.getReversed()&&Te.reversedDepth!==!0&&(Te._reversedDepth=!0,Te.updateProjectionMatrix()),ci.setValue(te,"projectionMatrix",Te.projectionMatrix),ci.setValue(te,"viewMatrix",Te.matrixWorldInverse);const Ir=ci.map.cameraPosition;Ir!==void 0&&Ir.setValue(te,ge.setFromMatrixPosition(Te.matrixWorld)),He.logarithmicDepthBuffer&&ci.setValue(te,"logDepthBufFC",2/(Math.log(Te.far+1)/Math.LN2)),(dt.isMeshPhongMaterial||dt.isMeshToonMaterial||dt.isMeshLambertMaterial||dt.isMeshBasicMaterial||dt.isMeshStandardMaterial||dt.isShaderMaterial)&&ci.setValue(te,"isOrthographic",Te.isOrthographicCamera===!0),L!==Te&&(L=Te,Nr=!0,mr=!0)}if(et.isSkinnedMesh){ci.setOptional(te,et,"bindMatrix"),ci.setOptional(te,et,"bindMatrixInverse");const Ui=et.skeleton;Ui&&(Ui.boneTexture===null&&Ui.computeBoneTexture(),ci.setValue(te,"boneTexture",Ui.boneTexture,ie))}et.isBatchedMesh&&(ci.setOptional(te,et,"batchingTexture"),ci.setValue(te,"batchingTexture",et._matricesTexture,ie),ci.setOptional(te,et,"batchingIdTexture"),ci.setValue(te,"batchingIdTexture",et._indirectTexture,ie),ci.setOptional(te,et,"batchingColorTexture"),et._colorsTexture!==null&&ci.setValue(te,"batchingColorTexture",et._colorsTexture,ie));const Lr=at.morphAttributes;if((Lr.position!==void 0||Lr.normal!==void 0||Lr.color!==void 0)&&Ue.update(et,at,Dr),(Nr||Zt.receiveShadow!==et.receiveShadow)&&(Zt.receiveShadow=et.receiveShadow,ci.setValue(te,"receiveShadow",et.receiveShadow)),dt.isMeshGouraudMaterial&&dt.envMap!==null&&($r.envMap.value=Nt,$r.flipEnvMap.value=Nt.isCubeTexture&&Nt.isRenderTargetTexture===!1?-1:1),dt.isMeshStandardMaterial&&dt.envMap===null&&Ke.environment!==null&&($r.envMapIntensity.value=Ke.environmentIntensity),Nr&&(ci.setValue(te,"toneMappingExposure",A.toneMappingExposure),Zt.needsLights&&qa($r,mr),wt&&dt.fog===!0&&ne.refreshFogUniforms($r,wt),ne.refreshMaterialUniforms($r,dt,V,B,x.state.transmissionRenderTarget[Te.id]),zS.upload(te,dn(Zt),$r,ie)),dt.isShaderMaterial&&dt.uniformsNeedUpdate===!0&&(zS.upload(te,dn(Zt),$r,ie),dt.uniformsNeedUpdate=!1),dt.isSpriteMaterial&&ci.setValue(te,"center",et.center),ci.setValue(te,"modelViewMatrix",et.modelViewMatrix),ci.setValue(te,"normalMatrix",et.normalMatrix),ci.setValue(te,"modelMatrix",et.matrixWorld),dt.isShaderMaterial||dt.isRawShaderMaterial){const Ui=dt.uniformsGroups;for(let Ir=0,Kc=Ui.length;Ir<Kc;Ir++){const gr=Ui[Ir];nt.update(gr,Dr),nt.bind(gr,Dr)}}return Dr}function qa(Te,Ke){Te.ambientLightColor.needsUpdate=Ke,Te.lightProbe.needsUpdate=Ke,Te.directionalLights.needsUpdate=Ke,Te.directionalLightShadows.needsUpdate=Ke,Te.pointLights.needsUpdate=Ke,Te.pointLightShadows.needsUpdate=Ke,Te.spotLights.needsUpdate=Ke,Te.spotLightShadows.needsUpdate=Ke,Te.rectAreaLights.needsUpdate=Ke,Te.hemisphereLights.needsUpdate=Ke}function ei(Te){return Te.isMeshLambertMaterial||Te.isMeshToonMaterial||Te.isMeshPhongMaterial||Te.isMeshStandardMaterial||Te.isShadowMaterial||Te.isShaderMaterial&&Te.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(Te,Ke,at){const dt=pe.get(Te);dt.__autoAllocateDepthBuffer=Te.resolveDepthBuffer===!1,dt.__autoAllocateDepthBuffer===!1&&(dt.__useRenderToTexture=!1),pe.get(Te.texture).__webglTexture=Ke,pe.get(Te.depthTexture).__webglTexture=dt.__autoAllocateDepthBuffer?void 0:at,dt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Te,Ke){const at=pe.get(Te);at.__webglFramebuffer=Ke,at.__useDefaultFramebuffer=Ke===void 0};const Vn=te.createFramebuffer();this.setRenderTarget=function(Te,Ke=0,at=0){U=Te,O=Ke,I=at;let dt=!0,et=null,wt=!1,Rt=!1;if(Te){const Nt=pe.get(Te);if(Nt.__useDefaultFramebuffer!==void 0)Ce.bindFramebuffer(te.FRAMEBUFFER,null),dt=!1;else if(Nt.__webglFramebuffer===void 0)ie.setupRenderTarget(Te);else if(Nt.__hasExternalTextures)ie.rebindTextures(Te,pe.get(Te.texture).__webglTexture,pe.get(Te.depthTexture).__webglTexture);else if(Te.depthBuffer){const Gt=Te.depthTexture;if(Nt.__boundDepthTexture!==Gt){if(Gt!==null&&pe.has(Gt)&&(Te.width!==Gt.image.width||Te.height!==Gt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ie.setupDepthRenderbuffer(Te)}}const Wt=Te.texture;(Wt.isData3DTexture||Wt.isDataArrayTexture||Wt.isCompressedArrayTexture)&&(Rt=!0);const Qt=pe.get(Te).__webglFramebuffer;Te.isWebGLCubeRenderTarget?(Array.isArray(Qt[Ke])?et=Qt[Ke][at]:et=Qt[Ke],wt=!0):Te.samples>0&&ie.useMultisampledRTT(Te)===!1?et=pe.get(Te).__webglMultisampledFramebuffer:Array.isArray(Qt)?et=Qt[at]:et=Qt,Y.copy(Te.viewport),ee.copy(Te.scissor),se=Te.scissorTest}else Y.copy(oe).multiplyScalar(V).floor(),ee.copy(me).multiplyScalar(V).floor(),se=J;if(at!==0&&(et=Vn),Ce.bindFramebuffer(te.FRAMEBUFFER,et)&&dt&&Ce.drawBuffers(Te,et),Ce.viewport(Y),Ce.scissor(ee),Ce.setScissorTest(se),wt){const Nt=pe.get(Te.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,Nt.__webglTexture,at)}else if(Rt){const Nt=Ke;for(let Wt=0;Wt<Te.textures.length;Wt++){const Qt=pe.get(Te.textures[Wt]);te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0+Wt,Qt.__webglTexture,at,Nt)}}else if(Te!==null&&at!==0){const Nt=pe.get(Te.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Nt.__webglTexture,at)}N=-1},this.readRenderTargetPixels=function(Te,Ke,at,dt,et,wt,Rt,Bt=0){if(!(Te&&Te.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Nt=pe.get(Te).__webglFramebuffer;if(Te.isWebGLCubeRenderTarget&&Rt!==void 0&&(Nt=Nt[Rt]),Nt){Ce.bindFramebuffer(te.FRAMEBUFFER,Nt);try{const Wt=Te.textures[Bt],Qt=Wt.format,Gt=Wt.type;if(!He.textureFormatReadable(Qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!He.textureTypeReadable(Gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ke>=0&&Ke<=Te.width-dt&&at>=0&&at<=Te.height-et&&(Te.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+Bt),te.readPixels(Ke,at,dt,et,_e.convert(Qt),_e.convert(Gt),wt))}finally{const Wt=U!==null?pe.get(U).__webglFramebuffer:null;Ce.bindFramebuffer(te.FRAMEBUFFER,Wt)}}},this.readRenderTargetPixelsAsync=async function(Te,Ke,at,dt,et,wt,Rt,Bt=0){if(!(Te&&Te.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Nt=pe.get(Te).__webglFramebuffer;if(Te.isWebGLCubeRenderTarget&&Rt!==void 0&&(Nt=Nt[Rt]),Nt)if(Ke>=0&&Ke<=Te.width-dt&&at>=0&&at<=Te.height-et){Ce.bindFramebuffer(te.FRAMEBUFFER,Nt);const Wt=Te.textures[Bt],Qt=Wt.format,Gt=Wt.type;if(!He.textureFormatReadable(Qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!He.textureTypeReadable(Gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const _n=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,_n),te.bufferData(te.PIXEL_PACK_BUFFER,wt.byteLength,te.STREAM_READ),Te.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+Bt),te.readPixels(Ke,at,dt,et,_e.convert(Qt),_e.convert(Gt),0);const Gn=U!==null?pe.get(U).__webglFramebuffer:null;Ce.bindFramebuffer(te.FRAMEBUFFER,Gn);const Ti=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await nZ(te,Ti,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,_n),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,wt),te.deleteBuffer(_n),te.deleteSync(Ti),wt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Te,Ke=null,at=0){const dt=Math.pow(2,-at),et=Math.floor(Te.image.width*dt),wt=Math.floor(Te.image.height*dt),Rt=Ke!==null?Ke.x:0,Bt=Ke!==null?Ke.y:0;ie.setTexture2D(Te,0),te.copyTexSubImage2D(te.TEXTURE_2D,at,0,0,Rt,Bt,et,wt),Ce.unbindTexture()};const Di=te.createFramebuffer(),Kr=te.createFramebuffer();this.copyTextureToTexture=function(Te,Ke,at=null,dt=null,et=0,wt=null){wt===null&&(et!==0?(k0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),wt=et,et=0):wt=0);let Rt,Bt,Nt,Wt,Qt,Gt,_n,Gn,Ti;const si=Te.isCompressedTexture?Te.mipmaps[wt]:Te.image;if(at!==null)Rt=at.max.x-at.min.x,Bt=at.max.y-at.min.y,Nt=at.isBox3?at.max.z-at.min.z:1,Wt=at.min.x,Qt=at.min.y,Gt=at.isBox3?at.min.z:0;else{const Lr=Math.pow(2,-et);Rt=Math.floor(si.width*Lr),Bt=Math.floor(si.height*Lr),Te.isDataArrayTexture?Nt=si.depth:Te.isData3DTexture?Nt=Math.floor(si.depth*Lr):Nt=1,Wt=0,Qt=0,Gt=0}dt!==null?(_n=dt.x,Gn=dt.y,Ti=dt.z):(_n=0,Gn=0,Ti=0);const gn=_e.convert(Ke.format),Zt=_e.convert(Ke.type);let Mi;Ke.isData3DTexture?(ie.setTexture3D(Ke,0),Mi=te.TEXTURE_3D):Ke.isDataArrayTexture||Ke.isCompressedArrayTexture?(ie.setTexture2DArray(Ke,0),Mi=te.TEXTURE_2D_ARRAY):(ie.setTexture2D(Ke,0),Mi=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,Ke.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ke.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,Ke.unpackAlignment);const Cn=te.getParameter(te.UNPACK_ROW_LENGTH),Dr=te.getParameter(te.UNPACK_IMAGE_HEIGHT),ws=te.getParameter(te.UNPACK_SKIP_PIXELS),Nr=te.getParameter(te.UNPACK_SKIP_ROWS),mr=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,si.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,si.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Wt),te.pixelStorei(te.UNPACK_SKIP_ROWS,Qt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Gt);const ci=Te.isDataArrayTexture||Te.isData3DTexture,$r=Ke.isDataArrayTexture||Ke.isData3DTexture;if(Te.isDepthTexture){const Lr=pe.get(Te),Ui=pe.get(Ke),Ir=pe.get(Lr.__renderTarget),Kc=pe.get(Ui.__renderTarget);Ce.bindFramebuffer(te.READ_FRAMEBUFFER,Ir.__webglFramebuffer),Ce.bindFramebuffer(te.DRAW_FRAMEBUFFER,Kc.__webglFramebuffer);for(let gr=0;gr<Nt;gr++)ci&&(te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,pe.get(Te).__webglTexture,et,Gt+gr),te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,pe.get(Ke).__webglTexture,wt,Ti+gr)),te.blitFramebuffer(Wt,Qt,Rt,Bt,_n,Gn,Rt,Bt,te.DEPTH_BUFFER_BIT,te.NEAREST);Ce.bindFramebuffer(te.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else if(et!==0||Te.isRenderTargetTexture||pe.has(Te)){const Lr=pe.get(Te),Ui=pe.get(Ke);Ce.bindFramebuffer(te.READ_FRAMEBUFFER,Di),Ce.bindFramebuffer(te.DRAW_FRAMEBUFFER,Kr);for(let Ir=0;Ir<Nt;Ir++)ci?te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Lr.__webglTexture,et,Gt+Ir):te.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Lr.__webglTexture,et),$r?te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ui.__webglTexture,wt,Ti+Ir):te.framebufferTexture2D(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Ui.__webglTexture,wt),et!==0?te.blitFramebuffer(Wt,Qt,Rt,Bt,_n,Gn,Rt,Bt,te.COLOR_BUFFER_BIT,te.NEAREST):$r?te.copyTexSubImage3D(Mi,wt,_n,Gn,Ti+Ir,Wt,Qt,Rt,Bt):te.copyTexSubImage2D(Mi,wt,_n,Gn,Wt,Qt,Rt,Bt);Ce.bindFramebuffer(te.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else $r?Te.isDataTexture||Te.isData3DTexture?te.texSubImage3D(Mi,wt,_n,Gn,Ti,Rt,Bt,Nt,gn,Zt,si.data):Ke.isCompressedArrayTexture?te.compressedTexSubImage3D(Mi,wt,_n,Gn,Ti,Rt,Bt,Nt,gn,si.data):te.texSubImage3D(Mi,wt,_n,Gn,Ti,Rt,Bt,Nt,gn,Zt,si):Te.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,wt,_n,Gn,Rt,Bt,gn,Zt,si.data):Te.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,wt,_n,Gn,si.width,si.height,gn,si.data):te.texSubImage2D(te.TEXTURE_2D,wt,_n,Gn,Rt,Bt,gn,Zt,si);te.pixelStorei(te.UNPACK_ROW_LENGTH,Cn),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Dr),te.pixelStorei(te.UNPACK_SKIP_PIXELS,ws),te.pixelStorei(te.UNPACK_SKIP_ROWS,Nr),te.pixelStorei(te.UNPACK_SKIP_IMAGES,mr),wt===0&&Ke.generateMipmaps&&te.generateMipmap(Mi),Ce.unbindTexture()},this.initRenderTarget=function(Te){pe.get(Te).__webglFramebuffer===void 0&&ie.setupRenderTarget(Te)},this.initTexture=function(Te){Te.isCubeTexture?ie.setTextureCube(Te,0):Te.isData3DTexture?ie.setTexture3D(Te,0):Te.isDataArrayTexture||Te.isCompressedArrayTexture?ie.setTexture2DArray(Te,0):ie.setTexture2D(Te,0),Ce.unbindTexture()},this.resetState=function(){O=0,I=0,U=null,Ce.reset(),Ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return po}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=qn._getDrawingBufferColorSpace(e),t.unpackColorSpace=qn._getUnpackColorSpace()}}const pee=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:JR,AddEquation:ed,AddOperation:rB,AdditiveAnimationBlendMode:l2,AdditiveBlending:mC,AgXToneMapping:cB,AlphaFormat:a2,AlwaysCompare:wB,AlwaysDepth:sE,AlwaysStencilFunc:_C,AmbientLight:v4,AnimationAction:T4,AnimationClip:Y0,AnimationLoader:CX,AnimationMixer:iq,AnimationObjectGroup:tq,AnimationUtils:wX,ArcCurve:VB,ArrayCamera:S4,ArrowHelper:Tq,AttachedBindMode:yC,Audio:E4,AudioAnalyser:YX,AudioContext:D2,AudioListener:jX,AudioLoader:kX,AxesHelper:Mq,BackSide:bs,BasicDepthPacking:mB,BasicShadowMap:Bz,BatchedMesh:zB,Bone:m2,BooleanKeyframeTrack:Sp,Box2:fq,Box3:Hi,Box3Helper:Eq,BoxGeometry:bp,BoxHelper:Sq,BufferAttribute:wi,BufferGeometry:wn,BufferGeometryLoader:x4,ByteType:t2,Cache:Bc,Camera:Y1,CameraHelper:xq,CanvasTexture:HB,CapsuleGeometry:ew,CatmullRomCurve3:GB,CineonToneMapping:oB,CircleGeometry:xp,ClampToEdgeWrapping:Vo,Clock:N2,Color:zt,ColorKeyframeTrack:C2,ColorManagement:qn,CompressedArrayTexture:WZ,CompressedCubeTexture:ZZ,CompressedTexture:Q1,CompressedTextureLoader:RX,ConeGeometry:b_,ConstantAlphaFactor:tB,ConstantColorFactor:Jz,Controls:Cq,CubeCamera:OB,CubeReflectionMapping:zu,CubeRefractionMapping:md,CubeTexture:y_,CubeTextureLoader:OX,CubeUVReflectionMapping:lv,CubicBezierCurve:_2,CubicBezierCurve3:YB,CubicInterpolant:c4,CullFaceBack:pC,CullFaceFront:zz,CullFaceFrontBack:nW,CullFaceNone:Pz,Curve:zl,CurvePath:ZB,CustomBlending:kz,CustomToneMapping:lB,CylinderGeometry:__,Cylindrical:uq,Data3DTexture:G1,DataArrayTexture:V1,DataTexture:Yo,DataTextureLoader:DX,DataUtils:vZ,DecrementStencilOp:gW,DecrementWrapStencilOp:yW,DefaultLoadingManager:d4,DepthFormat:Ug,DepthStencilFormat:Pg,DepthTexture:J1,DetachedBindMode:fB,DirectionalLight:g4,DirectionalLightHelper:bq,DiscreteInterpolant:u4,DodecahedronGeometry:tw,DoubleSide:jo,DstAlphaFactor:Xz,DstColorFactor:Kz,DynamicCopyUsage:LW,DynamicDrawUsage:AW,DynamicReadUsage:OW,EdgesGeometry:jB,EllipseCurve:nw,EqualCompare:bB,EqualDepth:lE,EqualStencilFunc:SW,EquirectangularReflectionMapping:O0,EquirectangularRefractionMapping:D0,Euler:Fn,EventDispatcher:Zc,ExternalTexture:v2,ExtrudeGeometry:rw,FileLoader:ku,Float16BufferAttribute:wZ,Float32BufferAttribute:kt,FloatType:ys,Fog:Z1,FogExp2:W1,FramebufferTexture:YZ,FrontSide:Pu,Frustum:uv,FrustumArray:$1,GLBufferAttribute:oq,GLSL1:UW,GLSL3:bC,GreaterCompare:xB,GreaterDepth:uE,GreaterEqualCompare:EB,GreaterEqualDepth:cE,GreaterEqualStencilFunc:MW,GreaterStencilFunc:wW,GridHelper:B2,Group:_s,HalfFloatType:_p,HemisphereLight:h4,HemisphereLightHelper:yq,IcosahedronGeometry:aw,ImageBitmapLoader:BX,ImageLoader:W0,ImageUtils:AB,IncrementStencilOp:mW,IncrementWrapStencilOp:vW,InstancedBufferAttribute:jg,InstancedBufferGeometry:mw,InstancedInterleavedBuffer:op,InstancedMesh:PB,Int16BufferAttribute:SZ,Int32BufferAttribute:EZ,Int8BufferAttribute:_Z,IntType:U1,InterleavedBuffer:q1,InterleavedBufferAttribute:Wr,Interpolant:E_,InterpolateDiscrete:I0,InterpolateLinear:FE,InterpolateSmooth:US,InterpolationSamplingMode:BW,InterpolationSamplingType:zW,InvertStencilOp:_W,KeepStencilOp:Bh,KeyframeTrack:Zo,LOD:IB,LatheGeometry:sw,Layers:kg,LessCompare:_B,LessDepth:oE,LessEqualCompare:c2,LessEqualDepth:ap,LessEqualStencilFunc:EW,LessStencilFunc:xW,Light:Ed,LightProbe:b4,Line:vd,Line3:z2,LineBasicMaterial:Ss,LineCurve:b2,LineCurve3:WB,LineDashedMaterial:s4,LineLoop:BB,LineSegments:Xc,LinearFilter:Er,LinearInterpolant:A2,LinearMipMapLinearFilter:sW,LinearMipMapNearestFilter:aW,LinearMipmapLinearFilter:zc,LinearMipmapNearestFilter:d0,LinearSRGBColorSpace:gd,LinearToneMapping:aB,LinearTransfer:P0,Loader:Zs,LoaderUtils:TC,LoadingManager:R2,LoopOnce:dB,LoopPingPong:pB,LoopRepeat:hB,MOUSE:eW,Material:Xa,MaterialLoader:pw,MathUtils:j1,Matrix2:P2,Matrix3:xn,Matrix4:Ft,MaxEquation:Vz,Mesh:Ei,MeshBasicMaterial:oa,MeshDepthMaterial:w2,MeshDistanceMaterial:T2,MeshLambertMaterial:r4,MeshMatcapMaterial:a4,MeshNormalMaterial:i4,MeshPhongMaterial:t4,MeshPhysicalMaterial:e4,MeshStandardMaterial:E2,MeshToonMaterial:n4,MinEquation:jz,MirroredRepeatWrapping:L0,MixOperation:iB,MultiplyBlending:vC,MultiplyOperation:g_,NearestFilter:Oa,NearestMipMapLinearFilter:rW,NearestMipMapNearestFilter:iW,NearestMipmapLinearFilter:yg,NearestMipmapNearestFilter:e2,NeutralToneMapping:uB,NeverCompare:yB,NeverDepth:aE,NeverStencilFunc:bW,NoBlending:Nu,NoColorSpace:Ru,NoToneMapping:Hc,NormalAnimationBlendMode:H1,NormalBlending:qh,NotEqualCompare:SB,NotEqualDepth:fE,NotEqualStencilFunc:TW,NumberKeyframeTrack:V0,Object3D:Kn,ObjectLoader:PX,ObjectSpaceNormalMap:vB,OctahedronGeometry:x_,OneFactor:Yz,OneMinusConstantAlphaFactor:nB,OneMinusConstantColorFactor:eB,OneMinusDstAlphaFactor:qz,OneMinusDstColorFactor:$z,OneMinusSrcAlphaFactor:rE,OneMinusSrcColorFactor:Zz,OrthographicCamera:T_,PCFShadowMap:L1,PCFSoftShadowMap:f0,PMREMGenerator:CC,Path:GE,PerspectiveCamera:aa,Plane:Jf,PlaneGeometry:Ws,PlaneHelper:wq,PointLight:m4,PointLightHelper:gq,Points:kB,PointsMaterial:g2,PolarGridHelper:_q,PolyhedronGeometry:Sd,PositionalAudio:GX,PropertyBinding:Jn,PropertyMixer:w4,QuadraticBezierCurve:x2,QuadraticBezierCurve3:iw,Quaternion:Or,QuaternionKeyframeTrack:w_,QuaternionLinearInterpolant:f4,RED_GREEN_RGTC2_Format:BE,RED_RGTC1_Format:PE,REVISION:m_,RGBADepthPacking:gB,RGBAFormat:Wa,RGBAIntegerFormat:F1,RGBA_ASTC_10x10_Format:OE,RGBA_ASTC_10x5_Format:AE,RGBA_ASTC_10x6_Format:CE,RGBA_ASTC_10x8_Format:RE,RGBA_ASTC_12x10_Format:DE,RGBA_ASTC_12x12_Format:NE,RGBA_ASTC_4x4_Format:_E,RGBA_ASTC_5x4_Format:bE,RGBA_ASTC_5x5_Format:xE,RGBA_ASTC_6x5_Format:SE,RGBA_ASTC_6x6_Format:EE,RGBA_ASTC_8x5_Format:wE,RGBA_ASTC_8x6_Format:TE,RGBA_ASTC_8x8_Format:ME,RGBA_BPTC_Format:LE,RGBA_ETC2_EAC_Format:yE,RGBA_PVRTC_2BPPV1_Format:mE,RGBA_PVRTC_4BPPV1_Format:pE,RGBA_S3TC_DXT1_Format:p0,RGBA_S3TC_DXT3_Format:m0,RGBA_S3TC_DXT5_Format:g0,RGBDepthPacking:fW,RGBFormat:s2,RGBIntegerFormat:oW,RGB_BPTC_SIGNED_Format:IE,RGB_BPTC_UNSIGNED_Format:UE,RGB_ETC1_Format:gE,RGB_ETC2_Format:vE,RGB_PVRTC_2BPPV1_Format:hE,RGB_PVRTC_4BPPV1_Format:dE,RGB_S3TC_DXT1_Format:h0,RGDepthPacking:dW,RGFormat:o2,RGIntegerFormat:k1,RawShaderMaterial:JB,Ray:cv,Raycaster:M_,RectAreaLight:y4,RedFormat:B1,RedIntegerFormat:v_,ReinhardToneMapping:sB,RenderTarget:f2,RenderTarget3D:rq,RepeatWrapping:N0,ReplaceStencilOp:pW,ReverseSubtractEquation:Hz,RingGeometry:ow,SIGNED_RED_GREEN_RGTC2_Format:kE,SIGNED_RED_RGTC1_Format:zE,SRGBColorSpace:Aa,SRGBTransfer:gi,Scene:X1,ShaderChunk:An,ShaderLib:ms,ShaderMaterial:yo,ShadowMaterial:QB,Shape:$h,ShapeGeometry:lw,ShapePath:Aq,ShapeUtils:Ol,ShortType:n2,Skeleton:K1,SkeletonHelper:mq,SkinnedMesh:UB,Source:ad,Sphere:hr,SphereGeometry:S_,Spherical:M4,SphericalHarmonics3:_4,SplineCurve:S2,SpotLight:p4,SpotLightHelper:pq,Sprite:LB,SpriteMaterial:p2,SrcAlphaFactor:iE,SrcAlphaSaturateFactor:Qz,SrcColorFactor:Wz,StaticCopyUsage:NW,StaticDrawUsage:z0,StaticReadUsage:RW,StereoCamera:FX,StreamCopyUsage:IW,StreamDrawUsage:CW,StreamReadUsage:DW,StringKeyframeTrack:Ep,SubtractEquation:Fz,SubtractiveBlending:gC,TOUCH:tW,TangentSpaceNormalMap:xd,TetrahedronGeometry:cw,Texture:dr,TextureLoader:NX,TextureUtils:Lq,Timer:lq,TimestampQuery:PW,TorusGeometry:uw,TorusKnotGeometry:fw,Triangle:Ys,TriangleFanDrawMode:uW,TriangleStripDrawMode:cW,TrianglesDrawMode:lW,TubeGeometry:dw,UVMapping:I1,Uint16BufferAttribute:d2,Uint32BufferAttribute:h2,Uint8BufferAttribute:bZ,Uint8ClampedBufferAttribute:xZ,Uniform:U2,UniformsGroup:sq,UniformsLib:Dt,UniformsUtils:Hg,UnsignedByteType:Wo,UnsignedInt101111Type:r2,UnsignedInt248Type:Ig,UnsignedInt5999Type:i2,UnsignedIntType:Bu,UnsignedShort4444Type:P1,UnsignedShort5551Type:z1,UnsignedShortType:Lg,VSMShadowMap:Cl,Vector2:_t,Vector3:ve,Vector4:mn,VectorKeyframeTrack:G0,VideoFrameTexture:GZ,VideoTexture:FB,WebGL3DRenderTarget:oZ,WebGLArrayRenderTarget:sZ,WebGLCoordinateSystem:po,WebGLCubeRenderTarget:DB,WebGLRenderTarget:Il,WebGLRenderer:I4,WebGLUtils:L4,WebGPUCoordinateSystem:zg,WebXRController:PS,WireframeGeometry:hw,WrapAroundEnding:U0,ZeroCurvatureEnding:Yh,ZeroFactor:Gz,ZeroSlopeEnding:Wh,ZeroStencilOp:hW,createCanvasElement:MB},Symbol.toStringTag,{value:"Module"})),Ea=[];for(let n=0;n<256;++n)Ea.push((n+256).toString(16).slice(1));function mee(n,e=0){return(Ea[n[e+0]]+Ea[n[e+1]]+Ea[n[e+2]]+Ea[n[e+3]]+"-"+Ea[n[e+4]]+Ea[n[e+5]]+"-"+Ea[n[e+6]]+Ea[n[e+7]]+"-"+Ea[n[e+8]]+Ea[n[e+9]]+"-"+Ea[n[e+10]]+Ea[n[e+11]]+Ea[n[e+12]]+Ea[n[e+13]]+Ea[n[e+14]]+Ea[n[e+15]]).toLowerCase()}let YM;const gee=new Uint8Array(16);function vee(){if(!YM){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");YM=crypto.getRandomValues.bind(crypto)}return YM(gee)}const yee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gI={randomUUID:yee};function _ee(n,e,t){n=n||{};const i=n.random??n.rng?.()??vee();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,mee(i)}function gs(n,e,t){return gI.randomUUID&&!n?gI.randomUUID():_ee(n)}const U4=Math.PI/180,P4=.5*Math.PI,vI=.25*Math.PI,Gg=Math.PI,z4=180/Math.PI,BS=2*Math.PI;function B4(n,e,t){const i=n.dot(e),r=new ve().crossVectors(n,e);return Math.atan2(r.length()*Math.sign(r.dot(t)),i)}function bee(n,e){return new ve().addVectors(n,e).multiplyScalar(.5)}function WM(n){return n*z4}function b0(n,e){return(n%e+e)%e}function jh(n){return n*U4}function Gr(n,e){return Number.parseFloat(n.toFixed(e))}let ko=class kS extends ve{constructor(e,t,i){super(e,t,i),this.normalize()}projectVector(e){return e.projectOnVector(this)}static xHat(){return new kS(1,0,0)}static yHat(){return new kS(0,1,0)}static zHat(){return new kS(0,0,1)}};const k4="3.7.8",xee=k4,dv=typeof Buffer=="function",yI=typeof TextDecoder=="function"?new TextDecoder:void 0,_I=typeof TextEncoder=="function"?new TextEncoder:void 0,See="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a0=Array.prototype.slice.call(See),uS=(n=>{let e={};return n.forEach((t,i)=>e[t]=i),e})(a0),Eee=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ma=String.fromCharCode.bind(String),bI=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):n=>new Uint8Array(Array.prototype.slice.call(n,0)),F4=n=>n.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),H4=n=>n.replace(/[^A-Za-z0-9\+\/]/g,""),j4=n=>{let e,t,i,r,a="";const s=n.length%3;for(let o=0;o<n.length;){if((t=n.charCodeAt(o++))>255||(i=n.charCodeAt(o++))>255||(r=n.charCodeAt(o++))>255)throw new TypeError("invalid character found");e=t<<16|i<<8|r,a+=a0[e>>18&63]+a0[e>>12&63]+a0[e>>6&63]+a0[e&63]}return s?a.slice(0,s-3)+"===".substring(s):a},F2=typeof btoa=="function"?n=>btoa(n):dv?n=>Buffer.from(n,"binary").toString("base64"):j4,OC=dv?n=>Buffer.from(n).toString("base64"):n=>{let t=[];for(let i=0,r=n.length;i<r;i+=4096)t.push(Ma.apply(null,n.subarray(i,i+4096)));return F2(t.join(""))},FS=(n,e=!1)=>e?F4(OC(n)):OC(n),wee=n=>{if(n.length<2){var e=n.charCodeAt(0);return e<128?n:e<2048?Ma(192|e>>>6)+Ma(128|e&63):Ma(224|e>>>12&15)+Ma(128|e>>>6&63)+Ma(128|e&63)}else{var e=65536+(n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320);return Ma(240|e>>>18&7)+Ma(128|e>>>12&63)+Ma(128|e>>>6&63)+Ma(128|e&63)}},Tee=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,V4=n=>n.replace(Tee,wee),xI=dv?n=>Buffer.from(n,"utf8").toString("base64"):_I?n=>OC(_I.encode(n)):n=>F2(V4(n)),Ag=(n,e=!1)=>e?F4(xI(n)):xI(n),SI=n=>Ag(n,!0),Mee=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Aee=n=>{switch(n.length){case 4:var e=(7&n.charCodeAt(0))<<18|(63&n.charCodeAt(1))<<12|(63&n.charCodeAt(2))<<6|63&n.charCodeAt(3),t=e-65536;return Ma((t>>>10)+55296)+Ma((t&1023)+56320);case 3:return Ma((15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2));default:return Ma((31&n.charCodeAt(0))<<6|63&n.charCodeAt(1))}},G4=n=>n.replace(Mee,Aee),Y4=n=>{if(n=n.replace(/\s+/g,""),!Eee.test(n))throw new TypeError("malformed base64.");n+="==".slice(2-(n.length&3));let e,t,i,r=[];for(let a=0;a<n.length;)e=uS[n.charAt(a++)]<<18|uS[n.charAt(a++)]<<12|(t=uS[n.charAt(a++)])<<6|(i=uS[n.charAt(a++)]),t===64?r.push(Ma(e>>16&255)):i===64?r.push(Ma(e>>16&255,e>>8&255)):r.push(Ma(e>>16&255,e>>8&255,e&255));return r.join("")},H2=typeof atob=="function"?n=>atob(H4(n)):dv?n=>Buffer.from(n,"base64").toString("binary"):Y4,W4=dv?n=>bI(Buffer.from(n,"base64")):n=>bI(H2(n).split("").map(e=>e.charCodeAt(0))),Z4=n=>W4(X4(n)),Cee=dv?n=>Buffer.from(n,"base64").toString("utf8"):yI?n=>yI.decode(W4(n)):n=>G4(H2(n)),X4=n=>H4(n.replace(/[-_]/g,e=>e=="-"?"+":"/")),DC=n=>Cee(X4(n)),Ree=n=>{if(typeof n!="string")return!1;const e=n.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},q4=n=>({value:n,enumerable:!1,writable:!0,configurable:!0}),K4=function(){const n=(e,t)=>Object.defineProperty(String.prototype,e,q4(t));n("fromBase64",function(){return DC(this)}),n("toBase64",function(e){return Ag(this,e)}),n("toBase64URI",function(){return Ag(this,!0)}),n("toBase64URL",function(){return Ag(this,!0)}),n("toUint8Array",function(){return Z4(this)})},$4=function(){const n=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,q4(t));n("toBase64",function(e){return FS(this,e)}),n("toBase64URI",function(){return FS(this,!0)}),n("toBase64URL",function(){return FS(this,!0)})},Oee=()=>{K4(),$4()},EI={version:k4,VERSION:xee,atob:H2,atobPolyfill:Y4,btoa:F2,btoaPolyfill:j4,fromBase64:DC,toBase64:Ag,encode:Ag,encodeURI:SI,encodeURL:SI,utob:V4,btou:G4,decode:DC,isValid:Ree,fromUint8Array:FS,toUint8Array:Z4,extendString:K4,extendUint8Array:$4,extendBuiltins:Oee},NC={decode(n){return EI.toUint8Array(n)},encode(n){return EI.fromUint8Array(n)}};var Ra=Uint8Array,mo=Uint16Array,j2=Int32Array,vw=new Ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yw=new Ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),LC=new Ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Q4=function(n,e){for(var t=new mo(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new j2(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)r[a]=a-t[i]<<5|i;return{b:t,r}},J4=Q4(vw,2),ek=J4.b,IC=J4.r;ek[28]=258,IC[258]=28;var tk=Q4(yw,0),Dee=tk.b,wI=tk.r,UC=new mo(32768);for(var Fi=0;Fi<32768;++Fi){var Gf=(Fi&43690)>>1|(Fi&21845)<<1;Gf=(Gf&52428)>>2|(Gf&13107)<<2,Gf=(Gf&61680)>>4|(Gf&3855)<<4,UC[Fi]=((Gf&65280)>>8|(Gf&255)<<8)>>1}var jc=(function(n,e,t){for(var i=n.length,r=0,a=new mo(e);r<i;++r)n[r]&&++a[n[r]-1];var s=new mo(e);for(r=1;r<e;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(t){o=new mo(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var f=r<<4|n[r],p=e-n[r],d=s[n[r]-1]++<<p,m=d|(1<<p)-1;d<=m;++d)o[UC[d]>>c]=f}else for(o=new mo(i),r=0;r<i;++r)n[r]&&(o[r]=UC[s[n[r]-1]++]>>15-n[r]);return o}),yd=new Ra(288);for(var Fi=0;Fi<144;++Fi)yd[Fi]=8;for(var Fi=144;Fi<256;++Fi)yd[Fi]=9;for(var Fi=256;Fi<280;++Fi)yd[Fi]=7;for(var Fi=280;Fi<288;++Fi)yd[Fi]=8;var Z0=new Ra(32);for(var Fi=0;Fi<32;++Fi)Z0[Fi]=5;var Nee=jc(yd,9,0),Lee=jc(yd,9,1),Iee=jc(Z0,5,0),Uee=jc(Z0,5,1),ZM=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Tl=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},XM=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},V2=function(n){return(n+7)/8|0},nk=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ra(n.subarray(e,t))},Pee=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],uo=function(n,e,t){var i=new Error(e||Pee[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,uo),!t)throw i;return i},G2=function(n,e,t,i){var r=n.length,a=0;if(!r||e.f&&!e.l)return t||new Ra(0);var s=!t,o=s||e.i!=2,c=e.i;s&&(t=new Ra(r*3));var f=function(We){var it=t.length;if(We>it){var te=new Ra(Math.max(it*2,We));te.set(t),t=te}},p=e.f||0,d=e.p||0,m=e.b||0,v=e.l,_=e.d,b=e.m,S=e.n,x=r*8;do{if(!v){p=Tl(n,d,1);var T=Tl(n,d+1,3);if(d+=3,T)if(T==1)v=Lee,_=Uee,b=9,S=5;else if(T==2){var O=Tl(n,d,31)+257,I=Tl(n,d+10,15)+4,U=O+Tl(n,d+5,31)+1;d+=14;for(var N=new Ra(U),L=new Ra(19),Y=0;Y<I;++Y)L[LC[Y]]=Tl(n,d+Y*3,7);d+=I*3;for(var ee=ZM(L),se=(1<<ee)-1,he=jc(L,ee,1),Y=0;Y<U;){var de=he[Tl(n,d,se)];d+=de&15;var M=de>>4;if(M<16)N[Y++]=M;else{var P=0,B=0;for(M==16?(B=3+Tl(n,d,3),d+=2,P=N[Y-1]):M==17?(B=3+Tl(n,d,7),d+=3):M==18&&(B=11+Tl(n,d,127),d+=7);B--;)N[Y++]=P}}var V=N.subarray(0,O),ae=N.subarray(O);b=ZM(V),S=ZM(ae),v=jc(V,b,1),_=jc(ae,S,1)}else uo(1);else{var M=V2(d)+4,A=n[M-4]|n[M-3]<<8,D=M+A;if(D>r){c&&uo(0);break}o&&f(m+A),t.set(n.subarray(M,D),m),e.b=m+=A,e.p=d=D*8,e.f=p;continue}if(d>x){c&&uo(0);break}}o&&f(m+131072);for(var X=(1<<b)-1,oe=(1<<S)-1,me=d;;me=d){var P=v[XM(n,d)&X],J=P>>4;if(d+=P&15,d>x){c&&uo(0);break}if(P||uo(2),J<256)t[m++]=J;else if(J==256){me=d,v=null;break}else{var le=J-254;if(J>264){var Y=J-257,Se=vw[Y];le=Tl(n,d,(1<<Se)-1)+ek[Y],d+=Se}var Ee=_[XM(n,d)&oe],re=Ee>>4;Ee||uo(3),d+=Ee&15;var ae=Dee[re];if(re>3){var Se=yw[re];ae+=XM(n,d)&(1<<Se)-1,d+=Se}if(d>x){c&&uo(0);break}o&&f(m+131072);var ge=m+le;if(m<ae){var Ae=a-ae,Pe=Math.min(ae,ge);for(Ae+m<0&&uo(3);m<Pe;++m)t[m]=i[Ae+m]}for(;m<ge;++m)t[m]=t[m-ae]}}e.l=v,e.p=me,e.b=m,e.f=p,v&&(p=1,e.m=b,e.d=_,e.n=S)}while(!p);return m!=t.length&&s?nk(t,0,m):t.subarray(0,m)},Au=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},Xy=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},qM=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,a=t.slice();if(!r)return{t:rk,l:0};if(r==1){var s=new Ra(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(D,O){return D.f-O.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],f=0,p=1,d=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};p!=r-1;)o=t[t[f].f<t[d].f?f++:d++],c=t[f!=p&&t[f].f<t[d].f?f++:d++],t[p++]={s:-1,f:o.f+c.f,l:o,r:c};for(var m=a[0].s,i=1;i<r;++i)a[i].s>m&&(m=a[i].s);var v=new mo(m+1),_=PC(t[p-1],v,0);if(_>e){var i=0,b=0,S=_-e,x=1<<S;for(a.sort(function(O,I){return v[I.s]-v[O.s]||O.f-I.f});i<r;++i){var T=a[i].s;if(v[T]>e)b+=x-(1<<_-v[T]),v[T]=e;else break}for(b>>=S;b>0;){var M=a[i].s;v[M]<e?b-=1<<e-v[M]++-1:++i}for(;i>=0&&b;--i){var A=a[i].s;v[A]==e&&(--v[A],++b)}_=e}return{t:new Ra(v),l:_}},PC=function(n,e,t){return n.s==-1?Math.max(PC(n.l,e,t+1),PC(n.r,e,t+1)):e[n.s]=t},TI=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new mo(++e),i=0,r=n[0],a=1,s=function(c){t[i++]=c},o=1;o<=e;++o)if(n[o]==r&&o!=e)++a;else{if(!r&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(r),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(r);a=1,r=n[o]}return{c:t.subarray(0,i),n:e}},qy=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},ik=function(n,e,t){var i=t.length,r=V2(e+2);n[r]=i&255,n[r+1]=i>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var a=0;a<i;++a)n[r+a+4]=t[a];return(r+4+i)*8},MI=function(n,e,t,i,r,a,s,o,c,f,p){Au(e,p++,t),++r[256];for(var d=qM(r,15),m=d.t,v=d.l,_=qM(a,15),b=_.t,S=_.l,x=TI(m),T=x.c,M=x.n,A=TI(b),D=A.c,O=A.n,I=new mo(19),U=0;U<T.length;++U)++I[T[U]&31];for(var U=0;U<D.length;++U)++I[D[U]&31];for(var N=qM(I,7),L=N.t,Y=N.l,ee=19;ee>4&&!L[LC[ee-1]];--ee);var se=f+5<<3,he=qy(r,yd)+qy(a,Z0)+s,de=qy(r,m)+qy(a,b)+s+14+3*ee+qy(I,L)+2*I[16]+3*I[17]+7*I[18];if(c>=0&&se<=he&&se<=de)return ik(e,p,n.subarray(c,c+f));var P,B,V,ae;if(Au(e,p,1+(de<he)),p+=2,de<he){P=jc(m,v,0),B=m,V=jc(b,S,0),ae=b;var X=jc(L,Y,0);Au(e,p,M-257),Au(e,p+5,O-1),Au(e,p+10,ee-4),p+=14;for(var U=0;U<ee;++U)Au(e,p+3*U,L[LC[U]]);p+=3*ee;for(var oe=[T,D],me=0;me<2;++me)for(var J=oe[me],U=0;U<J.length;++U){var le=J[U]&31;Au(e,p,X[le]),p+=L[le],le>15&&(Au(e,p,J[U]>>5&127),p+=J[U]>>12)}}else P=Nee,B=yd,V=Iee,ae=Z0;for(var U=0;U<o;++U){var Se=i[U];if(Se>255){var le=Se>>18&31;Xy(e,p,P[le+257]),p+=B[le+257],le>7&&(Au(e,p,Se>>23&31),p+=vw[le]);var Ee=Se&31;Xy(e,p,V[Ee]),p+=ae[Ee],Ee>3&&(Xy(e,p,Se>>5&8191),p+=yw[Ee])}else Xy(e,p,P[Se]),p+=B[Se]}return Xy(e,p,P[256]),p+B[256]},zee=new j2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rk=new Ra(0),Bee=function(n,e,t,i,r,a){var s=a.z||n.length,o=new Ra(i+s+5*(1+Math.ceil(s/7e3))+r),c=o.subarray(i,o.length-r),f=a.l,p=(a.r||0)&7;if(e){p&&(c[0]=a.r>>3);for(var d=zee[e-1],m=d>>13,v=d&8191,_=(1<<t)-1,b=a.p||new mo(32768),S=a.h||new mo(_+1),x=Math.ceil(t/3),T=2*x,M=function(xe){return(n[xe]^n[xe+1]<<x^n[xe+2]<<T)&_},A=new j2(25e3),D=new mo(288),O=new mo(32),I=0,U=0,N=a.i||0,L=0,Y=a.w||0,ee=0;N+2<s;++N){var se=M(N),he=N&32767,de=S[se];if(b[he]=de,S[se]=he,Y<=N){var P=s-N;if((I>7e3||L>24576)&&(P>423||!f)){p=MI(n,c,0,A,D,O,U,L,ee,N-ee,p),L=I=U=0,ee=N;for(var B=0;B<286;++B)D[B]=0;for(var B=0;B<30;++B)O[B]=0}var V=2,ae=0,X=v,oe=he-de&32767;if(P>2&&se==M(N-oe))for(var me=Math.min(m,P)-1,J=Math.min(32767,N),le=Math.min(258,P);oe<=J&&--X&&he!=de;){if(n[N+V]==n[N+V-oe]){for(var Se=0;Se<le&&n[N+Se]==n[N+Se-oe];++Se);if(Se>V){if(V=Se,ae=oe,Se>me)break;for(var Ee=Math.min(oe,Se-2),re=0,B=0;B<Ee;++B){var ge=N-oe+B&32767,Ae=b[ge],Pe=ge-Ae&32767;Pe>re&&(re=Pe,de=ge)}}}he=de,de=b[he],oe+=he-de&32767}if(ae){A[L++]=268435456|IC[V]<<18|wI[ae];var We=IC[V]&31,it=wI[ae]&31;U+=vw[We]+yw[it],++D[257+We],++O[it],Y=N+V,++I}else A[L++]=n[N],++D[n[N]]}}for(N=Math.max(N,Y);N<s;++N)A[L++]=n[N],++D[n[N]];p=MI(n,c,f,A,D,O,U,L,ee,N-ee,p),f||(a.r=p&7|c[p/8|0]<<3,p-=7,a.h=S,a.p=b,a.i=N,a.w=Y)}else{for(var N=a.w||0;N<s+f;N+=65535){var te=N+65535;te>=s&&(c[p/8|0]=f,te=s),p=ik(c,p+1,n.subarray(N,te))}a.i=s}return nk(o,0,i+V2(p)+r)},kee=(function(){for(var n=new Int32Array(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&-306674912)^t>>>1;n[e]=t}return n})(),Fee=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=kee[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},Hee=function(n,e,t,i,r){if(!r&&(r={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new Ra(a.length+n.length);s.set(a),s.set(n,a.length),n=s,r.w=a.length}return Bee(n,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,r)},zC=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},jee=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&zC(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var i=0;i<=t.length;++i)n[i+10]=t.charCodeAt(i)}},Vee=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&uo(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},Gee=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Yee=function(n){return 10+(n.filename?n.filename.length+1:0)},Wee=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&uo(6,"invalid zlib data"),(n[1]>>5&1)==1&&uo(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Zee(n,e){return G2(n,{i:2},e,e)}function Xee(n,e){e||(e={});var t=Fee(),i=n.length;t.p(n);var r=Hee(n,e,Yee(e),8),a=r.length;return jee(r,e),zC(r,a-8,t.d()),zC(r,a-4,i),r}function qee(n,e){var t=Vee(n);return t+8>n.length&&uo(6,"invalid gzip data"),G2(n.subarray(t,-8),{i:2},new Ra(Gee(n)),e)}function Kee(n,e){return G2(n.subarray(Wee(n),-4),{i:2},e,e)}function $ee(n,e){return n[0]==31&&n[1]==139&&n[2]==8?qee(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Zee(n,e):Kee(n,e)}var Qee=typeof TextDecoder<"u"&&new TextDecoder,Jee=0;try{Qee.decode(rk,{stream:!0}),Jee=1}catch{}const BC={compress(n){return Xee(n)},decompress(n){return $ee(n)}};function fS(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KM={exports:{}},AI;function ete(){return AI||(AI=1,(function(n,e){(function(t){n.exports=t()})(function(){return(function(){function t(i,r,a){function s(f,p){if(!r[f]){if(!i[f]){var d=typeof fS=="function"&&fS;if(!p&&d)return d(f,!0);if(o)return o(f,!0);var m=new Error("Cannot find module '"+f+"'");throw m.code="MODULE_NOT_FOUND",m}var v=r[f]={exports:{}};i[f][0].call(v.exports,function(_){var b=i[f][1][_];return s(b||_)},v,v.exports,t,i,r,a)}return r[f].exports}for(var o=typeof fS=="function"&&fS,c=0;c<a.length;c++)s(a[c]);return s}return t})()({1:[function(t,i,r){(function(a){(function(){let s=t("./interlace"),o=[function(){},function(m,v,_,b){if(b===v.length)throw new Error("Ran out of data");let S=v[b];m[_]=S,m[_+1]=S,m[_+2]=S,m[_+3]=255},function(m,v,_,b){if(b+1>=v.length)throw new Error("Ran out of data");let S=v[b];m[_]=S,m[_+1]=S,m[_+2]=S,m[_+3]=v[b+1]},function(m,v,_,b){if(b+2>=v.length)throw new Error("Ran out of data");m[_]=v[b],m[_+1]=v[b+1],m[_+2]=v[b+2],m[_+3]=255},function(m,v,_,b){if(b+3>=v.length)throw new Error("Ran out of data");m[_]=v[b],m[_+1]=v[b+1],m[_+2]=v[b+2],m[_+3]=v[b+3]}],c=[function(){},function(m,v,_,b){let S=v[0];m[_]=S,m[_+1]=S,m[_+2]=S,m[_+3]=b},function(m,v,_){let b=v[0];m[_]=b,m[_+1]=b,m[_+2]=b,m[_+3]=v[1]},function(m,v,_,b){m[_]=v[0],m[_+1]=v[1],m[_+2]=v[2],m[_+3]=b},function(m,v,_){m[_]=v[0],m[_+1]=v[1],m[_+2]=v[2],m[_+3]=v[3]}];function f(m,v){let _=[],b=0;function S(){if(b===m.length)throw new Error("Ran out of data");let x=m[b];b++;let T,M,A,D,O,I,U,N;switch(v){default:throw new Error("unrecognised depth");case 16:U=m[b],b++,_.push((x<<8)+U);break;case 4:U=x&15,N=x>>4,_.push(N,U);break;case 2:O=x&3,I=x>>2&3,U=x>>4&3,N=x>>6&3,_.push(N,U,I,O);break;case 1:T=x&1,M=x>>1&1,A=x>>2&1,D=x>>3&1,O=x>>4&1,I=x>>5&1,U=x>>6&1,N=x>>7&1,_.push(N,U,I,O,D,A,M,T);break}}return{get:function(x){for(;_.length<x;)S();let T=_.slice(0,x);return _=_.slice(x),T},resetAfterLine:function(){_.length=0},end:function(){if(b!==m.length)throw new Error("extra data found")}}}function p(m,v,_,b,S,x){let T=m.width,M=m.height,A=m.index;for(let D=0;D<M;D++)for(let O=0;O<T;O++){let I=_(O,D,A);o[b](v,S,I,x),x+=b}return x}function d(m,v,_,b,S,x){let T=m.width,M=m.height,A=m.index;for(let D=0;D<M;D++){for(let O=0;O<T;O++){let I=S.get(b),U=_(O,D,A);c[b](v,I,U,x)}S.resetAfterLine()}}r.dataToBitMap=function(m,v){let _=v.width,b=v.height,S=v.depth,x=v.bpp,T=v.interlace,M;S!==8&&(M=f(m,S));let A;S<=8?A=a.alloc(_*b*4):A=new Uint16Array(_*b*4);let D=Math.pow(2,S)-1,O=0,I,U;if(T)I=s.getImagePasses(_,b),U=s.getInterlaceIterator(_,b);else{let N=0;U=function(){let L=N;return N+=4,L},I=[{width:_,height:b}]}for(let N=0;N<I.length;N++)S===8?O=p(I[N],A,U,x,m,O):d(I[N],A,U,x,M,D);if(S===8){if(O!==m.length)throw new Error("extra data found")}else M.end();return A}}).call(this)}).call(this,t("buffer").Buffer)},{"./interlace":11,buffer:32}],2:[function(t,i,r){(function(a){(function(){let s=t("./constants");i.exports=function(o,c,f,p){let d=[s.COLORTYPE_COLOR_ALPHA,s.COLORTYPE_ALPHA].indexOf(p.colorType)!==-1;if(p.colorType===p.inputColorType){let D=(function(){let O=new ArrayBuffer(2);return new DataView(O).setInt16(0,256,!0),new Int16Array(O)[0]!==256})();if(p.bitDepth===8||p.bitDepth===16&&D)return o}let m=p.bitDepth!==16?o:new Uint16Array(o.buffer),v=255,_=s.COLORTYPE_TO_BPP_MAP[p.inputColorType];_===4&&!p.inputHasAlpha&&(_=3);let b=s.COLORTYPE_TO_BPP_MAP[p.colorType];p.bitDepth===16&&(v=65535,b*=2);let S=a.alloc(c*f*b),x=0,T=0,M=p.bgColor||{};M.red===void 0&&(M.red=v),M.green===void 0&&(M.green=v),M.blue===void 0&&(M.blue=v);function A(){let D,O,I,U=v;switch(p.inputColorType){case s.COLORTYPE_COLOR_ALPHA:U=m[x+3],D=m[x],O=m[x+1],I=m[x+2];break;case s.COLORTYPE_COLOR:D=m[x],O=m[x+1],I=m[x+2];break;case s.COLORTYPE_ALPHA:U=m[x+1],D=m[x],O=D,I=D;break;case s.COLORTYPE_GRAYSCALE:D=m[x],O=D,I=D;break;default:throw new Error("input color type:"+p.inputColorType+" is not supported at present")}return p.inputHasAlpha&&(d||(U/=v,D=Math.min(Math.max(Math.round((1-U)*M.red+U*D),0),v),O=Math.min(Math.max(Math.round((1-U)*M.green+U*O),0),v),I=Math.min(Math.max(Math.round((1-U)*M.blue+U*I),0),v))),{red:D,green:O,blue:I,alpha:U}}for(let D=0;D<f;D++)for(let O=0;O<c;O++){let I=A();switch(p.colorType){case s.COLORTYPE_COLOR_ALPHA:case s.COLORTYPE_COLOR:p.bitDepth===8?(S[T]=I.red,S[T+1]=I.green,S[T+2]=I.blue,d&&(S[T+3]=I.alpha)):(S.writeUInt16BE(I.red,T),S.writeUInt16BE(I.green,T+2),S.writeUInt16BE(I.blue,T+4),d&&S.writeUInt16BE(I.alpha,T+6));break;case s.COLORTYPE_ALPHA:case s.COLORTYPE_GRAYSCALE:{let U=(I.red+I.green+I.blue)/3;p.bitDepth===8?(S[T]=U,d&&(S[T+1]=I.alpha)):(S.writeUInt16BE(U,T),d&&S.writeUInt16BE(I.alpha,T+2));break}default:throw new Error("unrecognised color Type "+p.colorType)}x+=_,T+=b}return S}}).call(this)}).call(this,t("buffer").Buffer)},{"./constants":4,buffer:32}],3:[function(t,i,r){(function(a,s){(function(){let o=t("util"),c=t("stream"),f=i.exports=function(){c.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};o.inherits(f,c),f.prototype.read=function(p,d){this._reads.push({length:Math.abs(p),allowLess:p<0,func:d}),a.nextTick((function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}).bind(this))},f.prototype.write=function(p,d){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let m;return s.isBuffer(p)?m=p:m=s.from(p,d||this._encoding),this._buffers.push(m),this._buffered+=m.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused},f.prototype.end=function(p,d){p&&this.write(p,d),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))},f.prototype.destroySoon=f.prototype.end,f.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},f.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},f.prototype._processReadAllowingLess=function(p){this._reads.shift();let d=this._buffers[0];d.length>p.length?(this._buffered-=p.length,this._buffers[0]=d.slice(p.length),p.func.call(this,d.slice(0,p.length))):(this._buffered-=d.length,this._buffers.shift(),p.func.call(this,d))},f.prototype._processRead=function(p){this._reads.shift();let d=0,m=0,v=s.alloc(p.length);for(;d<p.length;){let _=this._buffers[m++],b=Math.min(_.length,p.length-d);_.copy(v,d,0,b),d+=b,b!==_.length&&(this._buffers[--m]=_.slice(b))}m>0&&this._buffers.splice(0,m),this._buffered-=p.length,p.func.call(this,v)},f.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let p=this._reads[0];if(p.allowLess)this._processReadAllowingLess(p);else if(this._buffered>=p.length)this._processRead(p);else break}this._buffers&&!this.writable&&this._end()}catch(p){this.emit("error",p)}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:63,buffer:32,stream:65,util:84}],4:[function(t,i,r){i.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],5:[function(t,i,r){let a=[];(function(){for(let o=0;o<256;o++){let c=o;for(let f=0;f<8;f++)c&1?c=3988292384^c>>>1:c=c>>>1;a[o]=c}})();let s=i.exports=function(){this._crc=-1};s.prototype.write=function(o){for(let c=0;c<o.length;c++)this._crc=a[(this._crc^o[c])&255]^this._crc>>>8;return!0},s.prototype.crc32=function(){return this._crc^-1},s.crc32=function(o){let c=-1;for(let f=0;f<o.length;f++)c=a[(c^o[f])&255]^c>>>8;return c^-1}},{}],6:[function(t,i,r){(function(a){(function(){let s=t("./paeth-predictor");function o(M,A,D,O,I){for(let U=0;U<D;U++)O[I+U]=M[A+U]}function c(M,A,D){let O=0,I=A+D;for(let U=A;U<I;U++)O+=Math.abs(M[U]);return O}function f(M,A,D,O,I,U){for(let N=0;N<D;N++){let L=N>=U?M[A+N-U]:0,Y=M[A+N]-L;O[I+N]=Y}}function p(M,A,D,O){let I=0;for(let U=0;U<D;U++){let N=U>=O?M[A+U-O]:0,L=M[A+U]-N;I+=Math.abs(L)}return I}function d(M,A,D,O,I){for(let U=0;U<D;U++){let N=A>0?M[A+U-D]:0,L=M[A+U]-N;O[I+U]=L}}function m(M,A,D){let O=0,I=A+D;for(let U=A;U<I;U++){let N=A>0?M[U-D]:0,L=M[U]-N;O+=Math.abs(L)}return O}function v(M,A,D,O,I,U){for(let N=0;N<D;N++){let L=N>=U?M[A+N-U]:0,Y=A>0?M[A+N-D]:0,ee=M[A+N]-(L+Y>>1);O[I+N]=ee}}function _(M,A,D,O){let I=0;for(let U=0;U<D;U++){let N=U>=O?M[A+U-O]:0,L=A>0?M[A+U-D]:0,Y=M[A+U]-(N+L>>1);I+=Math.abs(Y)}return I}function b(M,A,D,O,I,U){for(let N=0;N<D;N++){let L=N>=U?M[A+N-U]:0,Y=A>0?M[A+N-D]:0,ee=A>0&&N>=U?M[A+N-(D+U)]:0,se=M[A+N]-s(L,Y,ee);O[I+N]=se}}function S(M,A,D,O){let I=0;for(let U=0;U<D;U++){let N=U>=O?M[A+U-O]:0,L=A>0?M[A+U-D]:0,Y=A>0&&U>=O?M[A+U-(D+O)]:0,ee=M[A+U]-s(N,L,Y);I+=Math.abs(ee)}return I}let x={0:o,1:f,2:d,3:v,4:b},T={0:c,1:p,2:m,3:_,4:S};i.exports=function(M,A,D,O,I){let U;if(!("filterType"in O)||O.filterType===-1)U=[0,1,2,3,4];else if(typeof O.filterType=="number")U=[O.filterType];else throw new Error("unrecognised filter types");O.bitDepth===16&&(I*=2);let N=A*I,L=0,Y=0,ee=a.alloc((N+1)*D),se=U[0];for(let he=0;he<D;he++){if(U.length>1){let de=1/0;for(let P=0;P<U.length;P++){let B=T[U[P]](M,Y,N,I);B<de&&(se=U[P],de=B)}}ee[L]=se,L++,x[se](M,Y,N,ee,L,I),L+=N,Y+=N}return ee}}).call(this)}).call(this,t("buffer").Buffer)},{"./paeth-predictor":15,buffer:32}],7:[function(t,i,r){(function(a){(function(){let s=t("util"),o=t("./chunkstream"),c=t("./filter-parse"),f=i.exports=function(p){o.call(this);let d=[],m=this;this._filter=new c(p,{read:this.read.bind(this),write:function(v){d.push(v)},complete:function(){m.emit("complete",a.concat(d))}}),this._filter.start()};s.inherits(f,o)}).call(this)}).call(this,t("buffer").Buffer)},{"./chunkstream":3,"./filter-parse":9,buffer:32,util:84}],8:[function(t,i,r){(function(a){(function(){let s=t("./sync-reader"),o=t("./filter-parse");r.process=function(c,f){let p=[],d=new s(c);return new o(f,{read:d.read.bind(d),write:function(v){p.push(v)},complete:function(){}}).start(),d.process(),a.concat(p)}}).call(this)}).call(this,t("buffer").Buffer)},{"./filter-parse":9,"./sync-reader":22,buffer:32}],9:[function(t,i,r){(function(a){(function(){let s=t("./interlace"),o=t("./paeth-predictor");function c(p,d,m){let v=p*d;return m!==8&&(v=Math.ceil(v/(8/m))),v}let f=i.exports=function(p,d){let m=p.width,v=p.height,_=p.interlace,b=p.bpp,S=p.depth;if(this.read=d.read,this.write=d.write,this.complete=d.complete,this._imageIndex=0,this._images=[],_){let x=s.getImagePasses(m,v);for(let T=0;T<x.length;T++)this._images.push({byteWidth:c(x[T].width,b,S),height:x[T].height,lineIndex:0})}else this._images.push({byteWidth:c(m,b,S),height:v,lineIndex:0});S===8?this._xComparison=b:S===16?this._xComparison=b*2:this._xComparison=1};f.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},f.prototype._unFilterType1=function(p,d,m){let v=this._xComparison,_=v-1;for(let b=0;b<m;b++){let S=p[1+b],x=b>_?d[b-v]:0;d[b]=S+x}},f.prototype._unFilterType2=function(p,d,m){let v=this._lastLine;for(let _=0;_<m;_++){let b=p[1+_],S=v?v[_]:0;d[_]=b+S}},f.prototype._unFilterType3=function(p,d,m){let v=this._xComparison,_=v-1,b=this._lastLine;for(let S=0;S<m;S++){let x=p[1+S],T=b?b[S]:0,M=S>_?d[S-v]:0,A=Math.floor((M+T)/2);d[S]=x+A}},f.prototype._unFilterType4=function(p,d,m){let v=this._xComparison,_=v-1,b=this._lastLine;for(let S=0;S<m;S++){let x=p[1+S],T=b?b[S]:0,M=S>_?d[S-v]:0,A=S>_&&b?b[S-v]:0,D=o(M,T,A);d[S]=x+D}},f.prototype._reverseFilterLine=function(p){let d=p[0],m,v=this._images[this._imageIndex],_=v.byteWidth;if(d===0)m=p.slice(1,_+1);else switch(m=a.alloc(_),d){case 1:this._unFilterType1(p,m,_);break;case 2:this._unFilterType2(p,m,_);break;case 3:this._unFilterType3(p,m,_);break;case 4:this._unFilterType4(p,m,_);break;default:throw new Error("Unrecognised filter type - "+d)}this.write(m),v.lineIndex++,v.lineIndex>=v.height?(this._lastLine=null,this._imageIndex++,v=this._images[this._imageIndex]):this._lastLine=m,v?this.read(v.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this)}).call(this,t("buffer").Buffer)},{"./interlace":11,"./paeth-predictor":15,buffer:32}],10:[function(t,i,r){(function(a){(function(){function s(f,p,d,m,v){let _=0;for(let b=0;b<m;b++)for(let S=0;S<d;S++){let x=v[f[_]];if(!x)throw new Error("index "+f[_]+" not in palette");for(let T=0;T<4;T++)p[_+T]=x[T];_+=4}}function o(f,p,d,m,v){let _=0;for(let b=0;b<m;b++)for(let S=0;S<d;S++){let x=!1;if(v.length===1?v[0]===f[_]&&(x=!0):v[0]===f[_]&&v[1]===f[_+1]&&v[2]===f[_+2]&&(x=!0),x)for(let T=0;T<4;T++)p[_+T]=0;_+=4}}function c(f,p,d,m,v){let _=255,b=Math.pow(2,v)-1,S=0;for(let x=0;x<m;x++)for(let T=0;T<d;T++){for(let M=0;M<4;M++)p[S+M]=Math.floor(f[S+M]*_/b+.5);S+=4}}i.exports=function(f,p,d=!1){let m=p.depth,v=p.width,_=p.height,b=p.colorType,S=p.transColor,x=p.palette,T=f;return b===3?s(f,T,v,_,x):(S&&o(f,T,v,_,S),m!==8&&!d&&(m===16&&(T=a.alloc(v*_*4)),c(f,T,v,_,m))),T}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:32}],11:[function(t,i,r){let a=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];r.getImagePasses=function(s,o){let c=[],f=s%8,p=o%8,d=(s-f)/8,m=(o-p)/8;for(let v=0;v<a.length;v++){let _=a[v],b=d*_.x.length,S=m*_.y.length;for(let x=0;x<_.x.length&&_.x[x]<f;x++)b++;for(let x=0;x<_.y.length&&_.y[x]<p;x++)S++;b>0&&S>0&&c.push({width:b,height:S,index:v})}return c},r.getInterlaceIterator=function(s){return function(o,c,f){let p=o%a[f].x.length,d=(o-p)/a[f].x.length*8+a[f].x[p],m=c%a[f].y.length,v=(c-m)/a[f].y.length*8+a[f].y[m];return d*4+v*s*4}}},{}],12:[function(t,i,r){(function(a){(function(){let s=t("util"),o=t("stream"),c=t("./constants"),f=t("./packer"),p=i.exports=function(d){o.call(this);let m=d||{};this._packer=new f(m),this._deflate=this._packer.createDeflate(),this.readable=!0};s.inherits(p,o),p.prototype.pack=function(d,m,v,_){this.emit("data",a.from(c.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(m,v)),_&&this.emit("data",this._packer.packGAMA(_));let b=this._packer.filterData(d,m,v);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",(function(S){this.emit("data",this._packer.packIDAT(S))}).bind(this)),this._deflate.on("end",(function(){this.emit("data",this._packer.packIEND()),this.emit("end")}).bind(this)),this._deflate.end(b)}}).call(this)}).call(this,t("buffer").Buffer)},{"./constants":4,"./packer":14,buffer:32,stream:65,util:84}],13:[function(t,i,r){(function(a){(function(){let s=!0,o=t("zlib");o.deflateSync||(s=!1);let c=t("./constants"),f=t("./packer");i.exports=function(p,d){if(!s)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let m=d||{},v=new f(m),_=[];_.push(a.from(c.PNG_SIGNATURE)),_.push(v.packIHDR(p.width,p.height)),p.gamma&&_.push(v.packGAMA(p.gamma));let b=v.filterData(p.data,p.width,p.height),S=o.deflateSync(b,v.getDeflateOptions());if(b=null,!S||!S.length)throw new Error("bad png - invalid compressed data response");return _.push(v.packIDAT(S)),_.push(v.packIEND()),a.concat(_)}}).call(this)}).call(this,t("buffer").Buffer)},{"./constants":4,"./packer":14,buffer:32,zlib:31}],14:[function(t,i,r){(function(a){(function(){let s=t("./constants"),o=t("./crc"),c=t("./bitpacker"),f=t("./filter-pack"),p=t("zlib"),d=i.exports=function(m){if(this._options=m,m.deflateChunkSize=m.deflateChunkSize||32*1024,m.deflateLevel=m.deflateLevel!=null?m.deflateLevel:9,m.deflateStrategy=m.deflateStrategy!=null?m.deflateStrategy:3,m.inputHasAlpha=m.inputHasAlpha!=null?m.inputHasAlpha:!0,m.deflateFactory=m.deflateFactory||p.createDeflate,m.bitDepth=m.bitDepth||8,m.colorType=typeof m.colorType=="number"?m.colorType:s.COLORTYPE_COLOR_ALPHA,m.inputColorType=typeof m.inputColorType=="number"?m.inputColorType:s.COLORTYPE_COLOR_ALPHA,[s.COLORTYPE_GRAYSCALE,s.COLORTYPE_COLOR,s.COLORTYPE_COLOR_ALPHA,s.COLORTYPE_ALPHA].indexOf(m.colorType)===-1)throw new Error("option color type:"+m.colorType+" is not supported at present");if([s.COLORTYPE_GRAYSCALE,s.COLORTYPE_COLOR,s.COLORTYPE_COLOR_ALPHA,s.COLORTYPE_ALPHA].indexOf(m.inputColorType)===-1)throw new Error("option input color type:"+m.inputColorType+" is not supported at present");if(m.bitDepth!==8&&m.bitDepth!==16)throw new Error("option bit depth:"+m.bitDepth+" is not supported at present")};d.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},d.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},d.prototype.filterData=function(m,v,_){let b=c(m,v,_,this._options),S=s.COLORTYPE_TO_BPP_MAP[this._options.colorType];return f(b,v,_,this._options,S)},d.prototype._packChunk=function(m,v){let _=v?v.length:0,b=a.alloc(_+12);return b.writeUInt32BE(_,0),b.writeUInt32BE(m,4),v&&v.copy(b,8),b.writeInt32BE(o.crc32(b.slice(4,b.length-4)),b.length-4),b},d.prototype.packGAMA=function(m){let v=a.alloc(4);return v.writeUInt32BE(Math.floor(m*s.GAMMA_DIVISION),0),this._packChunk(s.TYPE_gAMA,v)},d.prototype.packIHDR=function(m,v){let _=a.alloc(13);return _.writeUInt32BE(m,0),_.writeUInt32BE(v,4),_[8]=this._options.bitDepth,_[9]=this._options.colorType,_[10]=0,_[11]=0,_[12]=0,this._packChunk(s.TYPE_IHDR,_)},d.prototype.packIDAT=function(m){return this._packChunk(s.TYPE_IDAT,m)},d.prototype.packIEND=function(){return this._packChunk(s.TYPE_IEND,null)}}).call(this)}).call(this,t("buffer").Buffer)},{"./bitpacker":2,"./constants":4,"./crc":5,"./filter-pack":6,buffer:32,zlib:31}],15:[function(t,i,r){i.exports=function(s,o,c){let f=s+o-c,p=Math.abs(f-s),d=Math.abs(f-o),m=Math.abs(f-c);return p<=d&&p<=m?s:d<=m?o:c}},{}],16:[function(t,i,r){let a=t("util"),s=t("zlib"),o=t("./chunkstream"),c=t("./filter-parse-async"),f=t("./parser"),p=t("./bitmapper"),d=t("./format-normaliser"),m=i.exports=function(v){o.call(this),this._parser=new f(v,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=v,this.writable=!0,this._parser.start()};a.inherits(m,o),m.prototype._handleError=function(v){this.emit("error",v),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0},m.prototype._inflateData=function(v){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=s.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let b=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,S=Math.max(b,s.Z_MIN_CHUNK);this._inflate=s.createInflate({chunkSize:S});let x=b,T=this.emit.bind(this,"error");this._inflate.on("error",function(A){x&&T(A)}),this._filter.on("complete",this._complete.bind(this));let M=this._filter.write.bind(this._filter);this._inflate.on("data",function(A){x&&(A.length>x&&(A=A.slice(0,x)),x-=A.length,M(A))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(v)},m.prototype._handleMetaData=function(v){this._metaData=v,this._bitmapInfo=Object.create(v),this._filter=new c(this._bitmapInfo)},m.prototype._handleTransColor=function(v){this._bitmapInfo.transColor=v},m.prototype._handlePalette=function(v){this._bitmapInfo.palette=v},m.prototype._simpleTransparency=function(){this._metaData.alpha=!0},m.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},m.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},m.prototype._complete=function(v){if(this.errord)return;let _;try{let b=p.dataToBitMap(v,this._bitmapInfo);_=d(b,this._bitmapInfo,this._options.skipRescale),b=null}catch(b){this._handleError(b);return}this.emit("parsed",_)}},{"./bitmapper":1,"./chunkstream":3,"./filter-parse-async":7,"./format-normaliser":10,"./parser":18,util:84,zlib:31}],17:[function(t,i,r){(function(a){(function(){let s=!0,o=t("zlib"),c=t("./sync-inflate");o.deflateSync||(s=!1);let f=t("./sync-reader"),p=t("./filter-parse-sync"),d=t("./parser"),m=t("./bitmapper"),v=t("./format-normaliser");i.exports=function(_,b){if(!s)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let S;function x(V){S=V}let T;function M(V){T=V}function A(V){T.transColor=V}function D(V){T.palette=V}function O(){T.alpha=!0}let I;function U(V){I=V}let N=[];function L(V){N.push(V)}let Y=new f(_);if(new d(b,{read:Y.read.bind(Y),error:x,metadata:M,gamma:U,palette:D,transColor:A,inflateData:L,simpleTransparency:O}).start(),Y.process(),S)throw S;let se=a.concat(N);N.length=0;let he;if(T.interlace)he=o.inflateSync(se);else{let ae=((T.width*T.bpp*T.depth+7>>3)+1)*T.height;he=c(se,{chunkSize:ae,maxLength:ae})}if(se=null,!he||!he.length)throw new Error("bad png - invalid inflate data response");let de=p.process(he,T);se=null;let P=m.dataToBitMap(de,T);de=null;let B=v(P,T,b.skipRescale);return T.data=B,T.gamma=I||0,T}}).call(this)}).call(this,t("buffer").Buffer)},{"./bitmapper":1,"./filter-parse-sync":8,"./format-normaliser":10,"./parser":18,"./sync-inflate":21,"./sync-reader":22,buffer:32,zlib:31}],18:[function(t,i,r){(function(a){(function(){let s=t("./constants"),o=t("./crc"),c=i.exports=function(f,p){this._options=f,f.checkCRC=f.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[s.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[s.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[s.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[s.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[s.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[s.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=p.read,this.error=p.error,this.metadata=p.metadata,this.gamma=p.gamma,this.transColor=p.transColor,this.palette=p.palette,this.parsed=p.parsed,this.inflateData=p.inflateData,this.finished=p.finished,this.simpleTransparency=p.simpleTransparency,this.headersFinished=p.headersFinished||function(){}};c.prototype.start=function(){this.read(s.PNG_SIGNATURE.length,this._parseSignature.bind(this))},c.prototype._parseSignature=function(f){let p=s.PNG_SIGNATURE;for(let d=0;d<p.length;d++)if(f[d]!==p[d]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))},c.prototype._parseChunkBegin=function(f){let p=f.readUInt32BE(0),d=f.readUInt32BE(4),m="";for(let _=4;_<8;_++)m+=String.fromCharCode(f[_]);let v=!!(f[4]&32);if(!this._hasIHDR&&d!==s.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new o,this._crc.write(a.from(m)),this._chunks[d])return this._chunks[d](p);if(!v){this.error(new Error("Unsupported critical chunk type "+m));return}this.read(p+4,this._skipChunk.bind(this))},c.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},c.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},c.prototype._parseChunkEnd=function(f){let p=f.readInt32BE(0),d=this._crc.crc32();if(this._options.checkCRC&&d!==p){this.error(new Error("Crc error - "+p+" - "+d));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},c.prototype._handleIHDR=function(f){this.read(f,this._parseIHDR.bind(this))},c.prototype._parseIHDR=function(f){this._crc.write(f);let p=f.readUInt32BE(0),d=f.readUInt32BE(4),m=f[8],v=f[9],_=f[10],b=f[11],S=f[12];if(m!==8&&m!==4&&m!==2&&m!==1&&m!==16){this.error(new Error("Unsupported bit depth "+m));return}if(!(v in s.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(_!==0){this.error(new Error("Unsupported compression method"));return}if(b!==0){this.error(new Error("Unsupported filter method"));return}if(S!==0&&S!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=v;let x=s.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:p,height:d,depth:m,interlace:!!S,palette:!!(v&s.COLORTYPE_PALETTE),color:!!(v&s.COLORTYPE_COLOR),alpha:!!(v&s.COLORTYPE_ALPHA),bpp:x,colorType:v}),this._handleChunkEnd()},c.prototype._handlePLTE=function(f){this.read(f,this._parsePLTE.bind(this))},c.prototype._parsePLTE=function(f){this._crc.write(f);let p=Math.floor(f.length/3);for(let d=0;d<p;d++)this._palette.push([f[d*3],f[d*3+1],f[d*3+2],255]);this.palette(this._palette),this._handleChunkEnd()},c.prototype._handleTRNS=function(f){this.simpleTransparency(),this.read(f,this._parseTRNS.bind(this))},c.prototype._parseTRNS=function(f){if(this._crc.write(f),this._colorType===s.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(f.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let p=0;p<f.length;p++)this._palette[p][3]=f[p];this.palette(this._palette)}this._colorType===s.COLORTYPE_GRAYSCALE&&this.transColor([f.readUInt16BE(0)]),this._colorType===s.COLORTYPE_COLOR&&this.transColor([f.readUInt16BE(0),f.readUInt16BE(2),f.readUInt16BE(4)]),this._handleChunkEnd()},c.prototype._handleGAMA=function(f){this.read(f,this._parseGAMA.bind(this))},c.prototype._parseGAMA=function(f){this._crc.write(f),this.gamma(f.readUInt32BE(0)/s.GAMMA_DIVISION),this._handleChunkEnd()},c.prototype._handleIDAT=function(f){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-f,this._parseIDAT.bind(this,f))},c.prototype._parseIDAT=function(f,p){if(this._crc.write(p),this._colorType===s.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(p);let d=f-p.length;d>0?this._handleIDAT(d):this._handleChunkEnd()},c.prototype._handleIEND=function(f){this.read(f,this._parseIEND.bind(this))},c.prototype._parseIEND=function(f){this._crc.write(f),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this)}).call(this,t("buffer").Buffer)},{"./constants":4,"./crc":5,buffer:32}],19:[function(t,i,r){let a=t("./parser-sync"),s=t("./packer-sync");r.read=function(o,c){return a(o,c||{})},r.write=function(o,c){return s(o,c)}},{"./packer-sync":13,"./parser-sync":17}],20:[function(t,i,r){(function(a,s){(function(){let o=t("util"),c=t("stream"),f=t("./parser-async"),p=t("./packer-async"),d=t("./png-sync"),m=r.PNG=function(v){c.call(this),v=v||{},this.width=v.width|0,this.height=v.height|0,this.data=this.width>0&&this.height>0?s.alloc(4*this.width*this.height):null,v.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new f(v),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",(function(_){this.data=_,this.emit("parsed",_)}).bind(this)),this._packer=new p(v),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};o.inherits(m,c),m.sync=d,m.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(a.nextTick((function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}).bind(this)),this)},m.prototype.parse=function(v,_){if(_){let b,S;b=(function(x){this.removeListener("error",S),this.data=x,_(null,this)}).bind(this),S=(function(x){this.removeListener("parsed",b),_(x,null)}).bind(this),this.once("parsed",b),this.once("error",S)}return this.end(v),this},m.prototype.write=function(v){return this._parser.write(v),!0},m.prototype.end=function(v){this._parser.end(v)},m.prototype._metadata=function(v){this.width=v.width,this.height=v.height,this.emit("metadata",v)},m.prototype._gamma=function(v){this.gamma=v},m.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")},m.bitblt=function(v,_,b,S,x,T,M,A){if(b|=0,S|=0,x|=0,T|=0,M|=0,A|=0,b>v.width||S>v.height||b+x>v.width||S+T>v.height)throw new Error("bitblt reading outside image");if(M>_.width||A>_.height||M+x>_.width||A+T>_.height)throw new Error("bitblt writing outside image");for(let D=0;D<T;D++)v.data.copy(_.data,(A+D)*_.width+M<<2,(S+D)*v.width+b<<2,(S+D)*v.width+b+x<<2)},m.prototype.bitblt=function(v,_,b,S,x,T,M){return m.bitblt(this,v,_,b,S,x,T,M),this},m.adjustGamma=function(v){if(v.gamma){for(let _=0;_<v.height;_++)for(let b=0;b<v.width;b++){let S=v.width*_+b<<2;for(let x=0;x<3;x++){let T=v.data[S+x]/255;T=Math.pow(T,1/2.2/v.gamma),v.data[S+x]=Math.round(T*255)}}v.gamma=0}},m.prototype.adjustGamma=function(){m.adjustGamma(this)}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"./packer-async":12,"./parser-async":16,"./png-sync":19,_process:63,buffer:32,stream:65,util:84}],21:[function(t,i,r){(function(a,s){(function(){let o=t("assert").ok,c=t("zlib"),f=t("util"),p=t("buffer").kMaxLength;function d(S){if(!(this instanceof d))return new d(S);S&&S.chunkSize<c.Z_MIN_CHUNK&&(S.chunkSize=c.Z_MIN_CHUNK),c.Inflate.call(this,S),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,S&&S.maxLength!=null&&(this._maxLength=S.maxLength)}function m(S){return new d(S)}function v(S,x){S._handle&&(S._handle.close(),S._handle=null)}d.prototype._processChunk=function(S,x,T){if(typeof T=="function")return c.Inflate._processChunk.call(this,S,x,T);let M=this,A=S&&S.length,D=this._chunkSize-this._offset,O=this._maxLength,I=0,U=[],N=0,L;this.on("error",function(he){L=he});function Y(he,de){if(M._hadError)return;let P=D-de;if(o(P>=0,"have should not go down"),P>0){let B=M._buffer.slice(M._offset,M._offset+P);if(M._offset+=P,B.length>O&&(B=B.slice(0,O)),U.push(B),N+=B.length,O-=B.length,O===0)return!1}return(de===0||M._offset>=M._chunkSize)&&(D=M._chunkSize,M._offset=0,M._buffer=s.allocUnsafe(M._chunkSize)),de===0?(I+=A-he,A=he,!0):!1}o(this._handle,"zlib binding closed");let ee;do ee=this._handle.writeSync(x,S,I,A,this._buffer,this._offset,D),ee=ee||this._writeState;while(!this._hadError&&Y(ee[0],ee[1]));if(this._hadError)throw L;if(N>=p)throw v(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+p.toString(16)+" bytes");let se=s.concat(U,N);return v(this),se},f.inherits(d,c.Inflate);function _(S,x){if(typeof x=="string"&&(x=s.from(x)),!(x instanceof s))throw new TypeError("Not a string or buffer");let T=S._finishFlushFlag;return T==null&&(T=c.Z_FINISH),S._processChunk(x,T)}function b(S,x){return _(new d(x),S)}i.exports=r=b,r.Inflate=d,r.createInflate=m,r.inflateSync=b}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:63,assert:23,buffer:32,util:84,zlib:31}],22:[function(t,i,r){let a=i.exports=function(s){this._buffer=s,this._reads=[]};a.prototype.read=function(s,o){this._reads.push({length:Math.abs(s),allowLess:s<0,func:o})},a.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let s=this._reads[0];if(this._buffer.length&&(this._buffer.length>=s.length||s.allowLess)){this._reads.shift();let o=this._buffer;this._buffer=o.slice(s.length),s.func.call(this,o.slice(0,s.length))}else break}if(this._reads.length>0)throw new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)throw new Error("unrecognised content at end of stream")}},{}],23:[function(t,i,r){(function(a){(function(){var s=t("object-assign");function o(P,B){if(P===B)return 0;for(var V=P.length,ae=B.length,X=0,oe=Math.min(V,ae);X<oe;++X)if(P[X]!==B[X]){V=P[X],ae=B[X];break}return V<ae?-1:ae<V?1:0}function c(P){return a.Buffer&&typeof a.Buffer.isBuffer=="function"?a.Buffer.isBuffer(P):!!(P!=null&&P._isBuffer)}var f=t("util/"),p=Object.prototype.hasOwnProperty,d=Array.prototype.slice,m=(function(){return(function(){}).name==="foo"})();function v(P){return Object.prototype.toString.call(P)}function _(P){return c(P)||typeof a.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(P):P?!!(P instanceof DataView||P.buffer&&P.buffer instanceof ArrayBuffer):!1}var b=i.exports=O,S=/\s*function\s+([^\(\s]*)\s*/;function x(P){if(f.isFunction(P)){if(m)return P.name;var B=P.toString(),V=B.match(S);return V&&V[1]}}b.AssertionError=function(B){this.name="AssertionError",this.actual=B.actual,this.expected=B.expected,this.operator=B.operator,B.message?(this.message=B.message,this.generatedMessage=!1):(this.message=A(this),this.generatedMessage=!0);var V=B.stackStartFunction||D;if(Error.captureStackTrace)Error.captureStackTrace(this,V);else{var ae=new Error;if(ae.stack){var X=ae.stack,oe=x(V),me=X.indexOf(`
`+oe);if(me>=0){var J=X.indexOf(`
`,me+1);X=X.substring(J+1)}this.stack=X}}},f.inherits(b.AssertionError,Error);function T(P,B){return typeof P=="string"?P.length<B?P:P.slice(0,B):P}function M(P){if(m||!f.isFunction(P))return f.inspect(P);var B=x(P),V=B?": "+B:"";return"[Function"+V+"]"}function A(P){return T(M(P.actual),128)+" "+P.operator+" "+T(M(P.expected),128)}function D(P,B,V,ae,X){throw new b.AssertionError({message:V,actual:P,expected:B,operator:ae,stackStartFunction:X})}b.fail=D;function O(P,B){P||D(P,!0,B,"==",b.ok)}b.ok=O,b.equal=function(B,V,ae){B!=V&&D(B,V,ae,"==",b.equal)},b.notEqual=function(B,V,ae){B==V&&D(B,V,ae,"!=",b.notEqual)},b.deepEqual=function(B,V,ae){I(B,V,!1)||D(B,V,ae,"deepEqual",b.deepEqual)},b.deepStrictEqual=function(B,V,ae){I(B,V,!0)||D(B,V,ae,"deepStrictEqual",b.deepStrictEqual)};function I(P,B,V,ae){if(P===B)return!0;if(c(P)&&c(B))return o(P,B)===0;if(f.isDate(P)&&f.isDate(B))return P.getTime()===B.getTime();if(f.isRegExp(P)&&f.isRegExp(B))return P.source===B.source&&P.global===B.global&&P.multiline===B.multiline&&P.lastIndex===B.lastIndex&&P.ignoreCase===B.ignoreCase;if((P===null||typeof P!="object")&&(B===null||typeof B!="object"))return V?P===B:P==B;if(_(P)&&_(B)&&v(P)===v(B)&&!(P instanceof Float32Array||P instanceof Float64Array))return o(new Uint8Array(P.buffer),new Uint8Array(B.buffer))===0;if(c(P)!==c(B))return!1;ae=ae||{actual:[],expected:[]};var X=ae.actual.indexOf(P);return X!==-1&&X===ae.expected.indexOf(B)?!0:(ae.actual.push(P),ae.expected.push(B),N(P,B,V,ae))}function U(P){return Object.prototype.toString.call(P)=="[object Arguments]"}function N(P,B,V,ae){if(P==null||B===null||B===void 0)return!1;if(f.isPrimitive(P)||f.isPrimitive(B))return P===B;if(V&&Object.getPrototypeOf(P)!==Object.getPrototypeOf(B))return!1;var X=U(P),oe=U(B);if(X&&!oe||!X&&oe)return!1;if(X)return P=d.call(P),B=d.call(B),I(P,B,V);var me=de(P),J=de(B),le,Se;if(me.length!==J.length)return!1;for(me.sort(),J.sort(),Se=me.length-1;Se>=0;Se--)if(me[Se]!==J[Se])return!1;for(Se=me.length-1;Se>=0;Se--)if(le=me[Se],!I(P[le],B[le],V,ae))return!1;return!0}b.notDeepEqual=function(B,V,ae){I(B,V,!1)&&D(B,V,ae,"notDeepEqual",b.notDeepEqual)},b.notDeepStrictEqual=L;function L(P,B,V){I(P,B,!0)&&D(P,B,V,"notDeepStrictEqual",L)}b.strictEqual=function(B,V,ae){B!==V&&D(B,V,ae,"===",b.strictEqual)},b.notStrictEqual=function(B,V,ae){B===V&&D(B,V,ae,"!==",b.notStrictEqual)};function Y(P,B){if(!P||!B)return!1;if(Object.prototype.toString.call(B)=="[object RegExp]")return B.test(P);try{if(P instanceof B)return!0}catch{}return Error.isPrototypeOf(B)?!1:B.call({},P)===!0}function ee(P){var B;try{P()}catch(V){B=V}return B}function se(P,B,V,ae){var X;if(typeof B!="function")throw new TypeError('"block" argument must be a function');typeof V=="string"&&(ae=V,V=null),X=ee(B),ae=(V&&V.name?" ("+V.name+").":".")+(ae?" "+ae:"."),P&&!X&&D(X,V,"Missing expected exception"+ae);var oe=typeof ae=="string",me=!P&&f.isError(X),J=!P&&X&&!V;if((me&&oe&&Y(X,V)||J)&&D(X,V,"Got unwanted exception"+ae),P&&X&&V&&!Y(X,V)||!P&&X)throw X}b.throws=function(P,B,V){se(!0,P,B,V)},b.doesNotThrow=function(P,B,V){se(!1,P,B,V)},b.ifError=function(P){if(P)throw P};function he(P,B){P||D(P,!0,B,"==",he)}b.strict=s(he,b,{equal:b.strictEqual,deepEqual:b.deepStrictEqual,notEqual:b.notStrictEqual,notDeepEqual:b.notDeepStrictEqual}),b.strict.strict=b.strict;var de=Object.keys||function(P){var B=[];for(var V in P)p.call(P,V)&&B.push(V);return B}}).call(this)}).call(this,typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":51,"util/":26}],24:[function(t,i,r){typeof Object.create=="function"?i.exports=function(s,o){s.super_=o,s.prototype=Object.create(o.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function(s,o){s.super_=o;var c=function(){};c.prototype=o.prototype,s.prototype=new c,s.prototype.constructor=s}},{}],25:[function(t,i,r){i.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},{}],26:[function(t,i,r){(function(a,s){(function(){var o=/%[sdj%]/g;r.format=function(J){if(!N(J)){for(var le=[],Se=0;Se<arguments.length;Se++)le.push(p(arguments[Se]));return le.join(" ")}for(var Se=1,Ee=arguments,re=Ee.length,ge=String(J).replace(o,function(Pe){if(Pe==="%%")return"%";if(Se>=re)return Pe;switch(Pe){case"%s":return String(Ee[Se++]);case"%d":return Number(Ee[Se++]);case"%j":try{return JSON.stringify(Ee[Se++])}catch{return"[Circular]"}default:return Pe}}),Ae=Ee[Se];Se<re;Ae=Ee[++Se])O(Ae)||!se(Ae)?ge+=" "+Ae:ge+=" "+p(Ae);return ge},r.deprecate=function(J,le){if(Y(s.process))return function(){return r.deprecate(J,le).apply(this,arguments)};if(a.noDeprecation===!0)return J;var Se=!1;function Ee(){if(!Se){if(a.throwDeprecation)throw new Error(le);a.traceDeprecation?console.trace(le):console.error(le),Se=!0}return J.apply(this,arguments)}return Ee};var c={},f;r.debuglog=function(J){if(Y(f)&&(f=a.env.NODE_DEBUG||""),J=J.toUpperCase(),!c[J])if(new RegExp("\\b"+J+"\\b","i").test(f)){var le=a.pid;c[J]=function(){var Se=r.format.apply(r,arguments);console.error("%s %d: %s",J,le,Se)}}else c[J]=function(){};return c[J]};function p(J,le){var Se={seen:[],stylize:m};return arguments.length>=3&&(Se.depth=arguments[2]),arguments.length>=4&&(Se.colors=arguments[3]),D(le)?Se.showHidden=le:le&&r._extend(Se,le),Y(Se.showHidden)&&(Se.showHidden=!1),Y(Se.depth)&&(Se.depth=2),Y(Se.colors)&&(Se.colors=!1),Y(Se.customInspect)&&(Se.customInspect=!0),Se.colors&&(Se.stylize=d),_(Se,J,Se.depth)}r.inspect=p,p.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},p.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function d(J,le){var Se=p.styles[le];return Se?"\x1B["+p.colors[Se][0]+"m"+J+"\x1B["+p.colors[Se][1]+"m":J}function m(J,le){return J}function v(J){var le={};return J.forEach(function(Se,Ee){le[Se]=!0}),le}function _(J,le,Se){if(J.customInspect&&le&&P(le.inspect)&&le.inspect!==r.inspect&&!(le.constructor&&le.constructor.prototype===le)){var Ee=le.inspect(Se,J);return N(Ee)||(Ee=_(J,Ee,Se)),Ee}var re=b(J,le);if(re)return re;var ge=Object.keys(le),Ae=v(ge);if(J.showHidden&&(ge=Object.getOwnPropertyNames(le)),de(le)&&(ge.indexOf("message")>=0||ge.indexOf("description")>=0))return S(le);if(ge.length===0){if(P(le)){var Pe=le.name?": "+le.name:"";return J.stylize("[Function"+Pe+"]","special")}if(ee(le))return J.stylize(RegExp.prototype.toString.call(le),"regexp");if(he(le))return J.stylize(Date.prototype.toString.call(le),"date");if(de(le))return S(le)}var We="",it=!1,te=["{","}"];if(A(le)&&(it=!0,te=["[","]"]),P(le)){var xe=le.name?": "+le.name:"";We=" [Function"+xe+"]"}if(ee(le)&&(We=" "+RegExp.prototype.toString.call(le)),he(le)&&(We=" "+Date.prototype.toUTCString.call(le)),de(le)&&(We=" "+S(le)),ge.length===0&&(!it||le.length==0))return te[0]+We+te[1];if(Se<0)return ee(le)?J.stylize(RegExp.prototype.toString.call(le),"regexp"):J.stylize("[Object]","special");J.seen.push(le);var De;return it?De=x(J,le,Se,Ae,ge):De=ge.map(function(He){return T(J,le,Se,Ae,He,it)}),J.seen.pop(),M(De,We,te)}function b(J,le){if(Y(le))return J.stylize("undefined","undefined");if(N(le)){var Se="'"+JSON.stringify(le).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return J.stylize(Se,"string")}if(U(le))return J.stylize(""+le,"number");if(D(le))return J.stylize(""+le,"boolean");if(O(le))return J.stylize("null","null")}function S(J){return"["+Error.prototype.toString.call(J)+"]"}function x(J,le,Se,Ee,re){for(var ge=[],Ae=0,Pe=le.length;Ae<Pe;++Ae)me(le,String(Ae))?ge.push(T(J,le,Se,Ee,String(Ae),!0)):ge.push("");return re.forEach(function(We){We.match(/^\d+$/)||ge.push(T(J,le,Se,Ee,We,!0))}),ge}function T(J,le,Se,Ee,re,ge){var Ae,Pe,We;if(We=Object.getOwnPropertyDescriptor(le,re)||{value:le[re]},We.get?We.set?Pe=J.stylize("[Getter/Setter]","special"):Pe=J.stylize("[Getter]","special"):We.set&&(Pe=J.stylize("[Setter]","special")),me(Ee,re)||(Ae="["+re+"]"),Pe||(J.seen.indexOf(We.value)<0?(O(Se)?Pe=_(J,We.value,null):Pe=_(J,We.value,Se-1),Pe.indexOf(`
`)>-1&&(ge?Pe=Pe.split(`
`).map(function(it){return"  "+it}).join(`
`).substr(2):Pe=`
`+Pe.split(`
`).map(function(it){return"   "+it}).join(`
`))):Pe=J.stylize("[Circular]","special")),Y(Ae)){if(ge&&re.match(/^\d+$/))return Pe;Ae=JSON.stringify(""+re),Ae.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ae=Ae.substr(1,Ae.length-2),Ae=J.stylize(Ae,"name")):(Ae=Ae.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ae=J.stylize(Ae,"string"))}return Ae+": "+Pe}function M(J,le,Se){var Ee=J.reduce(function(re,ge){return ge.indexOf(`
`)>=0,re+ge.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ee>60?Se[0]+(le===""?"":le+`
 `)+" "+J.join(`,
  `)+" "+Se[1]:Se[0]+le+" "+J.join(", ")+" "+Se[1]}function A(J){return Array.isArray(J)}r.isArray=A;function D(J){return typeof J=="boolean"}r.isBoolean=D;function O(J){return J===null}r.isNull=O;function I(J){return J==null}r.isNullOrUndefined=I;function U(J){return typeof J=="number"}r.isNumber=U;function N(J){return typeof J=="string"}r.isString=N;function L(J){return typeof J=="symbol"}r.isSymbol=L;function Y(J){return J===void 0}r.isUndefined=Y;function ee(J){return se(J)&&V(J)==="[object RegExp]"}r.isRegExp=ee;function se(J){return typeof J=="object"&&J!==null}r.isObject=se;function he(J){return se(J)&&V(J)==="[object Date]"}r.isDate=he;function de(J){return se(J)&&(V(J)==="[object Error]"||J instanceof Error)}r.isError=de;function P(J){return typeof J=="function"}r.isFunction=P;function B(J){return J===null||typeof J=="boolean"||typeof J=="number"||typeof J=="string"||typeof J=="symbol"||typeof J>"u"}r.isPrimitive=B,r.isBuffer=t("./support/isBuffer");function V(J){return Object.prototype.toString.call(J)}function ae(J){return J<10?"0"+J.toString(10):J.toString(10)}var X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function oe(){var J=new Date,le=[ae(J.getHours()),ae(J.getMinutes()),ae(J.getSeconds())].join(":");return[J.getDate(),X[J.getMonth()],le].join(" ")}r.log=function(){console.log("%s - %s",oe(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(J,le){if(!le||!se(le))return J;for(var Se=Object.keys(le),Ee=Se.length;Ee--;)J[Se[Ee]]=le[Se[Ee]];return J};function me(J,le){return Object.prototype.hasOwnProperty.call(J,le)}}).call(this)}).call(this,t("_process"),typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":25,_process:63,inherits:24}],27:[function(t,i,r){(function(a){(function(){var s=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o=typeof globalThis>"u"?a:globalThis;i.exports=function(){for(var f=[],p=0;p<s.length;p++)typeof o[s[p]]=="function"&&(f[f.length]=s[p]);return f}}).call(this)}).call(this,typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{}],28:[function(t,i,r){r.byteLength=m,r.toByteArray=_,r.fromByteArray=x;for(var a=[],s=[],o=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=c.length;f<p;++f)a[f]=c[f],s[c.charCodeAt(f)]=f;s[45]=62,s[95]=63;function d(T){var M=T.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=T.indexOf("=");A===-1&&(A=M);var D=A===M?0:4-A%4;return[A,D]}function m(T){var M=d(T),A=M[0],D=M[1];return(A+D)*3/4-D}function v(T,M,A){return(M+A)*3/4-A}function _(T){var M,A=d(T),D=A[0],O=A[1],I=new o(v(T,D,O)),U=0,N=O>0?D-4:D,L;for(L=0;L<N;L+=4)M=s[T.charCodeAt(L)]<<18|s[T.charCodeAt(L+1)]<<12|s[T.charCodeAt(L+2)]<<6|s[T.charCodeAt(L+3)],I[U++]=M>>16&255,I[U++]=M>>8&255,I[U++]=M&255;return O===2&&(M=s[T.charCodeAt(L)]<<2|s[T.charCodeAt(L+1)]>>4,I[U++]=M&255),O===1&&(M=s[T.charCodeAt(L)]<<10|s[T.charCodeAt(L+1)]<<4|s[T.charCodeAt(L+2)]>>2,I[U++]=M>>8&255,I[U++]=M&255),I}function b(T){return a[T>>18&63]+a[T>>12&63]+a[T>>6&63]+a[T&63]}function S(T,M,A){for(var D,O=[],I=M;I<A;I+=3)D=(T[I]<<16&16711680)+(T[I+1]<<8&65280)+(T[I+2]&255),O.push(b(D));return O.join("")}function x(T){for(var M,A=T.length,D=A%3,O=[],I=16383,U=0,N=A-D;U<N;U+=I)O.push(S(T,U,U+I>N?N:U+I));return D===1?(M=T[A-1],O.push(a[M>>2]+a[M<<4&63]+"==")):D===2&&(M=(T[A-2]<<8)+T[A-1],O.push(a[M>>10]+a[M>>4&63]+a[M<<2&63]+"=")),O.join("")}},{}],29:[function(t,i,r){},{}],30:[function(t,i,r){(function(a,s){(function(){var o=t("assert"),c=t("pako/lib/zlib/zstream"),f=t("pako/lib/zlib/deflate.js"),p=t("pako/lib/zlib/inflate.js"),d=t("pako/lib/zlib/constants");for(var m in d)r[m]=d[m];r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7;var v=31,_=139;function b(S){if(typeof S!="number"||S<r.DEFLATE||S>r.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=S,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}b.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=r.UNZIP),this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?f.deflateEnd(this.strm):(this.mode===r.INFLATE||this.mode===r.GUNZIP||this.mode===r.INFLATERAW||this.mode===r.UNZIP)&&p.inflateEnd(this.strm),this.mode=r.NONE,this.dictionary=null},b.prototype.write=function(S,x,T,M,A,D,O){return this._write(!0,S,x,T,M,A,D,O)},b.prototype.writeSync=function(S,x,T,M,A,D,O){return this._write(!1,S,x,T,M,A,D,O)},b.prototype._write=function(S,x,T,M,A,D,O,I){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==r.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,x===void 0,"must provide flush value"),this.write_in_progress=!0,x!==r.Z_NO_FLUSH&&x!==r.Z_PARTIAL_FLUSH&&x!==r.Z_SYNC_FLUSH&&x!==r.Z_FULL_FLUSH&&x!==r.Z_FINISH&&x!==r.Z_BLOCK)throw new Error("Invalid flush value");if(T==null&&(T=s.alloc(0),A=0,M=0),this.strm.avail_in=A,this.strm.input=T,this.strm.next_in=M,this.strm.avail_out=I,this.strm.output=D,this.strm.next_out=O,this.flush=x,!S)return this._process(),this._checkError()?this._afterSync():void 0;var U=this;return a.nextTick(function(){U._process(),U._after()}),this},b.prototype._afterSync=function(){var S=this.strm.avail_out,x=this.strm.avail_in;return this.write_in_progress=!1,[x,S]},b.prototype._process=function(){var S=null;switch(this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=f.deflate(this.strm,this.flush);break;case r.UNZIP:switch(this.strm.avail_in>0&&(S=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(S===null)break;if(this.strm.input[S]===v){if(this.gzip_id_bytes_read=1,S++,this.strm.avail_in===1)break}else{this.mode=r.INFLATE;break}case 1:if(S===null)break;this.strm.input[S]===_?(this.gzip_id_bytes_read=2,this.mode=r.GUNZIP):this.mode=r.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:for(this.err=p.inflate(this.strm,this.flush),this.err===r.Z_NEED_DICT&&this.dictionary&&(this.err=p.inflateSetDictionary(this.strm,this.dictionary),this.err===r.Z_OK?this.err=p.inflate(this.strm,this.flush):this.err===r.Z_DATA_ERROR&&(this.err=r.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===r.GUNZIP&&this.err===r.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=p.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},b.prototype._checkError=function(){switch(this.err){case r.Z_OK:case r.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===r.Z_FINISH)return this._error("unexpected end of file"),!1;break;case r.Z_STREAM_END:break;case r.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},b.prototype._after=function(){if(this._checkError()){var S=this.strm.avail_out,x=this.strm.avail_in;this.write_in_progress=!1,this.callback(x,S),this.pending_close&&this.close()}},b.prototype._error=function(S){this.strm.msg&&(S=this.strm.msg),this.onerror(S,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},b.prototype.init=function(S,x,T,M,A){o(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(S>=8&&S<=15,"invalid windowBits"),o(x>=-1&&x<=9,"invalid compression level"),o(T>=1&&T<=9,"invalid memlevel"),o(M===r.Z_FILTERED||M===r.Z_HUFFMAN_ONLY||M===r.Z_RLE||M===r.Z_FIXED||M===r.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(x,S,T,M,A),this._setDictionary()},b.prototype.params=function(){throw new Error("deflateParams Not supported")},b.prototype.reset=function(){this._reset(),this._setDictionary()},b.prototype._init=function(S,x,T,M,A){switch(this.level=S,this.windowBits=x,this.memLevel=T,this.strategy=M,this.flush=r.Z_NO_FLUSH,this.err=r.Z_OK,(this.mode===r.GZIP||this.mode===r.GUNZIP)&&(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),(this.mode===r.DEFLATERAW||this.mode===r.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new c,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=f.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:this.err=p.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==r.Z_OK&&this._error("Init error"),this.dictionary=A,this.write_in_progress=!1,this.init_done=!0},b.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:this.err=f.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==r.Z_OK&&this._error("Failed to set dictionary")}},b.prototype._reset=function(){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:case r.GZIP:this.err=f.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:case r.GUNZIP:this.err=p.inflateReset(this.strm);break}this.err!==r.Z_OK&&this._error("Failed to reset stream")},r.Zlib=b}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:63,assert:23,buffer:32,"pako/lib/zlib/constants":54,"pako/lib/zlib/deflate.js":56,"pako/lib/zlib/inflate.js":58,"pako/lib/zlib/zstream":62}],31:[function(t,i,r){(function(a){(function(){var s=t("buffer").Buffer,o=t("stream").Transform,c=t("./binding"),f=t("util"),p=t("assert").ok,d=t("buffer").kMaxLength,m="Cannot create final Buffer. It would be larger than 0x"+d.toString(16)+" bytes";c.Z_MIN_WINDOWBITS=8,c.Z_MAX_WINDOWBITS=15,c.Z_DEFAULT_WINDOWBITS=15,c.Z_MIN_CHUNK=64,c.Z_MAX_CHUNK=1/0,c.Z_DEFAULT_CHUNK=16*1024,c.Z_MIN_MEMLEVEL=1,c.Z_MAX_MEMLEVEL=9,c.Z_DEFAULT_MEMLEVEL=8,c.Z_MIN_LEVEL=-1,c.Z_MAX_LEVEL=9,c.Z_DEFAULT_LEVEL=c.Z_DEFAULT_COMPRESSION;for(var v=Object.keys(c),_=0;_<v.length;_++){var b=v[_];b.match(/^Z/)&&Object.defineProperty(r,b,{enumerable:!0,value:c[b],writable:!1})}for(var S={Z_OK:c.Z_OK,Z_STREAM_END:c.Z_STREAM_END,Z_NEED_DICT:c.Z_NEED_DICT,Z_ERRNO:c.Z_ERRNO,Z_STREAM_ERROR:c.Z_STREAM_ERROR,Z_DATA_ERROR:c.Z_DATA_ERROR,Z_MEM_ERROR:c.Z_MEM_ERROR,Z_BUF_ERROR:c.Z_BUF_ERROR,Z_VERSION_ERROR:c.Z_VERSION_ERROR},x=Object.keys(S),T=0;T<x.length;T++){var M=x[T];S[S[M]]=M}Object.defineProperty(r,"codes",{enumerable:!0,value:Object.freeze(S),writable:!1}),r.Deflate=O,r.Inflate=I,r.Gzip=U,r.Gunzip=N,r.DeflateRaw=L,r.InflateRaw=Y,r.Unzip=ee,r.createDeflate=function(B){return new O(B)},r.createInflate=function(B){return new I(B)},r.createDeflateRaw=function(B){return new L(B)},r.createInflateRaw=function(B){return new Y(B)},r.createGzip=function(B){return new U(B)},r.createGunzip=function(B){return new N(B)},r.createUnzip=function(B){return new ee(B)},r.deflate=function(B,V,ae){return typeof V=="function"&&(ae=V,V={}),A(new O(V),B,ae)},r.deflateSync=function(B,V){return D(new O(V),B)},r.gzip=function(B,V,ae){return typeof V=="function"&&(ae=V,V={}),A(new U(V),B,ae)},r.gzipSync=function(B,V){return D(new U(V),B)},r.deflateRaw=function(B,V,ae){return typeof V=="function"&&(ae=V,V={}),A(new L(V),B,ae)},r.deflateRawSync=function(B,V){return D(new L(V),B)},r.unzip=function(B,V,ae){return typeof V=="function"&&(ae=V,V={}),A(new ee(V),B,ae)},r.unzipSync=function(B,V){return D(new ee(V),B)},r.inflate=function(B,V,ae){return typeof V=="function"&&(ae=V,V={}),A(new I(V),B,ae)},r.inflateSync=function(B,V){return D(new I(V),B)},r.gunzip=function(B,V,ae){return typeof V=="function"&&(ae=V,V={}),A(new N(V),B,ae)},r.gunzipSync=function(B,V){return D(new N(V),B)},r.inflateRaw=function(B,V,ae){return typeof V=="function"&&(ae=V,V={}),A(new Y(V),B,ae)},r.inflateRawSync=function(B,V){return D(new Y(V),B)};function A(B,V,ae){var X=[],oe=0;B.on("error",J),B.on("end",le),B.end(V),me();function me(){for(var Se;(Se=B.read())!==null;)X.push(Se),oe+=Se.length;B.once("readable",me)}function J(Se){B.removeListener("end",le),B.removeListener("readable",me),ae(Se)}function le(){var Se,Ee=null;oe>=d?Ee=new RangeError(m):Se=s.concat(X,oe),X=[],B.close(),ae(Ee,Se)}}function D(B,V){if(typeof V=="string"&&(V=s.from(V)),!s.isBuffer(V))throw new TypeError("Not a string or buffer");var ae=B._finishFlushFlag;return B._processChunk(V,ae)}function O(B){if(!(this instanceof O))return new O(B);he.call(this,B,c.DEFLATE)}function I(B){if(!(this instanceof I))return new I(B);he.call(this,B,c.INFLATE)}function U(B){if(!(this instanceof U))return new U(B);he.call(this,B,c.GZIP)}function N(B){if(!(this instanceof N))return new N(B);he.call(this,B,c.GUNZIP)}function L(B){if(!(this instanceof L))return new L(B);he.call(this,B,c.DEFLATERAW)}function Y(B){if(!(this instanceof Y))return new Y(B);he.call(this,B,c.INFLATERAW)}function ee(B){if(!(this instanceof ee))return new ee(B);he.call(this,B,c.UNZIP)}function se(B){return B===c.Z_NO_FLUSH||B===c.Z_PARTIAL_FLUSH||B===c.Z_SYNC_FLUSH||B===c.Z_FULL_FLUSH||B===c.Z_FINISH||B===c.Z_BLOCK}function he(B,V){var ae=this;if(this._opts=B=B||{},this._chunkSize=B.chunkSize||r.Z_DEFAULT_CHUNK,o.call(this,B),B.flush&&!se(B.flush))throw new Error("Invalid flush flag: "+B.flush);if(B.finishFlush&&!se(B.finishFlush))throw new Error("Invalid flush flag: "+B.finishFlush);if(this._flushFlag=B.flush||c.Z_NO_FLUSH,this._finishFlushFlag=typeof B.finishFlush<"u"?B.finishFlush:c.Z_FINISH,B.chunkSize&&(B.chunkSize<r.Z_MIN_CHUNK||B.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+B.chunkSize);if(B.windowBits&&(B.windowBits<r.Z_MIN_WINDOWBITS||B.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+B.windowBits);if(B.level&&(B.level<r.Z_MIN_LEVEL||B.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+B.level);if(B.memLevel&&(B.memLevel<r.Z_MIN_MEMLEVEL||B.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+B.memLevel);if(B.strategy&&B.strategy!=r.Z_FILTERED&&B.strategy!=r.Z_HUFFMAN_ONLY&&B.strategy!=r.Z_RLE&&B.strategy!=r.Z_FIXED&&B.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+B.strategy);if(B.dictionary&&!s.isBuffer(B.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new c.Zlib(V);var X=this;this._hadError=!1,this._handle.onerror=function(J,le){de(X),X._hadError=!0;var Se=new Error(J);Se.errno=le,Se.code=r.codes[le],X.emit("error",Se)};var oe=r.Z_DEFAULT_COMPRESSION;typeof B.level=="number"&&(oe=B.level);var me=r.Z_DEFAULT_STRATEGY;typeof B.strategy=="number"&&(me=B.strategy),this._handle.init(B.windowBits||r.Z_DEFAULT_WINDOWBITS,oe,B.memLevel||r.Z_DEFAULT_MEMLEVEL,me,B.dictionary),this._buffer=s.allocUnsafe(this._chunkSize),this._offset=0,this._level=oe,this._strategy=me,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!ae._handle},configurable:!0,enumerable:!0})}f.inherits(he,o),he.prototype.params=function(B,V,ae){if(B<r.Z_MIN_LEVEL||B>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+B);if(V!=r.Z_FILTERED&&V!=r.Z_HUFFMAN_ONLY&&V!=r.Z_RLE&&V!=r.Z_FIXED&&V!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+V);if(this._level!==B||this._strategy!==V){var X=this;this.flush(c.Z_SYNC_FLUSH,function(){p(X._handle,"zlib binding closed"),X._handle.params(B,V),X._hadError||(X._level=B,X._strategy=V,ae&&ae())})}else a.nextTick(ae)},he.prototype.reset=function(){return p(this._handle,"zlib binding closed"),this._handle.reset()},he.prototype._flush=function(B){this._transform(s.alloc(0),"",B)},he.prototype.flush=function(B,V){var ae=this,X=this._writableState;(typeof B=="function"||B===void 0&&!V)&&(V=B,B=c.Z_FULL_FLUSH),X.ended?V&&a.nextTick(V):X.ending?V&&this.once("end",V):X.needDrain?V&&this.once("drain",function(){return ae.flush(B,V)}):(this._flushFlag=B,this.write(s.alloc(0),"",V))},he.prototype.close=function(B){de(this,B),a.nextTick(P,this)};function de(B,V){V&&a.nextTick(V),B._handle&&(B._handle.close(),B._handle=null)}function P(B){B.emit("close")}he.prototype._transform=function(B,V,ae){var X,oe=this._writableState,me=oe.ending||oe.ended,J=me&&(!B||oe.length===B.length);if(B!==null&&!s.isBuffer(B))return ae(new Error("invalid input"));if(!this._handle)return ae(new Error("zlib binding closed"));J?X=this._finishFlushFlag:(X=this._flushFlag,B.length>=oe.length&&(this._flushFlag=this._opts.flush||c.Z_NO_FLUSH)),this._processChunk(B,X,ae)},he.prototype._processChunk=function(B,V,ae){var X=B&&B.length,oe=this._chunkSize-this._offset,me=0,J=this,le=typeof ae=="function";if(!le){var Se=[],Ee=0,re;this.on("error",function(it){re=it}),p(this._handle,"zlib binding closed");do var ge=this._handle.writeSync(V,B,me,X,this._buffer,this._offset,oe);while(!this._hadError&&We(ge[0],ge[1]));if(this._hadError)throw re;if(Ee>=d)throw de(this),new RangeError(m);var Ae=s.concat(Se,Ee);return de(this),Ae}p(this._handle,"zlib binding closed");var Pe=this._handle.write(V,B,me,X,this._buffer,this._offset,oe);Pe.buffer=B,Pe.callback=We;function We(it,te){if(this&&(this.buffer=null,this.callback=null),!J._hadError){var xe=oe-te;if(p(xe>=0,"have should not go down"),xe>0){var De=J._buffer.slice(J._offset,J._offset+xe);J._offset+=xe,le?J.push(De):(Se.push(De),Ee+=De.length)}if((te===0||J._offset>=J._chunkSize)&&(oe=J._chunkSize,J._offset=0,J._buffer=s.allocUnsafe(J._chunkSize)),te===0){if(me+=X-it,X=it,!le)return!0;var He=J._handle.write(V,B,me,X,J._buffer,J._offset,J._chunkSize);He.callback=We,He.buffer=B;return}if(!le)return!1;ae()}}},f.inherits(O,he),f.inherits(I,he),f.inherits(U,he),f.inherits(N,he),f.inherits(L,he),f.inherits(Y,he),f.inherits(ee,he)}).call(this)}).call(this,t("_process"))},{"./binding":30,_process:63,assert:23,buffer:32,stream:65,util:84}],32:[function(t,i,r){(function(a){(function(){var s=t("base64-js"),o=t("ieee754");r.Buffer=d,r.SlowBuffer=D,r.INSPECT_MAX_BYTES=50;var c=2147483647;r.kMaxLength=c,d.TYPED_ARRAY_SUPPORT=f(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{var ie=new Uint8Array(1);return ie.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ie.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function p(ie){if(ie>c)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var W=new Uint8Array(ie);return W.__proto__=d.prototype,W}function d(ie,W,K){if(typeof ie=="number"){if(typeof W=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ie)}return m(ie,W,K)}typeof Symbol<"u"&&Symbol.species!=null&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192;function m(ie,W,K){if(typeof ie=="string")return S(ie,W);if(ArrayBuffer.isView(ie))return x(ie);if(ie==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(ce(ie,ArrayBuffer)||ie&&ce(ie.buffer,ArrayBuffer))return T(ie,W,K);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var j=ie.valueOf&&ie.valueOf();if(j!=null&&j!==ie)return d.from(j,W,K);var $=M(ie);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return d.from(ie[Symbol.toPrimitive]("string"),W,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}d.from=function(ie,W,K){return m(ie,W,K)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array;function v(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function _(ie,W,K){return v(ie),ie<=0?p(ie):W!==void 0?typeof K=="string"?p(ie).fill(W,K):p(ie).fill(W):p(ie)}d.alloc=function(ie,W,K){return _(ie,W,K)};function b(ie){return v(ie),p(ie<0?0:A(ie)|0)}d.allocUnsafe=function(ie){return b(ie)},d.allocUnsafeSlow=function(ie){return b(ie)};function S(ie,W){if((typeof W!="string"||W==="")&&(W="utf8"),!d.isEncoding(W))throw new TypeError("Unknown encoding: "+W);var K=O(ie,W)|0,j=p(K),$=j.write(ie,W);return $!==K&&(j=j.slice(0,$)),j}function x(ie){for(var W=ie.length<0?0:A(ie.length)|0,K=p(W),j=0;j<W;j+=1)K[j]=ie[j]&255;return K}function T(ie,W,K){if(W<0||ie.byteLength<W)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<W+(K||0))throw new RangeError('"length" is outside of buffer bounds');var j;return W===void 0&&K===void 0?j=new Uint8Array(ie):K===void 0?j=new Uint8Array(ie,W):j=new Uint8Array(ie,W,K),j.__proto__=d.prototype,j}function M(ie){if(d.isBuffer(ie)){var W=A(ie.length)|0,K=p(W);return K.length===0||ie.copy(K,0,0,W),K}if(ie.length!==void 0)return typeof ie.length!="number"||pe(ie.length)?p(0):x(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return x(ie.data)}function A(ie){if(ie>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ie|0}function D(ie){return+ie!=ie&&(ie=0),d.alloc(+ie)}d.isBuffer=function(W){return W!=null&&W._isBuffer===!0&&W!==d.prototype},d.compare=function(W,K){if(ce(W,Uint8Array)&&(W=d.from(W,W.offset,W.byteLength)),ce(K,Uint8Array)&&(K=d.from(K,K.offset,K.byteLength)),!d.isBuffer(W)||!d.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===K)return 0;for(var j=W.length,$=K.length,Re=0,Ie=Math.min(j,$);Re<Ie;++Re)if(W[Re]!==K[Re]){j=W[Re],$=K[Re];break}return j<$?-1:$<j?1:0},d.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(W,K){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(W.length===0)return d.alloc(0);var j;if(K===void 0)for(K=0,j=0;j<W.length;++j)K+=W[j].length;var $=d.allocUnsafe(K),Re=0;for(j=0;j<W.length;++j){var Ie=W[j];if(ce(Ie,Uint8Array)&&(Ie=d.from(Ie)),!d.isBuffer(Ie))throw new TypeError('"list" argument must be an Array of Buffers');Ie.copy($,Re),Re+=Ie.length}return $};function O(ie,W){if(d.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||ce(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var K=ie.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&K===0)return 0;for(var $=!1;;)switch(W){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return te(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return He(ie).length;default:if($)return j?-1:te(ie).length;W=(""+W).toLowerCase(),$=!0}}d.byteLength=O;function I(ie,W,K){var j=!1;if((W===void 0||W<0)&&(W=0),W>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,W>>>=0,K<=W))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return J(this,W,K);case"utf8":case"utf-8":return V(this,W,K);case"ascii":return oe(this,W,K);case"latin1":case"binary":return me(this,W,K);case"base64":return B(this,W,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,W,K);default:if(j)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),j=!0}}d.prototype._isBuffer=!0;function U(ie,W,K){var j=ie[W];ie[W]=ie[K],ie[K]=j}d.prototype.swap16=function(){var W=this.length;if(W%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var K=0;K<W;K+=2)U(this,K,K+1);return this},d.prototype.swap32=function(){var W=this.length;if(W%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var K=0;K<W;K+=4)U(this,K,K+3),U(this,K+1,K+2);return this},d.prototype.swap64=function(){var W=this.length;if(W%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var K=0;K<W;K+=8)U(this,K,K+7),U(this,K+1,K+6),U(this,K+2,K+5),U(this,K+3,K+4);return this},d.prototype.toString=function(){var W=this.length;return W===0?"":arguments.length===0?V(this,0,W):I.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(W){if(!d.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W?!0:d.compare(this,W)===0},d.prototype.inspect=function(){var W="",K=r.INSPECT_MAX_BYTES;return W=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(W+=" ... "),"<Buffer "+W+">"},d.prototype.compare=function(W,K,j,$,Re){if(ce(W,Uint8Array)&&(W=d.from(W,W.offset,W.byteLength)),!d.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(K===void 0&&(K=0),j===void 0&&(j=W?W.length:0),$===void 0&&($=0),Re===void 0&&(Re=this.length),K<0||j>W.length||$<0||Re>this.length)throw new RangeError("out of range index");if($>=Re&&K>=j)return 0;if($>=Re)return-1;if(K>=j)return 1;if(K>>>=0,j>>>=0,$>>>=0,Re>>>=0,this===W)return 0;for(var Ie=Re-$,ne=j-K,H=Math.min(Ie,ne),Z=this.slice($,Re),ye=W.slice(K,j),Oe=0;Oe<H;++Oe)if(Z[Oe]!==ye[Oe]){Ie=Z[Oe],ne=ye[Oe];break}return Ie<ne?-1:ne<Ie?1:0};function N(ie,W,K,j,$){if(ie.length===0)return-1;if(typeof K=="string"?(j=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,pe(K)&&(K=$?0:ie.length-1),K<0&&(K=ie.length+K),K>=ie.length){if($)return-1;K=ie.length-1}else if(K<0)if($)K=0;else return-1;if(typeof W=="string"&&(W=d.from(W,j)),d.isBuffer(W))return W.length===0?-1:L(ie,W,K,j,$);if(typeof W=="number")return W=W&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(ie,W,K):Uint8Array.prototype.lastIndexOf.call(ie,W,K):L(ie,[W],K,j,$);throw new TypeError("val must be string, number or Buffer")}function L(ie,W,K,j,$){var Re=1,Ie=ie.length,ne=W.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(ie.length<2||W.length<2)return-1;Re=2,Ie/=2,ne/=2,K/=2}function H(Ue,pt){return Re===1?Ue[pt]:Ue.readUInt16BE(pt*Re)}var Z;if($){var ye=-1;for(Z=K;Z<Ie;Z++)if(H(ie,Z)===H(W,ye===-1?0:Z-ye)){if(ye===-1&&(ye=Z),Z-ye+1===ne)return ye*Re}else ye!==-1&&(Z-=Z-ye),ye=-1}else for(K+ne>Ie&&(K=Ie-ne),Z=K;Z>=0;Z--){for(var Oe=!0,Be=0;Be<ne;Be++)if(H(ie,Z+Be)!==H(W,Be)){Oe=!1;break}if(Oe)return Z}return-1}d.prototype.includes=function(W,K,j){return this.indexOf(W,K,j)!==-1},d.prototype.indexOf=function(W,K,j){return N(this,W,K,j,!0)},d.prototype.lastIndexOf=function(W,K,j){return N(this,W,K,j,!1)};function Y(ie,W,K,j){K=Number(K)||0;var $=ie.length-K;j?(j=Number(j),j>$&&(j=$)):j=$;var Re=W.length;j>Re/2&&(j=Re/2);for(var Ie=0;Ie<j;++Ie){var ne=parseInt(W.substr(Ie*2,2),16);if(pe(ne))return Ie;ie[K+Ie]=ne}return Ie}function ee(ie,W,K,j){return Ce(te(W,ie.length-K),ie,K,j)}function se(ie,W,K,j){return Ce(xe(W),ie,K,j)}function he(ie,W,K,j){return se(ie,W,K,j)}function de(ie,W,K,j){return Ce(He(W),ie,K,j)}function P(ie,W,K,j){return Ce(De(W,ie.length-K),ie,K,j)}d.prototype.write=function(W,K,j,$){if(K===void 0)$="utf8",j=this.length,K=0;else if(j===void 0&&typeof K=="string")$=K,j=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(j)?(j=j>>>0,$===void 0&&($="utf8")):($=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Re=this.length-K;if((j===void 0||j>Re)&&(j=Re),W.length>0&&(j<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");for(var Ie=!1;;)switch($){case"hex":return Y(this,W,K,j);case"utf8":case"utf-8":return ee(this,W,K,j);case"ascii":return se(this,W,K,j);case"latin1":case"binary":return he(this,W,K,j);case"base64":return de(this,W,K,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,W,K,j);default:if(Ie)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),Ie=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(ie,W,K){return W===0&&K===ie.length?s.fromByteArray(ie):s.fromByteArray(ie.slice(W,K))}function V(ie,W,K){K=Math.min(ie.length,K);for(var j=[],$=W;$<K;){var Re=ie[$],Ie=null,ne=Re>239?4:Re>223?3:Re>191?2:1;if($+ne<=K){var H,Z,ye,Oe;switch(ne){case 1:Re<128&&(Ie=Re);break;case 2:H=ie[$+1],(H&192)===128&&(Oe=(Re&31)<<6|H&63,Oe>127&&(Ie=Oe));break;case 3:H=ie[$+1],Z=ie[$+2],(H&192)===128&&(Z&192)===128&&(Oe=(Re&15)<<12|(H&63)<<6|Z&63,Oe>2047&&(Oe<55296||Oe>57343)&&(Ie=Oe));break;case 4:H=ie[$+1],Z=ie[$+2],ye=ie[$+3],(H&192)===128&&(Z&192)===128&&(ye&192)===128&&(Oe=(Re&15)<<18|(H&63)<<12|(Z&63)<<6|ye&63,Oe>65535&&Oe<1114112&&(Ie=Oe))}}Ie===null?(Ie=65533,ne=1):Ie>65535&&(Ie-=65536,j.push(Ie>>>10&1023|55296),Ie=56320|Ie&1023),j.push(Ie),$+=ne}return X(j)}var ae=4096;function X(ie){var W=ie.length;if(W<=ae)return String.fromCharCode.apply(String,ie);for(var K="",j=0;j<W;)K+=String.fromCharCode.apply(String,ie.slice(j,j+=ae));return K}function oe(ie,W,K){var j="";K=Math.min(ie.length,K);for(var $=W;$<K;++$)j+=String.fromCharCode(ie[$]&127);return j}function me(ie,W,K){var j="";K=Math.min(ie.length,K);for(var $=W;$<K;++$)j+=String.fromCharCode(ie[$]);return j}function J(ie,W,K){var j=ie.length;(!W||W<0)&&(W=0),(!K||K<0||K>j)&&(K=j);for(var $="",Re=W;Re<K;++Re)$+=it(ie[Re]);return $}function le(ie,W,K){for(var j=ie.slice(W,K),$="",Re=0;Re<j.length;Re+=2)$+=String.fromCharCode(j[Re]+j[Re+1]*256);return $}d.prototype.slice=function(W,K){var j=this.length;W=~~W,K=K===void 0?j:~~K,W<0?(W+=j,W<0&&(W=0)):W>j&&(W=j),K<0?(K+=j,K<0&&(K=0)):K>j&&(K=j),K<W&&(K=W);var $=this.subarray(W,K);return $.__proto__=d.prototype,$};function Se(ie,W,K){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+W>K)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUIntLE=function(W,K,j){W=W>>>0,K=K>>>0,j||Se(W,K,this.length);for(var $=this[W],Re=1,Ie=0;++Ie<K&&(Re*=256);)$+=this[W+Ie]*Re;return $},d.prototype.readUIntBE=function(W,K,j){W=W>>>0,K=K>>>0,j||Se(W,K,this.length);for(var $=this[W+--K],Re=1;K>0&&(Re*=256);)$+=this[W+--K]*Re;return $},d.prototype.readUInt8=function(W,K){return W=W>>>0,K||Se(W,1,this.length),this[W]},d.prototype.readUInt16LE=function(W,K){return W=W>>>0,K||Se(W,2,this.length),this[W]|this[W+1]<<8},d.prototype.readUInt16BE=function(W,K){return W=W>>>0,K||Se(W,2,this.length),this[W]<<8|this[W+1]},d.prototype.readUInt32LE=function(W,K){return W=W>>>0,K||Se(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+this[W+3]*16777216},d.prototype.readUInt32BE=function(W,K){return W=W>>>0,K||Se(W,4,this.length),this[W]*16777216+(this[W+1]<<16|this[W+2]<<8|this[W+3])},d.prototype.readIntLE=function(W,K,j){W=W>>>0,K=K>>>0,j||Se(W,K,this.length);for(var $=this[W],Re=1,Ie=0;++Ie<K&&(Re*=256);)$+=this[W+Ie]*Re;return Re*=128,$>=Re&&($-=Math.pow(2,8*K)),$},d.prototype.readIntBE=function(W,K,j){W=W>>>0,K=K>>>0,j||Se(W,K,this.length);for(var $=K,Re=1,Ie=this[W+--$];$>0&&(Re*=256);)Ie+=this[W+--$]*Re;return Re*=128,Ie>=Re&&(Ie-=Math.pow(2,8*K)),Ie},d.prototype.readInt8=function(W,K){return W=W>>>0,K||Se(W,1,this.length),this[W]&128?(255-this[W]+1)*-1:this[W]},d.prototype.readInt16LE=function(W,K){W=W>>>0,K||Se(W,2,this.length);var j=this[W]|this[W+1]<<8;return j&32768?j|4294901760:j},d.prototype.readInt16BE=function(W,K){W=W>>>0,K||Se(W,2,this.length);var j=this[W+1]|this[W]<<8;return j&32768?j|4294901760:j},d.prototype.readInt32LE=function(W,K){return W=W>>>0,K||Se(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},d.prototype.readInt32BE=function(W,K){return W=W>>>0,K||Se(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},d.prototype.readFloatLE=function(W,K){return W=W>>>0,K||Se(W,4,this.length),o.read(this,W,!0,23,4)},d.prototype.readFloatBE=function(W,K){return W=W>>>0,K||Se(W,4,this.length),o.read(this,W,!1,23,4)},d.prototype.readDoubleLE=function(W,K){return W=W>>>0,K||Se(W,8,this.length),o.read(this,W,!0,52,8)},d.prototype.readDoubleBE=function(W,K){return W=W>>>0,K||Se(W,8,this.length),o.read(this,W,!1,52,8)};function Ee(ie,W,K,j,$,Re){if(!d.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(W>$||W<Re)throw new RangeError('"value" argument is out of bounds');if(K+j>ie.length)throw new RangeError("Index out of range")}d.prototype.writeUIntLE=function(W,K,j,$){if(W=+W,K=K>>>0,j=j>>>0,!$){var Re=Math.pow(2,8*j)-1;Ee(this,W,K,j,Re,0)}var Ie=1,ne=0;for(this[K]=W&255;++ne<j&&(Ie*=256);)this[K+ne]=W/Ie&255;return K+j},d.prototype.writeUIntBE=function(W,K,j,$){if(W=+W,K=K>>>0,j=j>>>0,!$){var Re=Math.pow(2,8*j)-1;Ee(this,W,K,j,Re,0)}var Ie=j-1,ne=1;for(this[K+Ie]=W&255;--Ie>=0&&(ne*=256);)this[K+Ie]=W/ne&255;return K+j},d.prototype.writeUInt8=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,1,255,0),this[K]=W&255,K+1},d.prototype.writeUInt16LE=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,2,65535,0),this[K]=W&255,this[K+1]=W>>>8,K+2},d.prototype.writeUInt16BE=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,2,65535,0),this[K]=W>>>8,this[K+1]=W&255,K+2},d.prototype.writeUInt32LE=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,4,4294967295,0),this[K+3]=W>>>24,this[K+2]=W>>>16,this[K+1]=W>>>8,this[K]=W&255,K+4},d.prototype.writeUInt32BE=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,4,4294967295,0),this[K]=W>>>24,this[K+1]=W>>>16,this[K+2]=W>>>8,this[K+3]=W&255,K+4},d.prototype.writeIntLE=function(W,K,j,$){if(W=+W,K=K>>>0,!$){var Re=Math.pow(2,8*j-1);Ee(this,W,K,j,Re-1,-Re)}var Ie=0,ne=1,H=0;for(this[K]=W&255;++Ie<j&&(ne*=256);)W<0&&H===0&&this[K+Ie-1]!==0&&(H=1),this[K+Ie]=(W/ne>>0)-H&255;return K+j},d.prototype.writeIntBE=function(W,K,j,$){if(W=+W,K=K>>>0,!$){var Re=Math.pow(2,8*j-1);Ee(this,W,K,j,Re-1,-Re)}var Ie=j-1,ne=1,H=0;for(this[K+Ie]=W&255;--Ie>=0&&(ne*=256);)W<0&&H===0&&this[K+Ie+1]!==0&&(H=1),this[K+Ie]=(W/ne>>0)-H&255;return K+j},d.prototype.writeInt8=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,1,127,-128),W<0&&(W=255+W+1),this[K]=W&255,K+1},d.prototype.writeInt16LE=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,2,32767,-32768),this[K]=W&255,this[K+1]=W>>>8,K+2},d.prototype.writeInt16BE=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,2,32767,-32768),this[K]=W>>>8,this[K+1]=W&255,K+2},d.prototype.writeInt32LE=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,4,2147483647,-2147483648),this[K]=W&255,this[K+1]=W>>>8,this[K+2]=W>>>16,this[K+3]=W>>>24,K+4},d.prototype.writeInt32BE=function(W,K,j){return W=+W,K=K>>>0,j||Ee(this,W,K,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[K]=W>>>24,this[K+1]=W>>>16,this[K+2]=W>>>8,this[K+3]=W&255,K+4};function re(ie,W,K,j,$,Re){if(K+j>ie.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function ge(ie,W,K,j,$){return W=+W,K=K>>>0,$||re(ie,W,K,4),o.write(ie,W,K,j,23,4),K+4}d.prototype.writeFloatLE=function(W,K,j){return ge(this,W,K,!0,j)},d.prototype.writeFloatBE=function(W,K,j){return ge(this,W,K,!1,j)};function Ae(ie,W,K,j,$){return W=+W,K=K>>>0,$||re(ie,W,K,8),o.write(ie,W,K,j,52,8),K+8}d.prototype.writeDoubleLE=function(W,K,j){return Ae(this,W,K,!0,j)},d.prototype.writeDoubleBE=function(W,K,j){return Ae(this,W,K,!1,j)},d.prototype.copy=function(W,K,j,$){if(!d.isBuffer(W))throw new TypeError("argument should be a Buffer");if(j||(j=0),!$&&$!==0&&($=this.length),K>=W.length&&(K=W.length),K||(K=0),$>0&&$<j&&($=j),$===j||W.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),W.length-K<$-j&&($=W.length-K+j);var Re=$-j;if(this===W&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(K,j,$);else if(this===W&&j<K&&K<$)for(var Ie=Re-1;Ie>=0;--Ie)W[Ie+K]=this[Ie+j];else Uint8Array.prototype.set.call(W,this.subarray(j,$),K);return Re},d.prototype.fill=function(W,K,j,$){if(typeof W=="string"){if(typeof K=="string"?($=K,K=0,j=this.length):typeof j=="string"&&($=j,j=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!d.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(W.length===1){var Re=W.charCodeAt(0);($==="utf8"&&Re<128||$==="latin1")&&(W=Re)}}else typeof W=="number"&&(W=W&255);if(K<0||this.length<K||this.length<j)throw new RangeError("Out of range index");if(j<=K)return this;K=K>>>0,j=j===void 0?this.length:j>>>0,W||(W=0);var Ie;if(typeof W=="number")for(Ie=K;Ie<j;++Ie)this[Ie]=W;else{var ne=d.isBuffer(W)?W:d.from(W,$),H=ne.length;if(H===0)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(Ie=0;Ie<j-K;++Ie)this[Ie+K]=ne[Ie%H]}return this};var Pe=/[^+/0-9A-Za-z-_]/g;function We(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(Pe,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function it(ie){return ie<16?"0"+ie.toString(16):ie.toString(16)}function te(ie,W){W=W||1/0;for(var K,j=ie.length,$=null,Re=[],Ie=0;Ie<j;++Ie){if(K=ie.charCodeAt(Ie),K>55295&&K<57344){if(!$){if(K>56319){(W-=3)>-1&&Re.push(239,191,189);continue}else if(Ie+1===j){(W-=3)>-1&&Re.push(239,191,189);continue}$=K;continue}if(K<56320){(W-=3)>-1&&Re.push(239,191,189),$=K;continue}K=($-55296<<10|K-56320)+65536}else $&&(W-=3)>-1&&Re.push(239,191,189);if($=null,K<128){if((W-=1)<0)break;Re.push(K)}else if(K<2048){if((W-=2)<0)break;Re.push(K>>6|192,K&63|128)}else if(K<65536){if((W-=3)<0)break;Re.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if((W-=4)<0)break;Re.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return Re}function xe(ie){for(var W=[],K=0;K<ie.length;++K)W.push(ie.charCodeAt(K)&255);return W}function De(ie,W){for(var K,j,$,Re=[],Ie=0;Ie<ie.length&&!((W-=2)<0);++Ie)K=ie.charCodeAt(Ie),j=K>>8,$=K%256,Re.push($),Re.push(j);return Re}function He(ie){return s.toByteArray(We(ie))}function Ce(ie,W,K,j){for(var $=0;$<j&&!($+K>=W.length||$>=ie.length);++$)W[$+K]=ie[$];return $}function ce(ie,W){return ie instanceof W||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===W.name}function pe(ie){return ie!==ie}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":28,buffer:32,ieee754:45}],33:[function(t,i,r){var a=t("get-intrinsic"),s=t("./"),o=s(a("String.prototype.indexOf"));i.exports=function(f,p){var d=a(f,!!p);return typeof d=="function"&&o(f,".prototype.")>-1?s(d):d}},{"./":34,"get-intrinsic":39}],34:[function(t,i,r){var a=t("function-bind"),s=t("get-intrinsic"),o=s("%Function.prototype.apply%"),c=s("%Function.prototype.call%"),f=s("%Reflect.apply%",!0)||a.call(c,o),p=s("%Object.getOwnPropertyDescriptor%",!0),d=s("%Object.defineProperty%",!0),m=s("%Math.max%");if(d)try{d({},"a",{value:1})}catch{d=null}i.exports=function(b){var S=f(a,c,arguments);if(p&&d){var x=p(S,"length");x.configurable&&d(S,"length",{value:1+m(0,b.length-(arguments.length-1))})}return S};var v=function(){return f(a,o,arguments)};d?d(i.exports,"apply",{value:v}):i.exports.apply=v},{"function-bind":38,"get-intrinsic":39}],35:[function(t,i,r){var a=typeof Reflect=="object"?Reflect:null,s=a&&typeof a.apply=="function"?a.apply:function(L,Y,ee){return Function.prototype.apply.call(L,Y,ee)},o;a&&typeof a.ownKeys=="function"?o=a.ownKeys:Object.getOwnPropertySymbols?o=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:o=function(L){return Object.getOwnPropertyNames(L)};function c(N){console&&console.warn&&console.warn(N)}var f=Number.isNaN||function(L){return L!==L};function p(){p.init.call(this)}i.exports=p,i.exports.once=O,p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var d=10;function m(N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(N){if(typeof N!="number"||N<0||f(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");d=N}}),p.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||f(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function v(N){return N._maxListeners===void 0?p.defaultMaxListeners:N._maxListeners}p.prototype.getMaxListeners=function(){return v(this)},p.prototype.emit=function(L){for(var Y=[],ee=1;ee<arguments.length;ee++)Y.push(arguments[ee]);var se=L==="error",he=this._events;if(he!==void 0)se=se&&he.error===void 0;else if(!se)return!1;if(se){var de;if(Y.length>0&&(de=Y[0]),de instanceof Error)throw de;var P=new Error("Unhandled error."+(de?" ("+de.message+")":""));throw P.context=de,P}var B=he[L];if(B===void 0)return!1;if(typeof B=="function")s(B,this,Y);else for(var V=B.length,ae=M(B,V),ee=0;ee<V;++ee)s(ae[ee],this,Y);return!0};function _(N,L,Y,ee){var se,he,de;if(m(Y),he=N._events,he===void 0?(he=N._events=Object.create(null),N._eventsCount=0):(he.newListener!==void 0&&(N.emit("newListener",L,Y.listener?Y.listener:Y),he=N._events),de=he[L]),de===void 0)de=he[L]=Y,++N._eventsCount;else if(typeof de=="function"?de=he[L]=ee?[Y,de]:[de,Y]:ee?de.unshift(Y):de.push(Y),se=v(N),se>0&&de.length>se&&!de.warned){de.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+de.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=N,P.type=L,P.count=de.length,c(P)}return N}p.prototype.addListener=function(L,Y){return _(this,L,Y,!1)},p.prototype.on=p.prototype.addListener,p.prototype.prependListener=function(L,Y){return _(this,L,Y,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(N,L,Y){var ee={fired:!1,wrapFn:void 0,target:N,type:L,listener:Y},se=b.bind(ee);return se.listener=Y,ee.wrapFn=se,se}p.prototype.once=function(L,Y){return m(Y),this.on(L,S(this,L,Y)),this},p.prototype.prependOnceListener=function(L,Y){return m(Y),this.prependListener(L,S(this,L,Y)),this},p.prototype.removeListener=function(L,Y){var ee,se,he,de,P;if(m(Y),se=this._events,se===void 0)return this;if(ee=se[L],ee===void 0)return this;if(ee===Y||ee.listener===Y)--this._eventsCount===0?this._events=Object.create(null):(delete se[L],se.removeListener&&this.emit("removeListener",L,ee.listener||Y));else if(typeof ee!="function"){for(he=-1,de=ee.length-1;de>=0;de--)if(ee[de]===Y||ee[de].listener===Y){P=ee[de].listener,he=de;break}if(he<0)return this;he===0?ee.shift():A(ee,he),ee.length===1&&(se[L]=ee[0]),se.removeListener!==void 0&&this.emit("removeListener",L,P||Y)}return this},p.prototype.off=p.prototype.removeListener,p.prototype.removeAllListeners=function(L){var Y,ee,se;if(ee=this._events,ee===void 0)return this;if(ee.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ee[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ee[L]),this;if(arguments.length===0){var he=Object.keys(ee),de;for(se=0;se<he.length;++se)de=he[se],de!=="removeListener"&&this.removeAllListeners(de);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Y=ee[L],typeof Y=="function")this.removeListener(L,Y);else if(Y!==void 0)for(se=Y.length-1;se>=0;se--)this.removeListener(L,Y[se]);return this};function x(N,L,Y){var ee=N._events;if(ee===void 0)return[];var se=ee[L];return se===void 0?[]:typeof se=="function"?Y?[se.listener||se]:[se]:Y?D(se):M(se,se.length)}p.prototype.listeners=function(L){return x(this,L,!0)},p.prototype.rawListeners=function(L){return x(this,L,!1)},p.listenerCount=function(N,L){return typeof N.listenerCount=="function"?N.listenerCount(L):T.call(N,L)},p.prototype.listenerCount=T;function T(N){var L=this._events;if(L!==void 0){var Y=L[N];if(typeof Y=="function")return 1;if(Y!==void 0)return Y.length}return 0}p.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function M(N,L){for(var Y=new Array(L),ee=0;ee<L;++ee)Y[ee]=N[ee];return Y}function A(N,L){for(;L+1<N.length;L++)N[L]=N[L+1];N.pop()}function D(N){for(var L=new Array(N.length),Y=0;Y<L.length;++Y)L[Y]=N[Y].listener||N[Y];return L}function O(N,L){return new Promise(function(Y,ee){function se(de){N.removeListener(L,he),ee(de)}function he(){typeof N.removeListener=="function"&&N.removeListener("error",se),Y([].slice.call(arguments))}U(N,L,he,{once:!0}),L!=="error"&&I(N,se,{once:!0})})}function I(N,L,Y){typeof N.on=="function"&&U(N,"error",L,Y)}function U(N,L,Y,ee){if(typeof N.on=="function")ee.once?N.once(L,Y):N.on(L,Y);else if(typeof N.addEventListener=="function")N.addEventListener(L,function se(he){ee.once&&N.removeEventListener(L,se),Y(he)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N)}},{}],36:[function(t,i,r){var a=t("is-callable"),s=Object.prototype.toString,o=Object.prototype.hasOwnProperty,c=function(v,_,b){for(var S=0,x=v.length;S<x;S++)o.call(v,S)&&(b==null?_(v[S],S,v):_.call(b,v[S],S,v))},f=function(v,_,b){for(var S=0,x=v.length;S<x;S++)b==null?_(v.charAt(S),S,v):_.call(b,v.charAt(S),S,v)},p=function(v,_,b){for(var S in v)o.call(v,S)&&(b==null?_(v[S],S,v):_.call(b,v[S],S,v))},d=function(v,_,b){if(!a(_))throw new TypeError("iterator must be a function");var S;arguments.length>=3&&(S=b),s.call(v)==="[object Array]"?c(v,_,S):typeof v=="string"?f(v,_,S):p(v,_,S)};i.exports=d},{"is-callable":48}],37:[function(t,i,r){var a="Function.prototype.bind called on incompatible ",s=Array.prototype.slice,o=Object.prototype.toString,c="[object Function]";i.exports=function(p){var d=this;if(typeof d!="function"||o.call(d)!==c)throw new TypeError(a+d);for(var m=s.call(arguments,1),v,_=function(){if(this instanceof v){var M=d.apply(this,m.concat(s.call(arguments)));return Object(M)===M?M:this}else return d.apply(p,m.concat(s.call(arguments)))},b=Math.max(0,d.length-m.length),S=[],x=0;x<b;x++)S.push("$"+x);if(v=Function("binder","return function ("+S.join(",")+"){ return binder.apply(this,arguments); }")(_),d.prototype){var T=function(){};T.prototype=d.prototype,v.prototype=new T,T.prototype=null}return v}},{}],38:[function(t,i,r){var a=t("./implementation");i.exports=Function.prototype.bind||a},{"./implementation":37}],39:[function(t,i,r){var a,s=SyntaxError,o=Function,c=TypeError,f=function(P){try{return o('"use strict"; return ('+P+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var d=function(){throw new c},m=p?(function(){try{return arguments.callee,d}catch{try{return p(arguments,"callee").get}catch{return d}}})():d,v=t("has-symbols")(),_=Object.getPrototypeOf||function(P){return P.__proto__},b={},S=typeof Uint8Array>"u"?a:_(Uint8Array),x={"%AggregateError%":typeof AggregateError>"u"?a:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?a:ArrayBuffer,"%ArrayIteratorPrototype%":v?_([][Symbol.iterator]()):a,"%AsyncFromSyncIteratorPrototype%":a,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?a:Atomics,"%BigInt%":typeof BigInt>"u"?a:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?a:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?a:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?a:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?a:Float32Array,"%Float64Array%":typeof Float64Array>"u"?a:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?a:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?a:Int8Array,"%Int16Array%":typeof Int16Array>"u"?a:Int16Array,"%Int32Array%":typeof Int32Array>"u"?a:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v?_(_([][Symbol.iterator]())):a,"%JSON%":typeof JSON=="object"?JSON:a,"%Map%":typeof Map>"u"?a:Map,"%MapIteratorPrototype%":typeof Map>"u"||!v?a:_(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?a:Promise,"%Proxy%":typeof Proxy>"u"?a:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?a:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?a:Set,"%SetIteratorPrototype%":typeof Set>"u"||!v?a:_(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?a:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v?_(""[Symbol.iterator]()):a,"%Symbol%":v?Symbol:a,"%SyntaxError%":s,"%ThrowTypeError%":m,"%TypedArray%":S,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?a:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?a:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?a:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?a:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?a:WeakMap,"%WeakRef%":typeof WeakRef>"u"?a:WeakRef,"%WeakSet%":typeof WeakSet>"u"?a:WeakSet};try{null.error}catch(P){var T=_(_(P));x["%Error.prototype%"]=T}var M=function P(B){var V;if(B==="%AsyncFunction%")V=f("async function () {}");else if(B==="%GeneratorFunction%")V=f("function* () {}");else if(B==="%AsyncGeneratorFunction%")V=f("async function* () {}");else if(B==="%AsyncGenerator%"){var ae=P("%AsyncGeneratorFunction%");ae&&(V=ae.prototype)}else if(B==="%AsyncIteratorPrototype%"){var X=P("%AsyncGenerator%");X&&(V=_(X.prototype))}return x[B]=V,V},A={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},D=t("function-bind"),O=t("has"),I=D.call(Function.call,Array.prototype.concat),U=D.call(Function.apply,Array.prototype.splice),N=D.call(Function.call,String.prototype.replace),L=D.call(Function.call,String.prototype.slice),Y=D.call(Function.call,RegExp.prototype.exec),ee=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,se=/\\(\\)?/g,he=function(B){var V=L(B,0,1),ae=L(B,-1);if(V==="%"&&ae!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(ae==="%"&&V!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var X=[];return N(B,ee,function(oe,me,J,le){X[X.length]=J?N(le,se,"$1"):me||oe}),X},de=function(B,V){var ae=B,X;if(O(A,ae)&&(X=A[ae],ae="%"+X[0]+"%"),O(x,ae)){var oe=x[ae];if(oe===b&&(oe=M(ae)),typeof oe>"u"&&!V)throw new c("intrinsic "+B+" exists, but is not available. Please file an issue!");return{alias:X,name:ae,value:oe}}throw new s("intrinsic "+B+" does not exist!")};i.exports=function(B,V){if(typeof B!="string"||B.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof V!="boolean")throw new c('"allowMissing" argument must be a boolean');if(Y(/^%?[^%]*%?$/,B)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ae=he(B),X=ae.length>0?ae[0]:"",oe=de("%"+X+"%",V),me=oe.name,J=oe.value,le=!1,Se=oe.alias;Se&&(X=Se[0],U(ae,I([0,1],Se)));for(var Ee=1,re=!0;Ee<ae.length;Ee+=1){var ge=ae[Ee],Ae=L(ge,0,1),Pe=L(ge,-1);if((Ae==='"'||Ae==="'"||Ae==="`"||Pe==='"'||Pe==="'"||Pe==="`")&&Ae!==Pe)throw new s("property names with quotes must have matching quotes");if((ge==="constructor"||!re)&&(le=!0),X+="."+ge,me="%"+X+"%",O(x,me))J=x[me];else if(J!=null){if(!(ge in J)){if(!V)throw new c("base intrinsic for "+B+" exists, but the property is not available.");return}if(p&&Ee+1>=ae.length){var We=p(J,ge);re=!!We,re&&"get"in We&&!("originalValue"in We.get)?J=We.get:J=J[ge]}else re=O(J,ge),J=J[ge];re&&!le&&(x[me]=J)}}return J}},{"function-bind":38,has:44,"has-symbols":41}],40:[function(t,i,r){var a=t("get-intrinsic"),s=a("%Object.getOwnPropertyDescriptor%",!0);if(s)try{s([],"length")}catch{s=null}i.exports=s},{"get-intrinsic":39}],41:[function(t,i,r){var a=typeof Symbol<"u"&&Symbol,s=t("./shams");i.exports=function(){return typeof a!="function"||typeof Symbol!="function"||typeof a("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:s()}},{"./shams":42}],42:[function(t,i,r){i.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var s={},o=Symbol("test"),c=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(c)!=="[object Symbol]")return!1;var f=42;s[o]=f;for(o in s)return!1;if(typeof Object.keys=="function"&&Object.keys(s).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(s).length!==0)return!1;var p=Object.getOwnPropertySymbols(s);if(p.length!==1||p[0]!==o||!Object.prototype.propertyIsEnumerable.call(s,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(s,o);if(d.value!==f||d.enumerable!==!0)return!1}return!0}},{}],43:[function(t,i,r){var a=t("has-symbols/shams");i.exports=function(){return a()&&!!Symbol.toStringTag}},{"has-symbols/shams":42}],44:[function(t,i,r){var a=t("function-bind");i.exports=a.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":38}],45:[function(t,i,r){r.read=function(a,s,o,c,f){var p,d,m=f*8-c-1,v=(1<<m)-1,_=v>>1,b=-7,S=o?f-1:0,x=o?-1:1,T=a[s+S];for(S+=x,p=T&(1<<-b)-1,T>>=-b,b+=m;b>0;p=p*256+a[s+S],S+=x,b-=8);for(d=p&(1<<-b)-1,p>>=-b,b+=c;b>0;d=d*256+a[s+S],S+=x,b-=8);if(p===0)p=1-_;else{if(p===v)return d?NaN:(T?-1:1)*(1/0);d=d+Math.pow(2,c),p=p-_}return(T?-1:1)*d*Math.pow(2,p-c)},r.write=function(a,s,o,c,f,p){var d,m,v,_=p*8-f-1,b=(1<<_)-1,S=b>>1,x=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=c?0:p-1,M=c?1:-1,A=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(m=isNaN(s)?1:0,d=b):(d=Math.floor(Math.log(s)/Math.LN2),s*(v=Math.pow(2,-d))<1&&(d--,v*=2),d+S>=1?s+=x/v:s+=x*Math.pow(2,1-S),s*v>=2&&(d++,v/=2),d+S>=b?(m=0,d=b):d+S>=1?(m=(s*v-1)*Math.pow(2,f),d=d+S):(m=s*Math.pow(2,S-1)*Math.pow(2,f),d=0));f>=8;a[o+T]=m&255,T+=M,m/=256,f-=8);for(d=d<<f|m,_+=f;_>0;a[o+T]=d&255,T+=M,d/=256,_-=8);a[o+T-M]|=A*128}},{}],46:[function(t,i,r){typeof Object.create=="function"?i.exports=function(s,o){o&&(s.super_=o,s.prototype=Object.create(o.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(s,o){if(o){s.super_=o;var c=function(){};c.prototype=o.prototype,s.prototype=new c,s.prototype.constructor=s}}},{}],47:[function(t,i,r){var a=t("has-tostringtag/shams")(),s=t("call-bind/callBound"),o=s("Object.prototype.toString"),c=function(m){return a&&m&&typeof m=="object"&&Symbol.toStringTag in m?!1:o(m)==="[object Arguments]"},f=function(m){return c(m)?!0:m!==null&&typeof m=="object"&&typeof m.length=="number"&&m.length>=0&&o(m)!=="[object Array]"&&o(m.callee)==="[object Function]"},p=(function(){return c(arguments)})();c.isLegacyArguments=f,i.exports=p?c:f},{"call-bind/callBound":33,"has-tostringtag/shams":43}],48:[function(t,i,r){var a=Function.prototype.toString,s=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,o,c;if(typeof s=="function"&&typeof Object.defineProperty=="function")try{o=Object.defineProperty({},"length",{get:function(){throw c}}),c={},s(function(){throw 42},null,o)}catch(I){I!==c&&(s=null)}else s=null;var f=/^\s*class\b/,p=function(U){try{var N=a.call(U);return f.test(N)}catch{return!1}},d=function(U){try{return p(U)?!1:(a.call(U),!0)}catch{return!1}},m=Object.prototype.toString,v="[object Object]",_="[object Function]",b="[object GeneratorFunction]",S="[object HTMLAllCollection]",x="[object HTML document.all class]",T="[object HTMLCollection]",M=typeof Symbol=="function"&&!!Symbol.toStringTag,A=!(0 in[,]),D=function(){return!1};if(typeof document=="object"){var O=document.all;m.call(O)===m.call(document.all)&&(D=function(U){if((A||!U)&&(typeof U>"u"||typeof U=="object"))try{var N=m.call(U);return(N===S||N===x||N===T||N===v)&&U("")==null}catch{}return!1})}i.exports=s?function(U){if(D(U))return!0;if(!U||typeof U!="function"&&typeof U!="object")return!1;try{s(U,null,o)}catch(N){if(N!==c)return!1}return!p(U)&&d(U)}:function(U){if(D(U))return!0;if(!U||typeof U!="function"&&typeof U!="object")return!1;if(M)return d(U);if(p(U))return!1;var N=m.call(U);return N!==_&&N!==b&&!/^\[object HTML/.test(N)?!1:d(U)}},{}],49:[function(t,i,r){var a=Object.prototype.toString,s=Function.prototype.toString,o=/^\s*(?:function)?\*/,c=t("has-tostringtag/shams")(),f=Object.getPrototypeOf,p=function(){if(!c)return!1;try{return Function("return function*() {}")()}catch{}},d;i.exports=function(v){if(typeof v!="function")return!1;if(o.test(s.call(v)))return!0;if(!c){var _=a.call(v);return _==="[object GeneratorFunction]"}if(!f)return!1;if(typeof d>"u"){var b=p();d=b?f(b):!1}return f(v)===d}},{"has-tostringtag/shams":43}],50:[function(t,i,r){(function(a){(function(){var s=t("for-each"),o=t("available-typed-arrays"),c=t("call-bind/callBound"),f=c("Object.prototype.toString"),p=t("has-tostringtag/shams")(),d=t("gopd"),m=typeof globalThis>"u"?a:globalThis,v=o(),_=c("Array.prototype.indexOf",!0)||function(A,D){for(var O=0;O<A.length;O+=1)if(A[O]===D)return O;return-1},b=c("String.prototype.slice"),S={},x=Object.getPrototypeOf;p&&d&&x&&s(v,function(M){var A=new m[M];if(Symbol.toStringTag in A){var D=x(A),O=d(D,Symbol.toStringTag);if(!O){var I=x(D);O=d(I,Symbol.toStringTag)}S[M]=O.get}});var T=function(A){var D=!1;return s(S,function(O,I){if(!D)try{D=O.call(A)===I}catch{}}),D};i.exports=function(A){if(!A||typeof A!="object")return!1;if(!p||!(Symbol.toStringTag in A)){var D=b(f(A),8,-1);return _(v,D)>-1}return d?T(A):!1}}).call(this)}).call(this,typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":27,"call-bind/callBound":33,"for-each":36,gopd:40,"has-tostringtag/shams":43}],51:[function(t,i,r){var a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function c(p){if(p==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}function f(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de",Object.getOwnPropertyNames(p)[0]==="5")return!1;for(var d={},m=0;m<10;m++)d["_"+String.fromCharCode(m)]=m;var v=Object.getOwnPropertyNames(d).map(function(b){return d[b]});if(v.join("")!=="0123456789")return!1;var _={};return"abcdefghijklmnopqrst".split("").forEach(function(b){_[b]=b}),Object.keys(Object.assign({},_)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=f()?Object.assign:function(p,d){for(var m,v=c(p),_,b=1;b<arguments.length;b++){m=Object(arguments[b]);for(var S in m)s.call(m,S)&&(v[S]=m[S]);if(a){_=a(m);for(var x=0;x<_.length;x++)o.call(m,_[x])&&(v[_[x]]=m[_[x]])}}return v}},{}],52:[function(t,i,r){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function s(f,p){return Object.prototype.hasOwnProperty.call(f,p)}r.assign=function(f){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var d=p.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)s(d,m)&&(f[m]=d[m])}}return f},r.shrinkBuf=function(f,p){return f.length===p?f:f.subarray?f.subarray(0,p):(f.length=p,f)};var o={arraySet:function(f,p,d,m,v){if(p.subarray&&f.subarray){f.set(p.subarray(d,d+m),v);return}for(var _=0;_<m;_++)f[v+_]=p[d+_]},flattenChunks:function(f){var p,d,m,v,_,b;for(m=0,p=0,d=f.length;p<d;p++)m+=f[p].length;for(b=new Uint8Array(m),v=0,p=0,d=f.length;p<d;p++)_=f[p],b.set(_,v),v+=_.length;return b}},c={arraySet:function(f,p,d,m,v){for(var _=0;_<m;_++)f[v+_]=p[d+_]},flattenChunks:function(f){return[].concat.apply([],f)}};r.setTyped=function(f){f?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,c))},r.setTyped(a)},{}],53:[function(t,i,r){function a(s,o,c,f){for(var p=s&65535|0,d=s>>>16&65535|0,m=0;c!==0;){m=c>2e3?2e3:c,c-=m;do p=p+o[f++]|0,d=d+p|0;while(--m);p%=65521,d%=65521}return p|d<<16|0}i.exports=a},{}],54:[function(t,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],55:[function(t,i,r){function a(){for(var c,f=[],p=0;p<256;p++){c=p;for(var d=0;d<8;d++)c=c&1?3988292384^c>>>1:c>>>1;f[p]=c}return f}var s=a();function o(c,f,p,d){var m=s,v=d+p;c^=-1;for(var _=d;_<v;_++)c=c>>>8^m[(c^f[_])&255];return c^-1}i.exports=o},{}],56:[function(t,i,r){var a=t("../utils/common"),s=t("./trees"),o=t("./adler32"),c=t("./crc32"),f=t("./messages"),p=0,d=1,m=3,v=4,_=5,b=0,S=1,x=-2,T=-3,M=-5,A=-1,D=1,O=2,I=3,U=4,N=0,L=2,Y=8,ee=9,se=15,he=8,de=29,P=256,B=P+1+de,V=30,ae=19,X=2*B+1,oe=15,me=3,J=258,le=J+me+1,Se=32,Ee=42,re=69,ge=73,Ae=91,Pe=103,We=113,it=666,te=1,xe=2,De=3,He=4,Ce=3;function ce(G,Ge){return G.msg=f[Ge],Ge}function pe(G){return(G<<1)-(G>4?9:0)}function ie(G){for(var Ge=G.length;--Ge>=0;)G[Ge]=0}function W(G){var Ge=G.state,$e=Ge.pending;$e>G.avail_out&&($e=G.avail_out),$e!==0&&(a.arraySet(G.output,Ge.pending_buf,Ge.pending_out,$e,G.next_out),G.next_out+=$e,Ge.pending_out+=$e,G.total_out+=$e,G.avail_out-=$e,Ge.pending-=$e,Ge.pending===0&&(Ge.pending_out=0))}function K(G,Ge){s._tr_flush_block(G,G.block_start>=0?G.block_start:-1,G.strstart-G.block_start,Ge),G.block_start=G.strstart,W(G.strm)}function j(G,Ge){G.pending_buf[G.pending++]=Ge}function $(G,Ge){G.pending_buf[G.pending++]=Ge>>>8&255,G.pending_buf[G.pending++]=Ge&255}function Re(G,Ge,$e,be){var ze=G.avail_in;return ze>be&&(ze=be),ze===0?0:(G.avail_in-=ze,a.arraySet(Ge,G.input,G.next_in,ze,$e),G.state.wrap===1?G.adler=o(G.adler,Ge,ze,$e):G.state.wrap===2&&(G.adler=c(G.adler,Ge,ze,$e)),G.next_in+=ze,G.total_in+=ze,ze)}function Ie(G,Ge){var $e=G.max_chain_length,be=G.strstart,ze,Qe,Ot=G.prev_length,xt=G.nice_match,Mt=G.strstart>G.w_size-le?G.strstart-(G.w_size-le):0,$t=G.window,Ii=G.w_mask,In=G.prev,rn=G.strstart+J,jn=$t[be+Ot-1],dn=$t[be+Ot];G.prev_length>=G.good_match&&($e>>=2),xt>G.lookahead&&(xt=G.lookahead);do if(ze=Ge,!($t[ze+Ot]!==dn||$t[ze+Ot-1]!==jn||$t[ze]!==$t[be]||$t[++ze]!==$t[be+1])){be+=2,ze++;do;while($t[++be]===$t[++ze]&&$t[++be]===$t[++ze]&&$t[++be]===$t[++ze]&&$t[++be]===$t[++ze]&&$t[++be]===$t[++ze]&&$t[++be]===$t[++ze]&&$t[++be]===$t[++ze]&&$t[++be]===$t[++ze]&&be<rn);if(Qe=J-(rn-be),be=rn-J,Qe>Ot){if(G.match_start=Ge,Ot=Qe,Qe>=xt)break;jn=$t[be+Ot-1],dn=$t[be+Ot]}}while((Ge=In[Ge&Ii])>Mt&&--$e!==0);return Ot<=G.lookahead?Ot:G.lookahead}function ne(G){var Ge=G.w_size,$e,be,ze,Qe,Ot;do{if(Qe=G.window_size-G.lookahead-G.strstart,G.strstart>=Ge+(Ge-le)){a.arraySet(G.window,G.window,Ge,Ge,0),G.match_start-=Ge,G.strstart-=Ge,G.block_start-=Ge,be=G.hash_size,$e=be;do ze=G.head[--$e],G.head[$e]=ze>=Ge?ze-Ge:0;while(--be);be=Ge,$e=be;do ze=G.prev[--$e],G.prev[$e]=ze>=Ge?ze-Ge:0;while(--be);Qe+=Ge}if(G.strm.avail_in===0)break;if(be=Re(G.strm,G.window,G.strstart+G.lookahead,Qe),G.lookahead+=be,G.lookahead+G.insert>=me)for(Ot=G.strstart-G.insert,G.ins_h=G.window[Ot],G.ins_h=(G.ins_h<<G.hash_shift^G.window[Ot+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[Ot+me-1])&G.hash_mask,G.prev[Ot&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=Ot,Ot++,G.insert--,!(G.lookahead+G.insert<me)););}while(G.lookahead<le&&G.strm.avail_in!==0)}function H(G,Ge){var $e=65535;for($e>G.pending_buf_size-5&&($e=G.pending_buf_size-5);;){if(G.lookahead<=1){if(ne(G),G.lookahead===0&&Ge===p)return te;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var be=G.block_start+$e;if((G.strstart===0||G.strstart>=be)&&(G.lookahead=G.strstart-be,G.strstart=be,K(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-le&&(K(G,!1),G.strm.avail_out===0))return te}return G.insert=0,Ge===v?(K(G,!0),G.strm.avail_out===0?De:He):(G.strstart>G.block_start&&(K(G,!1),G.strm.avail_out===0),te)}function Z(G,Ge){for(var $e,be;;){if(G.lookahead<le){if(ne(G),G.lookahead<le&&Ge===p)return te;if(G.lookahead===0)break}if($e=0,G.lookahead>=me&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+me-1])&G.hash_mask,$e=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),$e!==0&&G.strstart-$e<=G.w_size-le&&(G.match_length=Ie(G,$e)),G.match_length>=me)if(be=s._tr_tally(G,G.strstart-G.match_start,G.match_length-me),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=me){G.match_length--;do G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+me-1])&G.hash_mask,$e=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart;while(--G.match_length!==0);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else be=s._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(be&&(K(G,!1),G.strm.avail_out===0))return te}return G.insert=G.strstart<me-1?G.strstart:me-1,Ge===v?(K(G,!0),G.strm.avail_out===0?De:He):G.last_lit&&(K(G,!1),G.strm.avail_out===0)?te:xe}function ye(G,Ge){for(var $e,be,ze;;){if(G.lookahead<le){if(ne(G),G.lookahead<le&&Ge===p)return te;if(G.lookahead===0)break}if($e=0,G.lookahead>=me&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+me-1])&G.hash_mask,$e=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=me-1,$e!==0&&G.prev_length<G.max_lazy_match&&G.strstart-$e<=G.w_size-le&&(G.match_length=Ie(G,$e),G.match_length<=5&&(G.strategy===D||G.match_length===me&&G.strstart-G.match_start>4096)&&(G.match_length=me-1)),G.prev_length>=me&&G.match_length<=G.prev_length){ze=G.strstart+G.lookahead-me,be=s._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-me),G.lookahead-=G.prev_length-1,G.prev_length-=2;do++G.strstart<=ze&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+me-1])&G.hash_mask,$e=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart);while(--G.prev_length!==0);if(G.match_available=0,G.match_length=me-1,G.strstart++,be&&(K(G,!1),G.strm.avail_out===0))return te}else if(G.match_available){if(be=s._tr_tally(G,0,G.window[G.strstart-1]),be&&K(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return te}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(be=s._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<me-1?G.strstart:me-1,Ge===v?(K(G,!0),G.strm.avail_out===0?De:He):G.last_lit&&(K(G,!1),G.strm.avail_out===0)?te:xe}function Oe(G,Ge){for(var $e,be,ze,Qe,Ot=G.window;;){if(G.lookahead<=J){if(ne(G),G.lookahead<=J&&Ge===p)return te;if(G.lookahead===0)break}if(G.match_length=0,G.lookahead>=me&&G.strstart>0&&(ze=G.strstart-1,be=Ot[ze],be===Ot[++ze]&&be===Ot[++ze]&&be===Ot[++ze])){Qe=G.strstart+J;do;while(be===Ot[++ze]&&be===Ot[++ze]&&be===Ot[++ze]&&be===Ot[++ze]&&be===Ot[++ze]&&be===Ot[++ze]&&be===Ot[++ze]&&be===Ot[++ze]&&ze<Qe);G.match_length=J-(Qe-ze),G.match_length>G.lookahead&&(G.match_length=G.lookahead)}if(G.match_length>=me?($e=s._tr_tally(G,1,G.match_length-me),G.lookahead-=G.match_length,G.strstart+=G.match_length,G.match_length=0):($e=s._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++),$e&&(K(G,!1),G.strm.avail_out===0))return te}return G.insert=0,Ge===v?(K(G,!0),G.strm.avail_out===0?De:He):G.last_lit&&(K(G,!1),G.strm.avail_out===0)?te:xe}function Be(G,Ge){for(var $e;;){if(G.lookahead===0&&(ne(G),G.lookahead===0)){if(Ge===p)return te;break}if(G.match_length=0,$e=s._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++,$e&&(K(G,!1),G.strm.avail_out===0))return te}return G.insert=0,Ge===v?(K(G,!0),G.strm.avail_out===0?De:He):G.last_lit&&(K(G,!1),G.strm.avail_out===0)?te:xe}function Ue(G,Ge,$e,be,ze){this.good_length=G,this.max_lazy=Ge,this.nice_length=$e,this.max_chain=be,this.func=ze}var pt;pt=[new Ue(0,0,0,0,H),new Ue(4,4,8,4,Z),new Ue(4,5,16,8,Z),new Ue(4,6,32,32,Z),new Ue(4,4,16,16,ye),new Ue(8,16,32,32,ye),new Ue(8,16,128,128,ye),new Ue(8,32,128,256,ye),new Ue(32,128,258,1024,ye),new Ue(32,258,258,4096,ye)];function St(G){G.window_size=2*G.w_size,ie(G.head),G.max_lazy_match=pt[G.level].max_lazy,G.good_match=pt[G.level].good_length,G.nice_match=pt[G.level].nice_length,G.max_chain_length=pt[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=me-1,G.match_available=0,G.ins_h=0}function _e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(X*2),this.dyn_dtree=new a.Buf16((2*V+1)*2),this.bl_tree=new a.Buf16((2*ae+1)*2),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(oe+1),this.heap=new a.Buf16(2*B+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*B+1),ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ve(G){var Ge;return!G||!G.state?ce(G,x):(G.total_in=G.total_out=0,G.data_type=L,Ge=G.state,Ge.pending=0,Ge.pending_out=0,Ge.wrap<0&&(Ge.wrap=-Ge.wrap),Ge.status=Ge.wrap?Ee:We,G.adler=Ge.wrap===2?0:1,Ge.last_flush=p,s._tr_init(Ge),b)}function nt(G){var Ge=Ve(G);return Ge===b&&St(G.state),Ge}function Le(G,Ge){return!G||!G.state||G.state.wrap!==2?x:(G.state.gzhead=Ge,b)}function Ne(G,Ge,$e,be,ze,Qe){if(!G)return x;var Ot=1;if(Ge===A&&(Ge=6),be<0?(Ot=0,be=-be):be>15&&(Ot=2,be-=16),ze<1||ze>ee||$e!==Y||be<8||be>15||Ge<0||Ge>9||Qe<0||Qe>U)return ce(G,x);be===8&&(be=9);var xt=new _e;return G.state=xt,xt.strm=G,xt.wrap=Ot,xt.gzhead=null,xt.w_bits=be,xt.w_size=1<<xt.w_bits,xt.w_mask=xt.w_size-1,xt.hash_bits=ze+7,xt.hash_size=1<<xt.hash_bits,xt.hash_mask=xt.hash_size-1,xt.hash_shift=~~((xt.hash_bits+me-1)/me),xt.window=new a.Buf8(xt.w_size*2),xt.head=new a.Buf16(xt.hash_size),xt.prev=new a.Buf16(xt.w_size),xt.lit_bufsize=1<<ze+6,xt.pending_buf_size=xt.lit_bufsize*4,xt.pending_buf=new a.Buf8(xt.pending_buf_size),xt.d_buf=1*xt.lit_bufsize,xt.l_buf=3*xt.lit_bufsize,xt.level=Ge,xt.strategy=Qe,xt.method=$e,nt(G)}function je(G,Ge){return Ne(G,Ge,Y,se,he,N)}function fe(G,Ge){var $e,be,ze,Qe;if(!G||!G.state||Ge>_||Ge<0)return G?ce(G,x):x;if(be=G.state,!G.output||!G.input&&G.avail_in!==0||be.status===it&&Ge!==v)return ce(G,G.avail_out===0?M:x);if(be.strm=G,$e=be.last_flush,be.last_flush=Ge,be.status===Ee)if(be.wrap===2)G.adler=0,j(be,31),j(be,139),j(be,8),be.gzhead?(j(be,(be.gzhead.text?1:0)+(be.gzhead.hcrc?2:0)+(be.gzhead.extra?4:0)+(be.gzhead.name?8:0)+(be.gzhead.comment?16:0)),j(be,be.gzhead.time&255),j(be,be.gzhead.time>>8&255),j(be,be.gzhead.time>>16&255),j(be,be.gzhead.time>>24&255),j(be,be.level===9?2:be.strategy>=O||be.level<2?4:0),j(be,be.gzhead.os&255),be.gzhead.extra&&be.gzhead.extra.length&&(j(be,be.gzhead.extra.length&255),j(be,be.gzhead.extra.length>>8&255)),be.gzhead.hcrc&&(G.adler=c(G.adler,be.pending_buf,be.pending,0)),be.gzindex=0,be.status=re):(j(be,0),j(be,0),j(be,0),j(be,0),j(be,0),j(be,be.level===9?2:be.strategy>=O||be.level<2?4:0),j(be,Ce),be.status=We);else{var Ot=Y+(be.w_bits-8<<4)<<8,xt=-1;be.strategy>=O||be.level<2?xt=0:be.level<6?xt=1:be.level===6?xt=2:xt=3,Ot|=xt<<6,be.strstart!==0&&(Ot|=Se),Ot+=31-Ot%31,be.status=We,$(be,Ot),be.strstart!==0&&($(be,G.adler>>>16),$(be,G.adler&65535)),G.adler=1}if(be.status===re)if(be.gzhead.extra){for(ze=be.pending;be.gzindex<(be.gzhead.extra.length&65535)&&!(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>ze&&(G.adler=c(G.adler,be.pending_buf,be.pending-ze,ze)),W(G),ze=be.pending,be.pending===be.pending_buf_size));)j(be,be.gzhead.extra[be.gzindex]&255),be.gzindex++;be.gzhead.hcrc&&be.pending>ze&&(G.adler=c(G.adler,be.pending_buf,be.pending-ze,ze)),be.gzindex===be.gzhead.extra.length&&(be.gzindex=0,be.status=ge)}else be.status=ge;if(be.status===ge)if(be.gzhead.name){ze=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>ze&&(G.adler=c(G.adler,be.pending_buf,be.pending-ze,ze)),W(G),ze=be.pending,be.pending===be.pending_buf_size)){Qe=1;break}be.gzindex<be.gzhead.name.length?Qe=be.gzhead.name.charCodeAt(be.gzindex++)&255:Qe=0,j(be,Qe)}while(Qe!==0);be.gzhead.hcrc&&be.pending>ze&&(G.adler=c(G.adler,be.pending_buf,be.pending-ze,ze)),Qe===0&&(be.gzindex=0,be.status=Ae)}else be.status=Ae;if(be.status===Ae)if(be.gzhead.comment){ze=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>ze&&(G.adler=c(G.adler,be.pending_buf,be.pending-ze,ze)),W(G),ze=be.pending,be.pending===be.pending_buf_size)){Qe=1;break}be.gzindex<be.gzhead.comment.length?Qe=be.gzhead.comment.charCodeAt(be.gzindex++)&255:Qe=0,j(be,Qe)}while(Qe!==0);be.gzhead.hcrc&&be.pending>ze&&(G.adler=c(G.adler,be.pending_buf,be.pending-ze,ze)),Qe===0&&(be.status=Pe)}else be.status=Pe;if(be.status===Pe&&(be.gzhead.hcrc?(be.pending+2>be.pending_buf_size&&W(G),be.pending+2<=be.pending_buf_size&&(j(be,G.adler&255),j(be,G.adler>>8&255),G.adler=0,be.status=We)):be.status=We),be.pending!==0){if(W(G),G.avail_out===0)return be.last_flush=-1,b}else if(G.avail_in===0&&pe(Ge)<=pe($e)&&Ge!==v)return ce(G,M);if(be.status===it&&G.avail_in!==0)return ce(G,M);if(G.avail_in!==0||be.lookahead!==0||Ge!==p&&be.status!==it){var Mt=be.strategy===O?Be(be,Ge):be.strategy===I?Oe(be,Ge):pt[be.level].func(be,Ge);if((Mt===De||Mt===He)&&(be.status=it),Mt===te||Mt===De)return G.avail_out===0&&(be.last_flush=-1),b;if(Mt===xe&&(Ge===d?s._tr_align(be):Ge!==_&&(s._tr_stored_block(be,0,0,!1),Ge===m&&(ie(be.head),be.lookahead===0&&(be.strstart=0,be.block_start=0,be.insert=0))),W(G),G.avail_out===0))return be.last_flush=-1,b}return Ge!==v?b:be.wrap<=0?S:(be.wrap===2?(j(be,G.adler&255),j(be,G.adler>>8&255),j(be,G.adler>>16&255),j(be,G.adler>>24&255),j(be,G.total_in&255),j(be,G.total_in>>8&255),j(be,G.total_in>>16&255),j(be,G.total_in>>24&255)):($(be,G.adler>>>16),$(be,G.adler&65535)),W(G),be.wrap>0&&(be.wrap=-be.wrap),be.pending!==0?b:S)}function Xe(G){var Ge;return!G||!G.state?x:(Ge=G.state.status,Ge!==Ee&&Ge!==re&&Ge!==ge&&Ge!==Ae&&Ge!==Pe&&Ge!==We&&Ge!==it?ce(G,x):(G.state=null,Ge===We?ce(G,T):b))}function Ye(G,Ge){var $e=Ge.length,be,ze,Qe,Ot,xt,Mt,$t,Ii;if(!G||!G.state||(be=G.state,Ot=be.wrap,Ot===2||Ot===1&&be.status!==Ee||be.lookahead))return x;for(Ot===1&&(G.adler=o(G.adler,Ge,$e,0)),be.wrap=0,$e>=be.w_size&&(Ot===0&&(ie(be.head),be.strstart=0,be.block_start=0,be.insert=0),Ii=new a.Buf8(be.w_size),a.arraySet(Ii,Ge,$e-be.w_size,be.w_size,0),Ge=Ii,$e=be.w_size),xt=G.avail_in,Mt=G.next_in,$t=G.input,G.avail_in=$e,G.next_in=0,G.input=Ge,ne(be);be.lookahead>=me;){ze=be.strstart,Qe=be.lookahead-(me-1);do be.ins_h=(be.ins_h<<be.hash_shift^be.window[ze+me-1])&be.hash_mask,be.prev[ze&be.w_mask]=be.head[be.ins_h],be.head[be.ins_h]=ze,ze++;while(--Qe);be.strstart=ze,be.lookahead=me-1,ne(be)}return be.strstart+=be.lookahead,be.block_start=be.strstart,be.insert=be.lookahead,be.lookahead=0,be.match_length=be.prev_length=me-1,be.match_available=0,G.next_in=Mt,G.input=$t,G.avail_in=xt,be.wrap=Ot,b}r.deflateInit=je,r.deflateInit2=Ne,r.deflateReset=nt,r.deflateResetKeep=Ve,r.deflateSetHeader=Le,r.deflate=fe,r.deflateEnd=Xe,r.deflateSetDictionary=Ye,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":52,"./adler32":53,"./crc32":55,"./messages":60,"./trees":61}],57:[function(t,i,r){var a=30,s=12;i.exports=function(c,f){var p,d,m,v,_,b,S,x,T,M,A,D,O,I,U,N,L,Y,ee,se,he,de,P,B,V;p=c.state,d=c.next_in,B=c.input,m=d+(c.avail_in-5),v=c.next_out,V=c.output,_=v-(f-c.avail_out),b=v+(c.avail_out-257),S=p.dmax,x=p.wsize,T=p.whave,M=p.wnext,A=p.window,D=p.hold,O=p.bits,I=p.lencode,U=p.distcode,N=(1<<p.lenbits)-1,L=(1<<p.distbits)-1;e:do{O<15&&(D+=B[d++]<<O,O+=8,D+=B[d++]<<O,O+=8),Y=I[D&N];t:for(;;){if(ee=Y>>>24,D>>>=ee,O-=ee,ee=Y>>>16&255,ee===0)V[v++]=Y&65535;else if(ee&16){se=Y&65535,ee&=15,ee&&(O<ee&&(D+=B[d++]<<O,O+=8),se+=D&(1<<ee)-1,D>>>=ee,O-=ee),O<15&&(D+=B[d++]<<O,O+=8,D+=B[d++]<<O,O+=8),Y=U[D&L];n:for(;;){if(ee=Y>>>24,D>>>=ee,O-=ee,ee=Y>>>16&255,ee&16){if(he=Y&65535,ee&=15,O<ee&&(D+=B[d++]<<O,O+=8,O<ee&&(D+=B[d++]<<O,O+=8)),he+=D&(1<<ee)-1,he>S){c.msg="invalid distance too far back",p.mode=a;break e}if(D>>>=ee,O-=ee,ee=v-_,he>ee){if(ee=he-ee,ee>T&&p.sane){c.msg="invalid distance too far back",p.mode=a;break e}if(de=0,P=A,M===0){if(de+=x-ee,ee<se){se-=ee;do V[v++]=A[de++];while(--ee);de=v-he,P=V}}else if(M<ee){if(de+=x+M-ee,ee-=M,ee<se){se-=ee;do V[v++]=A[de++];while(--ee);if(de=0,M<se){ee=M,se-=ee;do V[v++]=A[de++];while(--ee);de=v-he,P=V}}}else if(de+=M-ee,ee<se){se-=ee;do V[v++]=A[de++];while(--ee);de=v-he,P=V}for(;se>2;)V[v++]=P[de++],V[v++]=P[de++],V[v++]=P[de++],se-=3;se&&(V[v++]=P[de++],se>1&&(V[v++]=P[de++]))}else{de=v-he;do V[v++]=V[de++],V[v++]=V[de++],V[v++]=V[de++],se-=3;while(se>2);se&&(V[v++]=V[de++],se>1&&(V[v++]=V[de++]))}}else if((ee&64)===0){Y=U[(Y&65535)+(D&(1<<ee)-1)];continue n}else{c.msg="invalid distance code",p.mode=a;break e}break}}else if((ee&64)===0){Y=I[(Y&65535)+(D&(1<<ee)-1)];continue t}else if(ee&32){p.mode=s;break e}else{c.msg="invalid literal/length code",p.mode=a;break e}break}}while(d<m&&v<b);se=O>>3,d-=se,O-=se<<3,D&=(1<<O)-1,c.next_in=d,c.next_out=v,c.avail_in=d<m?5+(m-d):5-(d-m),c.avail_out=v<b?257+(b-v):257-(v-b),p.hold=D,p.bits=O}},{}],58:[function(t,i,r){var a=t("../utils/common"),s=t("./adler32"),o=t("./crc32"),c=t("./inffast"),f=t("./inftrees"),p=0,d=1,m=2,v=4,_=5,b=6,S=0,x=1,T=2,M=-2,A=-3,D=-4,O=-5,I=8,U=1,N=2,L=3,Y=4,ee=5,se=6,he=7,de=8,P=9,B=10,V=11,ae=12,X=13,oe=14,me=15,J=16,le=17,Se=18,Ee=19,re=20,ge=21,Ae=22,Pe=23,We=24,it=25,te=26,xe=27,De=28,He=29,Ce=30,ce=31,pe=32,ie=852,W=592,K=15,j=K;function $(Ne){return(Ne>>>24&255)+(Ne>>>8&65280)+((Ne&65280)<<8)+((Ne&255)<<24)}function Re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ie(Ne){var je;return!Ne||!Ne.state?M:(je=Ne.state,Ne.total_in=Ne.total_out=je.total=0,Ne.msg="",je.wrap&&(Ne.adler=je.wrap&1),je.mode=U,je.last=0,je.havedict=0,je.dmax=32768,je.head=null,je.hold=0,je.bits=0,je.lencode=je.lendyn=new a.Buf32(ie),je.distcode=je.distdyn=new a.Buf32(W),je.sane=1,je.back=-1,S)}function ne(Ne){var je;return!Ne||!Ne.state?M:(je=Ne.state,je.wsize=0,je.whave=0,je.wnext=0,Ie(Ne))}function H(Ne,je){var fe,Xe;return!Ne||!Ne.state||(Xe=Ne.state,je<0?(fe=0,je=-je):(fe=(je>>4)+1,je<48&&(je&=15)),je&&(je<8||je>15))?M:(Xe.window!==null&&Xe.wbits!==je&&(Xe.window=null),Xe.wrap=fe,Xe.wbits=je,ne(Ne))}function Z(Ne,je){var fe,Xe;return Ne?(Xe=new Re,Ne.state=Xe,Xe.window=null,fe=H(Ne,je),fe!==S&&(Ne.state=null),fe):M}function ye(Ne){return Z(Ne,j)}var Oe=!0,Be,Ue;function pt(Ne){if(Oe){var je;for(Be=new a.Buf32(512),Ue=new a.Buf32(32),je=0;je<144;)Ne.lens[je++]=8;for(;je<256;)Ne.lens[je++]=9;for(;je<280;)Ne.lens[je++]=7;for(;je<288;)Ne.lens[je++]=8;for(f(d,Ne.lens,0,288,Be,0,Ne.work,{bits:9}),je=0;je<32;)Ne.lens[je++]=5;f(m,Ne.lens,0,32,Ue,0,Ne.work,{bits:5}),Oe=!1}Ne.lencode=Be,Ne.lenbits=9,Ne.distcode=Ue,Ne.distbits=5}function St(Ne,je,fe,Xe){var Ye,G=Ne.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new a.Buf8(G.wsize)),Xe>=G.wsize?(a.arraySet(G.window,je,fe-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(Ye=G.wsize-G.wnext,Ye>Xe&&(Ye=Xe),a.arraySet(G.window,je,fe-Xe,Ye,G.wnext),Xe-=Ye,Xe?(a.arraySet(G.window,je,fe-Xe,Xe,0),G.wnext=Xe,G.whave=G.wsize):(G.wnext+=Ye,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=Ye))),0}function _e(Ne,je){var fe,Xe,Ye,G,Ge,$e,be,ze,Qe,Ot,xt,Mt,$t,Ii,In=0,rn,jn,dn,vi,ca,qa,ei,Vn,Di=new a.Buf8(4),Kr,Te,Ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Ne||!Ne.state||!Ne.output||!Ne.input&&Ne.avail_in!==0)return M;fe=Ne.state,fe.mode===ae&&(fe.mode=X),Ge=Ne.next_out,Ye=Ne.output,be=Ne.avail_out,G=Ne.next_in,Xe=Ne.input,$e=Ne.avail_in,ze=fe.hold,Qe=fe.bits,Ot=$e,xt=be,Vn=S;e:for(;;)switch(fe.mode){case U:if(fe.wrap===0){fe.mode=X;break}for(;Qe<16;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if(fe.wrap&2&&ze===35615){fe.check=0,Di[0]=ze&255,Di[1]=ze>>>8&255,fe.check=o(fe.check,Di,2,0),ze=0,Qe=0,fe.mode=N;break}if(fe.flags=0,fe.head&&(fe.head.done=!1),!(fe.wrap&1)||(((ze&255)<<8)+(ze>>8))%31){Ne.msg="incorrect header check",fe.mode=Ce;break}if((ze&15)!==I){Ne.msg="unknown compression method",fe.mode=Ce;break}if(ze>>>=4,Qe-=4,ei=(ze&15)+8,fe.wbits===0)fe.wbits=ei;else if(ei>fe.wbits){Ne.msg="invalid window size",fe.mode=Ce;break}fe.dmax=1<<ei,Ne.adler=fe.check=1,fe.mode=ze&512?B:ae,ze=0,Qe=0;break;case N:for(;Qe<16;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if(fe.flags=ze,(fe.flags&255)!==I){Ne.msg="unknown compression method",fe.mode=Ce;break}if(fe.flags&57344){Ne.msg="unknown header flags set",fe.mode=Ce;break}fe.head&&(fe.head.text=ze>>8&1),fe.flags&512&&(Di[0]=ze&255,Di[1]=ze>>>8&255,fe.check=o(fe.check,Di,2,0)),ze=0,Qe=0,fe.mode=L;case L:for(;Qe<32;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}fe.head&&(fe.head.time=ze),fe.flags&512&&(Di[0]=ze&255,Di[1]=ze>>>8&255,Di[2]=ze>>>16&255,Di[3]=ze>>>24&255,fe.check=o(fe.check,Di,4,0)),ze=0,Qe=0,fe.mode=Y;case Y:for(;Qe<16;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}fe.head&&(fe.head.xflags=ze&255,fe.head.os=ze>>8),fe.flags&512&&(Di[0]=ze&255,Di[1]=ze>>>8&255,fe.check=o(fe.check,Di,2,0)),ze=0,Qe=0,fe.mode=ee;case ee:if(fe.flags&1024){for(;Qe<16;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}fe.length=ze,fe.head&&(fe.head.extra_len=ze),fe.flags&512&&(Di[0]=ze&255,Di[1]=ze>>>8&255,fe.check=o(fe.check,Di,2,0)),ze=0,Qe=0}else fe.head&&(fe.head.extra=null);fe.mode=se;case se:if(fe.flags&1024&&(Mt=fe.length,Mt>$e&&(Mt=$e),Mt&&(fe.head&&(ei=fe.head.extra_len-fe.length,fe.head.extra||(fe.head.extra=new Array(fe.head.extra_len)),a.arraySet(fe.head.extra,Xe,G,Mt,ei)),fe.flags&512&&(fe.check=o(fe.check,Xe,Mt,G)),$e-=Mt,G+=Mt,fe.length-=Mt),fe.length))break e;fe.length=0,fe.mode=he;case he:if(fe.flags&2048){if($e===0)break e;Mt=0;do ei=Xe[G+Mt++],fe.head&&ei&&fe.length<65536&&(fe.head.name+=String.fromCharCode(ei));while(ei&&Mt<$e);if(fe.flags&512&&(fe.check=o(fe.check,Xe,Mt,G)),$e-=Mt,G+=Mt,ei)break e}else fe.head&&(fe.head.name=null);fe.length=0,fe.mode=de;case de:if(fe.flags&4096){if($e===0)break e;Mt=0;do ei=Xe[G+Mt++],fe.head&&ei&&fe.length<65536&&(fe.head.comment+=String.fromCharCode(ei));while(ei&&Mt<$e);if(fe.flags&512&&(fe.check=o(fe.check,Xe,Mt,G)),$e-=Mt,G+=Mt,ei)break e}else fe.head&&(fe.head.comment=null);fe.mode=P;case P:if(fe.flags&512){for(;Qe<16;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if(ze!==(fe.check&65535)){Ne.msg="header crc mismatch",fe.mode=Ce;break}ze=0,Qe=0}fe.head&&(fe.head.hcrc=fe.flags>>9&1,fe.head.done=!0),Ne.adler=fe.check=0,fe.mode=ae;break;case B:for(;Qe<32;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}Ne.adler=fe.check=$(ze),ze=0,Qe=0,fe.mode=V;case V:if(fe.havedict===0)return Ne.next_out=Ge,Ne.avail_out=be,Ne.next_in=G,Ne.avail_in=$e,fe.hold=ze,fe.bits=Qe,T;Ne.adler=fe.check=1,fe.mode=ae;case ae:if(je===_||je===b)break e;case X:if(fe.last){ze>>>=Qe&7,Qe-=Qe&7,fe.mode=xe;break}for(;Qe<3;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}switch(fe.last=ze&1,ze>>>=1,Qe-=1,ze&3){case 0:fe.mode=oe;break;case 1:if(pt(fe),fe.mode=re,je===b){ze>>>=2,Qe-=2;break e}break;case 2:fe.mode=le;break;case 3:Ne.msg="invalid block type",fe.mode=Ce}ze>>>=2,Qe-=2;break;case oe:for(ze>>>=Qe&7,Qe-=Qe&7;Qe<32;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if((ze&65535)!==(ze>>>16^65535)){Ne.msg="invalid stored block lengths",fe.mode=Ce;break}if(fe.length=ze&65535,ze=0,Qe=0,fe.mode=me,je===b)break e;case me:fe.mode=J;case J:if(Mt=fe.length,Mt){if(Mt>$e&&(Mt=$e),Mt>be&&(Mt=be),Mt===0)break e;a.arraySet(Ye,Xe,G,Mt,Ge),$e-=Mt,G+=Mt,be-=Mt,Ge+=Mt,fe.length-=Mt;break}fe.mode=ae;break;case le:for(;Qe<14;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if(fe.nlen=(ze&31)+257,ze>>>=5,Qe-=5,fe.ndist=(ze&31)+1,ze>>>=5,Qe-=5,fe.ncode=(ze&15)+4,ze>>>=4,Qe-=4,fe.nlen>286||fe.ndist>30){Ne.msg="too many length or distance symbols",fe.mode=Ce;break}fe.have=0,fe.mode=Se;case Se:for(;fe.have<fe.ncode;){for(;Qe<3;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}fe.lens[Ke[fe.have++]]=ze&7,ze>>>=3,Qe-=3}for(;fe.have<19;)fe.lens[Ke[fe.have++]]=0;if(fe.lencode=fe.lendyn,fe.lenbits=7,Kr={bits:fe.lenbits},Vn=f(p,fe.lens,0,19,fe.lencode,0,fe.work,Kr),fe.lenbits=Kr.bits,Vn){Ne.msg="invalid code lengths set",fe.mode=Ce;break}fe.have=0,fe.mode=Ee;case Ee:for(;fe.have<fe.nlen+fe.ndist;){for(;In=fe.lencode[ze&(1<<fe.lenbits)-1],rn=In>>>24,jn=In>>>16&255,dn=In&65535,!(rn<=Qe);){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if(dn<16)ze>>>=rn,Qe-=rn,fe.lens[fe.have++]=dn;else{if(dn===16){for(Te=rn+2;Qe<Te;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if(ze>>>=rn,Qe-=rn,fe.have===0){Ne.msg="invalid bit length repeat",fe.mode=Ce;break}ei=fe.lens[fe.have-1],Mt=3+(ze&3),ze>>>=2,Qe-=2}else if(dn===17){for(Te=rn+3;Qe<Te;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}ze>>>=rn,Qe-=rn,ei=0,Mt=3+(ze&7),ze>>>=3,Qe-=3}else{for(Te=rn+7;Qe<Te;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}ze>>>=rn,Qe-=rn,ei=0,Mt=11+(ze&127),ze>>>=7,Qe-=7}if(fe.have+Mt>fe.nlen+fe.ndist){Ne.msg="invalid bit length repeat",fe.mode=Ce;break}for(;Mt--;)fe.lens[fe.have++]=ei}}if(fe.mode===Ce)break;if(fe.lens[256]===0){Ne.msg="invalid code -- missing end-of-block",fe.mode=Ce;break}if(fe.lenbits=9,Kr={bits:fe.lenbits},Vn=f(d,fe.lens,0,fe.nlen,fe.lencode,0,fe.work,Kr),fe.lenbits=Kr.bits,Vn){Ne.msg="invalid literal/lengths set",fe.mode=Ce;break}if(fe.distbits=6,fe.distcode=fe.distdyn,Kr={bits:fe.distbits},Vn=f(m,fe.lens,fe.nlen,fe.ndist,fe.distcode,0,fe.work,Kr),fe.distbits=Kr.bits,Vn){Ne.msg="invalid distances set",fe.mode=Ce;break}if(fe.mode=re,je===b)break e;case re:fe.mode=ge;case ge:if($e>=6&&be>=258){Ne.next_out=Ge,Ne.avail_out=be,Ne.next_in=G,Ne.avail_in=$e,fe.hold=ze,fe.bits=Qe,c(Ne,xt),Ge=Ne.next_out,Ye=Ne.output,be=Ne.avail_out,G=Ne.next_in,Xe=Ne.input,$e=Ne.avail_in,ze=fe.hold,Qe=fe.bits,fe.mode===ae&&(fe.back=-1);break}for(fe.back=0;In=fe.lencode[ze&(1<<fe.lenbits)-1],rn=In>>>24,jn=In>>>16&255,dn=In&65535,!(rn<=Qe);){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if(jn&&(jn&240)===0){for(vi=rn,ca=jn,qa=dn;In=fe.lencode[qa+((ze&(1<<vi+ca)-1)>>vi)],rn=In>>>24,jn=In>>>16&255,dn=In&65535,!(vi+rn<=Qe);){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}ze>>>=vi,Qe-=vi,fe.back+=vi}if(ze>>>=rn,Qe-=rn,fe.back+=rn,fe.length=dn,jn===0){fe.mode=te;break}if(jn&32){fe.back=-1,fe.mode=ae;break}if(jn&64){Ne.msg="invalid literal/length code",fe.mode=Ce;break}fe.extra=jn&15,fe.mode=Ae;case Ae:if(fe.extra){for(Te=fe.extra;Qe<Te;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}fe.length+=ze&(1<<fe.extra)-1,ze>>>=fe.extra,Qe-=fe.extra,fe.back+=fe.extra}fe.was=fe.length,fe.mode=Pe;case Pe:for(;In=fe.distcode[ze&(1<<fe.distbits)-1],rn=In>>>24,jn=In>>>16&255,dn=In&65535,!(rn<=Qe);){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if((jn&240)===0){for(vi=rn,ca=jn,qa=dn;In=fe.distcode[qa+((ze&(1<<vi+ca)-1)>>vi)],rn=In>>>24,jn=In>>>16&255,dn=In&65535,!(vi+rn<=Qe);){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}ze>>>=vi,Qe-=vi,fe.back+=vi}if(ze>>>=rn,Qe-=rn,fe.back+=rn,jn&64){Ne.msg="invalid distance code",fe.mode=Ce;break}fe.offset=dn,fe.extra=jn&15,fe.mode=We;case We:if(fe.extra){for(Te=fe.extra;Qe<Te;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}fe.offset+=ze&(1<<fe.extra)-1,ze>>>=fe.extra,Qe-=fe.extra,fe.back+=fe.extra}if(fe.offset>fe.dmax){Ne.msg="invalid distance too far back",fe.mode=Ce;break}fe.mode=it;case it:if(be===0)break e;if(Mt=xt-be,fe.offset>Mt){if(Mt=fe.offset-Mt,Mt>fe.whave&&fe.sane){Ne.msg="invalid distance too far back",fe.mode=Ce;break}Mt>fe.wnext?(Mt-=fe.wnext,$t=fe.wsize-Mt):$t=fe.wnext-Mt,Mt>fe.length&&(Mt=fe.length),Ii=fe.window}else Ii=Ye,$t=Ge-fe.offset,Mt=fe.length;Mt>be&&(Mt=be),be-=Mt,fe.length-=Mt;do Ye[Ge++]=Ii[$t++];while(--Mt);fe.length===0&&(fe.mode=ge);break;case te:if(be===0)break e;Ye[Ge++]=fe.length,be--,fe.mode=ge;break;case xe:if(fe.wrap){for(;Qe<32;){if($e===0)break e;$e--,ze|=Xe[G++]<<Qe,Qe+=8}if(xt-=be,Ne.total_out+=xt,fe.total+=xt,xt&&(Ne.adler=fe.check=fe.flags?o(fe.check,Ye,xt,Ge-xt):s(fe.check,Ye,xt,Ge-xt)),xt=be,(fe.flags?ze:$(ze))!==fe.check){Ne.msg="incorrect data check",fe.mode=Ce;break}ze=0,Qe=0}fe.mode=De;case De:if(fe.wrap&&fe.flags){for(;Qe<32;){if($e===0)break e;$e--,ze+=Xe[G++]<<Qe,Qe+=8}if(ze!==(fe.total&4294967295)){Ne.msg="incorrect length check",fe.mode=Ce;break}ze=0,Qe=0}fe.mode=He;case He:Vn=x;break e;case Ce:Vn=A;break e;case ce:return D;case pe:default:return M}return Ne.next_out=Ge,Ne.avail_out=be,Ne.next_in=G,Ne.avail_in=$e,fe.hold=ze,fe.bits=Qe,(fe.wsize||xt!==Ne.avail_out&&fe.mode<Ce&&(fe.mode<xe||je!==v))&&St(Ne,Ne.output,Ne.next_out,xt-Ne.avail_out),Ot-=Ne.avail_in,xt-=Ne.avail_out,Ne.total_in+=Ot,Ne.total_out+=xt,fe.total+=xt,fe.wrap&&xt&&(Ne.adler=fe.check=fe.flags?o(fe.check,Ye,xt,Ne.next_out-xt):s(fe.check,Ye,xt,Ne.next_out-xt)),Ne.data_type=fe.bits+(fe.last?64:0)+(fe.mode===ae?128:0)+(fe.mode===re||fe.mode===me?256:0),(Ot===0&&xt===0||je===v)&&Vn===S&&(Vn=O),Vn}function Ve(Ne){if(!Ne||!Ne.state)return M;var je=Ne.state;return je.window&&(je.window=null),Ne.state=null,S}function nt(Ne,je){var fe;return!Ne||!Ne.state||(fe=Ne.state,(fe.wrap&2)===0)?M:(fe.head=je,je.done=!1,S)}function Le(Ne,je){var fe=je.length,Xe,Ye,G;return!Ne||!Ne.state||(Xe=Ne.state,Xe.wrap!==0&&Xe.mode!==V)?M:Xe.mode===V&&(Ye=1,Ye=s(Ye,je,fe,0),Ye!==Xe.check)?A:(G=St(Ne,je,fe,fe),G?(Xe.mode=ce,D):(Xe.havedict=1,S))}r.inflateReset=ne,r.inflateReset2=H,r.inflateResetKeep=Ie,r.inflateInit=ye,r.inflateInit2=Z,r.inflate=_e,r.inflateEnd=Ve,r.inflateGetHeader=nt,r.inflateSetDictionary=Le,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":52,"./adler32":53,"./crc32":55,"./inffast":57,"./inftrees":59}],59:[function(t,i,r){var a=t("../utils/common"),s=15,o=852,c=592,f=0,p=1,d=2,m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],v=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(x,T,M,A,D,O,I,U){var N=U.bits,L=0,Y=0,ee=0,se=0,he=0,de=0,P=0,B=0,V=0,ae=0,X,oe,me,J,le,Se=null,Ee=0,re,ge=new a.Buf16(s+1),Ae=new a.Buf16(s+1),Pe=null,We=0,it,te,xe;for(L=0;L<=s;L++)ge[L]=0;for(Y=0;Y<A;Y++)ge[T[M+Y]]++;for(he=N,se=s;se>=1&&ge[se]===0;se--);if(he>se&&(he=se),se===0)return D[O++]=1<<24|64<<16|0,D[O++]=1<<24|64<<16|0,U.bits=1,0;for(ee=1;ee<se&&ge[ee]===0;ee++);for(he<ee&&(he=ee),B=1,L=1;L<=s;L++)if(B<<=1,B-=ge[L],B<0)return-1;if(B>0&&(x===f||se!==1))return-1;for(Ae[1]=0,L=1;L<s;L++)Ae[L+1]=Ae[L]+ge[L];for(Y=0;Y<A;Y++)T[M+Y]!==0&&(I[Ae[T[M+Y]]++]=Y);if(x===f?(Se=Pe=I,re=19):x===p?(Se=m,Ee-=257,Pe=v,We-=257,re=256):(Se=_,Pe=b,re=-1),ae=0,Y=0,L=ee,le=O,de=he,P=0,me=-1,V=1<<he,J=V-1,x===p&&V>o||x===d&&V>c)return 1;for(;;){it=L-P,I[Y]<re?(te=0,xe=I[Y]):I[Y]>re?(te=Pe[We+I[Y]],xe=Se[Ee+I[Y]]):(te=96,xe=0),X=1<<L-P,oe=1<<de,ee=oe;do oe-=X,D[le+(ae>>P)+oe]=it<<24|te<<16|xe|0;while(oe!==0);for(X=1<<L-1;ae&X;)X>>=1;if(X!==0?(ae&=X-1,ae+=X):ae=0,Y++,--ge[L]===0){if(L===se)break;L=T[M+I[Y]]}if(L>he&&(ae&J)!==me){for(P===0&&(P=he),le+=ee,de=L-P,B=1<<de;de+P<se&&(B-=ge[de+P],!(B<=0));)de++,B<<=1;if(V+=1<<de,x===p&&V>o||x===d&&V>c)return 1;me=ae&J,D[me]=he<<24|de<<16|le-O|0}}return ae!==0&&(D[le+ae]=L-P<<24|64<<16|0),U.bits=he,0}},{"../utils/common":52}],60:[function(t,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],61:[function(t,i,r){var a=t("../utils/common"),s=4,o=0,c=1,f=2;function p(_e){for(var Ve=_e.length;--Ve>=0;)_e[Ve]=0}var d=0,m=1,v=2,_=3,b=258,S=29,x=256,T=x+1+S,M=30,A=19,D=2*T+1,O=15,I=16,U=7,N=256,L=16,Y=17,ee=18,se=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],he=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=512,V=new Array((T+2)*2);p(V);var ae=new Array(M*2);p(ae);var X=new Array(B);p(X);var oe=new Array(b-_+1);p(oe);var me=new Array(S);p(me);var J=new Array(M);p(J);function le(_e,Ve,nt,Le,Ne){this.static_tree=_e,this.extra_bits=Ve,this.extra_base=nt,this.elems=Le,this.max_length=Ne,this.has_stree=_e&&_e.length}var Se,Ee,re;function ge(_e,Ve){this.dyn_tree=_e,this.max_code=0,this.stat_desc=Ve}function Ae(_e){return _e<256?X[_e]:X[256+(_e>>>7)]}function Pe(_e,Ve){_e.pending_buf[_e.pending++]=Ve&255,_e.pending_buf[_e.pending++]=Ve>>>8&255}function We(_e,Ve,nt){_e.bi_valid>I-nt?(_e.bi_buf|=Ve<<_e.bi_valid&65535,Pe(_e,_e.bi_buf),_e.bi_buf=Ve>>I-_e.bi_valid,_e.bi_valid+=nt-I):(_e.bi_buf|=Ve<<_e.bi_valid&65535,_e.bi_valid+=nt)}function it(_e,Ve,nt){We(_e,nt[Ve*2],nt[Ve*2+1])}function te(_e,Ve){var nt=0;do nt|=_e&1,_e>>>=1,nt<<=1;while(--Ve>0);return nt>>>1}function xe(_e){_e.bi_valid===16?(Pe(_e,_e.bi_buf),_e.bi_buf=0,_e.bi_valid=0):_e.bi_valid>=8&&(_e.pending_buf[_e.pending++]=_e.bi_buf&255,_e.bi_buf>>=8,_e.bi_valid-=8)}function De(_e,Ve){var nt=Ve.dyn_tree,Le=Ve.max_code,Ne=Ve.stat_desc.static_tree,je=Ve.stat_desc.has_stree,fe=Ve.stat_desc.extra_bits,Xe=Ve.stat_desc.extra_base,Ye=Ve.stat_desc.max_length,G,Ge,$e,be,ze,Qe,Ot=0;for(be=0;be<=O;be++)_e.bl_count[be]=0;for(nt[_e.heap[_e.heap_max]*2+1]=0,G=_e.heap_max+1;G<D;G++)Ge=_e.heap[G],be=nt[nt[Ge*2+1]*2+1]+1,be>Ye&&(be=Ye,Ot++),nt[Ge*2+1]=be,!(Ge>Le)&&(_e.bl_count[be]++,ze=0,Ge>=Xe&&(ze=fe[Ge-Xe]),Qe=nt[Ge*2],_e.opt_len+=Qe*(be+ze),je&&(_e.static_len+=Qe*(Ne[Ge*2+1]+ze)));if(Ot!==0){do{for(be=Ye-1;_e.bl_count[be]===0;)be--;_e.bl_count[be]--,_e.bl_count[be+1]+=2,_e.bl_count[Ye]--,Ot-=2}while(Ot>0);for(be=Ye;be!==0;be--)for(Ge=_e.bl_count[be];Ge!==0;)$e=_e.heap[--G],!($e>Le)&&(nt[$e*2+1]!==be&&(_e.opt_len+=(be-nt[$e*2+1])*nt[$e*2],nt[$e*2+1]=be),Ge--)}}function He(_e,Ve,nt){var Le=new Array(O+1),Ne=0,je,fe;for(je=1;je<=O;je++)Le[je]=Ne=Ne+nt[je-1]<<1;for(fe=0;fe<=Ve;fe++){var Xe=_e[fe*2+1];Xe!==0&&(_e[fe*2]=te(Le[Xe]++,Xe))}}function Ce(){var _e,Ve,nt,Le,Ne,je=new Array(O+1);for(nt=0,Le=0;Le<S-1;Le++)for(me[Le]=nt,_e=0;_e<1<<se[Le];_e++)oe[nt++]=Le;for(oe[nt-1]=Le,Ne=0,Le=0;Le<16;Le++)for(J[Le]=Ne,_e=0;_e<1<<he[Le];_e++)X[Ne++]=Le;for(Ne>>=7;Le<M;Le++)for(J[Le]=Ne<<7,_e=0;_e<1<<he[Le]-7;_e++)X[256+Ne++]=Le;for(Ve=0;Ve<=O;Ve++)je[Ve]=0;for(_e=0;_e<=143;)V[_e*2+1]=8,_e++,je[8]++;for(;_e<=255;)V[_e*2+1]=9,_e++,je[9]++;for(;_e<=279;)V[_e*2+1]=7,_e++,je[7]++;for(;_e<=287;)V[_e*2+1]=8,_e++,je[8]++;for(He(V,T+1,je),_e=0;_e<M;_e++)ae[_e*2+1]=5,ae[_e*2]=te(_e,5);Se=new le(V,se,x+1,T,O),Ee=new le(ae,he,0,M,O),re=new le(new Array(0),de,0,A,U)}function ce(_e){var Ve;for(Ve=0;Ve<T;Ve++)_e.dyn_ltree[Ve*2]=0;for(Ve=0;Ve<M;Ve++)_e.dyn_dtree[Ve*2]=0;for(Ve=0;Ve<A;Ve++)_e.bl_tree[Ve*2]=0;_e.dyn_ltree[N*2]=1,_e.opt_len=_e.static_len=0,_e.last_lit=_e.matches=0}function pe(_e){_e.bi_valid>8?Pe(_e,_e.bi_buf):_e.bi_valid>0&&(_e.pending_buf[_e.pending++]=_e.bi_buf),_e.bi_buf=0,_e.bi_valid=0}function ie(_e,Ve,nt,Le){pe(_e),Pe(_e,nt),Pe(_e,~nt),a.arraySet(_e.pending_buf,_e.window,Ve,nt,_e.pending),_e.pending+=nt}function W(_e,Ve,nt,Le){var Ne=Ve*2,je=nt*2;return _e[Ne]<_e[je]||_e[Ne]===_e[je]&&Le[Ve]<=Le[nt]}function K(_e,Ve,nt){for(var Le=_e.heap[nt],Ne=nt<<1;Ne<=_e.heap_len&&(Ne<_e.heap_len&&W(Ve,_e.heap[Ne+1],_e.heap[Ne],_e.depth)&&Ne++,!W(Ve,Le,_e.heap[Ne],_e.depth));)_e.heap[nt]=_e.heap[Ne],nt=Ne,Ne<<=1;_e.heap[nt]=Le}function j(_e,Ve,nt){var Le,Ne,je=0,fe,Xe;if(_e.last_lit!==0)do Le=_e.pending_buf[_e.d_buf+je*2]<<8|_e.pending_buf[_e.d_buf+je*2+1],Ne=_e.pending_buf[_e.l_buf+je],je++,Le===0?it(_e,Ne,Ve):(fe=oe[Ne],it(_e,fe+x+1,Ve),Xe=se[fe],Xe!==0&&(Ne-=me[fe],We(_e,Ne,Xe)),Le--,fe=Ae(Le),it(_e,fe,nt),Xe=he[fe],Xe!==0&&(Le-=J[fe],We(_e,Le,Xe)));while(je<_e.last_lit);it(_e,N,Ve)}function $(_e,Ve){var nt=Ve.dyn_tree,Le=Ve.stat_desc.static_tree,Ne=Ve.stat_desc.has_stree,je=Ve.stat_desc.elems,fe,Xe,Ye=-1,G;for(_e.heap_len=0,_e.heap_max=D,fe=0;fe<je;fe++)nt[fe*2]!==0?(_e.heap[++_e.heap_len]=Ye=fe,_e.depth[fe]=0):nt[fe*2+1]=0;for(;_e.heap_len<2;)G=_e.heap[++_e.heap_len]=Ye<2?++Ye:0,nt[G*2]=1,_e.depth[G]=0,_e.opt_len--,Ne&&(_e.static_len-=Le[G*2+1]);for(Ve.max_code=Ye,fe=_e.heap_len>>1;fe>=1;fe--)K(_e,nt,fe);G=je;do fe=_e.heap[1],_e.heap[1]=_e.heap[_e.heap_len--],K(_e,nt,1),Xe=_e.heap[1],_e.heap[--_e.heap_max]=fe,_e.heap[--_e.heap_max]=Xe,nt[G*2]=nt[fe*2]+nt[Xe*2],_e.depth[G]=(_e.depth[fe]>=_e.depth[Xe]?_e.depth[fe]:_e.depth[Xe])+1,nt[fe*2+1]=nt[Xe*2+1]=G,_e.heap[1]=G++,K(_e,nt,1);while(_e.heap_len>=2);_e.heap[--_e.heap_max]=_e.heap[1],De(_e,Ve),He(nt,Ye,_e.bl_count)}function Re(_e,Ve,nt){var Le,Ne=-1,je,fe=Ve[1],Xe=0,Ye=7,G=4;for(fe===0&&(Ye=138,G=3),Ve[(nt+1)*2+1]=65535,Le=0;Le<=nt;Le++)je=fe,fe=Ve[(Le+1)*2+1],!(++Xe<Ye&&je===fe)&&(Xe<G?_e.bl_tree[je*2]+=Xe:je!==0?(je!==Ne&&_e.bl_tree[je*2]++,_e.bl_tree[L*2]++):Xe<=10?_e.bl_tree[Y*2]++:_e.bl_tree[ee*2]++,Xe=0,Ne=je,fe===0?(Ye=138,G=3):je===fe?(Ye=6,G=3):(Ye=7,G=4))}function Ie(_e,Ve,nt){var Le,Ne=-1,je,fe=Ve[1],Xe=0,Ye=7,G=4;for(fe===0&&(Ye=138,G=3),Le=0;Le<=nt;Le++)if(je=fe,fe=Ve[(Le+1)*2+1],!(++Xe<Ye&&je===fe)){if(Xe<G)do it(_e,je,_e.bl_tree);while(--Xe!==0);else je!==0?(je!==Ne&&(it(_e,je,_e.bl_tree),Xe--),it(_e,L,_e.bl_tree),We(_e,Xe-3,2)):Xe<=10?(it(_e,Y,_e.bl_tree),We(_e,Xe-3,3)):(it(_e,ee,_e.bl_tree),We(_e,Xe-11,7));Xe=0,Ne=je,fe===0?(Ye=138,G=3):je===fe?(Ye=6,G=3):(Ye=7,G=4)}}function ne(_e){var Ve;for(Re(_e,_e.dyn_ltree,_e.l_desc.max_code),Re(_e,_e.dyn_dtree,_e.d_desc.max_code),$(_e,_e.bl_desc),Ve=A-1;Ve>=3&&_e.bl_tree[P[Ve]*2+1]===0;Ve--);return _e.opt_len+=3*(Ve+1)+5+5+4,Ve}function H(_e,Ve,nt,Le){var Ne;for(We(_e,Ve-257,5),We(_e,nt-1,5),We(_e,Le-4,4),Ne=0;Ne<Le;Ne++)We(_e,_e.bl_tree[P[Ne]*2+1],3);Ie(_e,_e.dyn_ltree,Ve-1),Ie(_e,_e.dyn_dtree,nt-1)}function Z(_e){var Ve=4093624447,nt;for(nt=0;nt<=31;nt++,Ve>>>=1)if(Ve&1&&_e.dyn_ltree[nt*2]!==0)return o;if(_e.dyn_ltree[18]!==0||_e.dyn_ltree[20]!==0||_e.dyn_ltree[26]!==0)return c;for(nt=32;nt<x;nt++)if(_e.dyn_ltree[nt*2]!==0)return c;return o}var ye=!1;function Oe(_e){ye||(Ce(),ye=!0),_e.l_desc=new ge(_e.dyn_ltree,Se),_e.d_desc=new ge(_e.dyn_dtree,Ee),_e.bl_desc=new ge(_e.bl_tree,re),_e.bi_buf=0,_e.bi_valid=0,ce(_e)}function Be(_e,Ve,nt,Le){We(_e,(d<<1)+(Le?1:0),3),ie(_e,Ve,nt)}function Ue(_e){We(_e,m<<1,3),it(_e,N,V),xe(_e)}function pt(_e,Ve,nt,Le){var Ne,je,fe=0;_e.level>0?(_e.strm.data_type===f&&(_e.strm.data_type=Z(_e)),$(_e,_e.l_desc),$(_e,_e.d_desc),fe=ne(_e),Ne=_e.opt_len+3+7>>>3,je=_e.static_len+3+7>>>3,je<=Ne&&(Ne=je)):Ne=je=nt+5,nt+4<=Ne&&Ve!==-1?Be(_e,Ve,nt,Le):_e.strategy===s||je===Ne?(We(_e,(m<<1)+(Le?1:0),3),j(_e,V,ae)):(We(_e,(v<<1)+(Le?1:0),3),H(_e,_e.l_desc.max_code+1,_e.d_desc.max_code+1,fe+1),j(_e,_e.dyn_ltree,_e.dyn_dtree)),ce(_e),Le&&pe(_e)}function St(_e,Ve,nt){return _e.pending_buf[_e.d_buf+_e.last_lit*2]=Ve>>>8&255,_e.pending_buf[_e.d_buf+_e.last_lit*2+1]=Ve&255,_e.pending_buf[_e.l_buf+_e.last_lit]=nt&255,_e.last_lit++,Ve===0?_e.dyn_ltree[nt*2]++:(_e.matches++,Ve--,_e.dyn_ltree[(oe[nt]+x+1)*2]++,_e.dyn_dtree[Ae(Ve)*2]++),_e.last_lit===_e.lit_bufsize-1}r._tr_init=Oe,r._tr_stored_block=Be,r._tr_flush_block=pt,r._tr_tally=St,r._tr_align=Ue},{"../utils/common":52}],62:[function(t,i,r){function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}i.exports=a},{}],63:[function(t,i,r){var a=i.exports={},s,o;function c(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=c}catch{s=c}try{typeof clearTimeout=="function"?o=clearTimeout:o=f}catch{o=f}})();function p(A){if(s===setTimeout)return setTimeout(A,0);if((s===c||!s)&&setTimeout)return s=setTimeout,setTimeout(A,0);try{return s(A,0)}catch{try{return s.call(null,A,0)}catch{return s.call(this,A,0)}}}function d(A){if(o===clearTimeout)return clearTimeout(A);if((o===f||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(A);try{return o(A)}catch{try{return o.call(null,A)}catch{return o.call(this,A)}}}var m=[],v=!1,_,b=-1;function S(){!v||!_||(v=!1,_.length?m=_.concat(m):b=-1,m.length&&x())}function x(){if(!v){var A=p(S);v=!0;for(var D=m.length;D;){for(_=m,m=[];++b<D;)_&&_[b].run();b=-1,D=m.length}_=null,v=!1,d(A)}}a.nextTick=function(A){var D=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)D[O-1]=arguments[O];m.push(new T(A,D)),m.length===1&&!v&&p(x)};function T(A,D){this.fun=A,this.array=D}T.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={};function M(){}a.on=M,a.addListener=M,a.once=M,a.off=M,a.removeListener=M,a.removeAllListeners=M,a.emit=M,a.prependListener=M,a.prependOnceListener=M,a.listeners=function(A){return[]},a.binding=function(A){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(A){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],64:[function(t,i,r){var a=t("buffer"),s=a.Buffer;function o(f,p){for(var d in f)p[d]=f[d]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?i.exports=a:(o(a,r),r.Buffer=c);function c(f,p,d){return s(f,p,d)}c.prototype=Object.create(s.prototype),o(s,c),c.from=function(f,p,d){if(typeof f=="number")throw new TypeError("Argument must not be a number");return s(f,p,d)},c.alloc=function(f,p,d){if(typeof f!="number")throw new TypeError("Argument must be a number");var m=s(f);return p!==void 0?typeof d=="string"?m.fill(p,d):m.fill(p):m.fill(0),m},c.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return s(f)},c.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(f)}},{buffer:32}],65:[function(t,i,r){i.exports=o;var a=t("events").EventEmitter,s=t("inherits");s(o,a),o.Readable=t("readable-stream/lib/_stream_readable.js"),o.Writable=t("readable-stream/lib/_stream_writable.js"),o.Duplex=t("readable-stream/lib/_stream_duplex.js"),o.Transform=t("readable-stream/lib/_stream_transform.js"),o.PassThrough=t("readable-stream/lib/_stream_passthrough.js"),o.finished=t("readable-stream/lib/internal/streams/end-of-stream.js"),o.pipeline=t("readable-stream/lib/internal/streams/pipeline.js"),o.Stream=o;function o(){a.call(this)}o.prototype.pipe=function(c,f){var p=this;function d(T){c.writable&&c.write(T)===!1&&p.pause&&p.pause()}p.on("data",d);function m(){p.readable&&p.resume&&p.resume()}c.on("drain",m),!c._isStdio&&(!f||f.end!==!1)&&(p.on("end",_),p.on("close",b));var v=!1;function _(){v||(v=!0,c.end())}function b(){v||(v=!0,typeof c.destroy=="function"&&c.destroy())}function S(T){if(x(),a.listenerCount(this,"error")===0)throw T}p.on("error",S),c.on("error",S);function x(){p.removeListener("data",d),c.removeListener("drain",m),p.removeListener("end",_),p.removeListener("close",b),p.removeListener("error",S),c.removeListener("error",S),p.removeListener("end",x),p.removeListener("close",x),c.removeListener("close",x)}return p.on("end",x),p.on("close",x),c.on("close",x),c.emit("pipe",p),c}},{events:35,inherits:46,"readable-stream/lib/_stream_duplex.js":67,"readable-stream/lib/_stream_passthrough.js":68,"readable-stream/lib/_stream_readable.js":69,"readable-stream/lib/_stream_transform.js":70,"readable-stream/lib/_stream_writable.js":71,"readable-stream/lib/internal/streams/end-of-stream.js":75,"readable-stream/lib/internal/streams/pipeline.js":77}],66:[function(t,i,r){function a(m,v){m.prototype=Object.create(v.prototype),m.prototype.constructor=m,m.__proto__=v}var s={};function o(m,v,_){_||(_=Error);function b(x,T,M){return typeof v=="string"?v:v(x,T,M)}var S=(function(x){a(T,x);function T(M,A,D){return x.call(this,b(M,A,D))||this}return T})(_);S.prototype.name=_.name,S.prototype.code=m,s[m]=S}function c(m,v){if(Array.isArray(m)){var _=m.length;return m=m.map(function(b){return String(b)}),_>2?"one of ".concat(v," ").concat(m.slice(0,_-1).join(", "),", or ")+m[_-1]:_===2?"one of ".concat(v," ").concat(m[0]," or ").concat(m[1]):"of ".concat(v," ").concat(m[0])}else return"of ".concat(v," ").concat(String(m))}function f(m,v,_){return m.substr(0,v.length)===v}function p(m,v,_){return(_===void 0||_>m.length)&&(_=m.length),m.substring(_-v.length,_)===v}function d(m,v,_){return typeof _!="number"&&(_=0),_+v.length>m.length?!1:m.indexOf(v,_)!==-1}o("ERR_INVALID_OPT_VALUE",function(m,v){return'The value "'+v+'" is invalid for option "'+m+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(m,v,_){var b;typeof v=="string"&&f(v,"not ")?(b="must not be",v=v.replace(/^not /,"")):b="must be";var S;if(p(m," argument"))S="The ".concat(m," ").concat(b," ").concat(c(v,"type"));else{var x=d(m,".")?"property":"argument";S='The "'.concat(m,'" ').concat(x," ").concat(b," ").concat(c(v,"type"))}return S+=". Received type ".concat(typeof _),S},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(m){return"The "+m+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(m){return"Cannot call "+m+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(m){return"Unknown encoding: "+m},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=s},{}],67:[function(t,i,r){(function(a){(function(){var s=Object.keys||function(b){var S=[];for(var x in b)S.push(x);return S};i.exports=m;var o=t("./_stream_readable"),c=t("./_stream_writable");t("inherits")(m,o);for(var f=s(c.prototype),p=0;p<f.length;p++){var d=f[p];m.prototype[d]||(m.prototype[d]=c.prototype[d])}function m(b){if(!(this instanceof m))return new m(b);o.call(this,b),c.call(this,b),this.allowHalfOpen=!0,b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",v)))}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(m.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function v(){this._writableState.ended||a.nextTick(_,this)}function _(b){b.end()}Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(S){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=S,this._writableState.destroyed=S)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":69,"./_stream_writable":71,_process:63,inherits:46}],68:[function(t,i,r){i.exports=s;var a=t("./_stream_transform");t("inherits")(s,a);function s(o){if(!(this instanceof s))return new s(o);a.call(this,o)}s.prototype._transform=function(o,c,f){f(null,o)}},{"./_stream_transform":70,inherits:46}],69:[function(t,i,r){(function(a,s){(function(){i.exports=P;var o;P.ReadableState=de,t("events").EventEmitter;var c=function(pe,ie){return pe.listeners(ie).length},f=t("./internal/streams/stream"),p=t("buffer").Buffer,d=s.Uint8Array||function(){};function m(ce){return p.from(ce)}function v(ce){return p.isBuffer(ce)||ce instanceof d}var _=t("util"),b;_&&_.debuglog?b=_.debuglog("stream"):b=function(){};var S=t("./internal/streams/buffer_list"),x=t("./internal/streams/destroy"),T=t("./internal/streams/state"),M=T.getHighWaterMark,A=t("../errors").codes,D=A.ERR_INVALID_ARG_TYPE,O=A.ERR_STREAM_PUSH_AFTER_EOF,I=A.ERR_METHOD_NOT_IMPLEMENTED,U=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,N,L,Y;t("inherits")(P,f);var ee=x.errorOrDestroy,se=["error","close","destroy","pause","resume"];function he(ce,pe,ie){if(typeof ce.prependListener=="function")return ce.prependListener(pe,ie);!ce._events||!ce._events[pe]?ce.on(pe,ie):Array.isArray(ce._events[pe])?ce._events[pe].unshift(ie):ce._events[pe]=[ie,ce._events[pe]]}function de(ce,pe,ie){o=o||t("./_stream_duplex"),ce=ce||{},typeof ie!="boolean"&&(ie=pe instanceof o),this.objectMode=!!ce.objectMode,ie&&(this.objectMode=this.objectMode||!!ce.readableObjectMode),this.highWaterMark=M(this,ce,"readableHighWaterMark",ie),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ce.emitClose!==!1,this.autoDestroy=!!ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ce.encoding&&(N||(N=t("string_decoder/").StringDecoder),this.decoder=new N(ce.encoding),this.encoding=ce.encoding)}function P(ce){if(o=o||t("./_stream_duplex"),!(this instanceof P))return new P(ce);var pe=this instanceof o;this._readableState=new de(ce,this,pe),this.readable=!0,ce&&(typeof ce.read=="function"&&(this._read=ce.read),typeof ce.destroy=="function"&&(this._destroy=ce.destroy)),f.call(this)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(pe){this._readableState&&(this._readableState.destroyed=pe)}}),P.prototype.destroy=x.destroy,P.prototype._undestroy=x.undestroy,P.prototype._destroy=function(ce,pe){pe(ce)},P.prototype.push=function(ce,pe){var ie=this._readableState,W;return ie.objectMode?W=!0:typeof ce=="string"&&(pe=pe||ie.defaultEncoding,pe!==ie.encoding&&(ce=p.from(ce,pe),pe=""),W=!0),B(this,ce,pe,!1,W)},P.prototype.unshift=function(ce){return B(this,ce,null,!0,!1)};function B(ce,pe,ie,W,K){b("readableAddChunk",pe);var j=ce._readableState;if(pe===null)j.reading=!1,J(ce,j);else{var $;if(K||($=ae(j,pe)),$)ee(ce,$);else if(j.objectMode||pe&&pe.length>0)if(typeof pe!="string"&&!j.objectMode&&Object.getPrototypeOf(pe)!==p.prototype&&(pe=m(pe)),W)j.endEmitted?ee(ce,new U):V(ce,j,pe,!0);else if(j.ended)ee(ce,new O);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!ie?(pe=j.decoder.write(pe),j.objectMode||pe.length!==0?V(ce,j,pe,!1):Ee(ce,j)):V(ce,j,pe,!1)}else W||(j.reading=!1,Ee(ce,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function V(ce,pe,ie,W){pe.flowing&&pe.length===0&&!pe.sync?(pe.awaitDrain=0,ce.emit("data",ie)):(pe.length+=pe.objectMode?1:ie.length,W?pe.buffer.unshift(ie):pe.buffer.push(ie),pe.needReadable&&le(ce)),Ee(ce,pe)}function ae(ce,pe){var ie;return!v(pe)&&typeof pe!="string"&&pe!==void 0&&!ce.objectMode&&(ie=new D("chunk",["string","Buffer","Uint8Array"],pe)),ie}P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(ce){N||(N=t("string_decoder/").StringDecoder);var pe=new N(ce);this._readableState.decoder=pe,this._readableState.encoding=this._readableState.decoder.encoding;for(var ie=this._readableState.buffer.head,W="";ie!==null;)W+=pe.write(ie.data),ie=ie.next;return this._readableState.buffer.clear(),W!==""&&this._readableState.buffer.push(W),this._readableState.length=W.length,this};var X=1073741824;function oe(ce){return ce>=X?ce=X:(ce--,ce|=ce>>>1,ce|=ce>>>2,ce|=ce>>>4,ce|=ce>>>8,ce|=ce>>>16,ce++),ce}function me(ce,pe){return ce<=0||pe.length===0&&pe.ended?0:pe.objectMode?1:ce!==ce?pe.flowing&&pe.length?pe.buffer.head.data.length:pe.length:(ce>pe.highWaterMark&&(pe.highWaterMark=oe(ce)),ce<=pe.length?ce:pe.ended?pe.length:(pe.needReadable=!0,0))}P.prototype.read=function(ce){b("read",ce),ce=parseInt(ce,10);var pe=this._readableState,ie=ce;if(ce!==0&&(pe.emittedReadable=!1),ce===0&&pe.needReadable&&((pe.highWaterMark!==0?pe.length>=pe.highWaterMark:pe.length>0)||pe.ended))return b("read: emitReadable",pe.length,pe.ended),pe.length===0&&pe.ended?De(this):le(this),null;if(ce=me(ce,pe),ce===0&&pe.ended)return pe.length===0&&De(this),null;var W=pe.needReadable;b("need readable",W),(pe.length===0||pe.length-ce<pe.highWaterMark)&&(W=!0,b("length less than watermark",W)),pe.ended||pe.reading?(W=!1,b("reading or ended",W)):W&&(b("do read"),pe.reading=!0,pe.sync=!0,pe.length===0&&(pe.needReadable=!0),this._read(pe.highWaterMark),pe.sync=!1,pe.reading||(ce=me(ie,pe)));var K;return ce>0?K=xe(ce,pe):K=null,K===null?(pe.needReadable=pe.length<=pe.highWaterMark,ce=0):(pe.length-=ce,pe.awaitDrain=0),pe.length===0&&(pe.ended||(pe.needReadable=!0),ie!==ce&&pe.ended&&De(this)),K!==null&&this.emit("data",K),K};function J(ce,pe){if(b("onEofChunk"),!pe.ended){if(pe.decoder){var ie=pe.decoder.end();ie&&ie.length&&(pe.buffer.push(ie),pe.length+=pe.objectMode?1:ie.length)}pe.ended=!0,pe.sync?le(ce):(pe.needReadable=!1,pe.emittedReadable||(pe.emittedReadable=!0,Se(ce)))}}function le(ce){var pe=ce._readableState;b("emitReadable",pe.needReadable,pe.emittedReadable),pe.needReadable=!1,pe.emittedReadable||(b("emitReadable",pe.flowing),pe.emittedReadable=!0,a.nextTick(Se,ce))}function Se(ce){var pe=ce._readableState;b("emitReadable_",pe.destroyed,pe.length,pe.ended),!pe.destroyed&&(pe.length||pe.ended)&&(ce.emit("readable"),pe.emittedReadable=!1),pe.needReadable=!pe.flowing&&!pe.ended&&pe.length<=pe.highWaterMark,te(ce)}function Ee(ce,pe){pe.readingMore||(pe.readingMore=!0,a.nextTick(re,ce,pe))}function re(ce,pe){for(;!pe.reading&&!pe.ended&&(pe.length<pe.highWaterMark||pe.flowing&&pe.length===0);){var ie=pe.length;if(b("maybeReadMore read 0"),ce.read(0),ie===pe.length)break}pe.readingMore=!1}P.prototype._read=function(ce){ee(this,new I("_read()"))},P.prototype.pipe=function(ce,pe){var ie=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=ce;break;case 1:W.pipes=[W.pipes,ce];break;default:W.pipes.push(ce);break}W.pipesCount+=1,b("pipe count=%d opts=%j",W.pipesCount,pe);var K=(!pe||pe.end!==!1)&&ce!==a.stdout&&ce!==a.stderr,j=K?Re:Ue;W.endEmitted?a.nextTick(j):ie.once("end",j),ce.on("unpipe",$);function $(pt,St){b("onunpipe"),pt===ie&&St&&St.hasUnpiped===!1&&(St.hasUnpiped=!0,H())}function Re(){b("onend"),ce.end()}var Ie=ge(ie);ce.on("drain",Ie);var ne=!1;function H(){b("cleanup"),ce.removeListener("close",Oe),ce.removeListener("finish",Be),ce.removeListener("drain",Ie),ce.removeListener("error",ye),ce.removeListener("unpipe",$),ie.removeListener("end",Re),ie.removeListener("end",Ue),ie.removeListener("data",Z),ne=!0,W.awaitDrain&&(!ce._writableState||ce._writableState.needDrain)&&Ie()}ie.on("data",Z);function Z(pt){b("ondata");var St=ce.write(pt);b("dest.write",St),St===!1&&((W.pipesCount===1&&W.pipes===ce||W.pipesCount>1&&Ce(W.pipes,ce)!==-1)&&!ne&&(b("false write response, pause",W.awaitDrain),W.awaitDrain++),ie.pause())}function ye(pt){b("onerror",pt),Ue(),ce.removeListener("error",ye),c(ce,"error")===0&&ee(ce,pt)}he(ce,"error",ye);function Oe(){ce.removeListener("finish",Be),Ue()}ce.once("close",Oe);function Be(){b("onfinish"),ce.removeListener("close",Oe),Ue()}ce.once("finish",Be);function Ue(){b("unpipe"),ie.unpipe(ce)}return ce.emit("pipe",ie),W.flowing||(b("pipe resume"),ie.resume()),ce};function ge(ce){return function(){var ie=ce._readableState;b("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&c(ce,"data")&&(ie.flowing=!0,te(ce))}}P.prototype.unpipe=function(ce){var pe=this._readableState,ie={hasUnpiped:!1};if(pe.pipesCount===0)return this;if(pe.pipesCount===1)return ce&&ce!==pe.pipes?this:(ce||(ce=pe.pipes),pe.pipes=null,pe.pipesCount=0,pe.flowing=!1,ce&&ce.emit("unpipe",this,ie),this);if(!ce){var W=pe.pipes,K=pe.pipesCount;pe.pipes=null,pe.pipesCount=0,pe.flowing=!1;for(var j=0;j<K;j++)W[j].emit("unpipe",this,{hasUnpiped:!1});return this}var $=Ce(pe.pipes,ce);return $===-1?this:(pe.pipes.splice($,1),pe.pipesCount-=1,pe.pipesCount===1&&(pe.pipes=pe.pipes[0]),ce.emit("unpipe",this,ie),this)},P.prototype.on=function(ce,pe){var ie=f.prototype.on.call(this,ce,pe),W=this._readableState;return ce==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):ce==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,b("on readable",W.length,W.reading),W.length?le(this):W.reading||a.nextTick(Pe,this)),ie},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(ce,pe){var ie=f.prototype.removeListener.call(this,ce,pe);return ce==="readable"&&a.nextTick(Ae,this),ie},P.prototype.removeAllListeners=function(ce){var pe=f.prototype.removeAllListeners.apply(this,arguments);return(ce==="readable"||ce===void 0)&&a.nextTick(Ae,this),pe};function Ae(ce){var pe=ce._readableState;pe.readableListening=ce.listenerCount("readable")>0,pe.resumeScheduled&&!pe.paused?pe.flowing=!0:ce.listenerCount("data")>0&&ce.resume()}function Pe(ce){b("readable nexttick read 0"),ce.read(0)}P.prototype.resume=function(){var ce=this._readableState;return ce.flowing||(b("resume"),ce.flowing=!ce.readableListening,We(this,ce)),ce.paused=!1,this};function We(ce,pe){pe.resumeScheduled||(pe.resumeScheduled=!0,a.nextTick(it,ce,pe))}function it(ce,pe){b("resume",pe.reading),pe.reading||ce.read(0),pe.resumeScheduled=!1,ce.emit("resume"),te(ce),pe.flowing&&!pe.reading&&ce.read(0)}P.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function te(ce){var pe=ce._readableState;for(b("flow",pe.flowing);pe.flowing&&ce.read()!==null;);}P.prototype.wrap=function(ce){var pe=this,ie=this._readableState,W=!1;ce.on("end",function(){if(b("wrapped end"),ie.decoder&&!ie.ended){var $=ie.decoder.end();$&&$.length&&pe.push($)}pe.push(null)}),ce.on("data",function($){if(b("wrapped data"),ie.decoder&&($=ie.decoder.write($)),!(ie.objectMode&&$==null)&&!(!ie.objectMode&&(!$||!$.length))){var Re=pe.push($);Re||(W=!0,ce.pause())}});for(var K in ce)this[K]===void 0&&typeof ce[K]=="function"&&(this[K]=(function(Re){return function(){return ce[Re].apply(ce,arguments)}})(K));for(var j=0;j<se.length;j++)ce.on(se[j],this.emit.bind(this,se[j]));return this._read=function($){b("wrapped _read",$),W&&(W=!1,ce.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return L===void 0&&(L=t("./internal/streams/async_iterator")),L(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(pe){this._readableState&&(this._readableState.flowing=pe)}}),P._fromList=xe,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function xe(ce,pe){if(pe.length===0)return null;var ie;return pe.objectMode?ie=pe.buffer.shift():!ce||ce>=pe.length?(pe.decoder?ie=pe.buffer.join(""):pe.buffer.length===1?ie=pe.buffer.first():ie=pe.buffer.concat(pe.length),pe.buffer.clear()):ie=pe.buffer.consume(ce,pe.decoder),ie}function De(ce){var pe=ce._readableState;b("endReadable",pe.endEmitted),pe.endEmitted||(pe.ended=!0,a.nextTick(He,pe,ce))}function He(ce,pe){if(b("endReadableNT",ce.endEmitted,ce.length),!ce.endEmitted&&ce.length===0&&(ce.endEmitted=!0,pe.readable=!1,pe.emit("end"),ce.autoDestroy)){var ie=pe._writableState;(!ie||ie.autoDestroy&&ie.finished)&&pe.destroy()}}typeof Symbol=="function"&&(P.from=function(ce,pe){return Y===void 0&&(Y=t("./internal/streams/from")),Y(P,ce,pe)});function Ce(ce,pe){for(var ie=0,W=ce.length;ie<W;ie++)if(ce[ie]===pe)return ie;return-1}}).call(this)}).call(this,t("_process"),typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":66,"./_stream_duplex":67,"./internal/streams/async_iterator":72,"./internal/streams/buffer_list":73,"./internal/streams/destroy":74,"./internal/streams/from":76,"./internal/streams/state":78,"./internal/streams/stream":79,_process:63,buffer:32,events:35,inherits:46,"string_decoder/":80,util:29}],70:[function(t,i,r){i.exports=m;var a=t("../errors").codes,s=a.ERR_METHOD_NOT_IMPLEMENTED,o=a.ERR_MULTIPLE_CALLBACK,c=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,f=a.ERR_TRANSFORM_WITH_LENGTH_0,p=t("./_stream_duplex");t("inherits")(m,p);function d(b,S){var x=this._transformState;x.transforming=!1;var T=x.writecb;if(T===null)return this.emit("error",new o);x.writechunk=null,x.writecb=null,S!=null&&this.push(S),T(b);var M=this._readableState;M.reading=!1,(M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}function m(b){if(!(this instanceof m))return new m(b);p.call(this,b),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",v)}function v(){var b=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,x){_(b,S,x)}):_(this,null,null)}m.prototype.push=function(b,S){return this._transformState.needTransform=!1,p.prototype.push.call(this,b,S)},m.prototype._transform=function(b,S,x){x(new s("_transform()"))},m.prototype._write=function(b,S,x){var T=this._transformState;if(T.writecb=x,T.writechunk=b,T.writeencoding=S,!T.transforming){var M=this._readableState;(T.needTransform||M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}},m.prototype._read=function(b){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},m.prototype._destroy=function(b,S){p.prototype._destroy.call(this,b,function(x){S(x)})};function _(b,S,x){if(S)return b.emit("error",S);if(x!=null&&b.push(x),b._writableState.length)throw new f;if(b._transformState.transforming)throw new c;return b.push(null)}},{"../errors":66,"./_stream_duplex":67,inherits:46}],71:[function(t,i,r){(function(a,s){(function(){i.exports=de;function o(te){var xe=this;this.next=null,this.entry=null,this.finish=function(){it(xe,te)}}var c;de.WritableState=se;var f={deprecate:t("util-deprecate")},p=t("./internal/streams/stream"),d=t("buffer").Buffer,m=s.Uint8Array||function(){};function v(te){return d.from(te)}function _(te){return d.isBuffer(te)||te instanceof m}var b=t("./internal/streams/destroy"),S=t("./internal/streams/state"),x=S.getHighWaterMark,T=t("../errors").codes,M=T.ERR_INVALID_ARG_TYPE,A=T.ERR_METHOD_NOT_IMPLEMENTED,D=T.ERR_MULTIPLE_CALLBACK,O=T.ERR_STREAM_CANNOT_PIPE,I=T.ERR_STREAM_DESTROYED,U=T.ERR_STREAM_NULL_VALUES,N=T.ERR_STREAM_WRITE_AFTER_END,L=T.ERR_UNKNOWN_ENCODING,Y=b.errorOrDestroy;t("inherits")(de,p);function ee(){}function se(te,xe,De){c=c||t("./_stream_duplex"),te=te||{},typeof De!="boolean"&&(De=xe instanceof c),this.objectMode=!!te.objectMode,De&&(this.objectMode=this.objectMode||!!te.writableObjectMode),this.highWaterMark=x(this,te,"writableHighWaterMark",De),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var He=te.decodeStrings===!1;this.decodeStrings=!He,this.defaultEncoding=te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ce){J(xe,Ce)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=te.emitClose!==!1,this.autoDestroy=!!te.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}se.prototype.getBuffer=function(){for(var xe=this.bufferedRequest,De=[];xe;)De.push(xe),xe=xe.next;return De},(function(){try{Object.defineProperty(se.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var he;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(he=Function.prototype[Symbol.hasInstance],Object.defineProperty(de,Symbol.hasInstance,{value:function(xe){return he.call(this,xe)?!0:this!==de?!1:xe&&xe._writableState instanceof se}})):he=function(xe){return xe instanceof this};function de(te){c=c||t("./_stream_duplex");var xe=this instanceof c;if(!xe&&!he.call(de,this))return new de(te);this._writableState=new se(te,this,xe),this.writable=!0,te&&(typeof te.write=="function"&&(this._write=te.write),typeof te.writev=="function"&&(this._writev=te.writev),typeof te.destroy=="function"&&(this._destroy=te.destroy),typeof te.final=="function"&&(this._final=te.final)),p.call(this)}de.prototype.pipe=function(){Y(this,new O)};function P(te,xe){var De=new N;Y(te,De),a.nextTick(xe,De)}function B(te,xe,De,He){var Ce;return De===null?Ce=new U:typeof De!="string"&&!xe.objectMode&&(Ce=new M("chunk",["string","Buffer"],De)),Ce?(Y(te,Ce),a.nextTick(He,Ce),!1):!0}de.prototype.write=function(te,xe,De){var He=this._writableState,Ce=!1,ce=!He.objectMode&&_(te);return ce&&!d.isBuffer(te)&&(te=v(te)),typeof xe=="function"&&(De=xe,xe=null),ce?xe="buffer":xe||(xe=He.defaultEncoding),typeof De!="function"&&(De=ee),He.ending?P(this,De):(ce||B(this,He,te,De))&&(He.pendingcb++,Ce=ae(this,He,ce,te,xe,De)),Ce},de.prototype.cork=function(){this._writableState.corked++},de.prototype.uncork=function(){var te=this._writableState;te.corked&&(te.corked--,!te.writing&&!te.corked&&!te.bufferProcessing&&te.bufferedRequest&&Ee(this,te))},de.prototype.setDefaultEncoding=function(xe){if(typeof xe=="string"&&(xe=xe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((xe+"").toLowerCase())>-1))throw new L(xe);return this._writableState.defaultEncoding=xe,this},Object.defineProperty(de.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function V(te,xe,De){return!te.objectMode&&te.decodeStrings!==!1&&typeof xe=="string"&&(xe=d.from(xe,De)),xe}Object.defineProperty(de.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ae(te,xe,De,He,Ce,ce){if(!De){var pe=V(xe,He,Ce);He!==pe&&(De=!0,Ce="buffer",He=pe)}var ie=xe.objectMode?1:He.length;xe.length+=ie;var W=xe.length<xe.highWaterMark;if(W||(xe.needDrain=!0),xe.writing||xe.corked){var K=xe.lastBufferedRequest;xe.lastBufferedRequest={chunk:He,encoding:Ce,isBuf:De,callback:ce,next:null},K?K.next=xe.lastBufferedRequest:xe.bufferedRequest=xe.lastBufferedRequest,xe.bufferedRequestCount+=1}else X(te,xe,!1,ie,He,Ce,ce);return W}function X(te,xe,De,He,Ce,ce,pe){xe.writelen=He,xe.writecb=pe,xe.writing=!0,xe.sync=!0,xe.destroyed?xe.onwrite(new I("write")):De?te._writev(Ce,xe.onwrite):te._write(Ce,ce,xe.onwrite),xe.sync=!1}function oe(te,xe,De,He,Ce){--xe.pendingcb,De?(a.nextTick(Ce,He),a.nextTick(Pe,te,xe),te._writableState.errorEmitted=!0,Y(te,He)):(Ce(He),te._writableState.errorEmitted=!0,Y(te,He),Pe(te,xe))}function me(te){te.writing=!1,te.writecb=null,te.length-=te.writelen,te.writelen=0}function J(te,xe){var De=te._writableState,He=De.sync,Ce=De.writecb;if(typeof Ce!="function")throw new D;if(me(De),xe)oe(te,De,He,xe,Ce);else{var ce=re(De)||te.destroyed;!ce&&!De.corked&&!De.bufferProcessing&&De.bufferedRequest&&Ee(te,De),He?a.nextTick(le,te,De,ce,Ce):le(te,De,ce,Ce)}}function le(te,xe,De,He){De||Se(te,xe),xe.pendingcb--,He(),Pe(te,xe)}function Se(te,xe){xe.length===0&&xe.needDrain&&(xe.needDrain=!1,te.emit("drain"))}function Ee(te,xe){xe.bufferProcessing=!0;var De=xe.bufferedRequest;if(te._writev&&De&&De.next){var He=xe.bufferedRequestCount,Ce=new Array(He),ce=xe.corkedRequestsFree;ce.entry=De;for(var pe=0,ie=!0;De;)Ce[pe]=De,De.isBuf||(ie=!1),De=De.next,pe+=1;Ce.allBuffers=ie,X(te,xe,!0,xe.length,Ce,"",ce.finish),xe.pendingcb++,xe.lastBufferedRequest=null,ce.next?(xe.corkedRequestsFree=ce.next,ce.next=null):xe.corkedRequestsFree=new o(xe),xe.bufferedRequestCount=0}else{for(;De;){var W=De.chunk,K=De.encoding,j=De.callback,$=xe.objectMode?1:W.length;if(X(te,xe,!1,$,W,K,j),De=De.next,xe.bufferedRequestCount--,xe.writing)break}De===null&&(xe.lastBufferedRequest=null)}xe.bufferedRequest=De,xe.bufferProcessing=!1}de.prototype._write=function(te,xe,De){De(new A("_write()"))},de.prototype._writev=null,de.prototype.end=function(te,xe,De){var He=this._writableState;return typeof te=="function"?(De=te,te=null,xe=null):typeof xe=="function"&&(De=xe,xe=null),te!=null&&this.write(te,xe),He.corked&&(He.corked=1,this.uncork()),He.ending||We(this,He,De),this},Object.defineProperty(de.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function re(te){return te.ending&&te.length===0&&te.bufferedRequest===null&&!te.finished&&!te.writing}function ge(te,xe){te._final(function(De){xe.pendingcb--,De&&Y(te,De),xe.prefinished=!0,te.emit("prefinish"),Pe(te,xe)})}function Ae(te,xe){!xe.prefinished&&!xe.finalCalled&&(typeof te._final=="function"&&!xe.destroyed?(xe.pendingcb++,xe.finalCalled=!0,a.nextTick(ge,te,xe)):(xe.prefinished=!0,te.emit("prefinish")))}function Pe(te,xe){var De=re(xe);if(De&&(Ae(te,xe),xe.pendingcb===0&&(xe.finished=!0,te.emit("finish"),xe.autoDestroy))){var He=te._readableState;(!He||He.autoDestroy&&He.endEmitted)&&te.destroy()}return De}function We(te,xe,De){xe.ending=!0,Pe(te,xe),De&&(xe.finished?a.nextTick(De):te.once("finish",De)),xe.ended=!0,te.writable=!1}function it(te,xe,De){var He=te.entry;for(te.entry=null;He;){var Ce=He.callback;xe.pendingcb--,Ce(De),He=He.next}xe.corkedRequestsFree.next=te}Object.defineProperty(de.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(xe){this._writableState&&(this._writableState.destroyed=xe)}}),de.prototype.destroy=b.destroy,de.prototype._undestroy=b.undestroy,de.prototype._destroy=function(te,xe){xe(te)}}).call(this)}).call(this,t("_process"),typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":66,"./_stream_duplex":67,"./internal/streams/destroy":74,"./internal/streams/state":78,"./internal/streams/stream":79,_process:63,buffer:32,inherits:46,"util-deprecate":81}],72:[function(t,i,r){(function(a){(function(){var s;function o(I,U,N){return U in I?Object.defineProperty(I,U,{value:N,enumerable:!0,configurable:!0,writable:!0}):I[U]=N,I}var c=t("./end-of-stream"),f=Symbol("lastResolve"),p=Symbol("lastReject"),d=Symbol("error"),m=Symbol("ended"),v=Symbol("lastPromise"),_=Symbol("handlePromise"),b=Symbol("stream");function S(I,U){return{value:I,done:U}}function x(I){var U=I[f];if(U!==null){var N=I[b].read();N!==null&&(I[v]=null,I[f]=null,I[p]=null,U(S(N,!1)))}}function T(I){a.nextTick(x,I)}function M(I,U){return function(N,L){I.then(function(){if(U[m]){N(S(void 0,!0));return}U[_](N,L)},L)}}var A=Object.getPrototypeOf(function(){}),D=Object.setPrototypeOf((s={get stream(){return this[b]},next:function(){var U=this,N=this[d];if(N!==null)return Promise.reject(N);if(this[m])return Promise.resolve(S(void 0,!0));if(this[b].destroyed)return new Promise(function(se,he){a.nextTick(function(){U[d]?he(U[d]):se(S(void 0,!0))})});var L=this[v],Y;if(L)Y=new Promise(M(L,this));else{var ee=this[b].read();if(ee!==null)return Promise.resolve(S(ee,!1));Y=new Promise(this[_])}return this[v]=Y,Y}},o(s,Symbol.asyncIterator,function(){return this}),o(s,"return",function(){var U=this;return new Promise(function(N,L){U[b].destroy(null,function(Y){if(Y){L(Y);return}N(S(void 0,!0))})})}),s),A),O=function(U){var N,L=Object.create(D,(N={},o(N,b,{value:U,writable:!0}),o(N,f,{value:null,writable:!0}),o(N,p,{value:null,writable:!0}),o(N,d,{value:null,writable:!0}),o(N,m,{value:U._readableState.endEmitted,writable:!0}),o(N,_,{value:function(ee,se){var he=L[b].read();he?(L[v]=null,L[f]=null,L[p]=null,ee(S(he,!1))):(L[f]=ee,L[p]=se)},writable:!0}),N));return L[v]=null,c(U,function(Y){if(Y&&Y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ee=L[p];ee!==null&&(L[v]=null,L[f]=null,L[p]=null,ee(Y)),L[d]=Y;return}var se=L[f];se!==null&&(L[v]=null,L[f]=null,L[p]=null,se(S(void 0,!0))),L[m]=!0}),U.on("readable",T.bind(null,L)),L};i.exports=O}).call(this)}).call(this,t("_process"))},{"./end-of-stream":75,_process:63}],73:[function(t,i,r){function a(x,T){var M=Object.keys(x);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(x);T&&(A=A.filter(function(D){return Object.getOwnPropertyDescriptor(x,D).enumerable})),M.push.apply(M,A)}return M}function s(x){for(var T=1;T<arguments.length;T++){var M=arguments[T]!=null?arguments[T]:{};T%2?a(Object(M),!0).forEach(function(A){o(x,A,M[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(M)):a(Object(M)).forEach(function(A){Object.defineProperty(x,A,Object.getOwnPropertyDescriptor(M,A))})}return x}function o(x,T,M){return T in x?Object.defineProperty(x,T,{value:M,enumerable:!0,configurable:!0,writable:!0}):x[T]=M,x}function c(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}function f(x,T){for(var M=0;M<T.length;M++){var A=T[M];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}function p(x,T,M){return T&&f(x.prototype,T),x}var d=t("buffer"),m=d.Buffer,v=t("util"),_=v.inspect,b=_&&_.custom||"inspect";function S(x,T,M){m.prototype.copy.call(x,T,M)}i.exports=(function(){function x(){c(this,x),this.head=null,this.tail=null,this.length=0}return p(x,[{key:"push",value:function(M){var A={data:M,next:null};this.length>0?this.tail.next=A:this.head=A,this.tail=A,++this.length}},{key:"unshift",value:function(M){var A={data:M,next:this.head};this.length===0&&(this.tail=A),this.head=A,++this.length}},{key:"shift",value:function(){if(this.length!==0){var M=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,M}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(M){if(this.length===0)return"";for(var A=this.head,D=""+A.data;A=A.next;)D+=M+A.data;return D}},{key:"concat",value:function(M){if(this.length===0)return m.alloc(0);for(var A=m.allocUnsafe(M>>>0),D=this.head,O=0;D;)S(D.data,A,O),O+=D.data.length,D=D.next;return A}},{key:"consume",value:function(M,A){var D;return M<this.head.data.length?(D=this.head.data.slice(0,M),this.head.data=this.head.data.slice(M)):M===this.head.data.length?D=this.shift():D=A?this._getString(M):this._getBuffer(M),D}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(M){var A=this.head,D=1,O=A.data;for(M-=O.length;A=A.next;){var I=A.data,U=M>I.length?I.length:M;if(U===I.length?O+=I:O+=I.slice(0,M),M-=U,M===0){U===I.length?(++D,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=I.slice(U));break}++D}return this.length-=D,O}},{key:"_getBuffer",value:function(M){var A=m.allocUnsafe(M),D=this.head,O=1;for(D.data.copy(A),M-=D.data.length;D=D.next;){var I=D.data,U=M>I.length?I.length:M;if(I.copy(A,A.length-M,0,U),M-=U,M===0){U===I.length?(++O,D.next?this.head=D.next:this.head=this.tail=null):(this.head=D,D.data=I.slice(U));break}++O}return this.length-=O,A}},{key:b,value:function(M,A){return _(this,s({},A,{depth:0,customInspect:!1}))}}]),x})()},{buffer:32,util:29}],74:[function(t,i,r){(function(a){(function(){function s(m,v){var _=this,b=this._readableState&&this._readableState.destroyed,S=this._writableState&&this._writableState.destroyed;return b||S?(v?v(m):m&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,a.nextTick(p,this,m)):a.nextTick(p,this,m)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(m||null,function(x){!v&&x?_._writableState?_._writableState.errorEmitted?a.nextTick(c,_):(_._writableState.errorEmitted=!0,a.nextTick(o,_,x)):a.nextTick(o,_,x):v?(a.nextTick(c,_),v(x)):a.nextTick(c,_)}),this)}function o(m,v){p(m,v),c(m)}function c(m){m._writableState&&!m._writableState.emitClose||m._readableState&&!m._readableState.emitClose||m.emit("close")}function f(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function p(m,v){m.emit("error",v)}function d(m,v){var _=m._readableState,b=m._writableState;_&&_.autoDestroy||b&&b.autoDestroy?m.destroy(v):m.emit("error",v)}i.exports={destroy:s,undestroy:f,errorOrDestroy:d}}).call(this)}).call(this,t("_process"))},{_process:63}],75:[function(t,i,r){var a=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(p){var d=!1;return function(){if(!d){d=!0;for(var m=arguments.length,v=new Array(m),_=0;_<m;_++)v[_]=arguments[_];p.apply(this,v)}}}function o(){}function c(p){return p.setHeader&&typeof p.abort=="function"}function f(p,d,m){if(typeof d=="function")return f(p,null,d);d||(d={}),m=s(m||o);var v=d.readable||d.readable!==!1&&p.readable,_=d.writable||d.writable!==!1&&p.writable,b=function(){p.writable||x()},S=p._writableState&&p._writableState.finished,x=function(){_=!1,S=!0,v||m.call(p)},T=p._readableState&&p._readableState.endEmitted,M=function(){v=!1,T=!0,_||m.call(p)},A=function(U){m.call(p,U)},D=function(){var U;if(v&&!T)return(!p._readableState||!p._readableState.ended)&&(U=new a),m.call(p,U);if(_&&!S)return(!p._writableState||!p._writableState.ended)&&(U=new a),m.call(p,U)},O=function(){p.req.on("finish",x)};return c(p)?(p.on("complete",x),p.on("abort",D),p.req?O():p.on("request",O)):_&&!p._writableState&&(p.on("end",b),p.on("close",b)),p.on("end",M),p.on("finish",x),d.error!==!1&&p.on("error",A),p.on("close",D),function(){p.removeListener("complete",x),p.removeListener("abort",D),p.removeListener("request",O),p.req&&p.req.removeListener("finish",x),p.removeListener("end",b),p.removeListener("close",b),p.removeListener("finish",x),p.removeListener("end",M),p.removeListener("error",A),p.removeListener("close",D)}}i.exports=f},{"../../../errors":66}],76:[function(t,i,r){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],77:[function(t,i,r){var a;function s(x){var T=!1;return function(){T||(T=!0,x.apply(void 0,arguments))}}var o=t("../../../errors").codes,c=o.ERR_MISSING_ARGS,f=o.ERR_STREAM_DESTROYED;function p(x){if(x)throw x}function d(x){return x.setHeader&&typeof x.abort=="function"}function m(x,T,M,A){A=s(A);var D=!1;x.on("close",function(){D=!0}),a===void 0&&(a=t("./end-of-stream")),a(x,{readable:T,writable:M},function(I){if(I)return A(I);D=!0,A()});var O=!1;return function(I){if(!D&&!O){if(O=!0,d(x))return x.abort();if(typeof x.destroy=="function")return x.destroy();A(I||new f("pipe"))}}}function v(x){x()}function _(x,T){return x.pipe(T)}function b(x){return!x.length||typeof x[x.length-1]!="function"?p:x.pop()}function S(){for(var x=arguments.length,T=new Array(x),M=0;M<x;M++)T[M]=arguments[M];var A=b(T);if(Array.isArray(T[0])&&(T=T[0]),T.length<2)throw new c("streams");var D,O=T.map(function(I,U){var N=U<T.length-1,L=U>0;return m(I,N,L,function(Y){D||(D=Y),Y&&O.forEach(v),!N&&(O.forEach(v),A(D))})});return T.reduce(_)}i.exports=S},{"../../../errors":66,"./end-of-stream":75}],78:[function(t,i,r){var a=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;function s(c,f,p){return c.highWaterMark!=null?c.highWaterMark:f?c[p]:null}function o(c,f,p,d){var m=s(f,d,p);if(m!=null){if(!(isFinite(m)&&Math.floor(m)===m)||m<0){var v=d?p:"highWaterMark";throw new a(v,m)}return Math.floor(m)}return c.objectMode?16:16*1024}i.exports={getHighWaterMark:o}},{"../../../errors":66}],79:[function(t,i,r){i.exports=t("events").EventEmitter},{events:35}],80:[function(t,i,r){var a=t("safe-buffer").Buffer,s=a.isEncoding||function(O){switch(O=""+O,O&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(O){if(!O)return"utf8";for(var I;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(I)return;O=(""+O).toLowerCase(),I=!0}}function c(O){var I=o(O);if(typeof I!="string"&&(a.isEncoding===s||!s(O)))throw new Error("Unknown encoding: "+O);return I||O}r.StringDecoder=f;function f(O){this.encoding=c(O);var I;switch(this.encoding){case"utf16le":this.text=S,this.end=x,I=4;break;case"utf8":this.fillLast=v,I=4;break;case"base64":this.text=T,this.end=M,I=3;break;default:this.write=A,this.end=D;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(I)}f.prototype.write=function(O){if(O.length===0)return"";var I,U;if(this.lastNeed){if(I=this.fillLast(O),I===void 0)return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<O.length?I?I+this.text(O,U):this.text(O,U):I||""},f.prototype.end=b,f.prototype.text=_,f.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length};function p(O){return O<=127?0:O>>5===6?2:O>>4===14?3:O>>3===30?4:O>>6===2?-1:-2}function d(O,I,U){var N=I.length-1;if(N<U)return 0;var L=p(I[N]);return L>=0?(L>0&&(O.lastNeed=L-1),L):--N<U||L===-2?0:(L=p(I[N]),L>=0?(L>0&&(O.lastNeed=L-2),L):--N<U||L===-2?0:(L=p(I[N]),L>=0?(L>0&&(L===2?L=0:O.lastNeed=L-3),L):0))}function m(O,I,U){if((I[0]&192)!==128)return O.lastNeed=0,"";if(O.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return O.lastNeed=1,"";if(O.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return O.lastNeed=2,""}}function v(O){var I=this.lastTotal-this.lastNeed,U=m(this,O);if(U!==void 0)return U;if(this.lastNeed<=O.length)return O.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,I,0,O.length),this.lastNeed-=O.length}function _(O,I){var U=d(this,O,I);if(!this.lastNeed)return O.toString("utf8",I);this.lastTotal=U;var N=O.length-(U-this.lastNeed);return O.copy(this.lastChar,0,N),O.toString("utf8",I,N)}function b(O){var I=O&&O.length?this.write(O):"";return this.lastNeed?I+"":I}function S(O,I){if((O.length-I)%2===0){var U=O.toString("utf16le",I);if(U){var N=U.charCodeAt(U.length-1);if(N>=55296&&N<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",I,O.length-1)}function x(O){var I=O&&O.length?this.write(O):"";if(this.lastNeed){var U=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,U)}return I}function T(O,I){var U=(O.length-I)%3;return U===0?O.toString("base64",I):(this.lastNeed=3-U,this.lastTotal=3,U===1?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",I,O.length-U))}function M(O){var I=O&&O.length?this.write(O):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function A(O){return O.toString(this.encoding)}function D(O){return O&&O.length?this.write(O):""}},{"safe-buffer":64}],81:[function(t,i,r){(function(a){(function(){i.exports=s;function s(c,f){if(o("noDeprecation"))return c;var p=!1;function d(){if(!p){if(o("throwDeprecation"))throw new Error(f);o("traceDeprecation")?console.trace(f):console.warn(f),p=!0}return c.apply(this,arguments)}return d}function o(c){try{if(!a.localStorage)return!1}catch{return!1}var f=a.localStorage[c];return f==null?!1:String(f).toLowerCase()==="true"}}).call(this)}).call(this,typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{}],82:[function(t,i,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],83:[function(t,i,r){var a=t("is-arguments"),s=t("is-generator-function"),o=t("which-typed-array"),c=t("is-typed-array");function f(j){return j.call.bind(j)}var p=typeof BigInt<"u",d=typeof Symbol<"u",m=f(Object.prototype.toString),v=f(Number.prototype.valueOf),_=f(String.prototype.valueOf),b=f(Boolean.prototype.valueOf);if(p)var S=f(BigInt.prototype.valueOf);if(d)var x=f(Symbol.prototype.valueOf);function T(j,$){if(typeof j!="object")return!1;try{return $(j),!0}catch{return!1}}r.isArgumentsObject=a,r.isGeneratorFunction=s,r.isTypedArray=c;function M(j){return typeof Promise<"u"&&j instanceof Promise||j!==null&&typeof j=="object"&&typeof j.then=="function"&&typeof j.catch=="function"}r.isPromise=M;function A(j){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(j):c(j)||re(j)}r.isArrayBufferView=A;function D(j){return o(j)==="Uint8Array"}r.isUint8Array=D;function O(j){return o(j)==="Uint8ClampedArray"}r.isUint8ClampedArray=O;function I(j){return o(j)==="Uint16Array"}r.isUint16Array=I;function U(j){return o(j)==="Uint32Array"}r.isUint32Array=U;function N(j){return o(j)==="Int8Array"}r.isInt8Array=N;function L(j){return o(j)==="Int16Array"}r.isInt16Array=L;function Y(j){return o(j)==="Int32Array"}r.isInt32Array=Y;function ee(j){return o(j)==="Float32Array"}r.isFloat32Array=ee;function se(j){return o(j)==="Float64Array"}r.isFloat64Array=se;function he(j){return o(j)==="BigInt64Array"}r.isBigInt64Array=he;function de(j){return o(j)==="BigUint64Array"}r.isBigUint64Array=de;function P(j){return m(j)==="[object Map]"}P.working=typeof Map<"u"&&P(new Map);function B(j){return typeof Map>"u"?!1:P.working?P(j):j instanceof Map}r.isMap=B;function V(j){return m(j)==="[object Set]"}V.working=typeof Set<"u"&&V(new Set);function ae(j){return typeof Set>"u"?!1:V.working?V(j):j instanceof Set}r.isSet=ae;function X(j){return m(j)==="[object WeakMap]"}X.working=typeof WeakMap<"u"&&X(new WeakMap);function oe(j){return typeof WeakMap>"u"?!1:X.working?X(j):j instanceof WeakMap}r.isWeakMap=oe;function me(j){return m(j)==="[object WeakSet]"}me.working=typeof WeakSet<"u"&&me(new WeakSet);function J(j){return me(j)}r.isWeakSet=J;function le(j){return m(j)==="[object ArrayBuffer]"}le.working=typeof ArrayBuffer<"u"&&le(new ArrayBuffer);function Se(j){return typeof ArrayBuffer>"u"?!1:le.working?le(j):j instanceof ArrayBuffer}r.isArrayBuffer=Se;function Ee(j){return m(j)==="[object DataView]"}Ee.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Ee(new DataView(new ArrayBuffer(1),0,1));function re(j){return typeof DataView>"u"?!1:Ee.working?Ee(j):j instanceof DataView}r.isDataView=re;var ge=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Ae(j){return m(j)==="[object SharedArrayBuffer]"}function Pe(j){return typeof ge>"u"?!1:(typeof Ae.working>"u"&&(Ae.working=Ae(new ge)),Ae.working?Ae(j):j instanceof ge)}r.isSharedArrayBuffer=Pe;function We(j){return m(j)==="[object AsyncFunction]"}r.isAsyncFunction=We;function it(j){return m(j)==="[object Map Iterator]"}r.isMapIterator=it;function te(j){return m(j)==="[object Set Iterator]"}r.isSetIterator=te;function xe(j){return m(j)==="[object Generator]"}r.isGeneratorObject=xe;function De(j){return m(j)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=De;function He(j){return T(j,v)}r.isNumberObject=He;function Ce(j){return T(j,_)}r.isStringObject=Ce;function ce(j){return T(j,b)}r.isBooleanObject=ce;function pe(j){return p&&T(j,S)}r.isBigIntObject=pe;function ie(j){return d&&T(j,x)}r.isSymbolObject=ie;function W(j){return He(j)||Ce(j)||ce(j)||pe(j)||ie(j)}r.isBoxedPrimitive=W;function K(j){return typeof Uint8Array<"u"&&(Se(j)||Pe(j))}r.isAnyArrayBuffer=K,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(j){Object.defineProperty(r,j,{enumerable:!1,value:function(){throw new Error(j+" is not supported in userland")}})})},{"is-arguments":47,"is-generator-function":49,"is-typed-array":50,"which-typed-array":85}],84:[function(t,i,r){(function(a){(function(){var s=Object.getOwnPropertyDescriptors||function(ge){for(var Ae=Object.keys(ge),Pe={},We=0;We<Ae.length;We++)Pe[Ae[We]]=Object.getOwnPropertyDescriptor(ge,Ae[We]);return Pe},o=/%[sdj%]/g;r.format=function(re){if(!L(re)){for(var ge=[],Ae=0;Ae<arguments.length;Ae++)ge.push(d(arguments[Ae]));return ge.join(" ")}for(var Ae=1,Pe=arguments,We=Pe.length,it=String(re).replace(o,function(xe){if(xe==="%%")return"%";if(Ae>=We)return xe;switch(xe){case"%s":return String(Pe[Ae++]);case"%d":return Number(Pe[Ae++]);case"%j":try{return JSON.stringify(Pe[Ae++])}catch{return"[Circular]"}default:return xe}}),te=Pe[Ae];Ae<We;te=Pe[++Ae])I(te)||!he(te)?it+=" "+te:it+=" "+d(te);return it},r.deprecate=function(re,ge){if(typeof a<"u"&&a.noDeprecation===!0)return re;if(typeof a>"u")return function(){return r.deprecate(re,ge).apply(this,arguments)};var Ae=!1;function Pe(){if(!Ae){if(a.throwDeprecation)throw new Error(ge);a.traceDeprecation?console.trace(ge):console.error(ge),Ae=!0}return re.apply(this,arguments)}return Pe};var c={},f=/^$/;if(a.env.NODE_DEBUG){var p=a.env.NODE_DEBUG;p=p.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),f=new RegExp("^"+p+"$","i")}r.debuglog=function(re){if(re=re.toUpperCase(),!c[re])if(f.test(re)){var ge=a.pid;c[re]=function(){var Ae=r.format.apply(r,arguments);console.error("%s %d: %s",re,ge,Ae)}}else c[re]=function(){};return c[re]};function d(re,ge){var Ae={seen:[],stylize:v};return arguments.length>=3&&(Ae.depth=arguments[2]),arguments.length>=4&&(Ae.colors=arguments[3]),O(ge)?Ae.showHidden=ge:ge&&r._extend(Ae,ge),ee(Ae.showHidden)&&(Ae.showHidden=!1),ee(Ae.depth)&&(Ae.depth=2),ee(Ae.colors)&&(Ae.colors=!1),ee(Ae.customInspect)&&(Ae.customInspect=!0),Ae.colors&&(Ae.stylize=m),b(Ae,re,Ae.depth)}r.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function m(re,ge){var Ae=d.styles[ge];return Ae?"\x1B["+d.colors[Ae][0]+"m"+re+"\x1B["+d.colors[Ae][1]+"m":re}function v(re,ge){return re}function _(re){var ge={};return re.forEach(function(Ae,Pe){ge[Ae]=!0}),ge}function b(re,ge,Ae){if(re.customInspect&&ge&&B(ge.inspect)&&ge.inspect!==r.inspect&&!(ge.constructor&&ge.constructor.prototype===ge)){var Pe=ge.inspect(Ae,re);return L(Pe)||(Pe=b(re,Pe,Ae)),Pe}var We=S(re,ge);if(We)return We;var it=Object.keys(ge),te=_(it);if(re.showHidden&&(it=Object.getOwnPropertyNames(ge)),P(ge)&&(it.indexOf("message")>=0||it.indexOf("description")>=0))return x(ge);if(it.length===0){if(B(ge)){var xe=ge.name?": "+ge.name:"";return re.stylize("[Function"+xe+"]","special")}if(se(ge))return re.stylize(RegExp.prototype.toString.call(ge),"regexp");if(de(ge))return re.stylize(Date.prototype.toString.call(ge),"date");if(P(ge))return x(ge)}var De="",He=!1,Ce=["{","}"];if(D(ge)&&(He=!0,Ce=["[","]"]),B(ge)){var ce=ge.name?": "+ge.name:"";De=" [Function"+ce+"]"}if(se(ge)&&(De=" "+RegExp.prototype.toString.call(ge)),de(ge)&&(De=" "+Date.prototype.toUTCString.call(ge)),P(ge)&&(De=" "+x(ge)),it.length===0&&(!He||ge.length==0))return Ce[0]+De+Ce[1];if(Ae<0)return se(ge)?re.stylize(RegExp.prototype.toString.call(ge),"regexp"):re.stylize("[Object]","special");re.seen.push(ge);var pe;return He?pe=T(re,ge,Ae,te,it):pe=it.map(function(ie){return M(re,ge,Ae,te,ie,He)}),re.seen.pop(),A(pe,De,Ce)}function S(re,ge){if(ee(ge))return re.stylize("undefined","undefined");if(L(ge)){var Ae="'"+JSON.stringify(ge).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return re.stylize(Ae,"string")}if(N(ge))return re.stylize(""+ge,"number");if(O(ge))return re.stylize(""+ge,"boolean");if(I(ge))return re.stylize("null","null")}function x(re){return"["+Error.prototype.toString.call(re)+"]"}function T(re,ge,Ae,Pe,We){for(var it=[],te=0,xe=ge.length;te<xe;++te)J(ge,String(te))?it.push(M(re,ge,Ae,Pe,String(te),!0)):it.push("");return We.forEach(function(De){De.match(/^\d+$/)||it.push(M(re,ge,Ae,Pe,De,!0))}),it}function M(re,ge,Ae,Pe,We,it){var te,xe,De;if(De=Object.getOwnPropertyDescriptor(ge,We)||{value:ge[We]},De.get?De.set?xe=re.stylize("[Getter/Setter]","special"):xe=re.stylize("[Getter]","special"):De.set&&(xe=re.stylize("[Setter]","special")),J(Pe,We)||(te="["+We+"]"),xe||(re.seen.indexOf(De.value)<0?(I(Ae)?xe=b(re,De.value,null):xe=b(re,De.value,Ae-1),xe.indexOf(`
`)>-1&&(it?xe=xe.split(`
`).map(function(He){return"  "+He}).join(`
`).slice(2):xe=`
`+xe.split(`
`).map(function(He){return"   "+He}).join(`
`))):xe=re.stylize("[Circular]","special")),ee(te)){if(it&&We.match(/^\d+$/))return xe;te=JSON.stringify(""+We),te.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(te=te.slice(1,-1),te=re.stylize(te,"name")):(te=te.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),te=re.stylize(te,"string"))}return te+": "+xe}function A(re,ge,Ae){var Pe=re.reduce(function(We,it){return it.indexOf(`
`)>=0,We+it.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Pe>60?Ae[0]+(ge===""?"":ge+`
 `)+" "+re.join(`,
  `)+" "+Ae[1]:Ae[0]+ge+" "+re.join(", ")+" "+Ae[1]}r.types=t("./support/types");function D(re){return Array.isArray(re)}r.isArray=D;function O(re){return typeof re=="boolean"}r.isBoolean=O;function I(re){return re===null}r.isNull=I;function U(re){return re==null}r.isNullOrUndefined=U;function N(re){return typeof re=="number"}r.isNumber=N;function L(re){return typeof re=="string"}r.isString=L;function Y(re){return typeof re=="symbol"}r.isSymbol=Y;function ee(re){return re===void 0}r.isUndefined=ee;function se(re){return he(re)&&ae(re)==="[object RegExp]"}r.isRegExp=se,r.types.isRegExp=se;function he(re){return typeof re=="object"&&re!==null}r.isObject=he;function de(re){return he(re)&&ae(re)==="[object Date]"}r.isDate=de,r.types.isDate=de;function P(re){return he(re)&&(ae(re)==="[object Error]"||re instanceof Error)}r.isError=P,r.types.isNativeError=P;function B(re){return typeof re=="function"}r.isFunction=B;function V(re){return re===null||typeof re=="boolean"||typeof re=="number"||typeof re=="string"||typeof re=="symbol"||typeof re>"u"}r.isPrimitive=V,r.isBuffer=t("./support/isBuffer");function ae(re){return Object.prototype.toString.call(re)}function X(re){return re<10?"0"+re.toString(10):re.toString(10)}var oe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function me(){var re=new Date,ge=[X(re.getHours()),X(re.getMinutes()),X(re.getSeconds())].join(":");return[re.getDate(),oe[re.getMonth()],ge].join(" ")}r.log=function(){console.log("%s - %s",me(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(re,ge){if(!ge||!he(ge))return re;for(var Ae=Object.keys(ge),Pe=Ae.length;Pe--;)re[Ae[Pe]]=ge[Ae[Pe]];return re};function J(re,ge){return Object.prototype.hasOwnProperty.call(re,ge)}var le=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(ge){if(typeof ge!="function")throw new TypeError('The "original" argument must be of type Function');if(le&&ge[le]){var Ae=ge[le];if(typeof Ae!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ae,le,{value:Ae,enumerable:!1,writable:!1,configurable:!0}),Ae}function Ae(){for(var Pe,We,it=new Promise(function(De,He){Pe=De,We=He}),te=[],xe=0;xe<arguments.length;xe++)te.push(arguments[xe]);te.push(function(De,He){De?We(De):Pe(He)});try{ge.apply(this,te)}catch(De){We(De)}return it}return Object.setPrototypeOf(Ae,Object.getPrototypeOf(ge)),le&&Object.defineProperty(Ae,le,{value:Ae,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ae,s(ge))},r.promisify.custom=le;function Se(re,ge){if(!re){var Ae=new Error("Promise was rejected with a falsy value");Ae.reason=re,re=Ae}return ge(re)}function Ee(re){if(typeof re!="function")throw new TypeError('The "original" argument must be of type Function');function ge(){for(var Ae=[],Pe=0;Pe<arguments.length;Pe++)Ae.push(arguments[Pe]);var We=Ae.pop();if(typeof We!="function")throw new TypeError("The last argument must be of type Function");var it=this,te=function(){return We.apply(it,arguments)};re.apply(this,Ae).then(function(xe){a.nextTick(te.bind(null,null,xe))},function(xe){a.nextTick(Se.bind(null,xe,te))})}return Object.setPrototypeOf(ge,Object.getPrototypeOf(re)),Object.defineProperties(ge,s(re)),ge}r.callbackify=Ee}).call(this)}).call(this,t("_process"))},{"./support/isBuffer":82,"./support/types":83,_process:63,inherits:46}],85:[function(t,i,r){(function(a){(function(){var s=t("for-each"),o=t("available-typed-arrays"),c=t("call-bind/callBound"),f=t("gopd"),p=c("Object.prototype.toString"),d=t("has-tostringtag/shams")(),m=typeof globalThis>"u"?a:globalThis,v=o(),_=c("String.prototype.slice"),b={},S=Object.getPrototypeOf;d&&f&&S&&s(v,function(M){if(typeof m[M]=="function"){var A=new m[M];if(Symbol.toStringTag in A){var D=S(A),O=f(D,Symbol.toStringTag);if(!O){var I=S(D);O=f(I,Symbol.toStringTag)}b[M]=O.get}}});var x=function(A){var D=!1;return s(b,function(O,I){if(!D)try{var U=O.call(A);U===I&&(D=U)}catch{}}),D},T=t("is-typed-array");i.exports=function(A){return T(A)?!d||!(Symbol.toStringTag in A)?_(p(A),8,-1):x(A):!1}}).call(this)}).call(this,typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":27,"call-bind/callBound":33,"for-each":36,gopd:40,"has-tostringtag/shams":43,"is-typed-array":50}]},{},[20])(20)})})(KM)),KM.exports}var $M=ete();const YE={read(n){const{data:e,height:t,width:i}=$M.PNG.sync.read(n);return{data:new Uint8ClampedArray(e),height:t,width:i}},write(n,e,t){const i=new $M.PNG({colorType:2,height:e,width:t}).pack();return i.data=nE.Buffer.from(n),$M.PNG.sync.write(i)}},ak={preprocessing(n){const{blueprint:e}=n;e.origin_rotation=jh(e.origin_rotation),Nn(e.overlay)&&(e.overlay.rotation=jh(e.overlay.rotation));const{map:t}=n;t.stations.forEach(r=>{r.collision_shapes.forEach(a=>{a.rotation=jh(a.rotation)}),r.slots.forEach(a=>{a.rotation=jh(a.rotation)}),r.rotation=jh(r.rotation)});const{robot_lines:i}=n;return{blueprint:e,map:t,robot_lines:i}},toCoreBlueprintTexture(n){const e=NC.decode(n),t=BC.decompress(e),i=nE.Buffer.from(t),r=s=>[0,this.vizyrAlpha(s),0,0],{data:a}=YE.read(i);for(let s=0;s<a.length;s+=4){const[o,c,f,p]=[s,s+1,s+2,s+3],[d,m,v,_]=r([a[o],a[c],a[f]]);a[o]=d,a[c]=m,a[f]=v,a[p]=_}return a},toCoreBlueprintData(n){return{components:{},id:"blueprint",metadata:{alphaMap:this.toCoreBlueprintTexture(n.png_localization),height:n.height,name:n.name,png:n.png_localization,resolution:n.resolution,width:n.width},position:new ve(n.resolution*.5*n.width+n.origin_x,n.resolution*.5*n.height+n.origin_y,0),rotation:new Fn(0,0,n.origin_rotation),scale:new ve(1,1,1),visible:!0}},toCoreCollisionShapeData(n){return{components:{},id:gs(),metadata:{altitude:n.altitude,depth:n.width,height:n.height,width:n.depth},position:new ve(n.x,n.y,0),rotation:new Fn(0,0,n.rotation),scale:new ve(1,1,1),visible:!0}},toCoreNodeData(n){let e;return Nn(n.slot)&&(e={flags:n.slot.flags,id:n.slot.id,name:n.slot.name,serialNumber:n.slot.serial_number}),{components:{},id:n.id,metadata:{slot:e,type:"path"},position:new ve(n.x,n.y,0),rotation:new Fn(0,0,0),scale:new ve(1,1,1),visible:!0}},toCoreNodesMapping(n){return n.map(e=>({correlationID:e.id,node:this.toCoreNodeData(e)}))},toCoreMapData(n){n=this.preprocessing(n);const e=this.toCoreNodesMapping(n.map.nodes),t=this.toCoreBlueprintData(n.blueprint),i=e.map(d=>d.node),r=Nn(n.blueprint.overlay)?this.toCoreOverlayData(n.blueprint.overlay,n.blueprint.resolution):void 0,a=this.toCorePathTriggersData(n.map.path_triggers),s=this.toCorePathDataArray(n.map.paths,e),o=this.toCorePickupAreasData(n.map.pick_up_areas),c=this.toCoreRobotLines(n.robot_lines),f=this.toCoreSideData(n),p=this.toCoreStationDataArray(n.map.stations,e);return{blueprint:t,nodes:i,overlay:r,pathTriggers:a,paths:s,pickupAreas:o,robotLines:c,sideData:f,stations:p}},toCoreOverlayData(n,e){const t=NC.decode(n.image),i=BC.decompress(t),r=nE.Buffer.from(i),{data:a,height:s,width:o}=YE.read(r),c=e*n.width/o,f=e*n.height/s,p=new ve(e*n.x,-e*n.y,0),[d,m]=[.5*o,.5*s],v=new ve(e*d,-e*m),_=new ve(e*.5*(n.width-o),-e*.5*(n.height-s)),b=new ve(p.x+v.x+_.x,p.y+v.y+_.y),S=new Ft().setPosition(p),x=new Ft().makeRotationAxis(ko.zHat(),-n.rotation),T=new Ft().setPosition(p.clone().negate()),M=S.multiply(x).multiply(T),A=b.clone().applyMatrix4(M);return{components:{},id:gs(),metadata:{data:a,height:s,image:n.image,opacity:n.opacity,resolution:e,width:o},position:A,rotation:new Fn(0,0,n.rotation),scale:new ve(c,f,1),visible:!0}},toCorePathTriggerData(n){return{distance:n.distance,horizon:n.horizon,id:n.id,pathID:n.path_id,reversed:n.reversed,sound:n.sound,speedLimit:n.speed_limit}},toCorePathTriggersData(n){return n.map(e=>this.toCorePathTriggerData(e))},toCorePathData(n,e){const t=e.find(r=>n.end_node_id===r.correlationID)?.node.id;if(lt(t))throw new Error("VizyrMappingService.toPathData: endNodeID undefined");const i=e.find(r=>n.start_node_id===r.correlationID)?.node.id;if(lt(i))throw new Error("VizyrMappingService.toPathData: startNodeID undefined");return{components:{},id:n.id,metadata:{disabled:n.disabled,endNodeID:t,isTwoWay:n.is_two_way,startNodeID:i,type:"way"},position:new ve(0,0,0),rotation:new Fn(0,0,0),scale:new ve(1,1,1),visible:!0}},toCorePathDataArray(n,e){return n.map(t=>this.toCorePathData(t,e))},toCorePickupAreaData(n){return{id:n.id,nodeID:n.node_id,points:n.points.map(e=>new ve(e.x,e.y,0))}},toCorePickupAreasData(n){return n.map(e=>this.toCorePickupAreaData(e))},toCoreReflectorsData(n){return{components:{},id:gs(),metadata:{distance:n.reflectors_distance??0},position:new ve(0,0,0),rotation:new Fn(0,0,0),scale:new ve(1,1,1),visible:!0}},toCoreRobotLine(n){return{color:n.color,name:n.name,pathIDs:n.paths,robots:n.robots,slotBlocklist:n.slot_blocklist}},toCoreRobotLines(n){return n.map(e=>this.toCoreRobotLine(e))},toCoreSideData(n){return{blueprint:{height:n.blueprint.height,name:n.blueprint.name,png:n.blueprint.png_localization,position:new ve(n.blueprint.origin_x,n.blueprint.origin_y,0),rotation:new Fn(0,0,n.blueprint.origin_rotation),resolution:n.blueprint.resolution,width:n.blueprint.width},name:n.map.name,preview:n.map.preview}},toCoreStationData(n,e){const[t]=n.collision_shapes;if(lt(t))throw new Error("VizyrMappingService.toStationData: collisionShape undefined");const i=e.find(a=>n.node_id===a.correlationID),r={components:{collisionShape:this.toCoreCollisionShapeData(t),node:this.toCoreStationNodeData(n.collision_shapes),reflectors:this.toCoreReflectorsData(n),slots:this.toCoreStationSlotDataArray(n.slots)},id:gs(),metadata:{connectedTo:i?i.node.id:void 0,disabled:n.disabled,isLocked:n.is_locked,name:n.name,reliability:n.reliability,stationDefinitionID:n.station_definition_id,stationTemplateID:n.station_template_id,stationType:n.station_type,tags:n.tags},position:new ve(n.x,n.y,0),rotation:new Fn(0,0,n.rotation),scale:new ve(1,1,1),visible:!0};return this.toNodeCenteredStation(r)},toCoreStationDataArray(n,e){return n.map(t=>this.toCoreStationData(t,e))},toCoreStationNodeData(n){const[e]=n;if(lt(e))throw new Error("VizyrMappingService.toStationNodeData: undefined");return{components:{},id:gs(),metadata:{type:"station"},position:new ve(e.x+.5*e.depth,e.y,0),rotation:new Fn(0,0,0),scale:new ve(1,1,1),visible:!0}},toCoreStationSlotData(n){return{components:{},id:gs(),metadata:{altitude:n.altitude,approachLinearSpeed:n.approach_linear_speed,depth:n.width,elevationStrategy:n.elevation_strategy,endDockingLinearSpeed:n.end_docking_linear_speed,finalApproachDistance:n.final_approach_distance,flags:n.flags,forkLandingOnEntry:n.fork_landing_on_entry,forkLandingOnExit:n.fork_landing_on_exit,gateDistance:n.gate_distance,headGap:n.head_gap,height:n.height,interPalletDistance:n.inter_pallet_distance,k0:n.k0,k1:n.k1,maxDeviationForDocking:n.max_deviation_for_docking,maxDistanceForRetry:n.max_distance_for_retry,maxOffsetForDocking:n.max_offset_for_docking,minimalApproachDistance:n.minimal_approach_distance,name:n.name,obstacleMapEnabled:n.obstacle_map_enabled,pathConfig:n.path_config,raisedForkAltitude:n.raised_fork_altitude,reliabilityThresholdForAccurateDocking:n.reliability_threshold_for_accurate_docking,serialNumber:n.serial_number,startAltitude:n.start_altitude,undockDistanceThreshold:n.undock_distance_threshold,undockLinearSpeed:n.undock_linear_speed,width:n.length},position:new ve(n.x-.5*n.length,n.y,0),rotation:new Fn(0,0,n.rotation),scale:new ve(1,1,1),visible:!0}},toCoreStationSlotDataArray(n){return n.map(e=>this.toCoreStationSlotData(e))},toNodeCenteredStation(n){const e=ko.zHat(),t=new Or,i=new ve,r=new Ft().makeRotationAxis(e,n.components.collisionShape.rotation.z).setPosition(new ve(n.components.collisionShape.position.x+.5*n.components.collisionShape.metadata.width,n.components.collisionShape.position.y,n.components.collisionShape.position.z));n.components.node.position.set(0,0,0),n.components.collisionShape.position.set(-.5*n.components.collisionShape.metadata.width,0,0);const a=r.clone().invert(),s=new Ft;for(const o of n.components.slots)s.identity().makeRotationAxis(e,o.rotation.z).setPosition(o.position).multiply(a).decompose(o.position,t,i);return new Ft().identity().multiply(a).decompose(n.components.reflectors.position,t,i),new Ft().makeRotationAxis(e,n.rotation.z).setPosition(n.position).multiply(r).decompose(n.position,t,i),n},vizyrAlpha(n){const[e,t,i]=n,r=128-t,a=r>0?r:0,s=r>0?0:-r,o=a!==0||s!==0?s:1;return Math.max(a*2,Math.floor(o/3))}},Yr=4,sk={postprocessing(n){const{blueprint:e}=n;e.origin_rotation=Gr(WM(e.origin_rotation),Yr),e.origin_x=Gr(e.origin_x,Yr),e.origin_y=Gr(e.origin_y,Yr),Nn(e.overlay)&&(e.overlay.rotation=Gr(WM(e.overlay.rotation),Yr),e.overlay.x=Gr(e.overlay.x,Yr),e.overlay.y=Gr(e.overlay.y,Yr));const{map:t}=n;return t.nodes.forEach(i=>{i.x=Gr(i.x,Yr),i.y=Gr(i.y,Yr)}),t.pick_up_areas.forEach(i=>{i.points.forEach(r=>{r.x=Gr(r.x,Yr),r.y=Gr(r.y,Yr)})}),t.stations.forEach(i=>{i.collision_shapes.forEach(r=>{r.rotation=Gr(r.rotation,Yr),r.x=Gr(r.x,Yr),r.y=Gr(r.y,Yr)}),i.slots.forEach(r=>{r.rotation=Gr(r.rotation,Yr),r.x=Gr(r.x,Yr),r.y=Gr(r.y,Yr)}),i.rotation=Gr(b0(WM(i.rotation),360),Yr),i.x=Gr(i.x,Yr),i.y=Gr(i.y,Yr)}),n},toVizyrProjectData(n){if(lt(n.sideData))throw new Error("VizyrOutMappingService.toVizyrProjectData: data.sideData is undefined");const{blueprint:e,name:t,preview:i}=n.sideData,r=n.nodes.filter(m=>m.metadata.type==="path").map(m=>({id:m.id,slot:Nn(m.metadata.slot)?{flags:m.metadata.slot.flags,id:m.metadata.slot.id,name:m.metadata.slot.name,node_id:m.id,serial_number:m.metadata.slot.serialNumber}:void 0,x:m.position.x,y:m.position.y})),a=n.pathTriggers.map(m=>({distance:m.distance,horizon:m.horizon,id:m.id,path_id:m.pathID,reversed:m.reversed,sound:m.sound,speed_limit:m.speedLimit})),s=n.paths.filter(m=>m.metadata.type==="way").map(m=>({disabled:m.metadata.disabled,end_node_id:m.metadata.endNodeID,id:m.id,is_two_way:m.metadata.isTwoWay,start_node_id:m.metadata.startNodeID})),o=n.pickupAreas.map(m=>({id:m.id,node_id:m.nodeID,points:m.points.map(v=>({x:v.x,y:v.y}))})),c=n.stations.map(m=>{const v=m.components.collisionShape,_=m.components.reflectors.metadata,b=m.components.slots,S=m.metadata,x=ko.zHat(),T=new Or,M=new ve,A=new Ft().makeRotationAxis(x,m.components.reflectors.rotation.z).setPosition(m.components.reflectors.position),D=A.clone().invert(),O=new Ft;for(const I of m.components.slots)O.identity().makeRotationAxis(x,I.rotation.z).setPosition(I.position).multiply(D).decompose(I.position,T,M),I.position.add(new ve(.5*I.metadata.width));return new Ft().makeRotationAxis(x,m.components.collisionShape.rotation.z).setPosition(m.components.collisionShape.position).multiply(D).decompose(m.components.collisionShape.position,T,M),new Ft().makeRotationAxis(x,m.rotation.z).setPosition(m.position).multiply(A).decompose(m.position,T,M),{collision_shapes:[{altitude:v.metadata.altitude,depth:v.metadata.width,height:v.metadata.height,rotation:v.rotation.z,width:v.metadata.depth,x:v.position.x,y:v.position.y}],disabled:S.disabled,is_locked:S.isLocked,name:S.name,node_id:m.metadata.connectedTo,reflectors_distance:_.distance,reliability:S.reliability,rotation:m.rotation.z,slots:b.map(I=>({altitude:I.metadata.altitude,approach_linear_speed:I.metadata.approachLinearSpeed,elevation_strategy:I.metadata.elevationStrategy,end_docking_linear_speed:I.metadata.endDockingLinearSpeed,final_approach_distance:I.metadata.finalApproachDistance,flags:I.metadata.flags,fork_landing_on_entry:I.metadata.forkLandingOnEntry,fork_landing_on_exit:I.metadata.forkLandingOnExit,gate_distance:I.metadata.gateDistance,head_gap:I.metadata.headGap,height:I.metadata.height,inter_pallet_distance:I.metadata.interPalletDistance,k0:I.metadata.k0,k1:I.metadata.k1,length:I.metadata.width,max_deviation_for_docking:I.metadata.maxDeviationForDocking,max_distance_for_retry:I.metadata.maxDistanceForRetry,max_offset_for_docking:I.metadata.maxOffsetForDocking,minimal_approach_distance:I.metadata.minimalApproachDistance,name:I.metadata.name,obstacle_map_enabled:I.metadata.obstacleMapEnabled,path_config:I.metadata.pathConfig,raised_fork_altitude:I.metadata.raisedForkAltitude,reliability_threshold_for_accurate_docking:I.metadata.reliabilityThresholdForAccurateDocking,rotation:I.rotation.z,serial_number:I.metadata.serialNumber,start_altitude:I.metadata.startAltitude,undock_distance_threshold:I.metadata.undockDistanceThreshold,undock_linear_speed:I.metadata.undockLinearSpeed,width:I.metadata.depth,x:I.position.x,y:I.position.y})),station_definition_id:m.id,station_template_id:S.stationTemplateID,station_type:S.stationType,tags:S.tags,x:m.position.x,y:m.position.y}}),f=n.robotLines.map(m=>({color:m.color,name:m.name,paths:m.pathIDs,robots:m.robots,slot_blocklist:m.slotBlocklist})),{overlay:p}=n;let d;if(p.metadata.data.length){const m=1/p.metadata.resolution,v=Math.cos(p.rotation.z),_=Math.sqrt(1-v*v),b=new ve(v,_,0),S=new ve(-b.y,b.x,0),x=.5*p.scale.x*p.metadata.width,T=.5*p.scale.y*p.metadata.height,M=p.position.clone().add(b.multiplyScalar(x).negate()).add(S.multiplyScalar(T)).multiply(new ve(m,-m,1)),A=m*p.scale.x*p.metadata.width,D=m*p.scale.y*p.metadata.height,O=YE.write(p.metadata.data,p.metadata.height,p.metadata.width),I=BC.compress(O),U=NC.encode(I);d={height:D,image:U,opacity:p.metadata.opacity,rotation:p.rotation.z,width:A,x:M.x,y:M.y}}return this.postprocessing({blueprint:{height:e.height,name:e.name,origin_rotation:e.rotation.z,origin_x:e.position.x,origin_y:e.position.y,overlay:d,png_localization:e.png,resolution:e.resolution,width:e.width},map:{name:t,nodes:r,path_triggers:a,paths:s,pick_up_areas:o,preview:i,stations:c},robot_lines:f})}},CI={types:[{description:"json",accept:{"application/json":".json"}}],excludeAcceptAllOption:!0,multiple:!1};function tte(){const{coreModuleRef:n}=Za();async function e(){const i=n.current;if(lt(i))return;const[r]=await window.showOpenFilePicker(CI),s=await(await r.getFile()).text();try{const o=ak.toCoreMapData(JSON.parse(s));i.perform("load:core.data",o)}catch(o){console.debug(o),ra.error("An unexpected error occurred while processing the file. Please try again.")}}async function t(){const i=n.current;if(lt(i))return;const r=i.perform("get:core.data",Xn),s=await(await window.showSaveFilePicker({...CI,suggestedName:"*.json"})).createWritable();await s.write(JSON.stringify(sk.toVizyrProjectData(r))),await s.close()}return q.jsx(WY,{className:"h-6 rounded-none w-full",children:q.jsxs(ZY,{children:[q.jsx(qY,{children:On("ui:header.file-menu.title")}),q.jsxs(KY,{children:[q.jsx(PN,{className:"h-6 text-xs font-mono",onClick:Gc.wrapAsyncFn(e),children:On("ui:header.file-menu.actions.load")}),q.jsx(PN,{className:"h-6 text-xs font-mono",onClick:Gc.wrapAsyncFn(t),children:On("ui:header.file-menu.actions.save")})]})]})})}const RI=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,OI=Tz,nte=(n,e)=>t=>{var i;if(e?.variants==null)return OI(n,t?.class,t?.className);const{variants:r,defaultVariants:a}=e,s=Object.keys(r).map(f=>{const p=t?.[f],d=a?.[f];if(p===null)return null;const m=RI(p)||RI(d);return r[f][m]}),o=t&&Object.entries(t).reduce((f,p)=>{let[d,m]=p;return m===void 0||(f[d]=m),f},{}),c=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((f,p)=>{let{class:d,className:m,...v}=p;return Object.entries(v).every(_=>{let[b,S]=_;return Array.isArray(S)?S.includes({...a,...o}[b]):{...a,...o}[b]===S})?[...f,d,m]:f},[]);return OI(n,s,c,t?.class,t?.className)},ite=nte("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function sd({className:n,variant:e,size:t,asChild:i=!1,...r}){const a=i?Uj:"button";return q.jsx(a,{"data-slot":"button",className:Zi(ite({variant:e,size:t,className:n})),...r})}const dS="bg-gray-800";function rte(){const{coreModuleRef:n}=Za(),[e,t]=F.useState(void 0);F.useEffect(()=>{const r=n.current;if(lt(r))return;const a=r.listen("core.state:changed",({value:s})=>{t(s)});return()=>{r.forget(a)}},[n]);function i(r){const a=n.current;lt(a)||a.perform("set:core.state",r)}return q.jsxs("div",{className:"absolute bottom-1 right-1 z-1 flex flex-row",children:[q.jsx(sd,{className:`size-6 ${e==="navigate"?dS:""}`,onClick:()=>{i("navigate")},size:"icon",variant:"ghost",children:q.jsx(rY,{})}),q.jsx(sd,{className:`size-6 ${e==="select"?dS:""}`,onClick:()=>{i("select")},size:"icon",variant:"ghost",children:q.jsx(J9,{})}),q.jsx(sd,{className:`size-6 ${e==="anchor"?dS:""}`,disabled:!0,onClick:()=>{i("anchor")},size:"icon",variant:"ghost",children:q.jsx(k9,{})}),q.jsx(sd,{className:`size-6 ${e==="create"?dS:""}`,disabled:!0,onClick:()=>{i("create")},size:"icon",variant:"ghost",children:q.jsx(Sz,{})})]})}var _w="DropdownMenu",[ate,age]=Ul(_w,[jR]),Es=jR(),[ste,ok]=ate(_w),lk=n=>{const{__scopeDropdownMenu:e,children:t,dir:i,open:r,defaultOpen:a,onOpenChange:s,modal:o=!0}=n,c=Es(e),f=F.useRef(null),[p,d]=pd({prop:r,defaultProp:a??!1,onChange:s,caller:_w});return q.jsx(ste,{scope:e,triggerId:kc(),triggerRef:f,contentId:kc(),open:p,onOpenChange:d,onOpenToggle:F.useCallback(()=>d(m=>!m),[d]),modal:o,children:q.jsx(XP,{...c,open:p,onOpenChange:d,dir:i,modal:o,children:t})})};lk.displayName=_w;var ck="DropdownMenuTrigger",uk=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:i=!1,...r}=n,a=ok(ck,t),s=Es(t);return q.jsx(qP,{asChild:!0,...s,children:q.jsx(ln.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:E1(e,a.triggerRef),onPointerDown:Ut(n.onPointerDown,o=>{!i&&o.button===0&&o.ctrlKey===!1&&(a.onOpenToggle(),a.open||o.preventDefault())}),onKeyDown:Ut(n.onKeyDown,o=>{i||(["Enter"," "].includes(o.key)&&a.onOpenToggle(),o.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});uk.displayName=ck;var ote="DropdownMenuPortal",fk=n=>{const{__scopeDropdownMenu:e,...t}=n,i=Es(e);return q.jsx(KP,{...i,...t})};fk.displayName=ote;var dk="DropdownMenuContent",hk=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=ok(dk,t),a=Es(t),s=F.useRef(!1);return q.jsx($P,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...i,ref:e,onCloseAutoFocus:Ut(n.onCloseAutoFocus,o=>{s.current||r.triggerRef.current?.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:Ut(n.onInteractOutside,o=>{const c=o.detail.originalEvent,f=c.button===0&&c.ctrlKey===!0,p=c.button===2||f;(!r.modal||p)&&(s.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hk.displayName=dk;var lte="DropdownMenuGroup",cte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(QP,{...r,...i,ref:e})});cte.displayName=lte;var ute="DropdownMenuLabel",fte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(JP,{...r,...i,ref:e})});fte.displayName=ute;var dte="DropdownMenuItem",pk=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(ez,{...r,...i,ref:e})});pk.displayName=dte;var hte="DropdownMenuCheckboxItem",pte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(tz,{...r,...i,ref:e})});pte.displayName=hte;var mte="DropdownMenuRadioGroup",gte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(nz,{...r,...i,ref:e})});gte.displayName=mte;var vte="DropdownMenuRadioItem",yte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(iz,{...r,...i,ref:e})});yte.displayName=vte;var _te="DropdownMenuItemIndicator",bte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(rz,{...r,...i,ref:e})});bte.displayName=_te;var xte="DropdownMenuSeparator",Ste=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(az,{...r,...i,ref:e})});Ste.displayName=xte;var Ete="DropdownMenuArrow",wte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(sz,{...r,...i,ref:e})});wte.displayName=Ete;var Tte="DropdownMenuSubTrigger",Mte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(oz,{...r,...i,ref:e})});Mte.displayName=Tte;var Ate="DropdownMenuSubContent",Cte=F.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,r=Es(t);return q.jsx(lz,{...r,...i,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Cte.displayName=Ate;var Rte=lk,Ote=uk,Dte=fk,Nte=hk,Lte=pk;function Ite({...n}){return q.jsx(Rte,{"data-slot":"dropdown-menu",...n})}function Ute({...n}){return q.jsx(Ote,{"data-slot":"dropdown-menu-trigger",...n})}function Pte({className:n,sideOffset:e=4,...t}){return q.jsx(Dte,{children:q.jsx(Nte,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Zi("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function zte({className:n,inset:e,variant:t="default",...i}){return q.jsx(Lte,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:Zi("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...i})}function Bte(){const{coreModuleRef:n}=Za();function e(){const t=n.current;lt(t)||(t.perform("set:core.state","create"),t.perform("set:builder.mode",{mode:"CREATE_PATH"}))}return q.jsx("div",{className:"absolute top-2 left-4 z-1 flex flex-row p-1 bg-gray-800/75 rounded-full",children:q.jsxs(Ite,{children:[q.jsx(Ute,{children:q.jsx(Sz,{})}),q.jsx(Pte,{className:"relative top-1 left-4",children:q.jsxs(zte,{className:"flex flex-row justify-start",onClick:e,children:[q.jsx(sY,{}),q.jsx("span",{className:"text-xs text-mono",children:On("ui:create-objects.path.label")})]})})]})})}function ps(){return ps=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ps.apply(null,arguments)}var QM={exports:{}},Cu={};var DI;function kte(){return DI||(DI=1,Cu.ConcurrentRoot=1,Cu.ContinuousEventPriority=8,Cu.DefaultEventPriority=32,Cu.DiscreteEventPriority=2,Cu.IdleEventPriority=268435456,Cu.LegacyRoot=0,Cu.NoEventPriority=0),Cu}var NI;function Fte(){return NI||(NI=1,QM.exports=kte()),QM.exports}var HS=Fte(),JM={exports:{}},eA={};var LI;function Hte(){if(LI)return eA;LI=1;var n=nv(),e=RU();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return eA.useSyncExternalStoreWithSelector=function(f,p,d,m,v){var _=a(null);if(_.current===null){var b={hasValue:!1,value:null};_.current=b}else b=_.current;_=o(function(){function x(O){if(!T){if(T=!0,M=O,O=m(O),v!==void 0&&b.hasValue){var I=b.value;if(v(I,O))return A=I}return A=O}if(I=A,i(M,O))return I;var U=m(O);return v!==void 0&&v(I,U)?(M=O,I):(M=O,A=U)}var T=!1,M,A,D=d===void 0?null:d;return[function(){return x(p())},D===null?void 0:function(){return x(D())}]},[p,d,m,v]);var S=r(f,_[0],_[1]);return s(function(){b.hasValue=!0,b.value=S},[S]),c(S),S},eA}var II;function jte(){return II||(II=1,JM.exports=Hte()),JM.exports}var mk=jte();const Vte=o_(mk),UI=n=>{let e;const t=new Set,i=(f,p)=>{const d=typeof f=="function"?f(e):f;if(!Object.is(d,e)){const m=e;e=p??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(v=>v(e,m))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(i,r,o);return o},Gte=(n=>n?UI(n):UI),{useSyncExternalStoreWithSelector:Yte}=Vte,Wte=n=>n;function Zte(n,e=Wte,t){const i=Yte(n.subscribe,n.getState,n.getInitialState,e,t);return Tt.useDebugValue(i),i}const PI=(n,e)=>{const t=Gte(n),i=(r,a=e)=>Zte(t,r,a);return Object.assign(i,t),i},gk=((n,e)=>n?PI(n,e):PI);var tA={exports:{}},nA={exports:{}},iA={exports:{}},rA={};var zI;function Xte(){return zI||(zI=1,(function(n){function e(P,B){var V=P.length;P.push(B);e:for(;0<V;){var ae=V-1>>>1,X=P[ae];if(0<r(X,B))P[ae]=B,P[V]=X,V=ae;else break e}}function t(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var B=P[0],V=P.pop();if(V!==B){P[0]=V;e:for(var ae=0,X=P.length,oe=X>>>1;ae<oe;){var me=2*(ae+1)-1,J=P[me],le=me+1,Se=P[le];if(0>r(J,V))le<X&&0>r(Se,J)?(P[ae]=Se,P[le]=V,ae=le):(P[ae]=J,P[me]=V,ae=me);else if(le<X&&0>r(Se,V))P[ae]=Se,P[le]=V,ae=le;else break e}}return B}function r(P,B){var V=P.sortIndex-B.sortIndex;return V!==0?V:P.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],f=[],p=1,d=null,m=3,v=!1,_=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(P){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=P)i(f),B.sortIndex=B.expirationTime,e(c,B);else break;B=t(f)}}function A(P){if(b=!1,M(P),!_)if(t(c)!==null)_=!0,he();else{var B=t(f);B!==null&&de(A,B.startTime-P)}}var D=!1,O=-1,I=5,U=-1;function N(){return!(n.unstable_now()-U<I)}function L(){if(D){var P=n.unstable_now();U=P;var B=!0;try{e:{_=!1,b&&(b=!1,x(O),O=-1),v=!0;var V=m;try{t:{for(M(P),d=t(c);d!==null&&!(d.expirationTime>P&&N());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,m=d.priorityLevel;var X=ae(d.expirationTime<=P);if(P=n.unstable_now(),typeof X=="function"){d.callback=X,M(P),B=!0;break t}d===t(c)&&i(c),M(P)}else i(c);d=t(c)}if(d!==null)B=!0;else{var oe=t(f);oe!==null&&de(A,oe.startTime-P),B=!1}}break e}finally{d=null,m=V,v=!1}B=void 0}}finally{B?Y():D=!1}}}var Y;if(typeof T=="function")Y=function(){T(L)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,se=ee.port2;ee.port1.onmessage=L,Y=function(){se.postMessage(null)}}else Y=function(){S(L,0)};function he(){D||(D=!0,Y())}function de(P,B){O=S(function(){P(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,he())},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(P){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var V=m;m=B;try{return P()}finally{m=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=m;m=P;try{return B()}finally{m=V}},n.unstable_scheduleCallback=function(P,B,V){var ae=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ae+V:ae):V=ae,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=V+X,P={id:p++,callback:B,priorityLevel:P,startTime:V,expirationTime:X,sortIndex:-1},V>ae?(P.sortIndex=V,e(f,P),t(c)===null&&P===t(f)&&(b?(x(O),O=-1):b=!0,de(A,V-ae))):(P.sortIndex=X,e(c,P),_||v||(_=!0,he())),P},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(P){var B=m;return function(){var V=m;m=B;try{return P.apply(this,arguments)}finally{m=V}}}})(rA)),rA}var BI;function qte(){return BI||(BI=1,iA.exports=Xte()),iA.exports}var kI;function Kte(){return kI||(kI=1,(function(n){n.exports=function(e){function t(h,g,w,R){return new Wv(h,g,w,R)}function i(){}function r(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){return h===null||typeof h!="object"?null:(h=ul&&h[ul]||h["@@iterator"],typeof h=="function"?h:null)}function s(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===Kv?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Jl:return"Fragment";case Cs:return"Portal";case $p:return"Profiler";case th:return"StrictMode";case Qp:return"Suspense";case uf:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case $s:return(h.displayName||"Context")+".Provider";case Xv:return(h._context.displayName||"Context")+".Consumer";case ih:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Jp:return g=h.displayName||null,g!==null?g:s(h.type)||"Memo";case Rs:g=h._payload,h=h._init;try{return s(h(g))}catch{}}return null}function o(h){if(wo===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);wo=g&&g[1]||"",fl=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wo+h+fl}function c(h,g){if(!h||tu)return"";tu=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var R={DetermineComponentFrameRoot:function(){try{if(g){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(pn){var Pt=pn}Reflect.construct(h,[],It)}else{try{It.call()}catch(pn){Pt=pn}h.call(It.prototype)}}else{try{throw Error()}catch(pn){Pt=pn}(It=h())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(pn){if(pn&&Pt&&typeof pn.stack=="string")return[pn.stack,Pt.stack]}return[null,null]}};R.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(R.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(R.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Q=R.DetermineComponentFrameRoot(),Me=Q[0],Fe=Q[1];if(Me&&Fe){var tt=Me.split(`
`),mt=Fe.split(`
`);for(k=R=0;R<tt.length&&!tt[R].includes("DetermineComponentFrameRoot");)R++;for(;k<mt.length&&!mt[k].includes("DetermineComponentFrameRoot");)k++;if(R===tt.length||k===mt.length)for(R=tt.length-1,k=mt.length-1;1<=R&&0<=k&&tt[R]!==mt[k];)k--;for(;1<=R&&0<=k;R--,k--)if(tt[R]!==mt[k]){if(R!==1||k!==1)do if(R--,k--,0>k||tt[R]!==mt[k]){var Ct=`
`+tt[R].replace(" at new "," at ");return h.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",h.displayName)),Ct}while(1<=R&&0<=k);break}}}finally{tu=!1,Error.prepareStackTrace=w}return(w=h?h.displayName||h.name:"")?o(w):""}function f(h){switch(h.tag){case 26:case 27:case 5:return o(h.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return h=c(h.type,!1),h;case 11:return h=c(h.type.render,!1),h;case 1:return h=c(h.type,!0),h;default:return""}}function p(h){try{var g="";do g+=f(h),h=h.return;while(h);return g}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function d(h){var g=h,w=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(w=g.return),h=g.return;while(h)}return g.tag===3?w:null}function m(h){if(d(h)!==h)throw Error(r(188))}function v(h){var g=h.alternate;if(!g){if(g=d(h),g===null)throw Error(r(188));return g!==h?null:h}for(var w=h,R=g;;){var k=w.return;if(k===null)break;var Q=k.alternate;if(Q===null){if(R=k.return,R!==null){w=R;continue}break}if(k.child===Q.child){for(Q=k.child;Q;){if(Q===w)return m(k),h;if(Q===R)return m(k),g;Q=Q.sibling}throw Error(r(188))}if(w.return!==R.return)w=k,R=Q;else{for(var Me=!1,Fe=k.child;Fe;){if(Fe===w){Me=!0,w=k,R=Q;break}if(Fe===R){Me=!0,R=k,w=Q;break}Fe=Fe.sibling}if(!Me){for(Fe=Q.child;Fe;){if(Fe===w){Me=!0,w=Q,R=k;break}if(Fe===R){Me=!0,R=Q,w=k;break}Fe=Fe.sibling}if(!Me)throw Error(r(189))}}if(w.alternate!==R)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?h:g}function _(h){var g=h.tag;if(g===5||g===26||g===27||g===6)return h;for(h=h.child;h!==null;){if(g=_(h),g!==null)return g;h=h.sibling}return null}function b(h){var g=h.tag;if(g===5||g===26||g===27||g===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(g=b(h),g!==null))return g;h=h.sibling}return null}function S(h){return{current:h}}function x(h){0>ml||(h.current=$i[ml],$i[ml]=null,ml--)}function T(h,g){ml++,$i[ml]=h.current,h.current=g}function M(h){return h>>>=0,h===0?32:31-(kb(h)/Fb|0)|0}function A(h){var g=h&42;if(g!==0)return g;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function D(h,g){var w=h.pendingLanes;if(w===0)return 0;var R=0,k=h.suspendedLanes,Q=h.pingedLanes,Me=h.warmLanes;h=h.finishedLanes!==0;var Fe=w&134217727;return Fe!==0?(w=Fe&~k,w!==0?R=A(w):(Q&=Fe,Q!==0?R=A(Q):h||(Me=Fe&~Me,Me!==0&&(R=A(Me))))):(Fe=w&~k,Fe!==0?R=A(Fe):Q!==0?R=A(Q):h||(Me=w&~Me,Me!==0&&(R=A(Me)))),R===0?0:g!==0&&g!==R&&(g&k)===0&&(k=R&-R,Me=g&-g,k>=Me||k===32&&(Me&4194176)!==0)?g:R}function O(h,g){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&g)===0}function I(h,g){switch(h){case 1:case 2:case 4:case 8:return g+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var h=Mo;return Mo<<=1,(Mo&4194176)===0&&(Mo=128),h}function N(){var h=ru;return ru<<=1,(ru&62914560)===0&&(ru=4194304),h}function L(h){for(var g=[],w=0;31>w;w++)g.push(h);return g}function Y(h,g){h.pendingLanes|=g,g!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ee(h,g,w,R,k,Q){var Me=h.pendingLanes;h.pendingLanes=w,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=w,h.entangledLanes&=w,h.errorRecoveryDisabledLanes&=w,h.shellSuspendCounter=0;var Fe=h.entanglements,tt=h.expirationTimes,mt=h.hiddenUpdates;for(w=Me&~w;0<w;){var Ct=31-ma(w),It=1<<Ct;Fe[Ct]=0,tt[Ct]=-1;var Pt=mt[Ct];if(Pt!==null)for(mt[Ct]=null,Ct=0;Ct<Pt.length;Ct++){var pn=Pt[Ct];pn!==null&&(pn.lane&=-536870913)}w&=~It}R!==0&&se(h,R,0),Q!==0&&k===0&&h.tag!==0&&(h.suspendedLanes|=Q&~(Me&~g))}function se(h,g,w){h.pendingLanes|=g,h.suspendedLanes&=~g;var R=31-ma(g);h.entangledLanes|=g,h.entanglements[R]=h.entanglements[R]|1073741824|w&4194218}function he(h,g){var w=h.entangledLanes|=g;for(h=h.entanglements;w;){var R=31-ma(w),k=1<<R;k&g|h[R]&g&&(h[R]|=g),w&=~k}}function de(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function P(h){if(ka&&typeof ka.onCommitFiberRoot=="function")try{ka.onCommitFiberRoot(Qi,h,void 0,(h.current.flags&128)===128)}catch{}}function B(h){if(typeof Vb=="function"&&Mr(h),ka&&typeof ka.setStrictMode=="function")try{ka.setStrictMode(Qi,h)}catch{}}function V(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}function ae(h,g){if(typeof h=="object"&&h!==null){var w=my.get(h);return w!==void 0?w:(g={value:h,source:g,stack:p(g)},my.set(h,g),g)}return{value:h,source:g,stack:p(g)}}function X(h,g){au[su++]=_f,au[su++]=ou,ou=h,_f=g}function oe(h,g,w){es[ts++]=eo,es[ts++]=to,es[ts++]=sc,sc=h;var R=eo;h=to;var k=32-ma(R)-1;R&=~(1<<k),w+=1;var Q=32-ma(g)+k;if(30<Q){var Me=k-k%5;Q=(R&(1<<Me)-1).toString(32),R>>=Me,k-=Me,eo=1<<32-ma(g)+k|w<<k|R,to=Q+h}else eo=1<<Q|w<<k|R,to=h}function me(h){h.return!==null&&(X(h,1),oe(h,1,0))}function J(h){for(;h===ou;)ou=au[--su],au[su]=null,_f=au[--su],au[su]=null;for(;h===sc;)sc=es[--ts],es[ts]=null,to=es[--ts],es[ts]=null,eo=es[--ts],es[ts]=null}function le(h,g){T(Ao,g),T(bf,h),T(yr,null),h=rb(g),x(yr),T(yr,h)}function Se(){x(yr),x(bf),x(Ao)}function Ee(h){h.memoizedState!==null&&T(lu,h);var g=yr.current,w=pf(g,h.type);g!==w&&(T(bf,h),T(yr,w))}function re(h){bf.current===h&&(x(yr),x(bf)),lu.current===h&&(x(lu),ha?Qs._currentValue=tc:Qs._currentValue2=tc)}function ge(h){var g=Error(r(418,""));throw te(ae(g,h)),dh}function Ae(h,g){if(!Fr)throw Error(r(175));Rb(h.stateNode,h.type,h.memoizedProps,g,h)||ge(h)}function Pe(h){for(Hr=h.return;Hr;)switch(Hr.tag){case 3:case 27:Ar=!0;return;case 5:case 13:Ar=!1;return;default:Hr=Hr.return}}function We(h){if(!Fr||h!==Hr)return!1;if(!Hn)return Pe(h),Hn=!0,!1;var g=!1;if(di?h.tag!==3&&h.tag!==27&&(h.tag!==5||lm(h.type)&&!yn(h.type,h.memoizedProps))&&(g=!0):h.tag!==3&&(h.tag!==5||lm(h.type)&&!yn(h.type,h.memoizedProps))&&(g=!0),g&&jr&&ge(h),Pe(h),h.tag===13){if(!Fr)throw Error(r(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));jr=Db(h)}else jr=Hr?fy(h.stateNode):null;return!0}function it(){Fr&&(jr=Hr=null,Hn=!1)}function te(h){Ns===null?Ns=[h]:Ns.push(h)}function xe(){for(var h=cu,g=no=cu=0;g<h;){var w=Ls[g];Ls[g++]=null;var R=Ls[g];Ls[g++]=null;var k=Ls[g];Ls[g++]=null;var Q=Ls[g];if(Ls[g++]=null,R!==null&&k!==null){var Me=R.pending;Me===null?k.next=k:(k.next=Me.next,Me.next=k),R.pending=k}Q!==0&&ce(w,k,Q)}}function De(h,g,w,R){Ls[cu++]=h,Ls[cu++]=g,Ls[cu++]=w,Ls[cu++]=R,no|=R,h.lanes|=R,h=h.alternate,h!==null&&(h.lanes|=R)}function He(h,g,w,R){return De(h,g,w,R),pe(h)}function Ce(h,g){return De(h,null,null,g),pe(h)}function ce(h,g,w){h.lanes|=w;var R=h.alternate;R!==null&&(R.lanes|=w);for(var k=!1,Q=h.return;Q!==null;)Q.childLanes|=w,R=Q.alternate,R!==null&&(R.childLanes|=w),Q.tag===22&&(h=Q.stateNode,h===null||h._visibility&1||(k=!0)),h=Q,Q=Q.return;k&&g!==null&&h.tag===3&&(Q=h.stateNode,k=31-ma(w),Q=Q.hiddenUpdates,h=Q[k],h===null?Q[k]=[g]:h.push(g),g.lane=w|536870912)}function pe(h){if(50<Rf)throw Rf=0,Em=null,Error(r(185));for(var g=h.return;g!==null;)h=g,g=h.return;return h.tag===3?h.stateNode:null}function ie(h){h!==gl&&h.next===null&&(gl===null?hh=gl=h:gl=gl.next=h),yi=!0,uu||(uu=!0,Ie(K))}function W(h,g){if(!gy&&yi){gy=!0;do for(var w=!1,R=hh;R!==null;){if(h!==0){var k=R.pendingLanes;if(k===0)var Q=0;else{var Me=R.suspendedLanes,Fe=R.pingedLanes;Q=(1<<31-ma(42|h)+1)-1,Q&=k&~(Me&~Fe),Q=Q&201326677?Q&201326677|1:Q?Q|2:0}Q!==0&&(w=!0,Re(R,Q))}else Q=zn,Q=D(R,R===ii?Q:0),(Q&3)===0||O(R,Q)||(w=!0,Re(R,Q));R=R.next}while(w);gy=!1}}function K(){yi=uu=!1;var h=0;xf!==0&&(lb()&&(h=xf),xf=0);for(var g=Ds(),w=null,R=hh;R!==null;){var k=R.next,Q=j(R,g);Q===0?(R.next=null,w===null?hh=k:w.next=k,k===null&&(gl=w)):(w=R,(h!==0||(Q&3)!==0)&&(yi=!0)),R=k}W(h)}function j(h,g){for(var w=h.suspendedLanes,R=h.pingedLanes,k=h.expirationTimes,Q=h.pendingLanes&-62914561;0<Q;){var Me=31-ma(Q),Fe=1<<Me,tt=k[Me];tt===-1?((Fe&w)===0||(Fe&R)!==0)&&(k[Me]=I(Fe,g)):tt<=g&&(h.expiredLanes|=Fe),Q&=~Fe}if(g=ii,w=zn,w=D(h,h===g?w:0),R=h.callbackNode,w===0||h===g&&ui===2||h.cancelPendingCommit!==null)return R!==null&&R!==null&&dm(R),h.callbackNode=null,h.callbackPriority=0;if((w&3)===0||O(h,w)){if(g=w&-w,g===h.callbackPriority)return g;switch(R!==null&&dm(R),de(w)){case 2:case 8:w=jb;break;case 32:w=mm;break;case 268435456:w=oT;break;default:w=mm}return R=$.bind(null,h),w=fh(w,R),h.callbackPriority=g,h.callbackNode=w,g}return R!==null&&R!==null&&dm(R),h.callbackPriority=2,h.callbackNode=null,2}function $(h,g){var w=h.callbackNode;if(Ks()&&h.callbackNode!==w)return null;var R=zn;return R=D(h,h===ii?R:0),R===0?null:(Xl(h,R,g),j(h,Ds()),h.callbackNode!=null&&h.callbackNode===w?$.bind(null,h):null)}function Re(h,g){if(Ks())return null;Xl(h,g,!0)}function Ie(h){ty?pl(function(){(Wn&6)!==0?fh(pm,h):h()}):fh(pm,h)}function ne(){return xf===0&&(xf=U()),xf}function H(h,g){if(Sf===null){var w=Sf=[];fu=0,ns=ne(),du={status:"pending",value:void 0,then:function(R){w.push(R)}}}return fu++,g.then(Z,Z),g}function Z(){if(--fu===0&&Sf!==null){du!==null&&(du.status="fulfilled");var h=Sf;Sf=null,ns=0,du=null;for(var g=0;g<h.length;g++)(0,h[g])()}}function ye(h,g){var w=[],R={status:"pending",value:null,reason:null,then:function(k){w.push(k)}};return h.then(function(){R.status="fulfilled",R.value=g;for(var k=0;k<w.length;k++)(0,w[k])(g)},function(k){for(R.status="rejected",R.reason=k,k=0;k<w.length;k++)(0,w[k])(void 0)}),R}function Oe(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Be(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Ue(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function pt(h,g,w){var R=h.updateQueue;if(R===null)return null;if(R=R.shared,(Wn&2)!==0){var k=R.pending;return k===null?g.next=g:(g.next=k.next,k.next=g),R.pending=g,g=pe(h),ce(h,null,w),g}return De(h,R,g,w),pe(h)}function St(h,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194176)!==0)){var R=g.lanes;R&=h.pendingLanes,w|=R,g.lanes=w,he(h,w)}}function _e(h,g){var w=h.updateQueue,R=h.alternate;if(R!==null&&(R=R.updateQueue,w===R)){var k=null,Q=null;if(w=w.firstBaseUpdate,w!==null){do{var Me={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};Q===null?k=Q=Me:Q=Q.next=Me,w=w.next}while(w!==null);Q===null?k=Q=g:Q=Q.next=g}else k=Q=g;w={baseState:R.baseState,firstBaseUpdate:k,lastBaseUpdate:Q,shared:R.shared,callbacks:R.callbacks},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=g:h.next=g,w.lastBaseUpdate=g}function Ve(){if(hu){var h=du;if(h!==null)throw h}}function nt(h,g,w,R){hu=!1;var k=h.updateQueue;vl=!1;var Q=k.firstBaseUpdate,Me=k.lastBaseUpdate,Fe=k.shared.pending;if(Fe!==null){k.shared.pending=null;var tt=Fe,mt=tt.next;tt.next=null,Me===null?Q=mt:Me.next=mt,Me=tt;var Ct=h.alternate;Ct!==null&&(Ct=Ct.updateQueue,Fe=Ct.lastBaseUpdate,Fe!==Me&&(Fe===null?Ct.firstBaseUpdate=mt:Fe.next=mt,Ct.lastBaseUpdate=tt))}if(Q!==null){var It=k.baseState;Me=0,Ct=mt=tt=null,Fe=Q;do{var Pt=Fe.lane&-536870913,pn=Pt!==Fe.lane;if(pn?(zn&Pt)===Pt:(R&Pt)===Pt){Pt!==0&&Pt===ns&&(hu=!0),Ct!==null&&(Ct=Ct.next={lane:0,tag:Fe.tag,payload:Fe.payload,callback:null,next:null});e:{var us=h,mc=Fe;Pt=g;var gc=w;switch(mc.tag){case 1:if(us=mc.payload,typeof us=="function"){It=us.call(gc,It,Pt);break e}It=us;break e;case 3:us.flags=us.flags&-65537|128;case 0:if(us=mc.payload,Pt=typeof us=="function"?us.call(gc,It,Pt):us,Pt==null)break e;It=Kp({},It,Pt);break e;case 2:vl=!0}}Pt=Fe.callback,Pt!==null&&(h.flags|=64,pn&&(h.flags|=8192),pn=k.callbacks,pn===null?k.callbacks=[Pt]:pn.push(Pt))}else pn={lane:Pt,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},Ct===null?(mt=Ct=pn,tt=It):Ct=Ct.next=pn,Me|=Pt;if(Fe=Fe.next,Fe===null){if(Fe=k.shared.pending,Fe===null)break;pn=Fe,Fe=pn.next,pn.next=null,k.lastBaseUpdate=pn,k.shared.pending=null}}while(!0);Ct===null&&(tt=It),k.baseState=tt,k.firstBaseUpdate=mt,k.lastBaseUpdate=Ct,Q===null&&(k.shared.lanes=0),ls|=Me,h.lanes=Me,h.memoizedState=It}}function Le(h,g){if(typeof h!="function")throw Error(r(191,h));h.call(g)}function Ne(h,g){var w=h.callbacks;if(w!==null)for(h.callbacks=null,h=0;h<w.length;h++)Le(w[h],g)}function je(h,g){if(Fa(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var w=Object.keys(h),R=Object.keys(g);if(w.length!==R.length)return!1;for(R=0;R<w.length;R++){var k=w[R];if(!Co.call(g,k)||!Fa(h[k],g[k]))return!1}return!0}function fe(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Xe(){}function Ye(h,g,w){switch(w=h[w],w===void 0?h.push(g):w!==g&&(g.then(Xe,Xe),g=w),g.status){case"fulfilled":return g.value;case"rejected":throw h=g.reason,h===Ef?Error(r(483)):h;default:if(typeof g.status=="string")g.then(Xe,Xe);else{if(h=ii,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=g,h.status="pending",h.then(function(R){if(g.status==="pending"){var k=g;k.status="fulfilled",k.value=R}},function(R){if(g.status==="pending"){var k=g;k.status="rejected",k.reason=R}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw h=g.reason,h===Ef?Error(r(483)):h}throw oc=g,Ef}}function G(){if(oc===null)throw Error(r(459));var h=oc;return oc=null,h}function Ge(h){var g=cc;return cc+=1,lc===null&&(lc=[]),Ye(lc,h,g)}function $e(h,g){g=g.props.ref,h.ref=g!==void 0?g:null}function be(h,g){throw g.$$typeof===eT?Error(r(525)):(h=Object.prototype.toString.call(g),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h)))}function ze(h){var g=h._init;return g(h._payload)}function Qe(h){function g(ot,Ze){if(h){var ht=ot.deletions;ht===null?(ot.deletions=[Ze],ot.flags|=16):ht.push(Ze)}}function w(ot,Ze){if(!h)return null;for(;Ze!==null;)g(ot,Ze),Ze=Ze.sibling;return null}function R(ot){for(var Ze=new Map;ot!==null;)ot.key!==null?Ze.set(ot.key,ot):Ze.set(ot.index,ot),ot=ot.sibling;return Ze}function k(ot,Ze){return ot=As(ot,Ze),ot.index=0,ot.sibling=null,ot}function Q(ot,Ze,ht){return ot.index=ht,h?(ht=ot.alternate,ht!==null?(ht=ht.index,ht<Ze?(ot.flags|=33554434,Ze):ht):(ot.flags|=33554434,Ze)):(ot.flags|=1048576,Ze)}function Me(ot){return h&&ot.alternate===null&&(ot.flags|=33554434),ot}function Fe(ot,Ze,ht,At){return Ze===null||Ze.tag!==6?(Ze=Xp(ht,ot.mode,At),Ze.return=ot,Ze):(Ze=k(Ze,ht),Ze.return=ot,Ze)}function tt(ot,Ze,ht,At){var Yt=ht.type;return Yt===Jl?Ct(ot,Ze,ht.props.children,At,ht.key):Ze!==null&&(Ze.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===Rs&&ze(Yt)===Ze.type)?(Ze=k(Ze,ht.props),$e(Ze,ht),Ze.return=ot,Ze):(Ze=Eo(ht.type,ht.key,ht.props,null,ot.mode,At),$e(Ze,ht),Ze.return=ot,Ze)}function mt(ot,Ze,ht,At){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ht.containerInfo||Ze.stateNode.implementation!==ht.implementation?(Ze=Zv(ht,ot.mode,At),Ze.return=ot,Ze):(Ze=k(Ze,ht.children||[]),Ze.return=ot,Ze)}function Ct(ot,Ze,ht,At,Yt){return Ze===null||Ze.tag!==7?(Ze=ji(ht,ot.mode,At,Yt),Ze.return=ot,Ze):(Ze=k(Ze,ht),Ze.return=ot,Ze)}function It(ot,Ze,ht){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=Xp(""+Ze,ot.mode,ht),Ze.return=ot,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case eh:return ht=Eo(Ze.type,Ze.key,Ze.props,null,ot.mode,ht),$e(ht,Ze),ht.return=ot,ht;case Cs:return Ze=Zv(Ze,ot.mode,ht),Ze.return=ot,Ze;case Rs:var At=Ze._init;return Ze=At(Ze._payload),It(ot,Ze,ht)}if(ff(Ze)||a(Ze))return Ze=ji(Ze,ot.mode,ht,null),Ze.return=ot,Ze;if(typeof Ze.then=="function")return It(ot,Ge(Ze),ht);if(Ze.$$typeof===$s)return It(ot,kd(ot,Ze),ht);be(ot,Ze)}return null}function Pt(ot,Ze,ht,At){var Yt=Ze!==null?Ze.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Yt!==null?null:Fe(ot,Ze,""+ht,At);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case eh:return ht.key===Yt?tt(ot,Ze,ht,At):null;case Cs:return ht.key===Yt?mt(ot,Ze,ht,At):null;case Rs:return Yt=ht._init,ht=Yt(ht._payload),Pt(ot,Ze,ht,At)}if(ff(ht)||a(ht))return Yt!==null?null:Ct(ot,Ze,ht,At,null);if(typeof ht.then=="function")return Pt(ot,Ze,Ge(ht),At);if(ht.$$typeof===$s)return Pt(ot,Ze,kd(ot,ht),At);be(ot,ht)}return null}function pn(ot,Ze,ht,At,Yt){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return ot=ot.get(ht)||null,Fe(Ze,ot,""+At,Yt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case eh:return ot=ot.get(At.key===null?ht:At.key)||null,tt(Ze,ot,At,Yt);case Cs:return ot=ot.get(At.key===null?ht:At.key)||null,mt(Ze,ot,At,Yt);case Rs:var Ci=At._init;return At=Ci(At._payload),pn(ot,Ze,ht,At,Yt)}if(ff(At)||a(At))return ot=ot.get(ht)||null,Ct(Ze,ot,At,Yt,null);if(typeof At.then=="function")return pn(ot,Ze,ht,Ge(At),Yt);if(At.$$typeof===$s)return pn(ot,Ze,ht,kd(Ze,At),Yt);be(Ze,At)}return null}function us(ot,Ze,ht,At){for(var Yt=null,Ci=null,sn=Ze,Qn=Ze=0,Ji=null;sn!==null&&Qn<ht.length;Qn++){sn.index>Qn?(Ji=sn,sn=null):Ji=sn.sibling;var Un=Pt(ot,sn,ht[Qn],At);if(Un===null){sn===null&&(sn=Ji);break}h&&sn&&Un.alternate===null&&g(ot,sn),Ze=Q(Un,Ze,Qn),Ci===null?Yt=Un:Ci.sibling=Un,Ci=Un,sn=Ji}if(Qn===ht.length)return w(ot,sn),Hn&&X(ot,Qn),Yt;if(sn===null){for(;Qn<ht.length;Qn++)sn=It(ot,ht[Qn],At),sn!==null&&(Ze=Q(sn,Ze,Qn),Ci===null?Yt=sn:Ci.sibling=sn,Ci=sn);return Hn&&X(ot,Qn),Yt}for(sn=R(sn);Qn<ht.length;Qn++)Ji=pn(sn,ot,Qn,ht[Qn],At),Ji!==null&&(h&&Ji.alternate!==null&&sn.delete(Ji.key===null?Qn:Ji.key),Ze=Q(Ji,Ze,Qn),Ci===null?Yt=Ji:Ci.sibling=Ji,Ci=Ji);return h&&sn.forEach(function(Po){return g(ot,Po)}),Hn&&X(ot,Qn),Yt}function mc(ot,Ze,ht,At){if(ht==null)throw Error(r(151));for(var Yt=null,Ci=null,sn=Ze,Qn=Ze=0,Ji=null,Un=ht.next();sn!==null&&!Un.done;Qn++,Un=ht.next()){sn.index>Qn?(Ji=sn,sn=null):Ji=sn.sibling;var Po=Pt(ot,sn,Un.value,At);if(Po===null){sn===null&&(sn=Ji);break}h&&sn&&Po.alternate===null&&g(ot,sn),Ze=Q(Po,Ze,Qn),Ci===null?Yt=Po:Ci.sibling=Po,Ci=Po,sn=Ji}if(Un.done)return w(ot,sn),Hn&&X(ot,Qn),Yt;if(sn===null){for(;!Un.done;Qn++,Un=ht.next())Un=It(ot,Un.value,At),Un!==null&&(Ze=Q(Un,Ze,Qn),Ci===null?Yt=Un:Ci.sibling=Un,Ci=Un);return Hn&&X(ot,Qn),Yt}for(sn=R(sn);!Un.done;Qn++,Un=ht.next())Un=pn(sn,ot,Qn,Un.value,At),Un!==null&&(h&&Un.alternate!==null&&sn.delete(Un.key===null?Qn:Un.key),Ze=Q(Un,Ze,Qn),Ci===null?Yt=Un:Ci.sibling=Un,Ci=Un);return h&&sn.forEach(function(wm){return g(ot,wm)}),Hn&&X(ot,Qn),Yt}function gc(ot,Ze,ht,At){if(typeof ht=="object"&&ht!==null&&ht.type===Jl&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case eh:e:{for(var Yt=ht.key;Ze!==null;){if(Ze.key===Yt){if(Yt=ht.type,Yt===Jl){if(Ze.tag===7){w(ot,Ze.sibling),At=k(Ze,ht.props.children),At.return=ot,ot=At;break e}}else if(Ze.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===Rs&&ze(Yt)===Ze.type){w(ot,Ze.sibling),At=k(Ze,ht.props),$e(At,ht),At.return=ot,ot=At;break e}w(ot,Ze);break}else g(ot,Ze);Ze=Ze.sibling}ht.type===Jl?(At=ji(ht.props.children,ot.mode,At,ht.key),At.return=ot,ot=At):(At=Eo(ht.type,ht.key,ht.props,null,ot.mode,At),$e(At,ht),At.return=ot,ot=At)}return Me(ot);case Cs:e:{for(Yt=ht.key;Ze!==null;){if(Ze.key===Yt)if(Ze.tag===4&&Ze.stateNode.containerInfo===ht.containerInfo&&Ze.stateNode.implementation===ht.implementation){w(ot,Ze.sibling),At=k(Ze,ht.children||[]),At.return=ot,ot=At;break e}else{w(ot,Ze);break}else g(ot,Ze);Ze=Ze.sibling}At=Zv(ht,ot.mode,At),At.return=ot,ot=At}return Me(ot);case Rs:return Yt=ht._init,ht=Yt(ht._payload),gc(ot,Ze,ht,At)}if(ff(ht))return us(ot,Ze,ht,At);if(a(ht)){if(Yt=a(ht),typeof Yt!="function")throw Error(r(150));return ht=Yt.call(ht),mc(ot,Ze,ht,At)}if(typeof ht.then=="function")return gc(ot,Ze,Ge(ht),At);if(ht.$$typeof===$s)return gc(ot,Ze,kd(ot,ht),At);be(ot,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,Ze!==null&&Ze.tag===6?(w(ot,Ze.sibling),At=k(Ze,ht),At.return=ot,ot=At):(w(ot,Ze),At=Xp(ht,ot.mode,At),At.return=ot,ot=At),Me(ot)):w(ot,Ze)}return function(ot,Ze,ht,At){try{cc=0;var Yt=gc(ot,Ze,ht,At);return lc=null,Yt}catch(sn){if(sn===Ef)throw sn;var Ci=t(29,sn,null,ot.mode);return Ci.lanes=At,Ci.return=ot,Ci}finally{}}}function Ot(h,g){h=ta,T(wf,h),T(_i,g),ta=h|g.baseLanes}function xt(){T(wf,ta),T(_i,_i.current)}function Mt(){ta=wf.current,x(_i),x(wf)}function $t(h){var g=h.alternate;T(_r,_r.current&1),T(is,h),hi===null&&(g===null||_i.current!==null||g.memoizedState!==null)&&(hi=h)}function Ii(h){if(h.tag===22){if(T(_r,_r.current),T(is,h),hi===null){var g=h.alternate;g!==null&&g.memoizedState!==null&&(hi=h)}}else In()}function In(){T(_r,_r.current),T(is,is.current)}function rn(h){x(is),hi===h&&(hi=null),x(_r)}function jn(h){for(var g=h;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||am(w)||sm(w)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function dn(){throw Error(r(321))}function vi(h,g){if(g===null)return!1;for(var w=0;w<g.length&&w<h.length;w++)if(!Fa(h[w],g[w]))return!1;return!0}function ca(h,g,w,R,k,Q){return yl=Q,Sn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,an.H=h===null||h.memoizedState===null?dc:ga,fc=!1,Q=w(R,k),fc=!1,pu&&(Q=ei(g,w,R,k)),qa(h),Q}function qa(h){an.H=Vi;var g=Jt!==null&&Jt.next!==null;if(yl=0,Yn=Jt=Sn=null,Is=!1,mu=0,Cr=null,g)throw Error(r(300));h===null||pi||(h=h.dependencies,h!==null&&Bd(h)&&(pi=!0))}function ei(h,g,w,R){Sn=h;var k=0;do{if(pu&&(Cr=null),mu=0,pu=!1,25<=k)throw Error(r(301));if(k+=1,Yn=Jt=null,h.updateQueue!=null){var Q=h.updateQueue;Q.lastEffect=null,Q.events=null,Q.stores=null,Q.memoCache!=null&&(Q.memoCache.index=0)}an.H=rs,Q=g(w,R)}while(pu);return Q}function Vn(){var h=an.H,g=h.useState()[0];return g=typeof g.then=="function"?dt(g):g,h=h.useState()[0],(Jt!==null?Jt.memoizedState:null)!==h&&(Sn.flags|=1024),g}function Di(){var h=gm!==0;return gm=0,h}function Kr(h,g,w){g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~w}function Te(h){if(Is){for(h=h.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Is=!1}yl=0,Yn=Jt=Sn=null,pu=!1,mu=gm=0,Cr=null}function Ke(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?Sn.memoizedState=Yn=h:Yn=Yn.next=h,Yn}function at(){if(Jt===null){var h=Sn.alternate;h=h!==null?h.memoizedState:null}else h=Jt.next;var g=Yn===null?Sn.memoizedState:Yn.next;if(g!==null)Yn=g,Jt=h;else{if(h===null)throw Sn.alternate===null?Error(r(467)):Error(r(310));Jt=h,h={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Yn===null?Sn.memoizedState=Yn=h:Yn=Yn.next=h}return Yn}function dt(h){var g=mu;return mu+=1,Cr===null&&(Cr=[]),h=Ye(Cr,h,g),g=Sn,(Yn===null?g.memoizedState:Yn.next)===null&&(g=g.alternate,an.H=g===null||g.memoizedState===null?dc:ga),h}function et(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return dt(h);if(h.$$typeof===$s)return Pr(h)}throw Error(r(438,String(h)))}function wt(h){var g=null,w=Sn.updateQueue;if(w!==null&&(g=w.memoCache),g==null){var R=Sn.alternate;R!==null&&(R=R.updateQueue,R!==null&&(R=R.memoCache,R!=null&&(g={data:R.data.map(function(k){return k.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),w===null&&(w=vm(),Sn.updateQueue=w),w.memoCache=g,w=g.data[g.index],w===void 0)for(w=g.data[g.index]=Array(h),R=0;R<h;R++)w[R]=ib;return g.index++,w}function Rt(h,g){return typeof g=="function"?g(h):g}function Bt(h){var g=at();return Nt(g,Jt,h)}function Nt(h,g,w){var R=h.queue;if(R===null)throw Error(r(311));R.lastRenderedReducer=w;var k=h.baseQueue,Q=R.pending;if(Q!==null){if(k!==null){var Me=k.next;k.next=Q.next,Q.next=Me}g.baseQueue=k=Q,R.pending=null}if(Q=h.baseState,k===null)h.memoizedState=Q;else{g=k.next;var Fe=Me=null,tt=null,mt=g,Ct=!1;do{var It=mt.lane&-536870913;if(It!==mt.lane?(zn&It)===It:(yl&It)===It){var Pt=mt.revertLane;if(Pt===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),It===ns&&(Ct=!0);else if((yl&Pt)===Pt){mt=mt.next,Pt===ns&&(Ct=!0);continue}else It={lane:0,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},tt===null?(Fe=tt=It,Me=Q):tt=tt.next=It,Sn.lanes|=Pt,ls|=Pt;It=mt.action,fc&&w(Q,It),Q=mt.hasEagerState?mt.eagerState:w(Q,It)}else Pt={lane:It,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},tt===null?(Fe=tt=Pt,Me=Q):tt=tt.next=Pt,Sn.lanes|=It,ls|=It;mt=mt.next}while(mt!==null&&mt!==g);if(tt===null?Me=Q:tt.next=Fe,!Fa(Q,h.memoizedState)&&(pi=!0,Ct&&(w=du,w!==null)))throw w;h.memoizedState=Q,h.baseState=Me,h.baseQueue=tt,R.lastRenderedState=Q}return k===null&&(R.lanes=0),[h.memoizedState,R.dispatch]}function Wt(h){var g=at(),w=g.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=h;var R=w.dispatch,k=w.pending,Q=g.memoizedState;if(k!==null){w.pending=null;var Me=k=k.next;do Q=h(Q,Me.action),Me=Me.next;while(Me!==k);Fa(Q,g.memoizedState)||(pi=!0),g.memoizedState=Q,g.baseQueue===null&&(g.baseState=Q),w.lastRenderedState=Q}return[Q,R]}function Qt(h,g,w){var R=Sn,k=at(),Q=Hn;if(Q){if(w===void 0)throw Error(r(407));w=w()}else w=g();var Me=!Fa((Jt||k).memoizedState,w);if(Me&&(k.memoizedState=w,pi=!0),k=k.queue,yv(Gn.bind(null,R,k,h),[h]),k.getSnapshot!==g||Me||Yn!==null&&Yn.memoizedState.tag&1){if(R.flags|=2048,gr(9,_n.bind(null,R,k,w,g),{destroy:void 0},null),ii===null)throw Error(r(349));Q||(yl&60)!==0||Gt(R,g,w)}return w}function Gt(h,g,w){h.flags|=16384,h={getSnapshot:g,value:w},g=Sn.updateQueue,g===null?(g=vm(),Sn.updateQueue=g,g.stores=[h]):(w=g.stores,w===null?g.stores=[h]:w.push(h))}function _n(h,g,w,R){g.value=w,g.getSnapshot=R,Ti(g)&&si(h)}function Gn(h,g,w){return w(function(){Ti(g)&&si(h)})}function Ti(h){var g=h.getSnapshot;h=h.value;try{var w=g();return!Fa(h,w)}catch{return!0}}function si(h){var g=Ce(h,2);g!==null&&Tr(g,h,2)}function gn(h){var g=Ke();if(typeof h=="function"){var w=h;if(h=w(),fc){B(!0);try{w()}finally{B(!1)}}}return g.memoizedState=g.baseState=h,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rt,lastRenderedState:h},g}function Zt(h,g,w,R){return h.baseState=w,Nt(h,Jt,typeof R=="function"?R:Rt)}function Mi(h,g,w,R,k){if(Ld(h))throw Error(r(485));if(h=g.action,h!==null){var Q={payload:k,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Me){Q.listeners.push(Me)}};an.T!==null?w(!0):Q.isTransition=!1,R(Q),w=g.pending,w===null?(Q.next=g.pending=Q,Cn(g,Q)):(Q.next=w.next,g.pending=w.next=Q)}}function Cn(h,g){var w=g.action,R=g.payload,k=h.state;if(g.isTransition){var Q=an.T,Me={};an.T=Me;try{var Fe=w(k,R),tt=an.S;tt!==null&&tt(Me,Fe),Dr(h,g,Fe)}catch(mt){Nr(h,g,mt)}finally{an.T=Q}}else try{Q=w(k,R),Dr(h,g,Q)}catch(mt){Nr(h,g,mt)}}function Dr(h,g,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(R){ws(h,g,R)},function(R){return Nr(h,g,R)}):ws(h,g,w)}function ws(h,g,w){g.status="fulfilled",g.value=w,mr(g),h.state=w,g=h.pending,g!==null&&(w=g.next,w===g?h.pending=null:(w=w.next,g.next=w,Cn(h,w)))}function Nr(h,g,w){var R=h.pending;if(h.pending=null,R!==null){R=R.next;do g.status="rejected",g.reason=w,mr(g),g=g.next;while(g!==R)}h.action=null}function mr(h){h=h.listeners;for(var g=0;g<h.length;g++)(0,h[g])()}function ci(h,g){return g}function $r(h,g){if(Hn){var w=ii.formState;if(w!==null){e:{var R=Sn;if(Hn){if(jr){var k=uy(jr,Ar);if(k){jr=fy(k),R=Tb(k);break e}}ge(R)}R=!1}R&&(g=w[0])}}w=Ke(),w.memoizedState=w.baseState=g,R={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:g},w.queue=R,w=Sv.bind(null,Sn,R),R.dispatch=w,R=gn(!1);var Q=Wu.bind(null,Sn,!1,R.queue);return R=Ke(),k={state:g,dispatch:null,action:h,pending:null},R.queue=k,w=Mi.bind(null,Sn,k,Q,w),k.dispatch=w,R.memoizedState=h,[g,w,!1]}function Lr(h){var g=at();return Ui(g,Jt,h)}function Ui(h,g,w){g=Nt(h,g,ci)[0],h=Bt(Rt)[0],g=typeof g=="object"&&g!==null&&typeof g.then=="function"?dt(g):g;var R=at(),k=R.queue,Q=k.dispatch;return w!==R.memoizedState&&(Sn.flags|=2048,gr(9,Ir.bind(null,k,w),{destroy:void 0},null)),[g,Q,h]}function Ir(h,g){h.action=g}function Kc(h){var g=at(),w=Jt;if(w!==null)return Ui(g,w,h);at(),g=g.memoizedState,w=at();var R=w.queue.dispatch;return w.memoizedState=h,[g,R,!1]}function gr(h,g,w,R){return h={tag:h,create:g,inst:w,deps:R,next:null},g=Sn.updateQueue,g===null&&(g=vm(),Sn.updateQueue=g),w=g.lastEffect,w===null?g.lastEffect=h.next=h:(R=w.next,w.next=h,h.next=R,g.lastEffect=h),h}function I_(){return at().memoizedState}function Cd(h,g,w,R){var k=Ke();Sn.flags|=h,k.memoizedState=gr(1|g,w,{destroy:void 0},R===void 0?null:R)}function Rd(h,g,w,R){var k=at();R=R===void 0?null:R;var Q=k.memoizedState.inst;Jt!==null&&R!==null&&vi(R,Jt.memoizedState.deps)?k.memoizedState=gr(g,w,Q,R):(Sn.flags|=h,k.memoizedState=gr(1|g,w,Q,R))}function Cp(h,g){Cd(8390656,8,h,g)}function yv(h,g){Rd(2048,8,h,g)}function U_(h,g){return Rd(4,2,h,g)}function Od(h,g){return Rd(4,4,h,g)}function Rp(h,g){if(typeof g=="function"){h=h();var w=g(h);return function(){typeof w=="function"?w():g(null)}}if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function Op(h,g,w){w=w!=null?w.concat([h]):null,Rd(4,4,Rp.bind(null,g,h),w)}function Bl(){}function $c(h,g){var w=at();g=g===void 0?null:g;var R=w.memoizedState;return g!==null&&vi(g,R[1])?R[0]:(w.memoizedState=[h,g],h)}function _v(h,g){var w=at();g=g===void 0?null:g;var R=w.memoizedState;if(g!==null&&vi(g,R[1]))return R[0];if(R=h(),fc){B(!0);try{h()}finally{B(!1)}}return w.memoizedState=[R,g],R}function Dd(h,g,w){return w===void 0||(yl&1073741824)!==0?h.memoizedState=g:(h.memoizedState=w,h=Hv(),Sn.lanes|=h,ls|=h,w)}function bv(h,g,w,R){return Fa(w,g)?w:_i.current!==null?(h=Dd(h,w,R),Fa(h,g)||(pi=!0),h):(yl&42)===0?(pi=!0,h.memoizedState=w):(h=Hv(),Sn.lanes|=h,ls|=h,g)}function Gu(h,g,w,R,k){var Q=hl();Jr(Q!==0&&8>Q?Q:8);var Me=an.T,Fe={};an.T=Fe,Wu(h,!1,g,w);try{var tt=k(),mt=an.S;if(mt!==null&&mt(Fe,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var Ct=ye(tt,R);kl(h,g,Ct,qi(h))}else kl(h,g,R,qi(h))}catch(It){kl(h,g,{then:function(){},status:"rejected",reason:It},qi())}finally{Jr(Q),an.T=Me}}function bo(h){var g=h.memoizedState;if(g!==null)return g;g={memoizedState:tc,baseState:tc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rt,lastRenderedState:tc},next:null};var w={};return g.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rt,lastRenderedState:w},next:null},h.memoizedState=g,h=h.alternate,h!==null&&(h.memoizedState=g),g}function Nd(){return Pr(Qs)}function Yu(){return at().memoizedState}function Qo(){return at().memoizedState}function xv(h){for(var g=h.return;g!==null;){switch(g.tag){case 24:case 3:var w=qi();h=Ue(w);var R=pt(g,h,w);R!==null&&(Tr(R,g,w),St(R,g,w)),g={cache:Vl()},h.payload=g;return}g=g.return}}function Dp(h,g,w){var R=qi();w={lane:R,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},Ld(h)?ua(g,w):(w=He(h,g,w,R),w!==null&&(Tr(w,h,R),Fl(w,g,R)))}function Sv(h,g,w){var R=qi();kl(h,g,w,R)}function kl(h,g,w,R){var k={lane:R,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(Ld(h))ua(g,k);else{var Q=h.alternate;if(h.lanes===0&&(Q===null||Q.lanes===0)&&(Q=g.lastRenderedReducer,Q!==null))try{var Me=g.lastRenderedState,Fe=Q(Me,w);if(k.hasEagerState=!0,k.eagerState=Fe,Fa(Fe,Me))return De(h,g,k,0),ii===null&&xe(),!1}catch{}finally{}if(w=He(h,g,k,R),w!==null)return Tr(w,h,R),Fl(w,g,R),!0}return!1}function Wu(h,g,w,R){if(R={lane:2,revertLane:ne(),action:R,hasEagerState:!1,eagerState:null,next:null},Ld(h)){if(g)throw Error(r(479))}else g=He(h,w,R,2),g!==null&&Tr(g,h,2)}function Ld(h){var g=h.alternate;return h===Sn||g!==null&&g===Sn}function ua(h,g){pu=Is=!0;var w=h.pending;w===null?g.next=g:(g.next=w.next,w.next=g),h.pending=g}function Fl(h,g,w){if((w&4194176)!==0){var R=g.lanes;R&=h.pendingLanes,w|=R,g.lanes=w,he(h,w)}}function Zu(h,g,w,R){g=h.memoizedState,w=w(R,g),w=w==null?g:Kp({},g,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}function Xu(h,g,w,R,k,Q,Me){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(R,Q,Me):g.prototype&&g.prototype.isPureReactComponent?!je(w,R)||!je(k,Q):!0}function P_(h,g,w,R){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,R),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,R),g.state!==h&&Oo.enqueueReplaceState(g,g.state,null)}function Jo(h,g){var w=g;if("ref"in g){w={};for(var R in g)R!=="ref"&&(w[R]=g[R])}if(h=h.defaultProps){w===g&&(w=Kp({},w));for(var k in h)w[k]===void 0&&(w[k]=h[k])}return w}function qu(h,g){try{var w=h.onUncaughtError;w(g.value,{componentStack:g.stack})}catch(R){setTimeout(function(){throw R})}}function Ku(h,g,w){try{var R=h.onCaughtError;R(w.value,{componentStack:w.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function $u(h,g,w){return w=Ue(w),w.tag=3,w.payload={element:null},w.callback=function(){qu(h,g)},w}function Ev(h){return h=Ue(h),h.tag=3,h}function z_(h,g,w,R){var k=w.type.getDerivedStateFromError;if(typeof k=="function"){var Q=R.value;h.payload=function(){return k(Q)},h.callback=function(){Ku(g,w,R)}}var Me=w.stateNode;Me!==null&&typeof Me.componentDidCatch=="function"&&(h.callback=function(){Ku(g,w,R),typeof k!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var Fe=R.stack;this.componentDidCatch(R.value,{componentStack:Fe!==null?Fe:""})})}function Kw(h,g,w,R,k){if(w.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){if(g=w.alternate,g!==null&&zd(g,w,k,!0),w=is.current,w!==null){switch(w.tag){case 13:return hi===null?ol():w.alternate===null&&mi===0&&(mi=3),w.flags&=-257,w.flags|=65536,w.lanes=k,R===mh?w.flags|=16384:(g=w.updateQueue,g===null?w.updateQueue=new Set([R]):g.add(R),eu(h,R,k)),!1;case 22:return w.flags|=65536,R===mh?w.flags|=16384:(g=w.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([R])},w.updateQueue=g):(w=g.retryQueue,w===null?g.retryQueue=new Set([R]):w.add(R)),eu(h,R,k)),!1}throw Error(r(435,w.tag))}return eu(h,R,k),ol(),!1}if(Hn)return g=is.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=k,R!==dh&&(h=Error(r(422),{cause:R}),te(ae(h,w)))):(R!==dh&&(g=Error(r(423),{cause:R}),te(ae(g,w))),h=h.current.alternate,h.flags|=65536,k&=-k,h.lanes|=k,R=ae(R,w),k=$u(h.stateNode,R,k),_e(h,k),mi!==4&&(mi=2)),!1;var Q=Error(r(520),{cause:R});if(Q=ae(Q,w),vu===null?vu=[Q]:vu.push(Q),mi!==4&&(mi=2),g===null)return!0;R=ae(R,w),w=g;do{switch(w.tag){case 3:return w.flags|=65536,h=k&-k,w.lanes|=h,h=$u(w.stateNode,R,h),_e(w,h),!1;case 1:if(g=w.type,Q=w.stateNode,(w.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(hc===null||!hc.has(Q))))return w.flags|=65536,k&=-k,w.lanes|=k,k=Ev(k),z_(k,h,w,R),_e(w,k),!1}w=w.return}while(w!==null);return!1}function Ur(h,g,w,R){g.child=h===null?Ro(g,null,w,R):uc(g,h.child,w,R)}function Np(h,g,w,R,k){w=w.render;var Q=g.ref;if("ref"in R){var Me={};for(var Fe in R)Fe!=="ref"&&(Me[Fe]=R[Fe])}else Me=R;return jl(g),R=ca(h,g,w,Me,Q,k),Fe=Di(),h!==null&&!pi?(Kr(h,g,k),el(h,g,k)):(Hn&&Fe&&me(g),g.flags|=1,Ur(h,g,R,k),g.child)}function B_(h,g,w,R,k){if(h===null){var Q=w.type;return typeof Q=="function"&&!Kd(Q)&&Q.defaultProps===void 0&&w.compare===null?(g.tag=15,g.type=Q,k_(h,g,Q,R,k)):(h=Eo(w.type,null,R,g,g.mode,k),h.ref=g.ref,h.return=g,g.child=h)}if(Q=h.child,!Cv(h,k)){var Me=Q.memoizedProps;if(w=w.compare,w=w!==null?w:je,w(Me,R)&&h.ref===g.ref)return el(h,g,k)}return g.flags|=1,h=As(Q,R),h.ref=g.ref,h.return=g,g.child=h}function k_(h,g,w,R,k){if(h!==null){var Q=h.memoizedProps;if(je(Q,R)&&h.ref===g.ref)if(pi=!1,g.pendingProps=R=Q,Cv(h,k))(h.flags&131072)!==0&&(pi=!0);else return g.lanes=h.lanes,el(h,g,k)}return Lp(h,g,w,R,k)}function F_(h,g,w){var R=g.pendingProps,k=R.children,Q=(g.stateNode._pendingVisibility&2)!==0,Me=h!==null?h.memoizedState:null;if(Id(h,g),R.mode==="hidden"||Q){if((g.flags&128)!==0){if(R=Me!==null?Me.baseLanes|w:w,h!==null){for(k=g.child=h.child,Q=0;k!==null;)Q=Q|k.lanes|k.childLanes,k=k.sibling;g.childLanes=Q&~R}else g.childLanes=0,g.child=null;return H_(h,g,R,w)}if((w&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},h!==null&&Up(g,Me!==null?Me.cachePool:null),Me!==null?Ot(g,Me):xt(),Ii(g);else return g.lanes=g.childLanes=536870912,H_(h,g,Me!==null?Me.baseLanes|w:w,w)}else Me!==null?(Up(g,Me.cachePool),Ot(g,Me),In(),g.memoizedState=null):(h!==null&&Up(g,null),xt(),In());return Ur(h,g,k,w),g.child}function H_(h,g,w,R){var k=Ov();return k=k===null?null:{parent:ha?bi._currentValue:bi._currentValue2,pool:k},g.memoizedState={baseLanes:w,cachePool:k},h!==null&&Up(g,null),xt(),Ii(g),h!==null&&zd(h,g,R,!0),null}function Id(h,g){var w=g.ref;if(w===null)h!==null&&h.ref!==null&&(g.flags|=2097664);else{if(typeof w!="function"&&typeof w!="object")throw Error(r(284));(h===null||h.ref!==w)&&(g.flags|=2097664)}}function Lp(h,g,w,R,k){return jl(g),w=ca(h,g,w,R,void 0,k),R=Di(),h!==null&&!pi?(Kr(h,g,k),el(h,g,k)):(Hn&&R&&me(g),g.flags|=1,Ur(h,g,w,k),g.child)}function j_(h,g,w,R,k,Q){return jl(g),g.updateQueue=null,w=ei(g,R,w,k),qa(h),R=Di(),h!==null&&!pi?(Kr(h,g,Q),el(h,g,Q)):(Hn&&R&&me(g),g.flags|=1,Ur(h,g,w,Q),g.child)}function V_(h,g,w,R,k){if(jl(g),g.stateNode===null){var Q=ac,Me=w.contextType;typeof Me=="object"&&Me!==null&&(Q=Pr(Me)),Q=new w(R,Q),g.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Q.updater=Oo,g.stateNode=Q,Q._reactInternals=g,Q=g.stateNode,Q.props=R,Q.state=g.memoizedState,Q.refs={},Oe(g),Me=w.contextType,Q.context=typeof Me=="object"&&Me!==null?Pr(Me):ac,Q.state=g.memoizedState,Me=w.getDerivedStateFromProps,typeof Me=="function"&&(Zu(g,w,Me,R),Q.state=g.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(Me=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),Me!==Q.state&&Oo.enqueueReplaceState(Q,Q.state,null),nt(g,R,Q,k),Ve(),Q.state=g.memoizedState),typeof Q.componentDidMount=="function"&&(g.flags|=4194308),R=!0}else if(h===null){Q=g.stateNode;var Fe=g.memoizedProps,tt=Jo(w,Fe);Q.props=tt;var mt=Q.context,Ct=w.contextType;Me=ac,typeof Ct=="object"&&Ct!==null&&(Me=Pr(Ct));var It=w.getDerivedStateFromProps;Ct=typeof It=="function"||typeof Q.getSnapshotBeforeUpdate=="function",Fe=g.pendingProps!==Fe,Ct||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(Fe||mt!==Me)&&P_(g,Q,R,Me),vl=!1;var Pt=g.memoizedState;Q.state=Pt,nt(g,R,Q,k),Ve(),mt=g.memoizedState,Fe||Pt!==mt||vl?(typeof It=="function"&&(Zu(g,w,It,R),mt=g.memoizedState),(tt=vl||Xu(g,w,tt,R,Pt,mt,Me))?(Ct||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(g.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=R,g.memoizedState=mt),Q.props=R,Q.state=mt,Q.context=Me,R=tt):(typeof Q.componentDidMount=="function"&&(g.flags|=4194308),R=!1)}else{Q=g.stateNode,Be(h,g),Me=g.memoizedProps,Ct=Jo(w,Me),Q.props=Ct,It=g.pendingProps,Pt=Q.context,mt=w.contextType,tt=ac,typeof mt=="object"&&mt!==null&&(tt=Pr(mt)),Fe=w.getDerivedStateFromProps,(mt=typeof Fe=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(Me!==It||Pt!==tt)&&P_(g,Q,R,tt),vl=!1,Pt=g.memoizedState,Q.state=Pt,nt(g,R,Q,k),Ve();var pn=g.memoizedState;Me!==It||Pt!==pn||vl||h!==null&&h.dependencies!==null&&Bd(h.dependencies)?(typeof Fe=="function"&&(Zu(g,w,Fe,R),pn=g.memoizedState),(Ct=vl||Xu(g,w,Ct,R,Pt,pn,tt)||h!==null&&h.dependencies!==null&&Bd(h.dependencies))?(mt||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(R,pn,tt),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(R,pn,tt)),typeof Q.componentDidUpdate=="function"&&(g.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof Q.componentDidUpdate!="function"||Me===h.memoizedProps&&Pt===h.memoizedState||(g.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||Me===h.memoizedProps&&Pt===h.memoizedState||(g.flags|=1024),g.memoizedProps=R,g.memoizedState=pn),Q.props=R,Q.state=pn,Q.context=tt,R=Ct):(typeof Q.componentDidUpdate!="function"||Me===h.memoizedProps&&Pt===h.memoizedState||(g.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||Me===h.memoizedProps&&Pt===h.memoizedState||(g.flags|=1024),R=!1)}return Q=R,Id(h,g),R=(g.flags&128)!==0,Q||R?(Q=g.stateNode,w=R&&typeof w.getDerivedStateFromError!="function"?null:Q.render(),g.flags|=1,h!==null&&R?(g.child=uc(g,h.child,null,k),g.child=uc(g,null,w,k)):Ur(h,g,w,k),g.memoizedState=Q.state,h=g.child):h=el(h,g,k),h}function G_(h,g,w,R){return it(),g.flags|=256,Ur(h,g,w,R),g.child}function wv(h){return{baseLanes:h,cachePool:Dv()}}function Ud(h,g,w){return h=h!==null?h.childLanes&~w:0,g&&(h|=cs),h}function Y_(h,g,w){var R=g.pendingProps,k=!1,Q=(g.flags&128)!==0,Me;if((Me=Q)||(Me=h!==null&&h.memoizedState===null?!1:(_r.current&2)!==0),Me&&(k=!0,g.flags&=-129),Me=(g.flags&32)!==0,g.flags&=-33,h===null){if(Hn){if(k?$t(g):In(),Hn){var Fe=jr,tt;(tt=Fe)&&(Fe=Cb(Fe,Ar),Fe!==null?(g.memoizedState={dehydrated:Fe,treeContext:sc!==null?{id:eo,overflow:to}:null,retryLane:536870912},tt=t(18,null,null,0),tt.stateNode=Fe,tt.return=g,g.child=tt,Hr=g,jr=null,tt=!0):tt=!1),tt||ge(g)}if(Fe=g.memoizedState,Fe!==null&&(Fe=Fe.dehydrated,Fe!==null))return sm(Fe)?g.lanes=16:g.lanes=536870912,null;rn(g)}return Fe=R.children,R=R.fallback,k?(In(),k=g.mode,Fe=Mv({mode:"hidden",children:Fe},k),R=ji(R,k,w,null),Fe.return=g,R.return=g,Fe.sibling=R,g.child=Fe,k=g.child,k.memoizedState=wv(w),k.childLanes=Ud(h,Me,w),g.memoizedState=bm,R):($t(g),Tv(g,Fe))}if(tt=h.memoizedState,tt!==null&&(Fe=tt.dehydrated,Fe!==null)){if(Q)g.flags&256?($t(g),g.flags&=-257,g=Ip(h,g,w)):g.memoizedState!==null?(In(),g.child=h.child,g.flags|=128,g=null):(In(),k=R.fallback,Fe=g.mode,R=Mv({mode:"visible",children:R.children},Fe),k=ji(k,Fe,w,null),k.flags|=2,R.return=g,k.return=g,R.sibling=k,g.child=R,uc(g,h.child,null,w),R=g.child,R.memoizedState=wv(w),R.childLanes=Ud(h,Me,w),g.memoizedState=bm,g=k);else if($t(g),sm(Fe))Me=Eb(Fe).digest,R=Error(r(419)),R.stack="",R.digest=Me,te({value:R,source:null,stack:null}),g=Ip(h,g,w);else if(pi||zd(h,g,w,!1),Me=(w&h.childLanes)!==0,pi||Me){if(Me=ii,Me!==null){if(R=w&-w,(R&42)!==0)R=1;else switch(R){case 2:R=1;break;case 8:R=4;break;case 32:R=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:R=64;break;case 268435456:R=134217728;break;default:R=0}if(R=(R&(Me.suspendedLanes|w))!==0?0:R,R!==0&&R!==tt.retryLane)throw tt.retryLane=R,Ce(h,R),Tr(Me,h,R),_m}am(Fe)||ol(),g=Ip(h,g,w)}else am(Fe)?(g.flags|=128,g.child=h.child,g=ll.bind(null,h),wb(Fe,g),g=null):(h=tt.treeContext,Fr&&(jr=Ab(Fe),Hr=g,Hn=!0,Ns=null,Ar=!1,h!==null&&(es[ts++]=eo,es[ts++]=to,es[ts++]=sc,eo=h.id,to=h.overflow,sc=g)),g=Tv(g,R.children),g.flags|=4096);return g}return k?(In(),k=R.fallback,Fe=g.mode,tt=h.child,Q=tt.sibling,R=As(tt,{mode:"hidden",children:R.children}),R.subtreeFlags=tt.subtreeFlags&31457280,Q!==null?k=As(Q,k):(k=ji(k,Fe,w,null),k.flags|=2),k.return=g,R.return=g,R.sibling=k,g.child=R,R=k,k=g.child,Fe=h.child.memoizedState,Fe===null?Fe=wv(w):(tt=Fe.cachePool,tt!==null?(Q=ha?bi._currentValue:bi._currentValue2,tt=tt.parent!==Q?{parent:Q,pool:Q}:tt):tt=Dv(),Fe={baseLanes:Fe.baseLanes|w,cachePool:tt}),k.memoizedState=Fe,k.childLanes=Ud(h,Me,w),g.memoizedState=bm,R):($t(g),w=h.child,h=w.sibling,w=As(w,{mode:"visible",children:R.children}),w.return=g,w.sibling=null,h!==null&&(Me=g.deletions,Me===null?(g.deletions=[h],g.flags|=16):Me.push(h)),g.child=w,g.memoizedState=null,w)}function Tv(h,g){return g=Mv({mode:"visible",children:g},h.mode),g.return=h,h.child=g}function Mv(h,g){return Qd(h,g,0,null)}function Ip(h,g,w){return uc(g,h.child,null,w),h=Tv(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function W_(h,g,w){h.lanes|=g;var R=h.alternate;R!==null&&(R.lanes|=g),Pd(h.return,g,w)}function Av(h,g,w,R,k){var Q=h.memoizedState;Q===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:R,tail:w,tailMode:k}:(Q.isBackwards=g,Q.rendering=null,Q.renderingStartTime=0,Q.last=R,Q.tail=w,Q.tailMode=k)}function Z_(h,g,w){var R=g.pendingProps,k=R.revealOrder,Q=R.tail;if(Ur(h,g,R.children,w),R=_r.current,(R&2)!==0)R=R&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&W_(h,w,g);else if(h.tag===19)W_(h,w,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}R&=1}switch(T(_r,R),k){case"forwards":for(w=g.child,k=null;w!==null;)h=w.alternate,h!==null&&jn(h)===null&&(k=w),w=w.sibling;w=k,w===null?(k=g.child,g.child=null):(k=w.sibling,w.sibling=null),Av(g,!1,k,w,Q);break;case"backwards":for(w=null,k=g.child,g.child=null;k!==null;){if(h=k.alternate,h!==null&&jn(h)===null){g.child=k;break}h=k.sibling,k.sibling=w,w=k,k=h}Av(g,!0,w,null,Q);break;case"together":Av(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function el(h,g,w){if(h!==null&&(g.dependencies=h.dependencies),ls|=g.lanes,(w&g.childLanes)===0)if(h!==null){if(zd(h,g,w,!1),(w&g.childLanes)===0)return null}else return null;if(h!==null&&g.child!==h.child)throw Error(r(153));if(g.child!==null){for(h=g.child,w=As(h,h.pendingProps),g.child=w,w.return=g;h.sibling!==null;)h=h.sibling,w=w.sibling=As(h,h.pendingProps),w.return=g;w.sibling=null}return g.child}function Cv(h,g){return(h.lanes&g)!==0?!0:(h=h.dependencies,!!(h!==null&&Bd(h)))}function $w(h,g,w){switch(g.tag){case 3:le(g,g.stateNode.containerInfo),Hl(g,bi,h.memoizedState.cache),it();break;case 27:case 5:Ee(g);break;case 4:le(g,g.stateNode.containerInfo);break;case 10:Hl(g,g.type,g.memoizedProps.value);break;case 13:var R=g.memoizedState;if(R!==null)return R.dehydrated!==null?($t(g),g.flags|=128,null):(w&g.child.childLanes)!==0?Y_(h,g,w):($t(g),h=el(h,g,w),h!==null?h.sibling:null);$t(g);break;case 19:var k=(h.flags&128)!==0;if(R=(w&g.childLanes)!==0,R||(zd(h,g,w,!1),R=(w&g.childLanes)!==0),k){if(R)return Z_(h,g,w);g.flags|=128}if(k=g.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),T(_r,_r.current),R)break;return null;case 22:case 23:return g.lanes=0,F_(h,g,w);case 24:Hl(g,bi,h.memoizedState.cache)}return el(h,g,w)}function X_(h,g,w){if(h!==null)if(h.memoizedProps!==g.pendingProps)pi=!0;else{if(!Cv(h,w)&&(g.flags&128)===0)return pi=!1,$w(h,g,w);pi=(h.flags&131072)!==0}else pi=!1,Hn&&(g.flags&1048576)!==0&&oe(g,_f,g.index);switch(g.lanes=0,g.tag){case 16:e:{h=g.pendingProps;var R=g.elementType,k=R._init;if(R=k(R._payload),g.type=R,typeof R=="function")Kd(R)?(h=Jo(R,h),g.tag=1,g=V_(null,g,R,h,w)):(g.tag=0,g=Lp(null,g,R,h,w));else{if(R!=null){if(k=R.$$typeof,k===ih){g.tag=11,g=Np(null,g,R,h,w);break e}else if(k===Jp){g.tag=14,g=B_(null,g,R,h,w);break e}}throw g=s(R)||R,Error(r(306,g,""))}}return g;case 0:return Lp(h,g,g.type,g.pendingProps,w);case 1:return R=g.type,k=Jo(R,g.pendingProps),V_(h,g,R,k,w);case 3:e:{if(le(g,g.stateNode.containerInfo),h===null)throw Error(r(387));var Q=g.pendingProps;k=g.memoizedState,R=k.element,Be(h,g),nt(g,Q,null,w);var Me=g.memoizedState;if(Q=Me.cache,Hl(g,bi,Q),Q!==k.cache&&Qc(g,[bi],w,!0),Ve(),Q=Me.element,Fr&&k.isDehydrated)if(k={element:Q,isDehydrated:!1,cache:Me.cache},g.updateQueue.baseState=k,g.memoizedState=k,g.flags&256){g=G_(h,g,Q,w);break e}else if(Q!==R){R=ae(Error(r(424)),g),te(R),g=G_(h,g,Q,w);break e}else for(Fr&&(jr=Mb(g.stateNode.containerInfo),Hr=g,Hn=!0,Ns=null,Ar=!0),w=Ro(g,null,Q,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(it(),Q===R){g=el(h,g,w);break e}Ur(h,g,Q,w)}g=g.child}return g;case 26:if(Ja)return Id(h,g),h===null?(w=py(g.type,null,g.pendingProps,null))?g.memoizedState=w:Hn||(g.stateNode=fm(g.type,g.pendingProps,Ao.current,g)):g.memoizedState=py(g.type,h.memoizedProps,g.pendingProps,h.memoizedState),null;case 27:if(di)return Ee(g),h===null&&di&&Hn&&(R=g.stateNode=Js(g.type,g.pendingProps,Ao.current,yr.current,!1),Hr=g,Ar=!0,jr=om(R)),R=g.pendingProps.children,h!==null||Hn?Ur(h,g,R,w):g.child=uc(g,null,R,w),Id(h,g),g.child;case 5:return h===null&&Hn&&(cm(g.type,g.pendingProps,yr.current),(k=R=jr)&&(R=rT(R,g.type,g.pendingProps,Ar),R!==null?(g.stateNode=R,Hr=g,jr=om(R),Ar=!1,k=!0):k=!1),k||ge(g)),Ee(g),k=g.type,Q=g.pendingProps,Me=h!==null?h.memoizedProps:null,R=Q.children,yn(k,Q)?R=null:Me!==null&&yn(k,Me)&&(g.flags|=32),g.memoizedState!==null&&(k=ca(h,g,Vn,null,null,w),ha?Qs._currentValue=k:Qs._currentValue2=k),Id(h,g),Ur(h,g,R,w),g.child;case 6:return h===null&&Hn&&(Lb(g.pendingProps,yr.current),(h=w=jr)&&(w=dy(w,g.pendingProps,Ar),w!==null?(g.stateNode=w,Hr=g,jr=null,h=!0):h=!1),h||ge(g)),null;case 13:return Y_(h,g,w);case 4:return le(g,g.stateNode.containerInfo),R=g.pendingProps,h===null?g.child=uc(g,null,R,w):Ur(h,g,R,w),g.child;case 11:return Np(h,g,g.type,g.pendingProps,w);case 7:return Ur(h,g,g.pendingProps,w),g.child;case 8:return Ur(h,g,g.pendingProps.children,w),g.child;case 12:return Ur(h,g,g.pendingProps.children,w),g.child;case 10:return R=g.pendingProps,Hl(g,g.type,R.value),Ur(h,g,R.children,w),g.child;case 9:return k=g.type._context,R=g.pendingProps.children,jl(g),k=Pr(k),R=R(k),g.flags|=1,Ur(h,g,R,w),g.child;case 14:return B_(h,g,g.type,g.pendingProps,w);case 15:return k_(h,g,g.type,g.pendingProps,w);case 19:return Z_(h,g,w);case 22:return F_(h,g,w);case 24:return jl(g),R=Pr(bi),h===null?(k=Ov(),k===null&&(k=ii,Q=Vl(),k.pooledCache=Q,Q.refCount++,Q!==null&&(k.pooledCacheLanes|=w),k=Q),g.memoizedState={parent:R,cache:k},Oe(g),Hl(g,bi,k)):((h.lanes&w)!==0&&(Be(h,g),nt(g,null,null,w),Ve()),k=h.memoizedState,Q=g.memoizedState,k.parent!==R?(k={parent:R,cache:R},g.memoizedState=k,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=k),Hl(g,bi,R)):(R=Q.cache,Hl(g,bi,R),R!==k.cache&&Qc(g,[bi],w,!0))),Ur(h,g,g.pendingProps.children,w),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function Hl(h,g,w){ha?(T(_l,g._currentValue),g._currentValue=w):(T(_l,g._currentValue2),g._currentValue2=w)}function tl(h){var g=_l.current;ha?h._currentValue=g:h._currentValue2=g,x(_l)}function Pd(h,g,w){for(;h!==null;){var R=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,R!==null&&(R.childLanes|=g)):R!==null&&(R.childLanes&g)!==g&&(R.childLanes|=g),h===w)break;h=h.return}}function Qc(h,g,w,R){var k=h.child;for(k!==null&&(k.return=h);k!==null;){var Q=k.dependencies;if(Q!==null){var Me=k.child;Q=Q.firstContext;e:for(;Q!==null;){var Fe=Q;Q=k;for(var tt=0;tt<g.length;tt++)if(Fe.context===g[tt]){Q.lanes|=w,Fe=Q.alternate,Fe!==null&&(Fe.lanes|=w),Pd(Q.return,w,h),R||(Me=null);break e}Q=Fe.next}}else if(k.tag===18){if(Me=k.return,Me===null)throw Error(r(341));Me.lanes|=w,Q=Me.alternate,Q!==null&&(Q.lanes|=w),Pd(Me,w,h),Me=null}else Me=k.child;if(Me!==null)Me.return=k;else for(Me=k;Me!==null;){if(Me===h){Me=null;break}if(k=Me.sibling,k!==null){k.return=Me.return,Me=k;break}Me=Me.return}k=Me}}function zd(h,g,w,R){h=null;for(var k=g,Q=!1;k!==null;){if(!Q){if((k.flags&524288)!==0)Q=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var Me=k.alternate;if(Me===null)throw Error(r(387));if(Me=Me.memoizedProps,Me!==null){var Fe=k.type;Fa(k.pendingProps.value,Me.value)||(h!==null?h.push(Fe):h=[Fe])}}else if(k===lu.current){if(Me=k.alternate,Me===null)throw Error(r(387));Me.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(h!==null?h.push(Qs):h=[Qs])}k=k.return}h!==null&&Qc(g,h,w,R),g.flags|=262144}function Bd(h){for(h=h.firstContext;h!==null;){var g=h.context;if(!Fa(ha?g._currentValue:g._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function jl(h){ro=h,as=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Pr(h){return Rv(ro,h)}function kd(h,g){return ro===null&&jl(h),Rv(h,g)}function Rv(h,g){var w=ha?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:w,next:null},as===null){if(h===null)throw Error(r(308));as=g,h.dependencies={lanes:0,firstContext:g},h.flags|=524288}else as=as.next=g;return w}function Vl(){return{controller:new Tf,data:new Map,refCount:0}}function Fd(h){h.refCount--,h.refCount===0&&Gb(Yb,function(){h.controller.abort()})}function Ov(){var h=Do.current;return h!==null?h:ii.pooledCache}function Up(h,g){g===null?T(Do,Do.current):T(Do,g.pool)}function Dv(){var h=Ov();return h===null?null:{parent:ha?bi._currentValue:bi._currentValue2,pool:h}}function La(h){h.flags|=4}function Qu(h,g){if(h!==null&&h.child===g.child)return!1;if((g.flags&16)!==0)return!0;for(h=g.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Jc(h,g,w,R){if(vr)for(w=g.child;w!==null;){if(w.tag===5||w.tag===6)ah(h,w.stateNode);else if(!(w.tag===4||di&&w.tag===27)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else if(Os)for(var k=g.child;k!==null;){if(k.tag===5){var Q=k.stateNode;w&&R&&(Q=ly(Q,k.type,k.memoizedProps)),ah(h,Q)}else if(k.tag===6)Q=k.stateNode,w&&R&&(Q=cy(Q,k.memoizedProps)),ah(h,Q);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)Q=k.child,Q!==null&&(Q.return=k),Jc(h,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===g)break;for(;k.sibling===null;){if(k.return===null||k.return===g)return;k=k.return}k.sibling.return=k.return,k=k.sibling}}function q_(h,g,w,R){if(Os)for(var k=g.child;k!==null;){if(k.tag===5){var Q=k.stateNode;w&&R&&(Q=ly(Q,k.type,k.memoizedProps)),oy(h,Q)}else if(k.tag===6)Q=k.stateNode,w&&R&&(Q=cy(Q,k.memoizedProps)),oy(h,Q);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)Q=k.child,Q!==null&&(Q.return=k),q_(h,k,!(k.memoizedProps!==null&&k.memoizedProps.mode==="manual"),!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===g)break;for(;k.sibling===null;){if(k.return===null||k.return===g)return;k=k.return}k.sibling.return=k.return,k=k.sibling}}function Hd(h,g){if(Os&&Qu(h,g)){h=g.stateNode;var w=h.containerInfo,R=sh();q_(R,g,!1,!1),h.pendingChildren=R,La(g),rm(w,R)}}function Pp(h,g,w,R){if(vr)h.memoizedProps!==R&&La(g);else if(Os){var k=h.stateNode,Q=h.memoizedProps;if((h=Qu(h,g))||Q!==R){var Me=yr.current;Q=gf(k,w,Q,R,!h,null),Q===k?g.stateNode=k:(dl(Q,w,R,Me)&&La(g),g.stateNode=Q,h?Jc(Q,g,!1,!1):La(g))}else g.stateNode=k}}function zp(h,g,w){if(Jv(g,w)){if(h.flags|=16777216,!nm(g,w))if(ql())h.flags|=8192;else throw oc=mh,ph}else h.flags&=-16777217}function Bp(h,g){if(Pb(g)){if(h.flags|=16777216,!iu(g))if(ql())h.flags|=8192;else throw oc=mh,ph}else h.flags&=-16777217}function Ju(h,g){g!==null&&(h.flags|=4),h.flags&16384&&(g=h.tag!==22?N():536870912,h.lanes|=g,Io|=g)}function ef(h,g){if(!Hn)switch(h.tailMode){case"hidden":g=h.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var R=null;w!==null;)w.alternate!==null&&(R=w),w=w.sibling;R===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:R.sibling=null}}function Ni(h){var g=h.alternate!==null&&h.alternate.child===h.child,w=0,R=0;if(g)for(var k=h.child;k!==null;)w|=k.lanes|k.childLanes,R|=k.subtreeFlags&31457280,R|=k.flags&31457280,k.return=h,k=k.sibling;else for(k=h.child;k!==null;)w|=k.lanes|k.childLanes,R|=k.subtreeFlags,R|=k.flags,k.return=h,k=k.sibling;return h.subtreeFlags|=R,h.childLanes=w,g}function K_(h,g,w){var R=g.pendingProps;switch(J(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(g),null;case 1:return Ni(g),null;case 3:return w=g.stateNode,R=null,h!==null&&(R=h.memoizedState.cache),g.memoizedState.cache!==R&&(g.flags|=2048),tl(bi),Se(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(h===null||h.child===null)&&(We(g)?La(g):h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Ns!==null&&(Xd(Ns),Ns=null))),Hd(h,g),Ni(g),null;case 26:if(Ja){w=g.type;var k=g.memoizedState;return h===null?(La(g),k!==null?(Ni(g),Bp(g,k)):(Ni(g),zp(g,w,R))):k?k!==h.memoizedState?(La(g),Ni(g),Bp(g,k)):(Ni(g),g.flags&=-16777217):(vr?h.memoizedProps!==R&&La(g):Pp(h,g,w,R),Ni(g),zp(g,w,R)),null}case 27:if(di){if(re(g),w=Ao.current,k=g.type,h!==null&&g.stateNode!=null)vr?h.memoizedProps!==R&&La(g):Pp(h,g,k,R);else{if(!R){if(g.stateNode===null)throw Error(r(166));return Ni(g),null}h=yr.current,We(g)?Ae(g,h):(h=Js(k,R,w,h,!0),g.stateNode=h,La(g))}return Ni(g),null}case 5:if(re(g),w=g.type,h!==null&&g.stateNode!=null)Pp(h,g,w,R);else{if(!R){if(g.stateNode===null)throw Error(r(166));return Ni(g),null}h=yr.current,We(g)?Ae(g,h):(k=Qv(w,R,Ao.current,h,g),Jc(k,g,!1,!1),g.stateNode=k,dl(k,w,R,h)&&La(g))}return Ni(g),zp(g,g.type,g.pendingProps),null;case 6:if(h&&g.stateNode!=null)w=h.memoizedProps,vr?w!==R&&La(g):Os&&(w!==R?(g.stateNode=oi(R,Ao.current,yr.current,g),La(g)):g.stateNode=h.stateNode);else{if(typeof R!="string"&&g.stateNode===null)throw Error(r(166));if(h=Ao.current,w=yr.current,We(g)){if(!Fr)throw Error(r(176));if(h=g.stateNode,w=g.memoizedProps,R=null,k=Hr,k!==null)switch(k.tag){case 27:case 5:R=k.memoizedProps}hy(h,w,g,R)||ge(g)}else g.stateNode=oi(R,h,w,g)}return Ni(g),null;case 13:if(R=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(k=We(g),R!==null&&R.dehydrated!==null){if(h===null){if(!k)throw Error(r(318));if(!Fr)throw Error(r(344));if(k=g.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));Ob(k,g)}else it(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Ni(g),k=!1}else Ns!==null&&(Xd(Ns),Ns=null),k=!0;if(!k)return g.flags&256?(rn(g),g):(rn(g),null)}if(rn(g),(g.flags&128)!==0)return g.lanes=w,g;if(w=R!==null,h=h!==null&&h.memoizedState!==null,w){R=g.child,k=null,R.alternate!==null&&R.alternate.memoizedState!==null&&R.alternate.memoizedState.cachePool!==null&&(k=R.alternate.memoizedState.cachePool.pool);var Q=null;R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(Q=R.memoizedState.cachePool.pool),Q!==k&&(R.flags|=2048)}return w!==h&&w&&(g.child.flags|=8192),Ju(g,g.updateQueue),Ni(g),null;case 4:return Se(),Hd(h,g),h===null&&Ki(g.stateNode.containerInfo),Ni(g),null;case 10:return tl(g.type),Ni(g),null;case 19:if(x(_r),k=g.memoizedState,k===null)return Ni(g),null;if(R=(g.flags&128)!==0,Q=k.rendering,Q===null)if(R)ef(k,!1);else{if(mi!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(Q=jn(h),Q!==null){for(g.flags|=128,ef(k,!1),h=Q.updateQueue,g.updateQueue=h,Ju(g,h),g.subtreeFlags=0,h=w,w=g.child;w!==null;)$d(w,h),w=w.sibling;return T(_r,_r.current&1|2),g.child}h=h.sibling}k.tail!==null&&Ds()>Cf&&(g.flags|=128,R=!0,ef(k,!1),g.lanes=4194304)}else{if(!R)if(h=jn(Q),h!==null){if(g.flags|=128,R=!0,h=h.updateQueue,g.updateQueue=h,Ju(g,h),ef(k,!0),k.tail===null&&k.tailMode==="hidden"&&!Q.alternate&&!Hn)return Ni(g),null}else 2*Ds()-k.renderingStartTime>Cf&&w!==536870912&&(g.flags|=128,R=!0,ef(k,!1),g.lanes=4194304);k.isBackwards?(Q.sibling=g.child,g.child=Q):(h=k.last,h!==null?h.sibling=Q:g.child=Q,k.last=Q)}return k.tail!==null?(g=k.tail,k.rendering=g,k.tail=g.sibling,k.renderingStartTime=Ds(),g.sibling=null,h=_r.current,T(_r,R?h&1|2:h&1),g):(Ni(g),null);case 22:case 23:return rn(g),Mt(),R=g.memoizedState!==null,h!==null?h.memoizedState!==null!==R&&(g.flags|=8192):R&&(g.flags|=8192),R?(w&536870912)!==0&&(g.flags&128)===0&&(Ni(g),g.subtreeFlags&6&&(g.flags|=8192)):Ni(g),w=g.updateQueue,w!==null&&Ju(g,w.retryQueue),w=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),R=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(R=g.memoizedState.cachePool.pool),R!==w&&(g.flags|=2048),h!==null&&x(Do),null;case 24:return w=null,h!==null&&(w=h.memoizedState.cache),g.memoizedState.cache!==w&&(g.flags|=2048),tl(bi),Ni(g),null;case 25:return null}throw Error(r(156,g.tag))}function Qw(h,g){switch(J(g),g.tag){case 1:return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return tl(bi),Se(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 26:case 27:case 5:return re(g),null;case 13:if(rn(g),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(r(340));it()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return x(_r),null;case 4:return Se(),null;case 10:return tl(g.type),null;case 22:case 23:return rn(g),Mt(),h!==null&&x(Do),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 24:return tl(bi),null;case 25:return null;default:return null}}function $_(h,g){switch(J(g),g.tag){case 3:tl(bi),Se();break;case 26:case 27:case 5:re(g);break;case 4:Se();break;case 13:rn(g);break;case 19:x(_r);break;case 10:tl(g.type);break;case 22:case 23:rn(g),Mt(),h!==null&&x(Do);break;case 24:tl(bi)}}function jd(h,g){try{var w=g.updateQueue,R=w!==null?w.lastEffect:null;if(R!==null){var k=R.next;w=k;do{if((w.tag&h)===h){R=void 0;var Q=w.create,Me=w.inst;R=Q(),Me.destroy=R}w=w.next}while(w!==k)}}catch(Fe){ti(g,g.return,Fe)}}function Gl(h,g,w){try{var R=g.updateQueue,k=R!==null?R.lastEffect:null;if(k!==null){var Q=k.next;R=Q;do{if((R.tag&h)===h){var Me=R.inst,Fe=Me.destroy;if(Fe!==void 0){Me.destroy=void 0,k=g;var tt=w;try{Fe()}catch(mt){ti(k,tt,mt)}}}R=R.next}while(R!==Q)}}catch(mt){ti(g,g.return,mt)}}function Q_(h){var g=h.updateQueue;if(g!==null){var w=h.stateNode;try{Ne(g,w)}catch(R){ti(h,h.return,R)}}}function Ia(h,g,w){w.props=Jo(h.type,h.memoizedProps),w.state=h.memoizedState;try{w.componentWillUnmount()}catch(R){ti(h,g,R)}}function qs(h,g){try{var w=h.ref;if(w!==null){var R=h.stateNode;switch(h.tag){case 26:case 27:case 5:var k=hf(R);break;default:k=R}typeof w=="function"?h.refCleanup=w(k):w.current=k}}catch(Q){ti(h,g,Q)}}function Ua(h,g){var w=h.ref,R=h.refCleanup;if(w!==null)if(typeof R=="function")try{R()}catch(k){ti(h,g,k)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(k){ti(h,g,k)}else w.current=null}function Nv(h){var g=h.type,w=h.memoizedProps,R=h.stateNode;try{nT(R,g,w,h)}catch(k){ti(h,h.return,k)}}function Lv(h,g,w){try{mb(h.stateNode,h.type,w,g,h)}catch(R){ti(h,h.return,R)}}function Iv(h){return h.tag===5||h.tag===3||(Ja?h.tag===26:!1)||(di?h.tag===27:!1)||h.tag===4}function Vd(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Iv(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!di||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Uv(h,g,w){var R=h.tag;if(R===5||R===6)h=h.stateNode,g?vb(w,h,g):ry(w,h);else if(!(R===4||di&&R===27)&&(h=h.child,h!==null))for(Uv(h,g,w),h=h.sibling;h!==null;)Uv(h,g,w),h=h.sibling}function nl(h,g,w){var R=h.tag;if(R===5||R===6)h=h.stateNode,g?gb(w,h,g):hb(w,h);else if(!(R===4||di&&R===27)&&(h=h.child,h!==null))for(nl(h,g,w),h=h.sibling;h!==null;)nl(h,g,w),h=h.sibling}function kp(h,g,w){h=h.containerInfo;try{vf(h,w)}catch(R){ti(g,g.return,R)}}function Gd(h,g){for(em(h.containerInfo),hn=g;hn!==null;)if(h=hn,g=h.child,(h.subtreeFlags&1028)!==0&&g!==null)g.return=h,hn=g;else for(;hn!==null;){h=hn;var w=h.alternate;switch(g=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((g&1024)!==0&&w!==null){g=void 0;var R=h,k=w.memoizedProps;w=w.memoizedState;var Q=R.stateNode;try{var Me=Jo(R.type,k,R.elementType===R.type);g=Q.getSnapshotBeforeUpdate(Me,w),Q.__reactInternalSnapshotBeforeUpdate=g}catch(Fe){ti(R,R.return,Fe)}}break;case 3:(g&1024)!==0&&vr&&Sb(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(r(163))}if(g=h.sibling,g!==null){g.return=h.return,hn=g;break}hn=h.return}return Me=Rn,Rn=!1,Me}function Fp(h,g,w){var R=w.flags;switch(w.tag){case 0:case 11:case 15:rl(h,w),R&4&&jd(5,w);break;case 1:if(rl(h,w),R&4)if(h=w.stateNode,g===null)try{h.componentDidMount()}catch(Fe){ti(w,w.return,Fe)}else{var k=Jo(w.type,g.memoizedProps);g=g.memoizedState;try{h.componentDidUpdate(k,g,h.__reactInternalSnapshotBeforeUpdate)}catch(Fe){ti(w,w.return,Fe)}}R&64&&Q_(w),R&512&&qs(w,w.return);break;case 3:if(rl(h,w),R&64&&(R=w.updateQueue,R!==null)){if(h=null,w.child!==null)switch(w.child.tag){case 27:case 5:h=hf(w.child.stateNode);break;case 1:h=w.child.stateNode}try{Ne(R,h)}catch(Fe){ti(w,w.return,Fe)}}break;case 26:if(Ja){rl(h,w),R&512&&qs(w,w.return);break}case 27:case 5:rl(h,w),g===null&&R&4&&Nv(w),R&512&&qs(w,w.return);break;case 12:rl(h,w);break;case 13:rl(h,w),R&4&&Hp(h,w);break;case 22:if(k=w.memoizedState!==null||No,!k){g=g!==null&&g.memoizedState!==null||Gi;var Q=No,Me=Gi;No=k,(Gi=g)&&!Me?al(h,w,(w.subtreeFlags&8772)!==0):rl(h,w),No=Q,Gi=Me}R&512&&(w.memoizedProps.mode==="manual"?qs(w,w.return):Ua(w,w.return));break;default:rl(h,w)}}function Pv(h){var g=h.alternate;g!==null&&(h.alternate=null,Pv(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&tT(g)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function zr(h,g,w){for(w=w.child;w!==null;)Yl(h,g,w),w=w.sibling}function Yl(h,g,w){if(ka&&typeof ka.onCommitFiberUnmount=="function")try{ka.onCommitFiberUnmount(Qi,w)}catch{}switch(w.tag){case 26:if(Ja){Gi||Ua(w,g),zr(h,g,w),w.memoizedState?nu(w.memoizedState):w.stateNode&&yf(w.stateNode);break}case 27:if(di){Gi||Ua(w,g);var R=Kt,k=bn;Kt=w.stateNode,zr(h,g,w),rc(w.stateNode),Kt=R,bn=k;break}case 5:Gi||Ua(w,g);case 6:if(vr){if(R=Kt,k=bn,Kt=null,zr(h,g,w),Kt=R,bn=k,Kt!==null)if(bn)try{yb(Kt,w.stateNode)}catch(Q){ti(w,g,Q)}else try{ay(Kt,w.stateNode)}catch(Q){ti(w,g,Q)}}else zr(h,g,w);break;case 18:vr&&Kt!==null&&(bn?oh(Kt,w.stateNode):Nb(Kt,w.stateNode));break;case 4:vr?(R=Kt,k=bn,Kt=w.stateNode.containerInfo,bn=!0,zr(h,g,w),Kt=R,bn=k):(Os&&kp(w.stateNode,w,sh()),zr(h,g,w));break;case 0:case 11:case 14:case 15:Gi||Gl(2,w,g),Gi||Gl(4,w,g),zr(h,g,w);break;case 1:Gi||(Ua(w,g),R=w.stateNode,typeof R.componentWillUnmount=="function"&&Ia(w,g,R)),zr(h,g,w);break;case 21:zr(h,g,w);break;case 22:Gi||Ua(w,g),Gi=(R=Gi)||w.memoizedState!==null,zr(h,g,w),Gi=R;break;default:zr(h,g,w)}}function Hp(h,g){if(Fr&&g.memoizedState===null&&(h=g.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{sT(h)}catch(w){ti(g,g.return,w)}}function J_(h){switch(h.tag){case 13:case 19:var g=h.stateNode;return g===null&&(g=h.stateNode=new ni),g;case 22:return h=h.stateNode,g=h._retryCache,g===null&&(g=h._retryCache=new ni),g;default:throw Error(r(435,h.tag))}}function il(h,g){var w=J_(h);g.forEach(function(R){var k=Ql.bind(null,h,R);w.has(R)||(w.add(R),R.then(k,k))})}function fa(h,g){var w=g.deletions;if(w!==null)for(var R=0;R<w.length;R++){var k=w[R],Q=h,Me=g;if(vr){var Fe=Me;e:for(;Fe!==null;){switch(Fe.tag){case 27:case 5:Kt=Fe.stateNode,bn=!1;break e;case 3:Kt=Fe.stateNode.containerInfo,bn=!0;break e;case 4:Kt=Fe.stateNode.containerInfo,bn=!0;break e}Fe=Fe.return}if(Kt===null)throw Error(r(160));Yl(Q,Me,k),Kt=null,bn=!1}else Yl(Q,Me,k);Q=k.alternate,Q!==null&&(Q.return=null),k.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)zv(g,h),g=g.sibling}function zv(h,g){var w=h.alternate,R=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:fa(g,h),Pa(h),R&4&&(Gl(3,h,h.return),jd(3,h),Gl(5,h,h.return));break;case 1:fa(g,h),Pa(h),R&512&&(Gi||w===null||Ua(w,w.return)),R&64&&No&&(h=h.updateQueue,h!==null&&(R=h.callbacks,R!==null&&(w=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=w===null?R:w.concat(R))));break;case 26:if(Ja){var k=zi;fa(g,h),Pa(h),R&512&&(Gi||w===null||Ua(w,w.return)),R&4&&(R=w!==null?w.memoizedState:null,g=h.memoizedState,w===null?g===null?h.stateNode===null?h.stateNode=ch(k,h.type,h.memoizedProps,h):uh(k,h.type,h.stateNode):h.stateNode=Ib(k,g,h.memoizedProps):R!==g?(R===null?w.stateNode!==null&&yf(w.stateNode):nu(R),g===null?uh(k,h.type,h.stateNode):Ib(k,g,h.memoizedProps)):g===null&&h.stateNode!==null&&Lv(h,h.memoizedProps,w.memoizedProps));break}case 27:if(di&&R&4&&h.alternate===null){k=h.stateNode;var Q=h.memoizedProps;try{ic(k),Bb(h.type,Q,k,h)}catch(Ct){ti(h,h.return,Ct)}}case 5:if(fa(g,h),Pa(h),R&512&&(Gi||w===null||Ua(w,w.return)),vr){if(h.flags&32){g=h.stateNode;try{sy(g)}catch(Ct){ti(h,h.return,Ct)}}R&4&&h.stateNode!=null&&(g=h.memoizedProps,Lv(h,g,w!==null?w.memoizedProps:g)),R&1024&&(yy=!0)}break;case 6:if(fa(g,h),Pa(h),R&4&&vr){if(h.stateNode===null)throw Error(r(162));R=h.memoizedProps,w=w!==null?w.memoizedProps:R,g=h.stateNode;try{pb(g,w,R)}catch(Ct){ti(h,h.return,Ct)}}break;case 3:if(Ja?(Ub(),k=zi,zi=um(g.containerInfo),fa(g,h),zi=k):fa(g,h),Pa(h),R&4){if(vr&&Fr&&w!==null&&w.memoizedState.isDehydrated)try{aT(g.containerInfo)}catch(Ct){ti(h,h.return,Ct)}if(Os){R=g.containerInfo,w=g.pendingChildren;try{vf(R,w)}catch(Ct){ti(h,h.return,Ct)}}}yy&&(yy=!1,eb(h));break;case 4:Ja?(w=zi,zi=um(h.stateNode.containerInfo),fa(g,h),Pa(h),zi=w):(fa(g,h),Pa(h)),R&4&&Os&&kp(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:fa(g,h),Pa(h);break;case 13:fa(g,h),Pa(h),h.child.flags&8192&&h.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(va=Ds()),R&4&&(R=h.updateQueue,R!==null&&(h.updateQueue=null,il(h,R)));break;case 22:R&512&&(Gi||w===null||Ua(w,w.return)),k=h.memoizedState!==null;var Me=w!==null&&w.memoizedState!==null,Fe=No,tt=Gi;if(No=Fe||k,Gi=tt||Me,fa(g,h),Gi=tt,No=Fe,Pa(h),g=h.stateNode,g._current=h,g._visibility&=-3,g._visibility|=g._pendingVisibility&2,R&8192&&(g._visibility=k?g._visibility&-2:g._visibility|1,k&&(g=No||Gi,w===null||Me||g||tf(h)),vr&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){e:if(w=null,vr)for(g=h;;){if(g.tag===5||Ja&&g.tag===26||di&&g.tag===27){if(w===null){Me=w=g;try{Q=Me.stateNode,k?_b(Q):xb(Me.stateNode,Me.memoizedProps)}catch(Ct){ti(Me,Me.return,Ct)}}}else if(g.tag===6){if(w===null){Me=g;try{var mt=Me.stateNode;k?bb(mt):iT(mt,Me.memoizedProps)}catch(Ct){ti(Me,Me.return,Ct)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===h)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break e;for(;g.sibling===null;){if(g.return===null||g.return===h)break e;w===g&&(w=null),g=g.return}w===g&&(w=null),g.sibling.return=g.return,g=g.sibling}}R&4&&(R=h.updateQueue,R!==null&&(w=R.retryQueue,w!==null&&(R.retryQueue=null,il(h,w))));break;case 19:fa(g,h),Pa(h),R&4&&(R=h.updateQueue,R!==null&&(h.updateQueue=null,il(h,R)));break;case 21:break;default:fa(g,h),Pa(h)}}function Pa(h){var g=h.flags;if(g&2){try{if(vr&&(!di||h.tag!==27)){e:{for(var w=h.return;w!==null;){if(Iv(w)){var R=w;break e}w=w.return}throw Error(r(160))}switch(R.tag){case 27:if(di){var k=R.stateNode,Q=Vd(h);nl(h,Q,k);break}case 5:var Me=R.stateNode;R.flags&32&&(sy(Me),R.flags&=-33);var Fe=Vd(h);nl(h,Fe,Me);break;case 3:case 4:var tt=R.stateNode.containerInfo,mt=Vd(h);Uv(h,mt,tt);break;default:throw Error(r(161))}}}catch(Ct){ti(h,h.return,Ct)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function eb(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var g=h;eb(g),g.tag===5&&g.flags&1024&&im(g.stateNode),h=h.sibling}}function rl(h,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)Fp(h,g.alternate,g),g=g.sibling}function tf(h){for(h=h.child;h!==null;){var g=h;switch(g.tag){case 0:case 11:case 14:case 15:Gl(4,g,g.return),tf(g);break;case 1:Ua(g,g.return);var w=g.stateNode;typeof w.componentWillUnmount=="function"&&Ia(g,g.return,w),tf(g);break;case 26:case 27:case 5:Ua(g,g.return),tf(g);break;case 22:Ua(g,g.return),g.memoizedState===null&&tf(g);break;default:tf(g)}h=h.sibling}}function al(h,g,w){for(w=w&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var R=g.alternate,k=h,Q=g,Me=Q.flags;switch(Q.tag){case 0:case 11:case 15:al(k,Q,w),jd(4,Q);break;case 1:if(al(k,Q,w),R=Q,k=R.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(mt){ti(R,R.return,mt)}if(R=Q,k=R.updateQueue,k!==null){var Fe=R.stateNode;try{var tt=k.shared.hiddenCallbacks;if(tt!==null)for(k.shared.hiddenCallbacks=null,k=0;k<tt.length;k++)Le(tt[k],Fe)}catch(mt){ti(R,R.return,mt)}}w&&Me&64&&Q_(Q),qs(Q,Q.return);break;case 26:case 27:case 5:al(k,Q,w),w&&R===null&&Me&4&&Nv(Q),qs(Q,Q.return);break;case 12:al(k,Q,w);break;case 13:al(k,Q,w),w&&Me&4&&Hp(k,Q);break;case 22:Q.memoizedState===null&&al(k,Q,w),qs(Q,Q.return);break;default:al(k,Q,w)}g=g.sibling}}function jp(h,g){var w=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),h=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(h=g.memoizedState.cachePool.pool),h!==w&&(h!=null&&h.refCount++,w!=null&&Fd(w))}function Yd(h,g){h=null,g.alternate!==null&&(h=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==h&&(g.refCount++,h!=null&&Fd(h))}function wr(h,g,w,R){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Bv(h,g,w,R),g=g.sibling}function Bv(h,g,w,R){var k=g.flags;switch(g.tag){case 0:case 11:case 15:wr(h,g,w,R),k&2048&&jd(9,g);break;case 3:wr(h,g,w,R),k&2048&&(h=null,g.alternate!==null&&(h=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==h&&(g.refCount++,h!=null&&Fd(h)));break;case 12:if(k&2048){wr(h,g,w,R),h=g.stateNode;try{var Q=g.memoizedProps,Me=Q.id,Fe=Q.onPostCommit;typeof Fe=="function"&&Fe(Me,g.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(tt){ti(g,g.return,tt)}}else wr(h,g,w,R);break;case 23:break;case 22:Q=g.stateNode,g.memoizedState!==null?Q._visibility&4?wr(h,g,w,R):Qr(h,g):Q._visibility&4?wr(h,g,w,R):(Q._visibility|=4,Br(h,g,w,R,(g.subtreeFlags&10256)!==0)),k&2048&&jp(g.alternate,g);break;case 24:wr(h,g,w,R),k&2048&&Yd(g.alternate,g);break;default:wr(h,g,w,R)}}function Br(h,g,w,R,k){for(k=k&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var Q=h,Me=g,Fe=w,tt=R,mt=Me.flags;switch(Me.tag){case 0:case 11:case 15:Br(Q,Me,Fe,tt,k),jd(8,Me);break;case 23:break;case 22:var Ct=Me.stateNode;Me.memoizedState!==null?Ct._visibility&4?Br(Q,Me,Fe,tt,k):Qr(Q,Me):(Ct._visibility|=4,Br(Q,Me,Fe,tt,k)),k&&mt&2048&&jp(Me.alternate,Me);break;case 24:Br(Q,Me,Fe,tt,k),k&&mt&2048&&Yd(Me.alternate,Me);break;default:Br(Q,Me,Fe,tt,k)}g=g.sibling}}function Qr(h,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var w=h,R=g,k=R.flags;switch(R.tag){case 22:Qr(w,R),k&2048&&jp(R.alternate,R);break;case 24:Qr(w,R),k&2048&&Yd(R.alternate,R);break;default:Qr(w,R)}g=g.sibling}}function Ts(h){if(h.subtreeFlags&ss)for(h=h.child;h!==null;)Vp(h),h=h.sibling}function Vp(h){switch(h.tag){case 26:Ts(h),h.flags&ss&&(h.memoizedState!==null?zb(zi,h.memoizedState,h.memoizedProps):pa(h.type,h.memoizedProps));break;case 5:Ts(h),h.flags&ss&&pa(h.type,h.memoizedProps);break;case 3:case 4:if(Ja){var g=zi;zi=um(h.stateNode.containerInfo),Ts(h),zi=g}else Ts(h);break;case 22:h.memoizedState===null&&(g=h.alternate,g!==null&&g.memoizedState!==null?(g=ss,ss=16777216,Ts(h),ss=g):Ts(h));break;default:Ts(h)}}function Wd(h){var g=h.alternate;if(g!==null&&(h=g.child,h!==null)){g.child=null;do g=h.sibling,h.sibling=null,h=g;while(h!==null)}}function Wl(h){var g=h.deletions;if((h.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var R=g[w];hn=R,kv(R,h)}Wd(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Gp(h),h=h.sibling}function Gp(h){switch(h.tag){case 0:case 11:case 15:Wl(h),h.flags&2048&&Gl(9,h,h.return);break;case 3:Wl(h);break;case 12:Wl(h);break;case 22:var g=h.stateNode;h.memoizedState!==null&&g._visibility&4&&(h.return===null||h.return.tag!==13)?(g._visibility&=-5,sl(h)):Wl(h);break;default:Wl(h)}}function sl(h){var g=h.deletions;if((h.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var R=g[w];hn=R,kv(R,h)}Wd(h)}for(h=h.child;h!==null;){switch(g=h,g.tag){case 0:case 11:case 15:Gl(8,g,g.return),sl(g);break;case 22:w=g.stateNode,w._visibility&4&&(w._visibility&=-5,sl(g));break;default:sl(g)}h=h.sibling}}function kv(h,g){for(;hn!==null;){var w=hn;switch(w.tag){case 0:case 11:case 15:Gl(8,w,g);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var R=w.memoizedState.cachePool.pool;R!=null&&R.refCount++}break;case 24:Fd(w.memoizedState.cache)}if(R=w.child,R!==null)R.return=w,hn=R;else e:for(w=h;hn!==null;){R=hn;var k=R.sibling,Q=R.return;if(Pv(R),R===w){hn=null;break e}if(k!==null){k.return=Q,hn=k;break e}hn=Q}}}function nf(h){var g=sb(h);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(r(364));return g}if(h=ny(h),h===null)throw Error(r(362));return h.stateNode.current}function Zl(h,g){var w=h.tag;switch(g.$$typeof){case Af:if(h.type===g.value)return!0;break;case Us:e:{for(g=g.value,h=[h,0],w=0;w<h.length;){var R=h[w++],k=R.tag,Q=h[w++],Me=g[Q];if(k!==5&&k!==26&&k!==27||!mf(R)){for(;Me!=null&&Zl(R,Me);)Q++,Me=g[Q];if(Q===g.length){g=!0;break e}else for(R=R.child;R!==null;)h.push(R,Q),R=R.sibling}}g=!1}return g;case Ai:if((w===5||w===26||w===27)&&ub(h.stateNode,g.value))return!0;break;case Lo:if((w===5||w===6||w===26||w===27)&&(h=cb(h),h!==null&&0<=h.indexOf(g.value)))return!0;break;case ao:if((w===5||w===26||w===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Fv(h){switch(h.$$typeof){case Af:return"<"+(s(h.value)||"Unknown")+">";case Us:return":has("+(Fv(h)||"")+")";case Ai:return'[role="'+h.value+'"]';case Lo:return'"'+h.value+'"';case ao:return'[data-testname="'+h.value+'"]';default:throw Error(r(365))}}function za(h,g){var w=[];h=[h,0];for(var R=0;R<h.length;){var k=h[R++],Q=k.tag,Me=h[R++],Fe=g[Me];if(Q!==5&&Q!==26&&Q!==27||!mf(k)){for(;Fe!=null&&Zl(k,Fe);)Me++,Fe=g[Me];if(Me===g.length)w.push(k);else for(k=k.child;k!==null;)h.push(k,Me),k=k.sibling}}return w}function Zd(h,g){if(!nc)throw Error(r(363));h=nf(h),h=za(h,g),g=[],h=Array.from(h);for(var w=0;w<h.length;){var R=h[w++],k=R.tag;if(k===5||k===26||k===27)mf(R)||g.push(R.stateNode);else for(R=R.child;R!==null;)h.push(R),R=R.sibling}return g}function qi(){if((Wn&2)!==0&&zn!==0)return zn&-zn;if(an.T!==null){var h=ns;return h!==0?h:ne()}return ob()}function Hv(){cs===0&&(cs=(zn&536870912)===0||Hn?U():536870912);var h=is.current;return h!==null&&(h.flags|=32),cs}function Tr(h,g,w){(h===ii&&ui===2||h.cancelPendingCommit!==null)&&(kr(h,0),Ba(h,zn,cs,!1)),Y(h,w),((Wn&2)===0||h!==ii)&&(h===ii&&((Wn&2)===0&&(bl|=w),mi===4&&Ba(h,zn,cs,!1)),ie(h))}function Xl(h,g,w){if((Wn&6)!==0)throw Error(r(327));var R=!w&&(g&60)===0&&(g&h.expiredLanes)===0||O(h,g),k=R?Vv(h,g):Wp(h,g,!0),Q=R;do{if(k===0){os&&!R&&Ba(h,g,0,!1);break}else if(k===6)Ba(h,g,0,!zs);else{if(w=h.current.alternate,Q&&!rf(w)){k=Wp(h,g,!1),Q=!1;continue}if(k===2){if(Q=g,h.errorRecoveryDisabledLanes&Q)var Me=0;else Me=h.pendingLanes&-536870913,Me=Me!==0?Me:Me&536870912?536870912:0;if(Me!==0){g=Me;e:{var Fe=h;k=vu;var tt=Fr&&Fe.current.memoizedState.isDehydrated;if(tt&&(kr(Fe,Me).flags|=256),Me=Wp(Fe,Me,!1),Me!==2){if(br&&!tt){Fe.errorRecoveryDisabledLanes|=Q,bl|=Q,k=4;break e}Q=Yi,Yi=k,Q!==null&&Xd(Q)}k=Me}if(Q=!1,k!==2)continue}}if(k===1){kr(h,0),Ba(h,g,0,!0);break}e:{switch(R=h,k){case 0:case 1:throw Error(r(345));case 4:if((g&4194176)===g){Ba(R,g,cs,!zs);break e}break;case 2:Yi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(R.finishedWork=w,R.finishedLanes=g,(g&62914560)===g&&(Q=va+300-Ds(),10<Q)){if(Ba(R,g,cs,!zs),D(R,0)!==0)break e;R.timeoutHandle=or(Yp.bind(null,R,w,Yi,vh,xm,g,cs,bl,Io,zs,2,-0,0),Q);break e}Yp(R,w,Yi,vh,xm,g,cs,bl,Io,zs,0,-0,0)}}break}while(!0);ie(h)}function Xd(h){Yi===null?Yi=h:Yi.push.apply(Yi,h)}function Yp(h,g,w,R,k,Q,Me,Fe,tt,mt,Ct,It,Pt){var pn=g.subtreeFlags;if((pn&8192||(pn&16785408)===16785408)&&(ey(),Vp(g),g=lr(),g!==null)){h.cancelPendingCommit=g(Kl.bind(null,h,w,R,k,Me,Fe,tt,1,It,Pt)),Ba(h,Q,Me,!mt);return}Kl(h,w,R,k,Me,Fe,tt,Ct,It,Pt)}function rf(h){for(var g=h;;){var w=g.tag;if((w===0||w===11||w===15)&&g.flags&16384&&(w=g.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var R=0;R<w.length;R++){var k=w[R],Q=k.getSnapshot;k=k.value;try{if(!Fa(Q(),k))return!1}catch{return!1}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ba(h,g,w,R){g&=~gh,g&=~bl,h.suspendedLanes|=g,h.pingedLanes&=~g,R&&(h.warmLanes|=g),R=h.expirationTimes;for(var k=g;0<k;){var Q=31-ma(k),Me=1<<Q;R[Q]=-1,k&=~Me}w!==0&&se(h,w,g)}function qd(){return(Wn&6)===0?(W(0),!1):!0}function af(){if(en!==null){if(ui===0)var h=en.return;else h=en,as=ro=null,Te(h),lc=null,cc=0,h=en;for(;h!==null;)$_(h.alternate,h),h=h.return;en=null}}function kr(h,g){h.finishedWork=null,h.finishedLanes=0;var w=h.timeoutHandle;w!==ec&&(h.timeoutHandle=ec,tm(w)),w=h.cancelPendingCommit,w!==null&&(h.cancelPendingCommit=null,w()),af(),ii=h,en=w=As(h.current,null),zn=g,ui=0,ea=null,zs=!1,os=O(h,g),br=!1,Io=cs=gh=bl=ls=mi=0,Yi=vu=null,xm=!1,(g&8)!==0&&(g|=g&32);var R=h.entangledLanes;if(R!==0)for(h=h.entanglements,R&=g;0<R;){var k=31-ma(R),Q=1<<k;g|=h[k],R&=~Q}return ta=g,xe(),w}function Ka(h,g){Sn=null,an.H=Vi,g===Ef?(g=G(),ui=3):g===ph?(g=G(),ui=4):ui=g===_m?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,ea=g,en===null&&(mi=1,qu(h,ae(g,h.current)))}function ql(){var h=is.current;return h===null?!0:(zn&4194176)===zn?hi===null:(zn&62914560)===zn||(zn&536870912)!==0?h===hi:!1}function xo(){var h=an.H;return an.H=Vi,h===null?Vi:h}function So(){var h=an.A;return an.A=Mf,h}function ol(){mi=4,zs||(zn&4194176)!==zn&&is.current!==null||(os=!0),(ls&134217727)===0&&(bl&134217727)===0||ii===null||Ba(ii,zn,cs,!1)}function Wp(h,g,w){var R=Wn;Wn|=2;var k=xo(),Q=So();(ii!==h||zn!==g)&&(vh=null,kr(h,g)),g=!1;var Me=mi;e:do try{if(ui!==0&&en!==null){var Fe=en,tt=ea;switch(ui){case 8:af(),Me=6;break e;case 3:case 2:case 6:is.current===null&&(g=!0);var mt=ui;if(ui=0,ea=null,Ms(h,Fe,tt,mt),w&&os){Me=0;break e}break;default:mt=ui,ui=0,ea=null,Ms(h,Fe,tt,mt)}}jv(),Me=mi;break}catch(Ct){Ka(h,Ct)}while(!0);return g&&h.shellSuspendCounter++,as=ro=null,Wn=R,an.H=k,an.A=Q,en===null&&(ii=null,zn=0,xe()),Me}function jv(){for(;en!==null;)Pi(en)}function Vv(h,g){var w=Wn;Wn|=2;var R=xo(),k=So();ii!==h||zn!==g?(vh=null,Cf=Ds()+500,kr(h,g)):os=O(h,g);e:do try{if(ui!==0&&en!==null){g=en;var Q=ea;t:switch(ui){case 1:ui=0,ea=null,Ms(h,g,Q,1);break;case 2:if(fe(Q)){ui=0,ea=null,$n(g);break}g=function(){ui===2&&ii===h&&(ui=7),ie(h)},Q.then(g,g);break e;case 3:ui=7;break e;case 4:ui=5;break e;case 7:fe(Q)?(ui=0,ea=null,$n(g)):(ui=0,ea=null,Ms(h,g,Q,7));break;case 5:var Me=null;switch(en.tag){case 26:Me=en.memoizedState;case 5:case 27:var Fe=en,tt=Fe.type,mt=Fe.pendingProps;if(Me?iu(Me):nm(tt,mt)){ui=0,ea=null;var Ct=Fe.sibling;if(Ct!==null)en=Ct;else{var It=Fe.return;It!==null?(en=It,$a(It)):en=null}break t}}ui=0,ea=null,Ms(h,g,Q,5);break;case 6:ui=0,ea=null,Ms(h,g,Q,6);break;case 8:af(),mi=6;break e;default:throw Error(r(462))}}da();break}catch(Pt){Ka(h,Pt)}while(!0);return as=ro=null,an.H=R,an.A=k,Wn=w,en!==null?0:(ii=null,zn=0,xe(),mi)}function da(){for(;en!==null&&!Hb();)Pi(en)}function Pi(h){var g=X_(h.alternate,h,ta);h.memoizedProps=h.pendingProps,g===null?$a(h):en=g}function $n(h){var g=h,w=g.alternate;switch(g.tag){case 15:case 0:g=j_(w,g,g.pendingProps,g.type,void 0,zn);break;case 11:g=j_(w,g,g.pendingProps,g.type.render,g.ref,zn);break;case 5:Te(g);default:$_(w,g),g=en=$d(g,ta),g=X_(w,g,ta)}h.memoizedProps=h.pendingProps,g===null?$a(h):en=g}function Ms(h,g,w,R){as=ro=null,Te(g),lc=null,cc=0;var k=g.return;try{if(Kw(h,k,g,w,zn)){mi=1,qu(h,ae(w,h.current)),en=null;return}}catch(Q){if(k!==null)throw en=k,Q;mi=1,qu(h,ae(w,h.current)),en=null;return}g.flags&32768?(Hn||R===1?h=!0:os||(zn&536870912)!==0?h=!1:(zs=h=!0,(R===2||R===3||R===6)&&(R=is.current,R!==null&&R.tag===13&&(R.flags|=16384))),Zp(g,h)):$a(g)}function $a(h){var g=h;do{if((g.flags&32768)!==0){Zp(g,zs);return}h=g.return;var w=K_(g.alternate,g,ta);if(w!==null){en=w;return}if(g=g.sibling,g!==null){en=g;return}en=g=h}while(g!==null);mi===0&&(mi=5)}function Zp(h,g){do{var w=Qw(h.alternate,h);if(w!==null){w.flags&=32767,en=w;return}if(w=h.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!g&&(h=h.sibling,h!==null)){en=h;return}en=h=w}while(h!==null);mi=6,en=null}function Kl(h,g,w,R,k,Q,Me,Fe,tt,mt){var Ct=an.T,It=hl();try{Jr(2),an.T=null,tb(h,g,w,R,It,k,Q,Me,Fe,tt,mt)}finally{an.T=Ct,Jr(It)}}function tb(h,g,w,R,k,Q,Me,Fe){do Ks();while(Uo!==null);if((Wn&6)!==0)throw Error(r(327));var tt=h.finishedWork;if(R=h.finishedLanes,tt===null)return null;if(h.finishedWork=null,h.finishedLanes=0,tt===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var mt=tt.lanes|tt.childLanes;if(mt|=no,ee(h,R,mt,Q,Me,Fe),h===ii&&(en=ii=null,zn=0),(tt.subtreeFlags&10256)===0&&(tt.flags&10256)===0||so||(so=!0,pc=mt,Sm=w,cl(mm,function(){return Ks(),null})),w=(tt.flags&15990)!==0,(tt.subtreeFlags&15990)!==0||w?(w=an.T,an.T=null,Q=hl(),Jr(2),Me=Wn,Wn|=4,Gd(h,tt),zv(tt,h),ab(h.containerInfo),h.current=tt,Fp(h,tt.alternate,tt),hm(),Wn=Me,Jr(Q),an.T=w):h.current=tt,so?(so=!1,Uo=h,yu=R):Gv(h,mt),mt=h.pendingLanes,mt===0&&(hc=null),P(tt.stateNode),ie(h),g!==null)for(k=h.onRecoverableError,tt=0;tt<g.length;tt++)mt=g[tt],k(mt.value,{componentStack:mt.stack});return(yu&3)!==0&&Ks(),mt=h.pendingLanes,(R&4194218)!==0&&(mt&42)!==0?h===Em?Rf++:(Rf=0,Em=h):Rf=0,W(0),null}function Gv(h,g){(h.pooledCacheLanes&=g)===0&&(g=h.pooledCache,g!=null&&(h.pooledCache=null,Fd(g)))}function Ks(){if(Uo!==null){var h=Uo,g=pc;pc=0;var w=de(yu),R=32>w?32:w;w=an.T;var k=hl();try{if(Jr(R),an.T=null,Uo===null)var Q=!1;else{R=Sm,Sm=null;var Me=Uo,Fe=yu;if(Uo=null,yu=0,(Wn&6)!==0)throw Error(r(331));var tt=Wn;if(Wn|=4,Gp(Me.current),Bv(Me,Me.current,Fe,R),Wn=tt,W(0,!1),ka&&typeof ka.onPostCommitFiberRoot=="function")try{ka.onPostCommitFiberRoot(Qi,Me)}catch{}Q=!0}return Q}finally{Jr(k),an.T=w,Gv(h,g)}}return!1}function sf(h,g,w){g=ae(w,g),g=$u(h.stateNode,g,2),h=pt(h,g,2),h!==null&&(Y(h,2),ie(h))}function ti(h,g,w){if(h.tag===3)sf(h,h,w);else for(;g!==null;){if(g.tag===3){sf(g,h,w);break}else if(g.tag===1){var R=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(hc===null||!hc.has(R))){h=ae(w,h),w=Ev(2),R=pt(g,w,2),R!==null&&(z_(w,R,g,h),Y(R,2),ie(R));break}}g=g.return}}function eu(h,g,w){var R=h.pingCache;if(R===null){R=h.pingCache=new Ps;var k=new Set;R.set(g,k)}else k=R.get(g),k===void 0&&(k=new Set,R.set(g,k));k.has(w)||(br=!0,k.add(w),h=Yv.bind(null,h,g,w),g.then(h,h))}function Yv(h,g,w){var R=h.pingCache;R!==null&&R.delete(g),h.pingedLanes|=h.suspendedLanes&w,h.warmLanes&=~w,ii===h&&(zn&w)===w&&(mi===4||mi===3&&(zn&62914560)===zn&&300>Ds()-va?(Wn&2)===0&&kr(h,0):gh|=w,Io===zn&&(Io=0)),ie(h)}function $l(h,g){g===0&&(g=N()),h=Ce(h,g),h!==null&&(Y(h,g),ie(h))}function ll(h){var g=h.memoizedState,w=0;g!==null&&(w=g.retryLane),$l(h,w)}function Ql(h,g){var w=0;switch(h.tag){case 13:var R=h.stateNode,k=h.memoizedState;k!==null&&(w=k.retryLane);break;case 19:R=h.stateNode;break;case 22:R=h.stateNode._retryCache;break;default:throw Error(r(314))}R!==null&&R.delete(g),$l(h,w)}function cl(h,g){return fh(h,g)}function Wv(h,g,w,R){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kd(h){return h=h.prototype,!(!h||!h.isReactComponent)}function As(h,g){var w=h.alternate;return w===null?(w=t(h.tag,g,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=g,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&31457280,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,g=h.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w.refCleanup=h.refCleanup,w}function $d(h,g){h.flags&=31457282;var w=h.alternate;return w===null?(h.childLanes=0,h.lanes=g,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=w.childLanes,h.lanes=w.lanes,h.child=w.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=w.memoizedProps,h.memoizedState=w.memoizedState,h.updateQueue=w.updateQueue,h.type=w.type,g=w.dependencies,h.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),h}function Eo(h,g,w,R,k,Q){var Me=0;if(R=h,typeof h=="function")Kd(h)&&(Me=1);else if(typeof h=="string")Me=Ja&&di?lh(h,w,yr.current)?26:To(h)?27:5:Ja?lh(h,w,yr.current)?26:5:di&&To(h)?27:5;else e:switch(h){case Jl:return ji(w.children,k,Q,g);case th:Me=8,k|=24;break;case $p:return h=t(12,w,g,k|2),h.elementType=$p,h.lanes=Q,h;case Qp:return h=t(13,w,g,k),h.elementType=Qp,h.lanes=Q,h;case uf:return h=t(19,w,g,k),h.elementType=uf,h.lanes=Q,h;case qv:return Qd(w,k,Q,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case nh:case $s:Me=10;break e;case Xv:Me=9;break e;case ih:Me=11;break e;case Jp:Me=14;break e;case Rs:Me=16,R=null;break e}Me=29,w=Error(r(130,h===null?"null":typeof h,"")),R=null}return g=t(Me,w,g,k),g.elementType=h,g.type=R,g.lanes=Q,g}function ji(h,g,w,R){return h=t(7,h,R,g),h.lanes=w,h}function Qd(h,g,w,R){h=t(22,h,R,g),h.elementType=qv,h.lanes=w;var k={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var Q=k._current;if(Q===null)throw Error(r(456));if((k._pendingVisibility&2)===0){var Me=Ce(Q,2);Me!==null&&(k._pendingVisibility|=2,Tr(Me,Q,2))}},attach:function(){var Q=k._current;if(Q===null)throw Error(r(456));if((k._pendingVisibility&2)!==0){var Me=Ce(Q,2);Me!==null&&(k._pendingVisibility&=-3,Tr(Me,Q,2))}}};return h.stateNode=k,h}function Xp(h,g,w){return h=t(6,h,null,g),h.lanes=w,h}function Zv(h,g,w){return g=t(4,h.children!==null?h.children:[],h.key,g),g.lanes=w,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function Jw(h,g,w,R,k,Q,Me,Fe){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ec,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=R,this.onUncaughtError=k,this.onCaughtError=Q,this.onRecoverableError=Me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Fe,this.incompleteTransitions=new Map}function nb(h,g,w,R,k,Q,Me,Fe,tt,mt,Ct,It){return h=new Jw(h,g,w,Me,Fe,tt,mt,It),g=1,Q===!0&&(g|=24),Q=t(3,null,null,g),h.current=Q,Q.stateNode=h,g=Vl(),g.refCount++,h.pooledCache=g,g.refCount++,Q.memoizedState={element:R,isDehydrated:w,cache:g},Oe(Q),h}function sr(h){return h?(h=ac,h):ac}function qp(h){var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=v(g),h=h!==null?_(h):null,h===null?null:hf(h.stateNode)}function of(h,g,w,R,k,Q){k=sr(k),R.context===null?R.context=k:R.pendingContext=k,R=Ue(g),R.payload={element:w},Q=Q===void 0?null:Q,Q!==null&&(R.callback=Q),w=pt(h,R,g),w!==null&&(Tr(w,h,g),St(w,h,g))}function lf(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<g?w:g}}function Jd(h,g){lf(h,g),(h=h.alternate)&&lf(h,g)}var vn={},cf=nv(),Qa=qte(),Kp=Object.assign,eT=Symbol.for("react.element"),eh=Symbol.for("react.transitional.element"),Cs=Symbol.for("react.portal"),Jl=Symbol.for("react.fragment"),th=Symbol.for("react.strict_mode"),$p=Symbol.for("react.profiler"),nh=Symbol.for("react.provider"),Xv=Symbol.for("react.consumer"),$s=Symbol.for("react.context"),ih=Symbol.for("react.forward_ref"),Qp=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),Rs=Symbol.for("react.lazy"),qv=Symbol.for("react.offscreen"),ib=Symbol.for("react.memo_cache_sentinel"),ul=Symbol.iterator,Kv=Symbol.for("react.client.reference"),an=cf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wo,fl,tu=!1,ff=Array.isArray,$v=e.rendererVersion,rh=e.rendererPackageName,df=e.extraDevToolsConfig,hf=e.getPublicInstance,rb=e.getRootHostContext,pf=e.getChildHostContext,em=e.prepareForCommit,ab=e.resetAfterCommit,Qv=e.createInstance,ah=e.appendInitialChild,dl=e.finalizeInitialChildren,yn=e.shouldSetTextContent,oi=e.createTextInstance,or=e.scheduleTimeout,tm=e.cancelTimeout,ec=e.noTimeout,ha=e.isPrimaryRenderer;e.warnsIfNotActing;var vr=e.supportsMutation,Os=e.supportsPersistence,Fr=e.supportsHydration,sb=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Ki=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Jr=e.setCurrentUpdatePriority,hl=e.getCurrentUpdatePriority,ob=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var lb=e.shouldAttemptEagerTransition,tT=e.detachDeletedInstance;e.requestPostPaintCallback;var Jv=e.maySuspendCommit,nm=e.preloadInstance,ey=e.startSuspendingCommit,pa=e.suspendInstance,lr=e.waitForCommitToBeReady,tc=e.NotPendingTransition,Qs=e.HostTransitionContext,im=e.resetFormInstance;e.bindToConsole;var ty=e.supportsMicrotasks,pl=e.scheduleMicrotask,nc=e.supportsTestSelectors,ny=e.findFiberRoot,iy=e.getBoundingRect,cb=e.getTextContent,mf=e.isHiddenSubtree,ub=e.matchAccessibilityRole,fb=e.setFocusIfFocusable,db=e.setupIntersectionObserver,hb=e.appendChild,ry=e.appendChildToContainer,pb=e.commitTextUpdate,nT=e.commitMount,mb=e.commitUpdate,gb=e.insertBefore,vb=e.insertInContainerBefore,ay=e.removeChild,yb=e.removeChildFromContainer,sy=e.resetTextContent,_b=e.hideInstance,bb=e.hideTextInstance,xb=e.unhideInstance,iT=e.unhideTextInstance,Sb=e.clearContainer,gf=e.cloneInstance,sh=e.createContainerChildSet,oy=e.appendChildToContainerChildSet,rm=e.finalizeContainerChildren,vf=e.replaceContainerChildren,ly=e.cloneHiddenInstance,cy=e.cloneHiddenTextInstance,am=e.isSuspenseInstancePending,sm=e.isSuspenseInstanceFallback,Eb=e.getSuspenseInstanceFallbackErrorDetails,wb=e.registerSuspenseInstanceRetry,uy=e.canHydrateFormStateMarker,Tb=e.isFormStateMarkerMatching,fy=e.getNextHydratableSibling,om=e.getFirstHydratableChild,Mb=e.getFirstHydratableChildWithinContainer,Ab=e.getFirstHydratableChildWithinSuspenseInstance,rT=e.canHydrateInstance,dy=e.canHydrateTextInstance,Cb=e.canHydrateSuspenseInstance,Rb=e.hydrateInstance,hy=e.hydrateTextInstance,Ob=e.hydrateSuspenseInstance,Db=e.getNextHydratableInstanceAfterSuspenseInstance,aT=e.commitHydratedContainer,sT=e.commitHydratedSuspenseInstance,Nb=e.clearSuspenseBoundary,oh=e.clearSuspenseBoundaryFromContainer,lm=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var cm=e.validateHydratableInstance,Lb=e.validateHydratableTextInstance,Ja=e.supportsResources,lh=e.isHostHoistableType,um=e.getHoistableRoot,py=e.getResource,Ib=e.acquireResource,nu=e.releaseResource,ch=e.hydrateHoistable,uh=e.mountHoistable,yf=e.unmountHoistable,fm=e.createHoistableInstance,Ub=e.prepareToCommitHoistables,Pb=e.mayResourceSuspendCommit,iu=e.preloadResource,zb=e.suspendResource,di=e.supportsSingletons,Js=e.resolveSingletonInstance,ic=e.clearSingleton,Bb=e.acquireSingletonInstance,rc=e.releaseSingletonInstance,To=e.isHostSingletonType,$i=[],ml=-1,ac={},ma=Math.clz32?Math.clz32:M,kb=Math.log,Fb=Math.LN2,Mo=128,ru=4194304,fh=Qa.unstable_scheduleCallback,dm=Qa.unstable_cancelCallback,Hb=Qa.unstable_shouldYield,hm=Qa.unstable_requestPaint,Ds=Qa.unstable_now,pm=Qa.unstable_ImmediatePriority,jb=Qa.unstable_UserBlockingPriority,mm=Qa.unstable_NormalPriority,oT=Qa.unstable_IdlePriority,Vb=Qa.log,Mr=Qa.unstable_setDisableYieldValue,Qi=null,ka=null,Fa=typeof Object.is=="function"?Object.is:V,my=new WeakMap,au=[],su=0,ou=null,_f=0,es=[],ts=0,sc=null,eo=1,to="",yr=S(null),bf=S(null),Ao=S(null),lu=S(null),Hr=null,jr=null,Hn=!1,Ns=null,Ar=!1,dh=Error(r(519)),Ls=[],cu=0,no=0,hh=null,gl=null,uu=!1,yi=!1,gy=!1,xf=0,Sf=null,fu=0,ns=0,du=null,vl=!1,hu=!1,Co=Object.prototype.hasOwnProperty,Ef=Error(r(460)),ph=Error(r(474)),mh={then:function(){}},oc=null,lc=null,cc=0,uc=Qe(!0),Ro=Qe(!1),_i=S(null),wf=S(0),is=S(null),hi=null,_r=S(0),yl=0,Sn=null,Jt=null,Yn=null,Is=!1,pu=!1,fc=!1,gm=0,mu=0,Cr=null,io=0,vm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Vi={readContext:Pr,use:et,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn};Vi.useCacheRefresh=dn,Vi.useMemoCache=dn,Vi.useHostTransitionStatus=dn,Vi.useFormState=dn,Vi.useActionState=dn,Vi.useOptimistic=dn;var dc={readContext:Pr,use:et,useCallback:function(h,g){return Ke().memoizedState=[h,g===void 0?null:g],h},useContext:Pr,useEffect:Cp,useImperativeHandle:function(h,g,w){w=w!=null?w.concat([h]):null,Cd(4194308,4,Rp.bind(null,g,h),w)},useLayoutEffect:function(h,g){return Cd(4194308,4,h,g)},useInsertionEffect:function(h,g){Cd(4,2,h,g)},useMemo:function(h,g){var w=Ke();g=g===void 0?null:g;var R=h();if(fc){B(!0);try{h()}finally{B(!1)}}return w.memoizedState=[R,g],R},useReducer:function(h,g,w){var R=Ke();if(w!==void 0){var k=w(g);if(fc){B(!0);try{w(g)}finally{B(!1)}}}else k=g;return R.memoizedState=R.baseState=k,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:k},R.queue=h,h=h.dispatch=Dp.bind(null,Sn,h),[R.memoizedState,h]},useRef:function(h){var g=Ke();return h={current:h},g.memoizedState=h},useState:function(h){h=gn(h);var g=h.queue,w=Sv.bind(null,Sn,g);return g.dispatch=w,[h.memoizedState,w]},useDebugValue:Bl,useDeferredValue:function(h,g){var w=Ke();return Dd(w,h,g)},useTransition:function(){var h=gn(!1);return h=Gu.bind(null,Sn,h.queue,!0,!1),Ke().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,g,w){var R=Sn,k=Ke();if(Hn){if(w===void 0)throw Error(r(407));w=w()}else{if(w=g(),ii===null)throw Error(r(349));(zn&60)!==0||Gt(R,g,w)}k.memoizedState=w;var Q={value:w,getSnapshot:g};return k.queue=Q,Cp(Gn.bind(null,R,Q,h),[h]),R.flags|=2048,gr(9,_n.bind(null,R,Q,w,g),{destroy:void 0},null),w},useId:function(){var h=Ke(),g=ii.identifierPrefix;if(Hn){var w=to,R=eo;w=(R&~(1<<32-ma(R)-1)).toString(32)+w,g=":"+g+"R"+w,w=gm++,0<w&&(g+="H"+w.toString(32)),g+=":"}else w=io++,g=":"+g+"r"+w.toString(32)+":";return h.memoizedState=g},useCacheRefresh:function(){return Ke().memoizedState=xv.bind(null,Sn)}};dc.useMemoCache=wt,dc.useHostTransitionStatus=Nd,dc.useFormState=$r,dc.useActionState=$r,dc.useOptimistic=function(h){var g=Ke();g.memoizedState=g.baseState=h;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=w,g=Wu.bind(null,Sn,!0,w),w.dispatch=g,[h,g]};var ga={readContext:Pr,use:et,useCallback:$c,useContext:Pr,useEffect:yv,useImperativeHandle:Op,useInsertionEffect:U_,useLayoutEffect:Od,useMemo:_v,useReducer:Bt,useRef:I_,useState:function(){return Bt(Rt)},useDebugValue:Bl,useDeferredValue:function(h,g){var w=at();return bv(w,Jt.memoizedState,h,g)},useTransition:function(){var h=Bt(Rt)[0],g=at().memoizedState;return[typeof h=="boolean"?h:dt(h),g]},useSyncExternalStore:Qt,useId:Yu};ga.useCacheRefresh=Qo,ga.useMemoCache=wt,ga.useHostTransitionStatus=Nd,ga.useFormState=Lr,ga.useActionState=Lr,ga.useOptimistic=function(h,g){var w=at();return Zt(w,Jt,h,g)};var rs={readContext:Pr,use:et,useCallback:$c,useContext:Pr,useEffect:yv,useImperativeHandle:Op,useInsertionEffect:U_,useLayoutEffect:Od,useMemo:_v,useReducer:Wt,useRef:I_,useState:function(){return Wt(Rt)},useDebugValue:Bl,useDeferredValue:function(h,g){var w=at();return Jt===null?Dd(w,h,g):bv(w,Jt.memoizedState,h,g)},useTransition:function(){var h=Wt(Rt)[0],g=at().memoizedState;return[typeof h=="boolean"?h:dt(h),g]},useSyncExternalStore:Qt,useId:Yu};rs.useCacheRefresh=Qo,rs.useMemoCache=wt,rs.useHostTransitionStatus=Nd,rs.useFormState=Kc,rs.useActionState=Kc,rs.useOptimistic=function(h,g){var w=at();return Jt!==null?Zt(w,Jt,h,g):(w.baseState=h,[h,w.queue.dispatch])};var Oo={isMounted:function(h){return(h=h._reactInternals)?d(h)===h:!1},enqueueSetState:function(h,g,w){h=h._reactInternals;var R=qi(),k=Ue(R);k.payload=g,w!=null&&(k.callback=w),g=pt(h,k,R),g!==null&&(Tr(g,h,R),St(g,h,R))},enqueueReplaceState:function(h,g,w){h=h._reactInternals;var R=qi(),k=Ue(R);k.tag=1,k.payload=g,w!=null&&(k.callback=w),g=pt(h,k,R),g!==null&&(Tr(g,h,R),St(g,h,R))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var w=qi(),R=Ue(w);R.tag=2,g!=null&&(R.callback=g),g=pt(h,R,w),g!==null&&(Tr(g,h,w),St(g,h,w))}},ym=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},_m=Error(r(461)),pi=!1,bm={dehydrated:null,treeContext:null,retryLane:0},_l=S(null),ro=null,as=null,Tf=typeof AbortController<"u"?AbortController:function(){var h=[],g=this.signal={aborted:!1,addEventListener:function(w,R){h.push(R)}};this.abort=function(){g.aborted=!0,h.forEach(function(w){return w()})}},Gb=Qa.unstable_scheduleCallback,Yb=Qa.unstable_NormalPriority,bi={$$typeof:$s,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},vy=an.S;an.S=function(h,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&H(h,g),vy!==null&&vy(h,g)};var Do=S(null),No=!1,Gi=!1,yy=!1,ni=typeof WeakSet=="function"?WeakSet:Set,hn=null,Rn=!1,Kt=null,bn=!1,zi=null,ss=8192,Mf={getCacheForType:function(h){var g=Pr(bi),w=g.data.get(h);return w===void 0&&(w=h(),g.data.set(h,w)),w}},Af=0,Us=1,Ai=2,ao=3,Lo=4;if(typeof Symbol=="function"&&Symbol.for){var gu=Symbol.for;Af=gu("selector.component"),Us=gu("selector.has_pseudo_class"),Ai=gu("selector.role"),ao=gu("selector.test_id"),Lo=gu("selector.text")}var Ps=typeof WeakMap=="function"?WeakMap:Map,Wn=0,ii=null,en=null,zn=0,ui=0,ea=null,zs=!1,os=!1,br=!1,ta=0,mi=0,ls=0,bl=0,gh=0,cs=0,Io=0,vu=null,Yi=null,xm=!1,va=0,Cf=1/0,vh=null,hc=null,so=!1,Uo=null,yu=0,pc=0,Sm=null,Rf=0,Em=null;return vn.attemptContinuousHydration=function(h){if(h.tag===13){var g=Ce(h,67108864);g!==null&&Tr(g,h,67108864),Jd(h,67108864)}},vn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var g=qi(),w=Ce(h,g);w!==null&&Tr(w,h,g),Jd(h,g)}},vn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var g=A(h.pendingLanes);if(g!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;g;){var w=1<<31-ma(g);h.entanglements[1]|=w,g&=~w}ie(h),(Wn&6)===0&&(Cf=Ds()+500,W(0))}}break;case 13:g=Ce(h,2),g!==null&&Tr(g,h,2),qd(),Jd(h,2)}},vn.batchedUpdates=function(h,g){return h(g)},vn.createComponentSelector=function(h){return{$$typeof:Af,value:h}},vn.createContainer=function(h,g,w,R,k,Q,Me,Fe,tt,mt){return nb(h,g,!1,null,w,R,Q,Me,Fe,tt,mt,null)},vn.createHasPseudoClassSelector=function(h){return{$$typeof:Us,value:h}},vn.createHydrationContainer=function(h,g,w,R,k,Q,Me,Fe,tt,mt,Ct,It,Pt){return h=nb(w,R,!0,h,k,Q,Fe,tt,mt,Ct,It,Pt),h.context=sr(null),w=h.current,R=qi(),k=Ue(R),k.callback=g??null,pt(w,k,R),h.current.lanes=R,Y(h,R),ie(h),h},vn.createPortal=function(h,g,w){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:R==null?null:""+R,children:h,containerInfo:g,implementation:w}},vn.createRoleSelector=function(h){return{$$typeof:Ai,value:h}},vn.createTestNameSelector=function(h){return{$$typeof:ao,value:h}},vn.createTextSelector=function(h){return{$$typeof:Lo,value:h}},vn.defaultOnCaughtError=function(h){console.error(h)},vn.defaultOnRecoverableError=function(h){ym(h)},vn.defaultOnUncaughtError=function(h){ym(h)},vn.deferredUpdates=function(h){var g=an.T,w=hl();try{return Jr(32),an.T=null,h()}finally{Jr(w),an.T=g}},vn.discreteUpdates=function(h,g,w,R,k){var Q=an.T,Me=hl();try{return Jr(2),an.T=null,h(g,w,R,k)}finally{Jr(Me),an.T=Q,Wn===0&&(Cf=Ds()+500)}},vn.findAllNodes=Zd,vn.findBoundingRects=function(h,g){if(!nc)throw Error(r(363));g=Zd(h,g),h=[];for(var w=0;w<g.length;w++)h.push(iy(g[w]));for(g=h.length-1;0<g;g--){w=h[g];for(var R=w.x,k=R+w.width,Q=w.y,Me=Q+w.height,Fe=g-1;0<=Fe;Fe--)if(g!==Fe){var tt=h[Fe],mt=tt.x,Ct=mt+tt.width,It=tt.y,Pt=It+tt.height;if(R>=mt&&Q>=It&&k<=Ct&&Me<=Pt){h.splice(g,1);break}else if(R!==mt||w.width!==tt.width||Pt<Q||It>Me){if(!(Q!==It||w.height!==tt.height||Ct<R||mt>k)){mt>R&&(tt.width+=mt-R,tt.x=R),Ct<k&&(tt.width=k-mt),h.splice(g,1);break}}else{It>Q&&(tt.height+=It-Q,tt.y=Q),Pt<Me&&(tt.height=Me-It),h.splice(g,1);break}}}return h},vn.findHostInstance=qp,vn.findHostInstanceWithNoPortals=function(h){return h=v(h),h=h!==null?b(h):null,h===null?null:hf(h.stateNode)},vn.findHostInstanceWithWarning=function(h){return qp(h)},vn.flushPassiveEffects=Ks,vn.flushSyncFromReconciler=function(h){var g=Wn;Wn|=1;var w=an.T,R=hl();try{if(Jr(2),an.T=null,h)return h()}finally{Jr(R),an.T=w,Wn=g,(Wn&6)===0&&W(0)}},vn.flushSyncWork=qd,vn.focusWithin=function(h,g){if(!nc)throw Error(r(363));for(h=nf(h),g=za(h,g),g=Array.from(g),h=0;h<g.length;){var w=g[h++],R=w.tag;if(!mf(w)){if((R===5||R===26||R===27)&&fb(w.stateNode))return!0;for(w=w.child;w!==null;)g.push(w),w=w.sibling}}return!1},vn.getFindAllNodesFailureDescription=function(h,g){if(!nc)throw Error(r(363));var w=0,R=[];h=[nf(h),0];for(var k=0;k<h.length;){var Q=h[k++],Me=Q.tag,Fe=h[k++],tt=g[Fe];if((Me!==5&&Me!==26&&Me!==27||!mf(Q))&&(Zl(Q,tt)&&(R.push(Fv(tt)),Fe++,Fe>w&&(w=Fe)),Fe<g.length))for(Q=Q.child;Q!==null;)h.push(Q,Fe),Q=Q.sibling}if(w<g.length){for(h=[];w<g.length;w++)h.push(Fv(g[w]));return`findAllNodes was able to match part of the selector:
  `+(R.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},vn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return hf(h.child.stateNode);default:return h.child.stateNode}},vn.injectIntoDevTools=function(){var h={bundleType:0,version:$v,rendererPackageName:rh,currentDispatcherRef:an,findFiberByHostInstance:sb,reconcilerVersion:"19.0.0"};if(df!==null&&(h.rendererConfig=df),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)h=!0;else{try{Qi=g.inject(h),ka=g}catch{}h=!!g.checkDCE}}return h},vn.isAlreadyRendering=function(){return!1},vn.observeVisibleRects=function(h,g,w,R){if(!nc)throw Error(r(363));h=Zd(h,g);var k=db(h,w,R).disconnect;return{disconnect:function(){k()}}},vn.shouldError=function(){return null},vn.shouldSuspend=function(){return!1},vn.startHostTransition=function(h,g,w,R){if(h.tag!==5)throw Error(r(476));var k=bo(h).queue;Gu(h,k,g,tc,w===null?i:function(){var Q=bo(h).next.queue;return kl(h,Q,{},qi()),w(R)})},vn.updateContainer=function(h,g,w,R){var k=g.current,Q=qi();return of(k,Q,h,g,w,R),Q},vn.updateContainerSync=function(h,g,w,R){return g.tag===0&&Ks(),of(g.current,2,h,g,w,R),2},vn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(nA)),nA.exports}var FI;function $te(){return FI||(FI=1,tA.exports=Kte()),tA.exports}var Qte=$te();const Jte=o_(Qte);var aA={exports:{}},sA={};var HI;function ene(){return HI||(HI=1,(function(n){function e(P,B){var V=P.length;P.push(B);e:for(;0<V;){var ae=V-1>>>1,X=P[ae];if(0<r(X,B))P[ae]=B,P[V]=X,V=ae;else break e}}function t(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var B=P[0],V=P.pop();if(V!==B){P[0]=V;e:for(var ae=0,X=P.length,oe=X>>>1;ae<oe;){var me=2*(ae+1)-1,J=P[me],le=me+1,Se=P[le];if(0>r(J,V))le<X&&0>r(Se,J)?(P[ae]=Se,P[le]=V,ae=le):(P[ae]=J,P[me]=V,ae=me);else if(le<X&&0>r(Se,V))P[ae]=Se,P[le]=V,ae=le;else break e}}return B}function r(P,B){var V=P.sortIndex-B.sortIndex;return V!==0?V:P.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var c=[],f=[],p=1,d=null,m=3,v=!1,_=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(P){for(var B=t(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=P)i(f),B.sortIndex=B.expirationTime,e(c,B);else break;B=t(f)}}function A(P){if(b=!1,M(P),!_)if(t(c)!==null)_=!0,he();else{var B=t(f);B!==null&&de(A,B.startTime-P)}}var D=!1,O=-1,I=5,U=-1;function N(){return!(n.unstable_now()-U<I)}function L(){if(D){var P=n.unstable_now();U=P;var B=!0;try{e:{_=!1,b&&(b=!1,x(O),O=-1),v=!0;var V=m;try{t:{for(M(P),d=t(c);d!==null&&!(d.expirationTime>P&&N());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,m=d.priorityLevel;var X=ae(d.expirationTime<=P);if(P=n.unstable_now(),typeof X=="function"){d.callback=X,M(P),B=!0;break t}d===t(c)&&i(c),M(P)}else i(c);d=t(c)}if(d!==null)B=!0;else{var oe=t(f);oe!==null&&de(A,oe.startTime-P),B=!1}}break e}finally{d=null,m=V,v=!1}B=void 0}}finally{B?Y():D=!1}}}var Y;if(typeof T=="function")Y=function(){T(L)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,se=ee.port2;ee.port1.onmessage=L,Y=function(){se.postMessage(null)}}else Y=function(){S(L,0)};function he(){D||(D=!0,Y())}function de(P,B){O=S(function(){P(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,he())},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(P){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var V=m;m=B;try{return P()}finally{m=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=m;m=P;try{return B()}finally{m=V}},n.unstable_scheduleCallback=function(P,B,V){var ae=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ae+V:ae):V=ae,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=V+X,P={id:p++,callback:B,priorityLevel:P,startTime:V,expirationTime:X,sortIndex:-1},V>ae?(P.sortIndex=V,e(f,P),t(c)===null&&P===t(f)&&(b?(x(O),O=-1):b=!0,de(A,V-ae))):(P.sortIndex=X,e(c,P),_||v||(_=!0,he())),P},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(P){var B=m;return function(){var V=m;m=B;try{return P.apply(this,arguments)}finally{m=V}}}})(sA)),sA}var jI;function tne(){return jI||(jI=1,aA.exports=ene()),aA.exports}var VI=tne();function Y2(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=Y2(i,e,t);if(r)return r;i=e?null:i.sibling}}function vk(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const W2=vk(F.createContext(null));let yk=class extends F.Component{render(){return F.createElement(W2.Provider,{value:this._reactInternals},this.props.children)}};function _k(){const n=F.useContext(W2);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=Y2(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const nne=Symbol.for("react.context"),ine=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===nne;function rne(){const n=_k(),[e]=F.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;ine(i)&&i!==W2&&!e.has(i)&&e.set(i,F.use(vk(i))),t=t.return}return e}function ane(){const n=rne();return F.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>F.createElement(e,null,F.createElement(t.Provider,{...i,value:n.get(t)})),e=>F.createElement(yk,{...e})),[n])}function bk(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const xk=n=>n&&n.isOrthographicCamera,sne=n=>n&&n.hasOwnProperty("current"),one=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),A_=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?F.useLayoutEffect:F.useEffect;function Z2(n){const e=F.useRef(n);return A_(()=>void(e.current=n),[n]),e}function lne(){const n=_k(),e=ane();return F.useMemo(()=>({children:t})=>{const r=!!Y2(n,!0,a=>a.type===F.StrictMode)?F.StrictMode:F.Fragment;return q.jsx(r,{children:q.jsx(e,{children:t})})},[n,e])}function cne({set:n}){return A_(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const une=(n=>(n=class extends F.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function Sk(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function tg(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const nr={obj:n=>n===Object(n)&&!nr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(nr.str(n)||nr.num(n)||nr.boo(n))return n===e;const a=nr.obj(n);if(a&&i==="reference")return n===e;const s=nr.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(o in r?e:n)if(!nr.equ(n[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:n)if(n[o]!==e[o])return!1;if(nr.und(o)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function fne(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const Ek=["children","key","ref"];function dne(n){const e={};for(const t in n)Ek.includes(t)||(e[t]=n[t]);return e}function WE(n,e,t,i){const r=n;let a=r?.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:dne(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function X0(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const r of e.split("-")){var i;e=r,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const GI=/-\d+$/;function ZE(n,e){if(nr.str(e.props.attach)){if(GI.test(e.props.attach)){const r=e.props.attach.replace(GI,""),{root:a,key:s}=X0(n.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:i}=X0(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else nr.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function XE(n,e){if(nr.str(e.props.attach)){const{root:t,key:i}=X0(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const kC=[...Ek,"args","dispose","attach","object","onUpdate","dispose"],YI=new Map;function hne(n){let e=YI.get(n.constructor);try{e||(e=new n.constructor,YI.set(n.constructor,e))}catch{}return e}function pne(n,e){const t={};for(const i in e)if(!kC.includes(i)&&!nr.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(kC.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=X0(n.object,i);if(r.constructor&&r.constructor.length===0){const s=hne(r);nr.und(s)||(t[a]=s[a])}else t[a]=0}return t}const mne=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],gne=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function td(n,e){var t;const i=n.__r3f,r=i&&bk(i).getState(),a=i?.eventCount;for(const o in e){let c=e[o];if(kC.includes(o))continue;if(i&&gne.test(o)){typeof c=="function"?i.handlers[o]=c:delete i.handlers[o],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:f,key:p,target:d}=X0(n,o);if(d instanceof kg&&c instanceof kg)d.mask=c.mask;else if(d instanceof zt&&one(c))d.set(c);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof d.copy=="function"&&c!=null&&c.constructor&&d.constructor===c.constructor)d.copy(c);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&Array.isArray(c))typeof d.fromArray=="function"?d.fromArray(c):d.set(...c);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof c=="number")typeof d.setScalar=="function"?d.setScalar(c):d.set(c);else{var s;f[p]=c,r&&!r.linear&&mne.includes(p)&&(s=f[p])!=null&&s.isTexture&&f[p].format===Wa&&f[p].type===Wo&&(f[p].colorSpace=Aa)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const o=i.object,c=r.internal.interaction.indexOf(o);c>-1&&r.internal.interaction.splice(c,1),i.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&hv(i),n}function hv(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function wk(n,e){n.manual||(xk(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Gs=n=>n?.isObject3D;function hS(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Tk(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function vne(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{Tk(t.capturedMap,e,i,r)})}function yne(n){function e(c){const{internal:f}=n.getState(),p=c.offsetX-f.initialClick[0],d=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(p*p+d*d))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(p=>{var d;return(d=f.__r3f)==null?void 0:d.handlers["onPointer"+p]}))}function i(c,f){const p=n.getState(),d=new Set,m=[],v=f?f(p.internal.interaction):p.internal.interaction;for(let x=0;x<v.length;x++){const T=tg(v[x]);T&&(T.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function _(x){const T=tg(x);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var M;T.events.compute==null||T.events.compute(c,T,(M=T.previousRoot)==null?void 0:M.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(x,!0):[]}let b=v.flatMap(_).sort((x,T)=>{const M=tg(x.object),A=tg(T.object);return!M||!A?x.distance-T.distance:A.events.priority-M.events.priority||x.distance-T.distance}).filter(x=>{const T=hS(x);return d.has(T)?!1:(d.add(T),!0)});p.events.filter&&(b=p.events.filter(b,p));for(const x of b){let T=x.object;for(;T;){var S;(S=T.__r3f)!=null&&S.eventCount&&m.push({...x,eventObject:T}),T=T.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let x of p.internal.capturedMap.get(c.pointerId).values())d.has(hS(x.intersection))||m.push(x.intersection);return m}function r(c,f,p,d){if(c.length){const m={stopped:!1};for(const v of c){let _=tg(v.object);if(_||v.object.traverseAncestors(b=>{const S=tg(b);if(S)return _=S,!1}),_){const{raycaster:b,pointer:S,camera:x,internal:T}=_,M=new ve(S.x,S.y,0).unproject(x),A=N=>{var L,Y;return(L=(Y=T.capturedMap.get(N))==null?void 0:Y.has(v.eventObject))!=null?L:!1},D=N=>{const L={intersection:v,target:f.target};T.capturedMap.has(N)?T.capturedMap.get(N).set(v.eventObject,L):T.capturedMap.set(N,new Map([[v.eventObject,L]])),f.target.setPointerCapture(N)},O=N=>{const L=T.capturedMap.get(N);L&&Tk(T.capturedMap,v.eventObject,L,N)};let I={};for(let N in f){let L=f[N];typeof L!="function"&&(I[N]=L)}let U={...v,...I,pointer:S,intersections:c,stopped:m.stopped,delta:p,unprojectedPoint:M,ray:b.ray,camera:x,stopPropagation(){const N="pointerId"in f&&T.capturedMap.get(f.pointerId);if((!N||N.has(v.eventObject))&&(U.stopped=m.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(L=>L.eventObject===v.eventObject))){const L=c.slice(0,c.indexOf(v));a([...L,v])}},target:{hasPointerCapture:A,setPointerCapture:D,releasePointerCapture:O},currentTarget:{hasPointerCapture:A,setPointerCapture:D,releasePointerCapture:O},nativeEvent:f};if(d(U),m.stopped===!0)break}}}return c}function a(c){const{internal:f}=n.getState();for(const p of f.hovered.values())if(!c.length||!c.find(d=>d.object===p.object&&d.index===p.index&&d.instanceId===p.instanceId)){const m=p.eventObject.__r3f;if(f.hovered.delete(hS(p)),m!=null&&m.eventCount){const v=m.handlers,_={...p,intersections:c};v.onPointerOut==null||v.onPointerOut(_),v.onPointerLeave==null||v.onPointerLeave(_)}}}function s(c,f){for(let p=0;p<f.length;p++){const d=f[p].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:p}=n.getState();"pointerId"in f&&p.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(f.pointerId)&&(p.capturedMap.delete(f.pointerId),a([]))})}}return function(p){const{onPointerMissed:d,internal:m}=n.getState();m.lastEvent.current=p;const v=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=i(p,v?t:void 0),x=_?e(p):0;c==="onPointerDown"&&(m.initialClick=[p.offsetX,p.offsetY],m.initialHits=S.map(M=>M.eventObject)),_&&!S.length&&x<=2&&(s(p,m.interaction),d&&d(p)),v&&a(S);function T(M){const A=M.eventObject,D=A.__r3f;if(!(D!=null&&D.eventCount))return;const O=D.handlers;if(v){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const I=hS(M),U=m.hovered.get(I);U?U.stopped&&M.stopPropagation():(m.hovered.set(I,M),O.onPointerOver==null||O.onPointerOver(M),O.onPointerEnter==null||O.onPointerEnter(M))}O.onPointerMove==null||O.onPointerMove(M)}else{const I=O[c];I?(!_||m.initialHits.includes(A))&&(s(p,m.interaction.filter(U=>!m.initialHits.includes(U))),I(M)):_&&m.initialHits.includes(A)&&s(p,m.interaction.filter(U=>!m.initialHits.includes(U)))}}r(S,p,x,T)}}return{handlePointer:o}}const WI=n=>!!(n!=null&&n.render),X2=F.createContext(null),_ne=(n,e)=>{const t=gk((o,c)=>{const f=new ve,p=new ve,d=new ve;function m(x=c().camera,T=p,M=c().size){const{width:A,height:D,top:O,left:I}=M,U=A/D;T.isVector3?d.copy(T):d.set(...T);const N=x.getWorldPosition(f).distanceTo(d);if(xk(x))return{width:A/x.zoom,height:D/x.zoom,top:O,left:I,factor:1,distance:N,aspect:U};{const L=x.fov*Math.PI/180,Y=2*Math.tan(L/2)*N,ee=Y*(A/D);return{width:ee,height:Y,top:O,left:I,factor:A/ee,distance:N,aspect:U}}}let v;const _=x=>o(T=>({performance:{...T.performance,current:x}})),b=new _t;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(x=1)=>n(c(),x),advance:(x,T)=>e(x,T,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new N2,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();v&&clearTimeout(v),x.performance.current!==x.performance.min&&_(x.performance.min),v=setTimeout(()=>_(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:x=>o(T=>({...T,events:{...T.events,...x}})),setSize:(x,T,M=0,A=0)=>{const D=c().camera,O={width:x,height:T,top:M,left:A};o(I=>({size:O,viewport:{...I.viewport,...m(D,p,O)}}))},setDpr:x=>o(T=>{const M=Sk(x);return{viewport:{...T.viewport,dpr:M,initialDpr:T.viewport.initialDpr||M}}}),setFrameloop:(x="always")=>{const T=c().clock;T.stop(),T.elapsedTime=0,x!=="never"&&(T.start(),T.elapsedTime=0),o(()=>({frameloop:x}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:F.createRef(),active:!1,frames:0,priority:0,subscribe:(x,T,M)=>{const A=c().internal;return A.priority=A.priority+(T>0?1:0),A.subscribers.push({ref:x,priority:T,store:M}),A.subscribers=A.subscribers.sort((D,O)=>D.priority-O.priority),()=>{const D=c().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(T>0?1:0),D.subscribers=D.subscribers.filter(O=>O.ref!==x))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return t.subscribe(()=>{const{camera:o,size:c,viewport:f,gl:p,set:d}=t.getState();if(c.width!==r.width||c.height!==r.height||f.dpr!==a){r=c,a=f.dpr,wk(o,c),f.dpr>0&&p.setPixelRatio(f.dpr);const m=typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,m)}o!==s&&(s=o,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function q2(){const n=F.useContext(X2);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function ir(n=t=>t,e){return q2()(n,e)}function C_(n,e=0){const t=q2(),i=t.getState().internal.subscribe,r=Z2(n);return A_(()=>i(r,e,t),[e,i,t]),null}function bne(n){const e=Jte(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version}),e}const Mk=0,Yg={},xne=/^three(?=[A-Z])/,bw=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let Sne=0;const Ene=n=>typeof n=="function";function Ak(n){if(Ene(n)){const e=`${Sne++}`;return Yg[e]=n,e}else Object.assign(Yg,n)}function Ck(n,e){const t=bw(n),i=Yg[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function wne(n,e,t){var i;return n=bw(n)in Yg?n:n.replace(xne,""),Ck(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,WE(e.object,t,n,e)}function Tne(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?XE(n.parent,n):Gs(n.object)&&(n.object.visible=!1),n.isHidden=!0,hv(n)}}function Rk(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?ZE(n.parent,n):Gs(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,hv(n)}}function K2(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const s=Yg[bw(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(td(e.object,e.props),e.props.attach)ZE(n,e);else if(Gs(e.object)&&Gs(n.object)){const s=n.object.children.indexOf(t?.object);if(t&&s!==-1){const o=n.object.children.indexOf(e.object);if(o!==-1){n.object.children.splice(o,1);const c=o<s?s-1:s;n.object.children.splice(c,0,e.object)}else e.object.parent=n.object,n.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const s of e.children)K2(e,s);hv(e)}}function oA(n,e){e&&(e.parent=n,n.children.push(e),K2(n,e))}function ZI(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),K2(n,e,t)}function Ok(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():VI.unstable_scheduleCallback(VI.unstable_IdlePriority,e)}}function FC(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?XE(n,e):Gs(e.object)&&Gs(n.object)&&(n.object.remove(e.object),vne(bk(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];FC(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&Ok(e.object),t===void 0&&hv(e)}function Mne(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const jS=[];function Ane(){for(const[t]of jS){const i=t.parent;if(i){t.props.attach?XE(i,t):Gs(t.object)&&Gs(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?XE(t,r):Gs(r.object)&&Gs(t.object)&&t.object.remove(r.object)}t.isHidden&&Rk(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&Ok(t.object)}for(const[t,i,r]of jS){t.props=i;const a=t.parent;if(a){var n,e;const s=Yg[bw(t.type)];t.object=(n=t.props.object)!=null?n:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Mne(r,t.object),td(t.object,t.props),t.props.attach?ZE(a,t):Gs(t.object)&&Gs(a.object)&&a.object.add(t.object);for(const o of t.children)o.props.attach?ZE(t,o):Gs(o.object)&&Gs(t.object)&&t.object.add(o.object);hv(t)}}jS.length=0}const lA=()=>{},XI={};let pS=Mk;const Cne=0,Rne=4,qE=bne({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:wne,removeChild:FC,appendChild:oA,appendInitialChild:oA,insertBefore:ZI,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||oA(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||FC(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||ZI(i,e,t)},getRootHostContext:()=>XI,getChildHostContext:()=>XI,commitUpdate(n,e,t,i,r){var a,s,o;Ck(e,i);let c=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(o=i.args)!=null&&o.some((p,d)=>{var m;return p!==((m=t.args)==null?void 0:m[d])}))&&(c=!0),c)jS.push([n,{...i},r]);else{const p=pne(n,i);Object.keys(p).length&&(Object.assign(n.props,p),td(n.object,p))}(r.sibling===null||(r.flags&Rne)===Cne)&&Ane()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>WE(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Tne,unhideInstance:Rk,createTextInstance:lA,hideTextInstance:lA,unhideTextInstance:lA,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:F.createContext(null),setCurrentUpdatePriority(n){pS=n},getCurrentUpdatePriority(){return pS},resolveUpdatePriority(){var n;if(pS!==Mk)return pS;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return HS.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return HS.ContinuousEventPriority;default:return HS.DefaultEventPriority}},resetFormInstance(){}}),lp=new Map,ng={objects:"shallow",strict:!1};function One(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Dne(n){const e=lp.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||_ne(VC,KI),s=t||qE.createContainer(a,HS.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||lp.set(n,{fiber:s,store:a});let o,c,f=!1,p=null;return{async configure(d={}){let m;p=new Promise(oe=>m=oe);let{gl:v,size:_,scene:b,events:S,onCreated:x,shadows:T=!1,linear:M=!1,flat:A=!1,legacy:D=!1,orthographic:O=!1,frameloop:I="always",dpr:U=[1,2],performance:N,raycaster:L,camera:Y,onPointerMissed:ee}=d,se=a.getState(),he=se.gl;if(!se.gl){const oe={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},me=typeof v=="function"?await v(oe):v;WI(me)?he=me:he=new I4({...oe,...v}),se.set({gl:he})}let de=se.raycaster;de||se.set({raycaster:de=new M_});const{params:P,...B}=L||{};if(nr.equ(B,de,ng)||td(de,{...B}),nr.equ(P,de.params,ng)||td(de,{params:{...de.params,...P}}),!se.camera||se.camera===c&&!nr.equ(c,Y,ng)){c=Y;const oe=Y?.isCamera,me=oe?Y:O?new T_(0,0,0,0,.1,1e3):new aa(75,0,.1,1e3);oe||(me.position.z=5,Y&&(td(me,Y),me.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(me.manual=!0,me.updateProjectionMatrix())),!se.camera&&!(Y!=null&&Y.rotation)&&me.lookAt(0,0,0)),se.set({camera:me}),de.camera=me}if(!se.scene){let oe;b!=null&&b.isScene?(oe=b,WE(oe,a,"",{})):(oe=new X1,WE(oe,a,"",{}),b&&td(oe,b)),se.set({scene:oe})}S&&!se.events.handlers&&se.set({events:S(a)});const V=One(n,_);if(nr.equ(V,se.size,ng)||se.setSize(V.width,V.height,V.top,V.left),U&&se.viewport.dpr!==Sk(U)&&se.setDpr(U),se.frameloop!==I&&se.setFrameloop(I),se.onPointerMissed||se.set({onPointerMissed:ee}),N&&!nr.equ(N,se.performance,ng)&&se.set(oe=>({performance:{...oe.performance,...N}})),!se.xr){var ae;const oe=(le,Se)=>{const Ee=a.getState();Ee.frameloop!=="never"&&KI(le,!0,Ee,Se)},me=()=>{const le=a.getState();le.gl.xr.enabled=le.gl.xr.isPresenting,le.gl.xr.setAnimationLoop(le.gl.xr.isPresenting?oe:null),le.gl.xr.isPresenting||VC(le)},J={connect(){const le=a.getState().gl;le.xr.addEventListener("sessionstart",me),le.xr.addEventListener("sessionend",me)},disconnect(){const le=a.getState().gl;le.xr.removeEventListener("sessionstart",me),le.xr.removeEventListener("sessionend",me)}};typeof((ae=he.xr)==null?void 0:ae.addEventListener)=="function"&&J.connect(),se.set({xr:J})}if(he.shadowMap){const oe=he.shadowMap.enabled,me=he.shadowMap.type;if(he.shadowMap.enabled=!!T,nr.boo(T))he.shadowMap.type=f0;else if(nr.str(T)){var X;const J={basic:Bz,percentage:L1,soft:f0,variance:Cl};he.shadowMap.type=(X=J[T])!=null?X:f0}else nr.obj(T)&&Object.assign(he.shadowMap,T);(oe!==he.shadowMap.enabled||me!==he.shadowMap.type)&&(he.shadowMap.needsUpdate=!0)}return qn.enabled=!D,f||(he.outputColorSpace=M?gd:Aa,he.toneMapping=A?Hc:JR),se.legacy!==D&&se.set(()=>({legacy:D})),se.linear!==M&&se.set(()=>({linear:M})),se.flat!==A&&se.set(()=>({flat:A})),v&&!nr.fun(v)&&!WI(v)&&!nr.equ(v,he,ng)&&td(he,v),o=x,f=!0,m(),this},render(d){return!f&&!p&&this.configure(),p.then(()=>{qE.updateContainer(q.jsx(Nne,{store:a,children:d,onCreated:o,rootElement:n}),s,null,()=>{})}),a},unmount(){Dk(n)}}}function Nne({store:n,children:e,onCreated:t,rootElement:i}){return A_(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),q.jsx(X2.Provider,{value:n,children:e})}function Dk(n,e){const t=lp.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),qE.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,o,c;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),fne(r.scene),lp.delete(n)}catch{}},500)})}}function Lne(n,e,t){return q.jsx(Ine,{children:n,container:e,state:t})}function Ine({state:n={},children:e,container:t}){const{events:i,size:r,...a}=n,s=q2(),[o]=F.useState(()=>new M_),[c]=F.useState(()=>new _t),f=Z2((d,m)=>{let v;if(m.camera&&r){const _=m.camera;v=d.viewport.getCurrentViewport(_,new ve,r),_!==d.camera&&wk(_,r)}return{...d,...m,scene:t,raycaster:o,pointer:c,mouse:c,previousRoot:s,events:{...d.events,...m.events,...i},size:{...d.size,...r},viewport:{...d.viewport,...v},setEvents:_=>m.set(b=>({...b,events:{...b.events,..._}}))}}),p=F.useMemo(()=>{const d=gk((v,_)=>({...a,set:v,get:_})),m=v=>d.setState(_=>f.current(v,_));return m(s.getState()),s.subscribe(m),d},[s,t]);return q.jsx(q.Fragment,{children:qE.createPortal(q.jsx(X2.Provider,{value:p,children:e}),p,null)})}const Une=new Set,Pne=new Set,zne=new Set;function cA(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function x0(n,e){switch(n){case"before":return cA(Une,e);case"after":return cA(Pne,e);case"tail":return cA(zne,e)}}let uA,fA;function HC(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),uA=e.internal.subscribers;for(let r=0;r<uA.length;r++)fA=uA[r],fA.ref.current(fA.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let KE=!1,jC=!1,dA,qI,ig;function Nk(n){qI=requestAnimationFrame(Nk),KE=!0,dA=0,x0("before",n),jC=!0;for(const t of lp.values()){var e;ig=t.store.getState(),ig.internal.active&&(ig.frameloop==="always"||ig.internal.frames>0)&&!((e=ig.gl.xr)!=null&&e.isPresenting)&&(dA+=HC(n,ig))}if(jC=!1,x0("after",n),dA===0)return x0("tail",n),KE=!1,cancelAnimationFrame(qI)}function VC(n,e=1){var t;if(!n)return lp.forEach(i=>VC(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):jC?n.internal.frames=2:n.internal.frames=1,KE||(KE=!0,requestAnimationFrame(Nk)))}function KI(n,e=!0,t,i){if(e&&x0("before",n),t)HC(n,t,i);else for(const r of lp.values())HC(n,r.store.getState());e&&x0("after",n)}const hA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Bne(n){const{handlePointer:e}=yne(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(hA).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[o,c]=hA[a];t.addEventListener(o,s,{passive:c})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=hA[r];i.connected.removeEventListener(s,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function $I(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function kne({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,p=F.useRef(!1);F.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[d,m,v]=F.useMemo(()=>{const x=()=>{if(!o.current.element)return;const{left:T,top:M,width:A,height:D,bottom:O,right:I,x:U,y:N}=o.current.element.getBoundingClientRect(),L={left:T,top:M,width:A,height:D,bottom:O,right:I,x:U,y:N};o.current.element instanceof HTMLElement&&i&&(L.height=o.current.element.offsetHeight,L.width=o.current.element.offsetWidth),Object.freeze(L),p.current&&!Vne(o.current.lastBounds,L)&&s(o.current.lastBounds=L)};return[x,f?$I(x,f):x,c?$I(x,c):x]},[s,i,c,f]);function _(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function b(){o.current.element&&(o.current.resizeObserver=new r(v),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const S=x=>{!x||x===o.current.element||(_(),o.current.element=x,o.current.scrollContainers=Lk(x),b())};return Hne(v,!!e),Fne(m),F.useEffect(()=>{_(),b()},[e,v,m]),F.useEffect(()=>_,[]),[S,a,d]}function Fne(n){F.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Hne(n,e){F.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Lk(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...Lk(n.parentElement)]}const jne=["x","y","top","bottom","left","right","width","height"],Vne=(n,e)=>jne.every(t=>n[t]===e[t]);function Gne({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:s=Bne,eventSource:o,eventPrefix:c,shadows:f,linear:p,flat:d,legacy:m,orthographic:v,frameloop:_,dpr:b,performance:S,raycaster:x,camera:T,scene:M,onPointerMissed:A,onCreated:D,...O}){F.useMemo(()=>Ak(pee),[]);const I=lne(),[U,N]=kne({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=F.useRef(null),Y=F.useRef(null);F.useImperativeHandle(n,()=>L.current);const ee=Z2(A),[se,he]=F.useState(!1),[de,P]=F.useState(!1);if(se)throw se;if(de)throw de;const B=F.useRef(null);A_(()=>{const ae=L.current;if(N.width>0&&N.height>0&&ae){B.current||(B.current=Dne(ae));async function X(){await B.current.configure({gl:a,scene:M,events:s,shadows:f,linear:p,flat:d,legacy:m,orthographic:v,frameloop:_,dpr:b,performance:S,raycaster:x,camera:T,size:N,onPointerMissed:(...oe)=>ee.current==null?void 0:ee.current(...oe),onCreated:oe=>{oe.events.connect==null||oe.events.connect(o?sne(o)?o.current:o:Y.current),c&&oe.setEvents({compute:(me,J)=>{const le=me[c+"X"],Se=me[c+"Y"];J.pointer.set(le/J.size.width*2-1,-(Se/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),D?.(oe)}}),B.current.render(q.jsx(I,{children:q.jsx(une,{set:P,children:q.jsx(F.Suspense,{fallback:q.jsx(cne,{set:he}),children:e??null})})}))}X()}}),F.useEffect(()=>{const ae=L.current;if(ae)return()=>Dk(ae)},[]);const V=o?"none":"auto";return q.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...r},...O,children:q.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:q.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function Yne(n){return q.jsx(yk,{children:q.jsx(Gne,{...n})})}const Ik=parseInt(m_.replace(/\D+/g,"")),Uk=Ik>=125?"uv1":"uv2",QI=new Hi,mS=new ve;let $2=class extends mw{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new kt(e,3)),this.setAttribute("uv",new kt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new op(t,6,1);return this.setAttribute("instanceStart",new Wr(i,3,0)),this.setAttribute("instanceEnd",new Wr(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new op(i,t*2,1);return this.setAttribute("instanceColorStart",new Wr(r,t,0)),this.setAttribute("instanceColorEnd",new Wr(r,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new hw(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hi);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),QI.setFromBufferAttribute(t),this.boundingBox.union(QI))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)mS.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(mS)),mS.fromBufferAttribute(t,a),r=Math.max(r,i.distanceToSquared(mS));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}},Pk=class extends $2{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,t=3){const i=e.length-t,r=new Float32Array(2*i);if(t===3)for(let a=0;a<i;a+=t)r[2*a]=e[a],r[2*a+1]=e[a+1],r[2*a+2]=e[a+2],r[2*a+3]=e[a+3],r[2*a+4]=e[a+4],r[2*a+5]=e[a+5];else for(let a=0;a<i;a+=t)r[2*a]=e[a],r[2*a+1]=e[a+1],r[2*a+2]=e[a+2],r[2*a+3]=e[a+3],r[2*a+4]=e[a+4],r[2*a+5]=e[a+5],r[2*a+6]=e[a+6],r[2*a+7]=e[a+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}},Q2=class extends yo{constructor(e){super({type:"LineMaterial",uniforms:Hg.clone(Hg.merge([Dt.common,Dt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new _t(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${Ik>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}};const pA=new mn,JI=new ve,e3=new ve,_a=new mn,ba=new mn,xc=new mn,mA=new ve,gA=new Ft,wa=new z2,t3=new ve,gS=new Hi,vS=new hr,Sc=new mn;let Nc,Qh;function n3(n,e,t){return Sc.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Sc.multiplyScalar(1/Sc.w),Sc.x=Qh/t.width,Sc.y=Qh/t.height,Sc.applyMatrix4(n.projectionMatrixInverse),Sc.multiplyScalar(1/Sc.w),Math.abs(Math.max(Sc.x,Sc.y))}function Wne(n,e){const t=n.matrixWorld,i=n.geometry,r=i.attributes.instanceStart,a=i.attributes.instanceEnd,s=Math.min(i.instanceCount,r.count);for(let o=0,c=s;o<c;o++){wa.start.fromBufferAttribute(r,o),wa.end.fromBufferAttribute(a,o),wa.applyMatrix4(t);const f=new ve,p=new ve;Nc.distanceSqToSegment(wa.start,wa.end,p,f),p.distanceTo(f)<Qh*.5&&e.push({point:p,pointOnLine:f,distance:Nc.origin.distanceTo(p),object:n,face:null,faceIndex:o,uv:null,[Uk]:null})}}function Zne(n,e,t){const i=e.projectionMatrix,a=n.material.resolution,s=n.matrixWorld,o=n.geometry,c=o.attributes.instanceStart,f=o.attributes.instanceEnd,p=Math.min(o.instanceCount,c.count),d=-e.near;Nc.at(1,xc),xc.w=1,xc.applyMatrix4(e.matrixWorldInverse),xc.applyMatrix4(i),xc.multiplyScalar(1/xc.w),xc.x*=a.x/2,xc.y*=a.y/2,xc.z=0,mA.copy(xc),gA.multiplyMatrices(e.matrixWorldInverse,s);for(let m=0,v=p;m<v;m++){if(_a.fromBufferAttribute(c,m),ba.fromBufferAttribute(f,m),_a.w=1,ba.w=1,_a.applyMatrix4(gA),ba.applyMatrix4(gA),_a.z>d&&ba.z>d)continue;if(_a.z>d){const M=_a.z-ba.z,A=(_a.z-d)/M;_a.lerp(ba,A)}else if(ba.z>d){const M=ba.z-_a.z,A=(ba.z-d)/M;ba.lerp(_a,A)}_a.applyMatrix4(i),ba.applyMatrix4(i),_a.multiplyScalar(1/_a.w),ba.multiplyScalar(1/ba.w),_a.x*=a.x/2,_a.y*=a.y/2,ba.x*=a.x/2,ba.y*=a.y/2,wa.start.copy(_a),wa.start.z=0,wa.end.copy(ba),wa.end.z=0;const b=wa.closestPointToPointParameter(mA,!0);wa.at(b,t3);const S=j1.lerp(_a.z,ba.z,b),x=S>=-1&&S<=1,T=mA.distanceTo(t3)<Qh*.5;if(x&&T){wa.start.fromBufferAttribute(c,m),wa.end.fromBufferAttribute(f,m),wa.start.applyMatrix4(s),wa.end.applyMatrix4(s);const M=new ve,A=new ve;Nc.distanceSqToSegment(wa.start,wa.end,A,M),t.push({point:A,pointOnLine:M,distance:Nc.origin.distanceTo(A),object:n,face:null,faceIndex:m,uv:null,[Uk]:null})}}}let zk=class extends Ei{constructor(e=new $2,t=new Q2({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let s=0,o=0,c=t.count;s<c;s++,o+=2)JI.fromBufferAttribute(t,s),e3.fromBufferAttribute(i,s),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+JI.distanceTo(e3);const a=new op(r,2,1);return e.setAttribute("instanceDistanceStart",new Wr(a,1,0)),e.setAttribute("instanceDistanceEnd",new Wr(a,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Nc=e.ray;const s=this.matrixWorld,o=this.geometry,c=this.material;Qh=c.linewidth+a,o.boundingSphere===null&&o.computeBoundingSphere(),vS.copy(o.boundingSphere).applyMatrix4(s);let f;if(i)f=Qh*.5;else{const d=Math.max(r.near,vS.distanceToPoint(Nc.origin));f=n3(r,d,c.resolution)}if(vS.radius+=f,Nc.intersectsSphere(vS)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),gS.copy(o.boundingBox).applyMatrix4(s);let p;if(i)p=Qh*.5;else{const d=Math.max(r.near,gS.distanceToPoint(Nc.origin));p=n3(r,d,c.resolution)}gS.expandByScalar(p),Nc.intersectsBox(gS)!==!1&&(i?Wne(this,t):Zne(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(pA),this.material.uniforms.resolution.value.set(pA.z,pA.w))}},Xne=class extends zk{constructor(e=new Pk,t=new Q2({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}};const GC=F.forwardRef(function({points:e,color:t=16777215,vertexColors:i,linewidth:r,lineWidth:a,segments:s,dashed:o,...c},f){var p,d;const m=ir(x=>x.size),v=F.useMemo(()=>s?new zk:new Xne,[s]),[_]=F.useState(()=>new Q2),b=(i==null||(p=i[0])==null?void 0:p.length)===4?4:3,S=F.useMemo(()=>{const x=s?new $2:new Pk,T=e.map(M=>{const A=Array.isArray(M);return M instanceof ve||M instanceof mn?[M.x,M.y,M.z]:M instanceof _t?[M.x,M.y,0]:A&&M.length===3?[M[0],M[1],M[2]]:A&&M.length===2?[M[0],M[1],0]:M});if(x.setPositions(T.flat()),i){t=16777215;const M=i.map(A=>A instanceof zt?A.toArray():A);x.setColors(M.flat(),b)}return x},[e,s,i,b]);return F.useLayoutEffect(()=>{v.computeLineDistances()},[e,v]),F.useLayoutEffect(()=>{o?_.defines.USE_DASH="":delete _.defines.USE_DASH,_.needsUpdate=!0},[o,_]),F.useEffect(()=>()=>{S.dispose(),_.dispose()},[S]),F.createElement("primitive",ps({object:v,ref:f},c),F.createElement("primitive",{object:S,attach:"geometry"}),F.createElement("primitive",ps({object:_,attach:"material",color:t,vertexColors:!!i,resolution:[m.width,m.height],linewidth:(d=r??a)!==null&&d!==void 0?d:1,dashed:o,transparent:b===4},c)))}),qne=new ve,Kne=F.forwardRef(function({start:e=[0,0,0],end:t=[0,0,0],mid:i,segments:r=20,...a},s){const o=F.useRef(null);F.useImperativeHandle(s,()=>o.current);const[c]=F.useState(()=>new iw(void 0,void 0,void 0)),f=F.useCallback((d,m,v,_=20)=>(d instanceof ve?c.v0.copy(d):c.v0.set(...d),m instanceof ve?c.v2.copy(m):c.v2.set(...m),v instanceof ve?c.v1.copy(v):Array.isArray(v)?c.v1.set(...v):c.v1.copy(c.v0.clone().add(c.v2.clone().sub(c.v0)).add(qne.set(0,c.v0.y-c.v2.y,0))),c.getPoints(_)),[]);F.useLayoutEffect(()=>{o.current.setPoints=(d,m,v)=>{const _=f(d,m,v);o.current.geometry&&o.current.geometry.setPositions(_.map(b=>b.toArray()).flat())}},[]);const p=F.useMemo(()=>f(e,t,i,r),[e,t,i,r]);return F.createElement(GC,ps({ref:o,points:p},a))});function $ne(n,e,t){const i=ir(v=>v.size),r=ir(v=>v.viewport),a=typeof n=="number"?n:i.width*r.dpr,s=i.height*r.dpr,o=(typeof n=="number"?t:n)||{},{samples:c=0,depth:f,...p}=o,d=f??o.depthBuffer,m=F.useMemo(()=>{const v=new Il(a,s,{minFilter:Er,magFilter:Er,type:_p,...p});return d&&(v.depthTexture=new J1(a,s,ys)),v.samples=c,v},[]);return F.useLayoutEffect(()=>{m.setSize(a,s),c&&(m.samples=c)},[c,m,a,s]),F.useEffect(()=>()=>m.dispose(),[]),m}const Qne=n=>typeof n=="function",Bk=F.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:i,makeDefault:r,...a},s)=>{const o=ir(({set:S})=>S),c=ir(({camera:S})=>S),f=ir(({size:S})=>S),p=F.useRef(null);F.useImperativeHandle(s,()=>p.current,[]);const d=F.useRef(null),m=$ne(e);F.useLayoutEffect(()=>{a.manual||p.current.updateProjectionMatrix()},[f,a]),F.useLayoutEffect(()=>{p.current.updateProjectionMatrix()}),F.useLayoutEffect(()=>{if(r){const S=c;return o(()=>({camera:p.current})),()=>o(()=>({camera:S}))}},[p,r,o]);let v=0,_=null;const b=Qne(i);return C_(S=>{b&&(t===1/0||v<t)&&(d.current.visible=!1,S.gl.setRenderTarget(m),_=S.scene.background,n&&(S.scene.background=n),S.gl.render(S.scene,p.current),S.scene.background=_,S.gl.setRenderTarget(null),d.current.visible=!0,v++)}),F.createElement(F.Fragment,null,F.createElement("orthographicCamera",ps({left:f.width/-2,right:f.width/2,top:f.height/2,bottom:f.height/-2,ref:p},a),!b&&i),F.createElement("group",{ref:d},b&&i(m.texture)))});const er={LEFT:1,RIGHT:2,MIDDLE:4},ut=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),rg={NONE:0,IN:1,OUT:-1};function Ih(n){return n.isPerspectiveCamera}function Zf(n){return n.isOrthographicCamera}const Yf=Math.PI*2,i3=Math.PI/2,kk=1e-5,Ky=Math.PI/180;function Ml(n,e,t){return Math.max(e,Math.min(t,n))}function Li(n,e=kk){return Math.abs(n)<e}function fi(n,e,t=kk){return Li(n-e,t)}function r3(n,e){return Math.round(n/e)*e}function $y(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Qy(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function yS(n,e,t,i,r=1/0,a){i=Math.max(1e-4,i);const s=2/i,o=s*a,c=1/(1+o+.48*o*o+.235*o*o*o);let f=n-e;const p=e,d=r*i;f=Ml(f,-d,d),e=n-f;const m=(t.value+s*f)*a;t.value=(t.value-s*m)*c;let v=e+(f+m)*c;return p-n>0==v>p&&(v=p,t.value=(v-p)/a),v}function a3(n,e,t,i,r=1/0,a,s){i=Math.max(1e-4,i);const o=2/i,c=o*a,f=1/(1+c+.48*c*c+.235*c*c*c);let p=e.x,d=e.y,m=e.z,v=n.x-p,_=n.y-d,b=n.z-m;const S=p,x=d,T=m,M=r*i,A=M*M,D=v*v+_*_+b*b;if(D>A){const de=Math.sqrt(D);v=v/de*M,_=_/de*M,b=b/de*M}p=n.x-v,d=n.y-_,m=n.z-b;const O=(t.x+o*v)*a,I=(t.y+o*_)*a,U=(t.z+o*b)*a;t.x=(t.x-o*O)*f,t.y=(t.y-o*I)*f,t.z=(t.z-o*U)*f,s.x=p+(v+O)*f,s.y=d+(_+I)*f,s.z=m+(b+U)*f;const N=S-n.x,L=x-n.y,Y=T-n.z,ee=s.x-S,se=s.y-x,he=s.z-T;return N*ee+L*se+Y*he>0&&(s.x=S,s.y=x,s.z=T,t.x=(s.x-S)/a,t.y=(s.y-x)/a,t.z=(s.z-T)/a),s}function vA(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function yA(n,e){return Zf(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class Jne{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e)}}}var _A;const eie="3.1.0",_S=1/8,tie=/Mac/.test((_A=globalThis?.navigator)===null||_A===void 0?void 0:_A.platform);let un,s3,bS,bA,ks,Mn,ai,ag,Jy,Ec,wc,Uh,o3,l3,co,sg,og,c3,xA,u3,SA,EA,xS,Fk=class YC extends Jne{static install(e){un=e.THREE,s3=Object.freeze(new un.Vector3(0,0,0)),bS=Object.freeze(new un.Vector3(0,1,0)),bA=Object.freeze(new un.Vector3(0,0,1)),ks=new un.Vector2,Mn=new un.Vector3,ai=new un.Vector3,ag=new un.Vector3,Jy=new un.Vector3,Ec=new un.Vector3,wc=new un.Vector3,Uh=new un.Vector3,o3=new un.Vector3,l3=new un.Vector3,co=new un.Spherical,sg=new un.Spherical,og=new un.Box3,c3=new un.Box3,xA=new un.Sphere,u3=new un.Quaternion,SA=new un.Quaternion,EA=new un.Matrix4,xS=new un.Raycaster}static get ACTION(){return ut}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=ut.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=rg.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new un.Vector3,this._focalOffsetVelocity=new un.Vector3,this._zoomVelocity={value:0},this._truckInternal=(x,T,M,A)=>{let D,O;if(Ih(this._camera)){const I=Mn.copy(this._camera.position).sub(this._target),U=this._camera.getEffectiveFOV()*Ky,N=I.length()*Math.tan(U*.5);D=this.truckSpeed*x*N/this._elementRect.height,O=this.truckSpeed*T*N/this._elementRect.height}else if(Zf(this._camera)){const I=this._camera;D=this.truckSpeed*x*(I.right-I.left)/I.zoom/this._elementRect.width,O=this.truckSpeed*T*(I.top-I.bottom)/I.zoom/this._elementRect.height}else return;A?(M?this.setFocalOffset(this._focalOffsetEnd.x+D,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(D,0,!0),this.forward(-O,!0)):M?this.setFocalOffset(this._focalOffsetEnd.x+D,this._focalOffsetEnd.y+O,this._focalOffsetEnd.z,!0):this.truck(D,O,!0)},this._rotateInternal=(x,T)=>{const M=Yf*this.azimuthRotateSpeed*x/this._elementRect.height,A=Yf*this.polarRotateSpeed*T/this._elementRect.height;this.rotate(M,A,!0)},this._dollyInternal=(x,T,M)=>{const A=Math.pow(.95,-x*this.dollySpeed),D=this._sphericalEnd.radius,O=this._sphericalEnd.radius*A,I=Ml(O,this.minDistance,this.maxDistance),U=I-O;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(O,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(U,!0),this._dollyToNoClamp(I,!0)):this._dollyToNoClamp(I,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?O:I)-D,this._dollyControlCoord.set(T,M)),this._lastDollyDirection=Math.sign(-x)},this._zoomInternal=(x,T,M)=>{const A=Math.pow(.95,x*this.dollySpeed),D=this._zoom,O=this._zoom*A;this.zoomTo(O,!0),this.dollyToCursor&&(this._changedZoom+=O-D,this._dollyControlCoord.set(T,M))},typeof un>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new un.Quaternion().setFromUnitVectors(this._camera.up,bS),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ut.NONE,this._target=new un.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new un.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new un.Spherical().setFromVector3(Mn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new un.Vector3,new un.Vector3,new un.Vector3,new un.Vector3],this._updateNearPlaneCorners(),this._boundary=new un.Box3(new un.Vector3(-1/0,-1/0,-1/0),new un.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new un.Vector2,this.mouseButtons={left:ut.ROTATE,middle:ut.DOLLY,right:ut.TRUCK,wheel:Ih(this._camera)?ut.DOLLY:Zf(this._camera)?ut.ZOOM:ut.NONE},this.touches={one:ut.TOUCH_ROTATE,two:Ih(this._camera)?ut.TOUCH_DOLLY_TRUCK:Zf(this._camera)?ut.TOUCH_ZOOM_TRUCK:ut.NONE,three:ut.TOUCH_TRUCK};const i=new un.Vector2,r=new un.Vector2,a=new un.Vector2,s=x=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),D=x.clientX/A.width,O=x.clientY/A.height;if(D<this._interactiveArea.left||D>this._interactiveArea.right||O<this._interactiveArea.top||O>this._interactiveArea.bottom)return}const T=x.pointerType!=="mouse"?null:(x.buttons&er.LEFT)===er.LEFT?er.LEFT:(x.buttons&er.MIDDLE)===er.MIDDLE?er.MIDDLE:(x.buttons&er.RIGHT)===er.RIGHT?er.RIGHT:null;if(T!==null){const A=this._findPointerByMouseButton(T);A&&this._disposePointer(A)}if((x.buttons&er.LEFT)===er.LEFT&&this._lockedPointer)return;const M={pointerId:x.pointerId,clientX:x.clientX,clientY:x.clientY,deltaX:0,deltaY:0,mouseButton:T};this._activePointers.push(M),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),this._isDragging=!0,m(x)},o=x=>{x.cancelable&&x.preventDefault();const T=x.pointerId,M=this._lockedPointer||this._findPointerById(T);if(M){if(M.clientX=x.clientX,M.clientY=x.clientY,M.deltaX=x.movementX,M.deltaY=x.movementY,this._state=0,x.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(x.buttons&er.LEFT)===er.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(x.buttons&er.MIDDLE)===er.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(x.buttons&er.RIGHT)===er.RIGHT&&(this._state=this._state|this.mouseButtons.right);v()}},c=x=>{const T=this._findPointerById(x.pointerId);if(!(T&&T===this._lockedPointer)){if(T&&this._disposePointer(T),x.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ut.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ut.NONE;_()}};let f=-1;const p=x=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===ut.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const O=this._domElement.getBoundingClientRect(),I=x.clientX/O.width,U=x.clientY/O.height;if(I<this._interactiveArea.left||I>this._interactiveArea.right||U<this._interactiveArea.top||U>this._interactiveArea.bottom)return}if(x.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ut.ROTATE||this.mouseButtons.wheel===ut.TRUCK){const O=performance.now();f-O<1e3&&this._getClientRect(this._elementRect),f=O}const T=tie?-1:-3,M=x.deltaMode===1||x.ctrlKey?x.deltaY/T:x.deltaY/(T*10),A=this.dollyToCursor?(x.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(x.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case ut.ROTATE:{this._rotateInternal(x.deltaX,x.deltaY),this._isUserControllingRotate=!0;break}case ut.TRUCK:{this._truckInternal(x.deltaX,x.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case ut.SCREEN_PAN:{this._truckInternal(x.deltaX,x.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case ut.OFFSET:{this._truckInternal(x.deltaX,x.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case ut.DOLLY:{this._dollyInternal(-M,A,D),this._isUserControllingDolly=!0;break}case ut.ZOOM:{this._zoomInternal(-M,A,D),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},d=x=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===YC.ACTION.NONE){const T=x instanceof PointerEvent?x.pointerId:0,M=this._findPointerById(T);M&&this._disposePointer(M),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c);return}x.preventDefault()}},m=x=>{if(!this._enabled)return;if(vA(this._activePointers,ks),this._getClientRect(this._elementRect),i.copy(ks),r.copy(ks),this._activePointers.length>=2){const M=ks.x-this._activePointers[1].clientX,A=ks.y-this._activePointers[1].clientY,D=Math.sqrt(M*M+A*A);a.set(0,D);const O=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,I=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(O,I)}if(this._state=0,!x)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in x&&x.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(x.buttons&er.LEFT)===er.LEFT&&(this._state=this._state|this.mouseButtons.left),(x.buttons&er.MIDDLE)===er.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(x.buttons&er.RIGHT)===er.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ut.ROTATE)===ut.ROTATE||(this._state&ut.TOUCH_ROTATE)===ut.TOUCH_ROTATE||(this._state&ut.TOUCH_DOLLY_ROTATE)===ut.TOUCH_DOLLY_ROTATE||(this._state&ut.TOUCH_ZOOM_ROTATE)===ut.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ut.TRUCK)===ut.TRUCK||(this._state&ut.SCREEN_PAN)===ut.SCREEN_PAN||(this._state&ut.TOUCH_TRUCK)===ut.TOUCH_TRUCK||(this._state&ut.TOUCH_SCREEN_PAN)===ut.TOUCH_SCREEN_PAN||(this._state&ut.TOUCH_DOLLY_TRUCK)===ut.TOUCH_DOLLY_TRUCK||(this._state&ut.TOUCH_DOLLY_SCREEN_PAN)===ut.TOUCH_DOLLY_SCREEN_PAN||(this._state&ut.TOUCH_ZOOM_TRUCK)===ut.TOUCH_ZOOM_TRUCK||(this._state&ut.TOUCH_ZOOM_SCREEN_PAN)===ut.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ut.DOLLY)===ut.DOLLY||(this._state&ut.TOUCH_DOLLY)===ut.TOUCH_DOLLY||(this._state&ut.TOUCH_DOLLY_TRUCK)===ut.TOUCH_DOLLY_TRUCK||(this._state&ut.TOUCH_DOLLY_SCREEN_PAN)===ut.TOUCH_DOLLY_SCREEN_PAN||(this._state&ut.TOUCH_DOLLY_OFFSET)===ut.TOUCH_DOLLY_OFFSET||(this._state&ut.TOUCH_DOLLY_ROTATE)===ut.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ut.ZOOM)===ut.ZOOM||(this._state&ut.TOUCH_ZOOM)===ut.TOUCH_ZOOM||(this._state&ut.TOUCH_ZOOM_TRUCK)===ut.TOUCH_ZOOM_TRUCK||(this._state&ut.TOUCH_ZOOM_SCREEN_PAN)===ut.TOUCH_ZOOM_SCREEN_PAN||(this._state&ut.TOUCH_ZOOM_OFFSET)===ut.TOUCH_ZOOM_OFFSET||(this._state&ut.TOUCH_ZOOM_ROTATE)===ut.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ut.OFFSET)===ut.OFFSET||(this._state&ut.TOUCH_OFFSET)===ut.TOUCH_OFFSET||(this._state&ut.TOUCH_DOLLY_OFFSET)===ut.TOUCH_DOLLY_OFFSET||(this._state&ut.TOUCH_ZOOM_OFFSET)===ut.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},v=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,vA(this._activePointers,ks);const T=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,M=T?-T.deltaX:r.x-ks.x,A=T?-T.deltaY:r.y-ks.y;if(r.copy(ks),((this._state&ut.ROTATE)===ut.ROTATE||(this._state&ut.TOUCH_ROTATE)===ut.TOUCH_ROTATE||(this._state&ut.TOUCH_DOLLY_ROTATE)===ut.TOUCH_DOLLY_ROTATE||(this._state&ut.TOUCH_ZOOM_ROTATE)===ut.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(M,A),this._isUserControllingRotate=!0),(this._state&ut.DOLLY)===ut.DOLLY||(this._state&ut.ZOOM)===ut.ZOOM){const D=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,O=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,I=this.dollyDragInverted?-1:1;(this._state&ut.DOLLY)===ut.DOLLY?(this._dollyInternal(I*A*_S,D,O),this._isUserControllingDolly=!0):(this._zoomInternal(I*A*_S,D,O),this._isUserControllingZoom=!0)}if((this._state&ut.TOUCH_DOLLY)===ut.TOUCH_DOLLY||(this._state&ut.TOUCH_ZOOM)===ut.TOUCH_ZOOM||(this._state&ut.TOUCH_DOLLY_TRUCK)===ut.TOUCH_DOLLY_TRUCK||(this._state&ut.TOUCH_ZOOM_TRUCK)===ut.TOUCH_ZOOM_TRUCK||(this._state&ut.TOUCH_DOLLY_SCREEN_PAN)===ut.TOUCH_DOLLY_SCREEN_PAN||(this._state&ut.TOUCH_ZOOM_SCREEN_PAN)===ut.TOUCH_ZOOM_SCREEN_PAN||(this._state&ut.TOUCH_DOLLY_OFFSET)===ut.TOUCH_DOLLY_OFFSET||(this._state&ut.TOUCH_ZOOM_OFFSET)===ut.TOUCH_ZOOM_OFFSET||(this._state&ut.TOUCH_DOLLY_ROTATE)===ut.TOUCH_DOLLY_ROTATE||(this._state&ut.TOUCH_ZOOM_ROTATE)===ut.TOUCH_ZOOM_ROTATE){const D=ks.x-this._activePointers[1].clientX,O=ks.y-this._activePointers[1].clientY,I=Math.sqrt(D*D+O*O),U=a.y-I;a.set(0,I);const N=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,L=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ut.TOUCH_DOLLY)===ut.TOUCH_DOLLY||(this._state&ut.TOUCH_DOLLY_ROTATE)===ut.TOUCH_DOLLY_ROTATE||(this._state&ut.TOUCH_DOLLY_TRUCK)===ut.TOUCH_DOLLY_TRUCK||(this._state&ut.TOUCH_DOLLY_SCREEN_PAN)===ut.TOUCH_DOLLY_SCREEN_PAN||(this._state&ut.TOUCH_DOLLY_OFFSET)===ut.TOUCH_DOLLY_OFFSET?(this._dollyInternal(U*_S,N,L),this._isUserControllingDolly=!0):(this._zoomInternal(U*_S,N,L),this._isUserControllingZoom=!0)}((this._state&ut.TRUCK)===ut.TRUCK||(this._state&ut.TOUCH_TRUCK)===ut.TOUCH_TRUCK||(this._state&ut.TOUCH_DOLLY_TRUCK)===ut.TOUCH_DOLLY_TRUCK||(this._state&ut.TOUCH_ZOOM_TRUCK)===ut.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(M,A,!1,!1),this._isUserControllingTruck=!0),((this._state&ut.SCREEN_PAN)===ut.SCREEN_PAN||(this._state&ut.TOUCH_SCREEN_PAN)===ut.TOUCH_SCREEN_PAN||(this._state&ut.TOUCH_DOLLY_SCREEN_PAN)===ut.TOUCH_DOLLY_SCREEN_PAN||(this._state&ut.TOUCH_ZOOM_SCREEN_PAN)===ut.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(M,A,!1,!0),this._isUserControllingTruck=!0),((this._state&ut.OFFSET)===ut.OFFSET||(this._state&ut.TOUCH_OFFSET)===ut.TOUCH_OFFSET||(this._state&ut.TOUCH_DOLLY_OFFSET)===ut.TOUCH_DOLLY_OFFSET||(this._state&ut.TOUCH_ZOOM_OFFSET)===ut.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(M,A,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},_=()=>{vA(this._activePointers,ks),r.copy(ks),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",b),this._domElement.ownerDocument.addEventListener("pointerlockerror",S),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),m())},this.unlockPointer=()=>{var x,T,M;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(x=this._domElement)===null||x===void 0||x.ownerDocument.exitPointerLock(),(T=this._domElement)===null||T===void 0||T.ownerDocument.removeEventListener("pointerlockchange",b),(M=this._domElement)===null||M===void 0||M.ownerDocument.removeEventListener("pointerlockerror",S),this.cancel()};const b=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},S=()=>{this.unlockPointer()};this._addAllEventListeners=x=>{this._domElement=x,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",s),this._domElement.addEventListener("pointercancel",c),this._domElement.addEventListener("wheel",p,{passive:!1}),this._domElement.addEventListener("contextmenu",d)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",s),this._domElement.removeEventListener("pointercancel",c),this._domElement.removeEventListener("wheel",p,{passive:!1}),this._domElement.removeEventListener("contextmenu",d),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.removeEventListener("pointerlockchange",b),this._domElement.ownerDocument.removeEventListener("pointerlockerror",S))},this.cancel=()=>{this._state!==ut.NONE&&(this._state=ut.NONE,this._activePointers.length=0,_())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Ml(e.width,0,1),this._interactiveArea.height=Ml(e.height,0,1),this._interactiveArea.x=Ml(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Ml(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=Ml(e,this.minAzimuthAngle,this.maxAzimuthAngle),a=Ml(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=a,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const s=!i||fi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&fi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=rg.NONE,this._changedDolly=0,this._dollyToNoClamp(Ml(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const s=this._collisionTest(),o=fi(s,this._spherical.radius);if(!(i>e)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,s)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const a=!t||fi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(a)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Jy).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||fi(this._target.x,this._targetEnd.x,this.restThreshold)&&fi(this._target.y,this._targetEnd.y,this.restThreshold)&&fi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Ml(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||fi(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),Ec.setFromMatrixColumn(this._camera.matrix,0),wc.setFromMatrixColumn(this._camera.matrix,1),Ec.multiplyScalar(e),wc.multiplyScalar(-t);const r=Mn.copy(Ec).add(wc),a=ai.copy(this._targetEnd).add(r);return this.moveTo(a.x,a.y,a.z,i)}forward(e,t=!1){Mn.setFromMatrixColumn(this._camera.matrix,0),Mn.crossVectors(this._camera.up,Mn),Mn.multiplyScalar(e);const i=ai.copy(this._targetEnd).add(Mn);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return Mn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Mn.x,this._targetEnd.y+Mn.y,this._targetEnd.z+Mn.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const a=Mn.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,a,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const s=!r||fi(this._target.x,this._targetEnd.x,this.restThreshold)&&fi(this._target.y,this._targetEnd.y,this.restThreshold)&&fi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}lookInDirectionOf(e,t,i,r=!1){const o=Mn.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(o.x,o.y,o.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:a=0,paddingBottom:s=0,paddingTop:o=0}={}){const c=[],f=e.isBox3?og.copy(e):og.setFromObject(e);f.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const p=r3(this._sphericalEnd.theta,i3),d=r3(this._sphericalEnd.phi,i3);c.push(this.rotateTo(p,d,t));const m=Mn.setFromSpherical(this._sphericalEnd).normalize(),v=u3.setFromUnitVectors(m,bA),_=fi(Math.abs(m.y),1);_&&v.multiply(SA.setFromAxisAngle(bS,p)),v.multiply(this._yAxisUpSpaceInverse);const b=c3.makeEmpty();ai.copy(f.min).applyQuaternion(v),b.expandByPoint(ai),ai.copy(f.min).setX(f.max.x).applyQuaternion(v),b.expandByPoint(ai),ai.copy(f.min).setY(f.max.y).applyQuaternion(v),b.expandByPoint(ai),ai.copy(f.max).setZ(f.min.z).applyQuaternion(v),b.expandByPoint(ai),ai.copy(f.min).setZ(f.max.z).applyQuaternion(v),b.expandByPoint(ai),ai.copy(f.max).setY(f.min.y).applyQuaternion(v),b.expandByPoint(ai),ai.copy(f.max).setX(f.min.x).applyQuaternion(v),b.expandByPoint(ai),ai.copy(f.max).applyQuaternion(v),b.expandByPoint(ai),b.min.x-=r,b.min.y-=s,b.max.x+=a,b.max.y+=o,v.setFromUnitVectors(bA,m),_&&v.premultiply(SA.invert()),v.premultiply(this._yAxisUpSpace);const S=b.getSize(Mn),x=b.getCenter(ai).applyQuaternion(v);if(Ih(this._camera)){const T=this.getDistanceToFitBox(S.x,S.y,S.z,i);c.push(this.moveTo(x.x,x.y,x.z,t)),c.push(this.dollyTo(T,t)),c.push(this.setFocalOffset(0,0,0,t))}else if(Zf(this._camera)){const T=this._camera,M=T.right-T.left,A=T.top-T.bottom,D=i?Math.max(M/S.x,A/S.y):Math.min(M/S.x,A/S.y);c.push(this.moveTo(x.x,x.y,x.z,t)),c.push(this.zoomTo(D,t)),c.push(this.setFocalOffset(0,0,0,t))}return Promise.all(c)}fitToSphere(e,t){const i=[],a="isObject3D"in e?YC.createBoundingSphere(e,xA):xA.copy(e);if(i.push(this.moveTo(a.center.x,a.center.y,a.center.z,t)),Ih(this._camera)){const s=this.getDistanceToFitSphere(a.radius);i.push(this.dollyTo(s,t))}else if(Zf(this._camera)){const s=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,c=2*a.radius,f=Math.min(s/c,o/c);i.push(this.zoomTo(f,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,a,s,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=rg.NONE,this._changedDolly=0;const c=ai.set(r,a,s),f=Mn.set(e,t,i);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(f.sub(c).applyQuaternion(this._yAxisUpSpace)),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const p=!o||fi(this._target.x,this._targetEnd.x,this.restThreshold)&&fi(this._target.y,this._targetEnd.y,this.restThreshold)&&fi(this._target.z,this._targetEnd.z,this.restThreshold)&&fi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&fi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&fi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}lerp(e,t,i,r=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=rg.NONE,this._changedDolly=0;const a=Mn.set(...e.target);if("spherical"in e)co.set(...e.spherical);else{const d=ai.set(...e.position);co.setFromVector3(d.sub(a).applyQuaternion(this._yAxisUpSpace))}const s=ag.set(...t.target);if("spherical"in t)sg.set(...t.spherical);else{const d=ai.set(...t.position);sg.setFromVector3(d.sub(s).applyQuaternion(this._yAxisUpSpace))}this._targetEnd.copy(a.lerp(s,i));const o=sg.theta-co.theta,c=sg.phi-co.phi,f=sg.radius-co.radius;this._sphericalEnd.set(co.radius+f*i,co.phi+c*i,co.theta+o*i),this._needsUpdate=!0,r||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const p=!r||fi(this._target.x,this._targetEnd.x,this.restThreshold)&&fi(this._target.y,this._targetEnd.y,this.restThreshold)&&fi(this._target.z,this._targetEnd.z,this.restThreshold)&&fi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&fi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&fi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}lerpLookAt(e,t,i,r,a,s,o,c,f,p,d,m,v,_=!1){return this.lerp({position:[e,t,i],target:[r,a,s]},{position:[o,c,f],target:[p,d,m]},v,_)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const a=this.getPosition(Mn),s=this.setLookAt(a.x,a.y,a.z,e,t,i,r);return this._sphericalEnd.phi=Ml(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),s}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const a=!r||fi(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&fi(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&fi(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),Ec.setFromMatrixColumn(this._camera.matrixWorldInverse,0),wc.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Uh.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Mn.set(e,t,i),a=r.distanceTo(this._camera.position),s=r.sub(this._camera.position);Ec.multiplyScalar(s.x),wc.multiplyScalar(s.y),Uh.multiplyScalar(s.z),Mn.copy(Ec).add(wc).add(Uh),Mn.z=Mn.z+a,this.dollyTo(a,!1),this.setFocalOffset(-Mn.x,Mn.y,-Mn.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new un.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(yA(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const a=e/t,s=this._camera.getEffectiveFOV()*Ky,o=this._camera.aspect;return((r?a>o:a<o)?t:e/o)*.5/Math.tan(s*.5)+i*.5}getDistanceToFitSphere(e){if(yA(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Ky,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new un.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new un.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new un.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new un.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){return this._sphericalEnd.theta=(this._sphericalEnd.theta%Yf+Yf)%Yf,this._sphericalEnd.theta>Math.PI&&(this._sphericalEnd.theta-=Yf),this._spherical.theta+=Yf*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Yf),this}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!fi(this._camera.up.x,this._cameraUp0.x)||!fi(this._camera.up.y,this._cameraUp0.y)||!fi(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(Mn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,bS),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Mn.subVectors(this._target,this._camera.position).normalize(),t=ai.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(Mn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,a=o3.subVectors(this._targetEnd,this._target),s=l3.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(Li(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=yS(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,e),this._needsUpdate=!0}if(Li(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=yS(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,e),this._needsUpdate=!0}if(Li(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=yS(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,e),this._needsUpdate=!0}if(Li(a.x)&&Li(a.y)&&Li(a.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;a3(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Li(s.x)&&Li(s.y)&&Li(s.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;a3(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Li(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=yS(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,e)}if(this.dollyToCursor){if(Ih(this._camera)&&this._changedDolly!==0){const d=this._spherical.radius-this._lastDistance,m=this._camera,v=this._getCameraDirection(Jy),_=Mn.copy(v).cross(m.up).normalize();_.lengthSq()===0&&(_.x=1);const b=ai.crossVectors(_,v),S=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*Ky*.5),T=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,M=ag.copy(this._targetEnd).add(_.multiplyScalar(this._dollyControlCoord.x*S*m.aspect)).add(b.multiplyScalar(this._dollyControlCoord.y*S)),A=Mn.copy(this._targetEnd).lerp(M,T),D=this._lastDollyDirection===rg.IN&&this._spherical.radius<=this.minDistance,O=this._lastDollyDirection===rg.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(D||O)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;const U=ai.copy(v).multiplyScalar(-d);A.add(U)}this._boundary.clampPoint(A,A);const I=ai.subVectors(A,this._targetEnd);this._targetEnd.copy(A),this._target.add(I),this._changedDolly-=d,Li(this._changedDolly)&&(this._changedDolly=0)}else if(Zf(this._camera)&&this._changedZoom!==0){const d=this._zoom-this._lastZoom,m=this._camera,v=Mn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),_=ai.set(0,0,-1).applyQuaternion(m.quaternion),b=ag.copy(v).add(_.multiplyScalar(-v.dot(m.up))),x=-(this._zoom-d-this._zoom)/this._zoom,T=this._getCameraDirection(Jy),M=this._targetEnd.dot(T),A=Mn.copy(this._targetEnd).lerp(b,x),D=A.dot(T),O=T.multiplyScalar(D-M);A.sub(O),this._boundary.clampPoint(A,A);const I=ai.subVectors(A,this._targetEnd);this._targetEnd.copy(A),this._target.add(I),this._changedZoom-=d,Li(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Li(this._focalOffset.x)||!Li(this._focalOffset.y)||!Li(this._focalOffset.z))&&(Ec.setFromMatrixColumn(this._camera.matrix,0),wc.setFromMatrixColumn(this._camera.matrix,1),Uh.setFromMatrixColumn(this._camera.matrix,2),Ec.multiplyScalar(this._focalOffset.x),wc.multiplyScalar(-this._focalOffset.y),Uh.multiplyScalar(this._focalOffset.z),Mn.copy(Ec).add(wc).add(Uh),this._camera.position.add(Mn),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Mn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const p=this._needsUpdate;return p&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):p?(this.dispatchEvent({type:"update"}),Li(t,this.restThreshold)&&Li(i,this.restThreshold)&&Li(r,this.restThreshold)&&Li(a.x,this.restThreshold)&&Li(a.y,this.restThreshold)&&Li(a.z,this.restThreshold)&&Li(s.x,this.restThreshold)&&Li(s.y,this.restThreshold)&&Li(s.z,this.restThreshold)&&Li(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!p&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=p,this._needsUpdate=!1,p}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:$y(this.maxDistance),minZoom:this.minZoom,maxZoom:$y(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:$y(this.maxPolarAngle),minAzimuthAngle:$y(this.minAzimuthAngle),maxAzimuthAngle:$y(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Mn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Qy(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Qy(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Qy(i.maxPolarAngle),this.minAzimuthAngle=Qy(i.minAzimuthAngle),this.maxAzimuthAngle=Qy(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),co.setFromVector3(Mn.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(co.theta,co.phi,t),this.dollyTo(co.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",eie),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const a=ai.copy(t).add(e),o=this._boundary.clampPoint(a,ag).sub(a),c=o.lengthSq();if(c===0)return e.add(t);if(c===r)return e;if(i===0)return e.add(t).add(o);{const f=1+i*c/t.dot(o);return e.add(ai.copy(t).multiplyScalar(f)).add(o.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(Ih(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Ky,r=Math.tan(i*.5)*t,a=r*e.aspect;this._nearPlaneCorners[0].set(-a,-r,0),this._nearPlaneCorners[1].set(a,-r,0),this._nearPlaneCorners[2].set(a,r,0),this._nearPlaneCorners[3].set(-a,r,0)}else if(Zf(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,a=e.top*t,s=e.bottom*t;this._nearPlaneCorners[0].set(i,a,0),this._nearPlaneCorners[1].set(r,a,0),this._nearPlaneCorners[2].set(r,s,0),this._nearPlaneCorners[3].set(i,s,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||yA(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(Jy);EA.lookAt(s3,i,this._camera.up);for(let r=0;r<4;r++){const a=ai.copy(this._nearPlaneCorners[r]);a.applyMatrix4(EA);const s=ag.addVectors(this._target,a);xS.set(s,i),xS.far=this._spherical.radius+1;const o=xS.intersectObjects(this.colliderMeshes);o.length!==0&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new un.Sphere){const i=t,r=i.center;og.makeEmpty(),e.traverseVisible(s=>{s.isMesh&&og.expandByObject(s)}),og.getCenter(r);let a=0;return e.traverseVisible(s=>{if(!s.isMesh)return;const o=s;if(!o.geometry)return;const c=o.geometry.clone();c.applyMatrix4(o.matrixWorld);const p=c.attributes.position;for(let d=0,m=p.count;d<m;d++)Mn.fromBufferAttribute(p,d),a=Math.max(a,r.distanceToSquared(Mn))}),i.radius=Math.sqrt(a),i}};const nie=F.forwardRef((n,e)=>{const{impl:t,camera:i,domElement:r,makeDefault:a,onControlStart:s,onControl:o,onControlEnd:c,onTransitionStart:f,onUpdate:p,onWake:d,onRest:m,onSleep:v,onStart:_,onEnd:b,onChange:S,regress:x,...T}=n,M=t??Fk;F.useMemo(()=>{const de={Box3:Hi,MathUtils:{clamp:j1.clamp},Matrix4:Ft,Quaternion:Or,Raycaster:M_,Sphere:hr,Spherical:M4,Vector2:_t,Vector3:ve,Vector4:mn};M.install({THREE:de}),Ak({CameraControlsImpl:M})},[M]);const A=ir(de=>de.camera),D=ir(de=>de.gl),O=ir(de=>de.invalidate),I=ir(de=>de.events),U=ir(de=>de.setEvents),N=ir(de=>de.set),L=ir(de=>de.get),Y=ir(de=>de.performance),ee=i||A,se=r||I.connected||D.domElement,he=F.useMemo(()=>new M(ee),[M,ee]);return C_((de,P)=>{he.update(P)},-1),F.useEffect(()=>(he.connect(se),()=>void he.disconnect()),[se,he]),F.useEffect(()=>{function de(){O(),x&&Y.regress()}const P=le=>{de(),s?.(le),_?.(le)},B=le=>{de(),o?.(le),S?.(le)},V=le=>{c?.(le),b?.(le)},ae=le=>{de(),f?.(le),S?.(le)},X=le=>{de(),p?.(le),S?.(le)},oe=le=>{de(),d?.(le),S?.(le)},me=le=>{m?.(le)},J=le=>{v?.(le)};return he.addEventListener("controlstart",P),he.addEventListener("control",B),he.addEventListener("controlend",V),he.addEventListener("transitionstart",ae),he.addEventListener("update",X),he.addEventListener("wake",oe),he.addEventListener("rest",me),he.addEventListener("sleep",J),()=>{he.removeEventListener("controlstart",P),he.removeEventListener("control",B),he.removeEventListener("controlend",V),he.removeEventListener("transitionstart",ae),he.removeEventListener("update",X),he.removeEventListener("wake",oe),he.removeEventListener("rest",me),he.removeEventListener("sleep",J)}},[he,O,U,x,Y,s,o,c,f,p,d,m,v,S,_,b]),F.useEffect(()=>{if(a){const de=L().controls;return N({controls:he}),()=>N({controls:de})}},[a,he]),F.createElement("primitive",ps({ref:e,object:he},T))});function iie({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:i,scene:r,camera:a}=ir();let s;return C_(()=>{s=i.autoClear,t===1&&(i.autoClear=!0,i.render(n,e)),i.autoClear=!1,i.clearDepth(),i.render(r,a),i.autoClear=s},t),F.createElement("group",{onPointerOver:()=>null})}function rie({children:n,renderPriority:e=1}){const{scene:t,camera:i}=ir(),[r]=F.useState(()=>new X1);return F.createElement(F.Fragment,null,Lne(F.createElement(F.Fragment,null,n,F.createElement(iie,{defaultScene:t,defaultCamera:i,renderPriority:e})),r,{events:{priority:e+1}}))}const Hk=F.createContext({}),aie=()=>F.useContext(Hk),sie=2*Math.PI,wA=new Kn,f3=new Ft,[lg,TA]=[new Or,new Or],d3=new ve,h3=new ve,oie=n=>"minPolarAngle"in n,p3=n=>"getTarget"in n,lie=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:i,onTarget:r,children:a})=>{const s=ir(O=>O.size),o=ir(O=>O.camera),c=ir(O=>O.controls),f=ir(O=>O.invalidate),p=F.useRef(null),d=F.useRef(null),m=F.useRef(!1),v=F.useRef(0),_=F.useRef(new ve(0,0,0)),b=F.useRef(new ve(0,0,0));F.useEffect(()=>{b.current.copy(o.up),wA.up.copy(o.up)},[o]);const S=F.useCallback(O=>{m.current=!0,(c||r)&&(_.current=r?.()||(p3(c)?c.getTarget(_.current):c?.target)),v.current=o.position.distanceTo(d3),lg.copy(o.quaternion),h3.copy(O).multiplyScalar(v.current).add(d3),wA.lookAt(h3),TA.copy(wA.quaternion),f()},[c,o,r,f]);C_((O,I)=>{if(d.current&&p.current){var U;if(m.current)if(lg.angleTo(TA)<.01)m.current=!1,oie(c)&&o.up.copy(b.current);else{const N=I*sie;lg.rotateTowards(TA,N),o.position.set(0,0,1).applyQuaternion(lg).multiplyScalar(v.current).add(_.current),o.up.set(0,1,0).applyQuaternion(lg).normalize(),o.quaternion.copy(lg),p3(c)&&c.setPosition(o.position.x,o.position.y,o.position.z),i?i():c&&c.update(I),f()}f3.copy(o.matrix).invert(),(U=p.current)==null||U.quaternion.setFromRotationMatrix(f3)}});const x=F.useMemo(()=>({tweenCamera:S}),[S]),[T,M]=e,A=n.endsWith("-center")?0:n.endsWith("-left")?-s.width/2+T:s.width/2-T,D=n.startsWith("center-")?0:n.startsWith("top-")?s.height/2-M:-s.height/2+M;return F.createElement(rie,{renderPriority:t},F.createElement(Hk.Provider,{value:x},F.createElement(Bk,{makeDefault:!0,ref:d,position:[0,0,200]}),F.createElement("group",{ref:p,position:[A,D,0]},a)))};function MA({scale:n=[.8,.05,.05],color:e,rotation:t}){return F.createElement("group",{rotation:t},F.createElement("mesh",{position:[.4,0,0]},F.createElement("boxGeometry",{args:n}),F.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function cg({onClick:n,font:e,disabled:t,arcStyle:i,label:r,labelColor:a,axisHeadScale:s=1,...o}){const c=ir(b=>b.gl),f=F.useMemo(()=>{const b=document.createElement("canvas");b.width=64,b.height=64;const S=b.getContext("2d");return S.beginPath(),S.arc(32,32,16,0,2*Math.PI),S.closePath(),S.fillStyle=i,S.fill(),r&&(S.font=e,S.textAlign="center",S.fillStyle=a,S.fillText(r,32,41)),new HB(b)},[i,r,a,e]),[p,d]=F.useState(!1),m=(r?1:.75)*(p?1.2:1)*s,v=b=>{b.stopPropagation(),d(!0)},_=b=>{b.stopPropagation(),d(!1)};return F.createElement("sprite",ps({scale:m,onPointerOver:t?void 0:v,onPointerOut:t?void 0:n||_},o),F.createElement("spriteMaterial",{map:f,"map-anisotropy":c.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1}))}const cie=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:a=1,axisScale:s,labels:o=["X","Y","Z"],labelColor:c="#000",onClick:f,...p})=>{const[d,m,v]=r,{tweenCamera:_}=aie(),b={font:i,disabled:t,labelColor:c,onClick:f,axisHeadScale:a,onPointerDown:t?void 0:S=>{_(S.object.position),S.stopPropagation()}};return F.createElement("group",ps({scale:40},p),F.createElement(MA,{color:d,rotation:[0,0,0],scale:s}),F.createElement(MA,{color:m,rotation:[0,0,Math.PI/2],scale:s}),F.createElement(MA,{color:v,rotation:[0,-Math.PI/2,0],scale:s}),!e&&F.createElement(F.Fragment,null,F.createElement(cg,ps({arcStyle:d,position:[1,0,0],label:o[0]},b)),F.createElement(cg,ps({arcStyle:m,position:[0,1,0],label:o[1]},b)),F.createElement(cg,ps({arcStyle:v,position:[0,0,1],label:o[2]},b)),!n&&F.createElement(F.Fragment,null,F.createElement(cg,ps({arcStyle:d,position:[-1,0,0]},b)),F.createElement(cg,ps({arcStyle:m,position:[0,-1,0]},b)),F.createElement(cg,ps({arcStyle:v,position:[0,0,-1]},b)))))};class J2 extends Error{constructor(e){super(On("common:actions.actions-hub.errors.action-not-registered",{action:e})),this.name=J2.name}}class uie{registeredActions;constructor(){this.registeredActions={}}perform(e,t={}){if(!this.isActionRegistered(e))throw new J2(e.toString());return this.registeredActions[e](t)}register(e,t){this.isActionRegistered(e)||(this.registeredActions[e]=t)}isActionRegistered(e){return e in this.registeredActions}unregister(e){if(!this.isActionRegistered(e))return;const{[e]:t,...i}=this.registeredActions;this.registeredActions=i}}class fie{eventListeners;eventStates;nextEventID;constructor(){this.eventListeners={},this.eventStates={},this.nextEventID=0}addEventListener(e,t,i=0){e in this.eventListeners||(this.eventListeners[e]=[]),this.eventStates[e]={stop:!1};const r=this.eventListeners[e].findIndex(s=>s.priority<i),a={id:this.nextEventID,listener:t,priority:i};return!this.eventListeners[e].length||r===-1?this.eventListeners[e].push(a):this.eventListeners[e].splice(r,0,a),{name:e,id:this.nextEventID++}}removeEventListener({name:e,id:t}){if(!(e in this.eventListeners))return;const i=this.eventListeners[e].findIndex(r=>r.id===t);i!==-1&&this.eventListeners[e].splice(i,1)}emit(e,t){if(!(!(e in this.eventListeners)||!this.eventListeners[e].length))for(const i of this.eventListeners[e]){if(this.eventStates[e].stop){this.eventStates[e].stop=!1;return}i.listener({value:t,stopPropagation:()=>{this.eventStates[e].stop=!0}})}}}function die(n){return{actionsHub:new uie,canvasHTML:n,cursor:{intersections:[],nearest:void 0,position:new ve(0,0)},eventsHub:new fie,map:{nodes:{},pathTriggers:{},paths:{},pickupAreas:{},robotLines:{},sideData:void 0,stations:{}},snapshot:void 0,world:{current:void 0}}}const jk=die(null),wd=F.createContext(jk);var hie=F.useLayoutEffect;function pie(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function mie(){const n=pie();if(n.__xstate__)return n.__xstate__}const gie=n=>{if(typeof window>"u")return;const e=mie();e&&e.register(n)};class m3{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Vk=".",vie="",Gk="",yie="#",_ie="*",Yk="xstate.init",WC="xstate.stop";function bie(n,e){return{type:`xstate.after.${n}.${e}`}}function ZC(n,e){return{type:`xstate.done.state.${n}`,output:e}}function xie(n,e){return{type:`xstate.done.actor.${n}`,output:e,actorId:n}}function Sie(n,e){return{type:`xstate.error.actor.${n}`,error:e,actorId:n}}function Wk(n){return{type:Yk,input:n}}function Tc(n){setTimeout(()=>{throw n})}const Eie=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zk(n,e){const t=g3(n),i=g3(e);return typeof i=="string"?typeof t=="string"?i===t:!1:typeof t=="string"?t in i:Object.keys(t).every(r=>r in i?Zk(t[r],i[r]):!1)}function eO(n){if(qk(n))return n;const e=[];let t="";for(let i=0;i<n.length;i++){switch(n.charCodeAt(i)){case 92:t+=n[i+1],i++;continue;case 46:e.push(t),t="";continue}t+=n[i]}return e.push(t),e}function g3(n){if(ire(n))return n.value;if(typeof n!="string")return n;const e=eO(n);return wie(e)}function wie(n){if(n.length===1)return n[0];const e={};let t=e;for(let i=0;i<n.length-1;i++)if(i===n.length-2)t[n[i]]=n[i+1];else{const r=t;t={},r[n[i]]=t}return e}function v3(n,e){const t={},i=Object.keys(n);for(let r=0;r<i.length;r++){const a=i[r];t[a]=e(n[a],a,n,r)}return t}function Xk(n){return qk(n)?n:[n]}function od(n){return n===void 0?[]:Xk(n)}function XC(n,e,t,i){return typeof n=="function"?n({context:e,event:t,self:i}):n}function qk(n){return Array.isArray(n)}function Tie(n){return n.type.startsWith("xstate.error.actor")}function mg(n){return Xk(n).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function Kk(n){if(!(n===void 0||n===vie))return od(n)}function $E(n,e,t){const i=typeof n=="object",r=i?n:void 0;return{next:(i?n.next:n)?.bind(r),error:(i?n.error:e)?.bind(r),complete:(i?n.complete:t)?.bind(r)}}function y3(n,e){return`${e}.${n}`}function tO(n,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return n.implementations.actors[e];const[,i,r]=t,s=n.getStateNodeById(r).config.invoke;return(Array.isArray(s)?s[i]:s).src}function _3(n,e){return`${n.sessionId}.${e}`}let Mie=0;function Aie(n,e){const t=new Map,i=new Map,r=new WeakMap,a=new Set,s={},{clock:o,logger:c}=e,f={schedule:(m,v,_,b,S=Math.random().toString(36).slice(2))=>{const x={source:m,target:v,event:_,delay:b,id:S,startedAt:Date.now()},T=_3(m,S);d._snapshot._scheduledEvents[T]=x;const M=o.setTimeout(()=>{delete s[T],delete d._snapshot._scheduledEvents[T],d._relay(m,v,_)},b);s[T]=M},cancel:(m,v)=>{const _=_3(m,v),b=s[_];delete s[_],delete d._snapshot._scheduledEvents[_],b!==void 0&&o.clearTimeout(b)},cancelAll:m=>{for(const v in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[v];_.source===m&&f.cancel(m,_.id)}}},p=m=>{if(!a.size)return;const v={...m,rootId:n.sessionId};a.forEach(_=>_.next?.(v))},d={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${Mie++}`,_register:(m,v)=>(t.set(m,v),m),_unregister:m=>{t.delete(m.sessionId);const v=r.get(m);v!==void 0&&(i.delete(v),r.delete(m))},get:m=>i.get(m),_set:(m,v)=>{const _=i.get(m);if(_&&_!==v)throw new Error(`Actor with system ID '${m}' already exists.`);i.set(m,v),r.set(v,m)},inspect:m=>{const v=$E(m);return a.add(v),{unsubscribe(){a.delete(v)}}},_sendInspectionEvent:p,_relay:(m,v,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:m,actorRef:v,event:_}),v._send(_)},scheduler:f,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const m=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const v in m){const{source:_,target:b,event:S,delay:x,id:T}=m[v];f.schedule(_,b,S,x,T)}},_clock:o,_logger:c};return d}let AA=!1;const nO=1;let js=(function(n){return n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped",n})({});const Cie={clock:{setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n)},logger:console.log.bind(console),devTools:!1};class Rie{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new m3(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=js.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={...Cie,...t},{clock:r,logger:a,parent:s,syncSnapshot:o,id:c,systemId:f,inspect:p}=i;this.system=s?s.system:Aie(this,{clock:r,logger:a}),p&&!s&&this.system.inspect($E(p)),this.sessionId=this.system._bookId(),this.id=c??this.sessionId,this.logger=t?.logger??this.system._logger,this.clock=t?.clock??this.system._clock,this._parent=s,this._syncSnapshot=o,this.options=i,this.src=i.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const m=this.eventListeners.get(d.type),v=this.eventListeners.get("*");if(!m&&!v)return;const _=[...m?m.values():[],...v?v.values():[]];for(const b of _)try{b(d)}catch(S){Tc(S)}},actionExecutor:d=>{const m=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:d.type,params:d.params}}),!d.exec)return;const v=AA;try{AA=!0,d.exec(d.info,d.params)}finally{AA=v}};this._processingStatus===js.Running?m():this._deferred.push(m)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),f&&(this._systemId=f,this.system._set(f,this)),this._initState(t?.snapshot??t?.state),f&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(t){this._snapshot={status:"error",output:void 0,error:t}}}update(e,t){this._snapshot=e;let i;for(;i=this._deferred.shift();)try{i()}catch(r){this._deferred.length=0,this._snapshot={...e,status:"error",error:r}}switch(this._snapshot.status){case"active":for(const r of this.observers)try{r.next?.(e)}catch(a){Tc(a)}break;case"done":for(const r of this.observers)try{r.next?.(e)}catch(a){Tc(a)}this._stopProcedure(),this._complete(),this._doneEvent=xie(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,i){const r=$E(e,t,i);if(this._processingStatus!==js.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(a){Tc(a)}break;case"error":{const a=this._snapshot.error;if(!r.error)Tc(a);else try{r.error(a)}catch(s){Tc(s)}break}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(e,t){let i=this.eventListeners.get(e);i||(i=new Set,this.eventListeners.set(e,i));const r=t.bind(void 0);return i.add(r),{unsubscribe:()=>{i.delete(r)}}}start(){if(this._processingStatus===js.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{i.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=js.Running;const e=Wk(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,i;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(r){i={err:r}}if(i){const{err:r}=i;this._snapshot={...this._snapshot,status:"error",error:r},this._error(r);return}this.update(t,e),e.type===WC&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===js.Stopped?this:(this.mailbox.clear(),this._processingStatus===js.NotStarted?(this._processingStatus=js.Stopped,this):(this.mailbox.enqueue({type:WC}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const e of this.observers)try{e.complete?.()}catch(t){Tc(t)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Tc(e);return}let t=!1;for(const i of this.observers){const r=i.error;t||=!r;try{r?.(e)}catch(a){Tc(a)}}this.observers.clear(),t&&Tc(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Sie(this.id,e))}_stopProcedure(){return this._processingStatus!==js.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new m3(this._process.bind(this)),this._processingStatus=js.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==js.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:gie)(this)}toJSON(){return{xstate$$type:nO,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[Eie](){return this}getSnapshot(){return this._snapshot}}function Wg(n,...[e]){return new Rie(n,e)}function Oie(n,e,t,i,{sendId:r}){const a=typeof r=="function"?r(t,i):r;return[e,{sendId:a},void 0]}function Die(n,e){n.defer(()=>{n.system.scheduler.cancel(n.self,e.sendId)})}function Nie(n){function e(t,i){}return e.type="xstate.cancel",e.sendId=n,e.resolve=Oie,e.execute=Die,e}function Lie(n,e,t,i,{id:r,systemId:a,src:s,input:o,syncSnapshot:c}){const f=typeof s=="string"?tO(e.machine,s):s,p=typeof r=="function"?r(t):r;let d,m;return f&&(m=typeof o=="function"?o({context:e.context,event:t.event,self:n.self}):o,d=Wg(f,{id:p,src:s,parent:n.self,syncSnapshot:c,systemId:a,input:m})),[cp(e,{children:{...e.children,[p]:d}}),{id:r,systemId:a,actorRef:d,src:s,input:m},void 0]}function Iie(n,{actorRef:e}){e&&n.defer(()=>{e._processingStatus!==js.Stopped&&e.start()})}function Uie(...[n,{id:e,systemId:t,input:i,syncSnapshot:r=!1}={}]){function a(s,o){}return a.type="xstate.spawnChild",a.id=e,a.systemId=t,a.src=n,a.input=i,a.syncSnapshot=r,a.resolve=Lie,a.execute=Iie,a}function Pie(n,e,t,i,{actorRef:r}){const a=typeof r=="function"?r(t,i):r,s=typeof a=="string"?e.children[a]:a;let o=e.children;return s&&(o={...o},delete o[s.id]),[cp(e,{children:o}),s,void 0]}function zie(n,e){if(e){if(n.system._unregister(e),e._processingStatus!==js.Running){n.stopChild(e);return}n.defer(()=>{n.stopChild(e)})}}function $k(n){function e(t,i){}return e.type="xstate.stopChild",e.actorRef=n,e.resolve=Pie,e.execute=zie,e}function iO(n,e,t,i){const{machine:r}=i,a=typeof n=="function",s=a?n:r.implementations.guards[typeof n=="string"?n:n.type];if(!a&&!s)throw new Error(`Guard '${typeof n=="string"?n:n.type}' is not implemented.'.`);if(typeof s!="function")return iO(s,e,t,i);const o={context:e,event:t},c=a||typeof n=="string"?void 0:"params"in n?typeof n.params=="function"?n.params({context:e,event:t}):n.params:void 0;return"check"in s?s.check(i,o,s):s(o,c)}const rO=n=>n.type==="atomic"||n.type==="final";function Zg(n){return Object.values(n.states).filter(e=>e.type!=="history")}function R_(n,e){const t=[];if(e===n)return t;let i=n.parent;for(;i&&i!==e;)t.push(i),i=i.parent;return t}function QE(n){const e=new Set(n),t=Jk(e);for(const i of e)if(i.type==="compound"&&(!t.get(i)||!t.get(i).length))b3(i).forEach(r=>e.add(r));else if(i.type==="parallel"){for(const r of Zg(i))if(r.type!=="history"&&!e.has(r)){const a=b3(r);for(const s of a)e.add(s)}}for(const i of e){let r=i.parent;for(;r;)e.add(r),r=r.parent}return e}function Qk(n,e){const t=e.get(n);if(!t)return{};if(n.type==="compound"){const r=t[0];if(r){if(rO(r))return r.key}else return{}}const i={};for(const r of t)i[r.key]=Qk(r,e);return i}function Jk(n){const e=new Map;for(const t of n)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function eF(n,e){const t=QE(e);return Qk(n,Jk(t))}function aO(n,e){return e.type==="compound"?Zg(e).some(t=>t.type==="final"&&n.has(t)):e.type==="parallel"?Zg(e).every(t=>aO(n,t)):e.type==="final"}const xw=n=>n[0]===yie;function Bie(n,e){return n.transitions.get(e)||[...n.transitions.keys()].filter(i=>{if(i===_ie)return!0;if(!i.endsWith(".*"))return!1;const r=i.split("."),a=e.split(".");for(let s=0;s<r.length;s++){const o=r[s],c=a[s];if(o==="*")return s===r.length-1;if(o!==c)return!1}return!0}).sort((i,r)=>r.length-i.length).flatMap(i=>n.transitions.get(i))}function kie(n){const e=n.config.after;if(!e)return[];const t=r=>{const a=bie(r,n.id),s=a.type;return n.entry.push(hre(a,{id:s,delay:r})),n.exit.push(Nie(s)),s};return Object.keys(e).flatMap(r=>{const a=e[r],s=typeof a=="string"?{target:a}:a,o=Number.isNaN(+r)?r:+r,c=t(o);return od(s).map(f=>({...f,event:c,delay:o}))}).map(r=>{const{delay:a}=r;return{...Vh(n,r.event,r),delay:a}})}function Vh(n,e,t){const i=Kk(t.target),r=t.reenter??!1,a=jie(n,i),s={...t,actions:od(t.actions),guard:t.guard,target:a,source:n,reenter:r,eventType:e,toJSON:()=>({...s,source:`#${n.id}`,target:a?a.map(o=>`#${o.id}`):void 0})};return s}function Fie(n){const e=new Map;if(n.config.on)for(const t of Object.keys(n.config.on)){if(t===Gk)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const i=n.config.on[t];e.set(t,mg(i).map(r=>Vh(n,t,r)))}if(n.config.onDone){const t=`xstate.done.state.${n.id}`;e.set(t,mg(n.config.onDone).map(i=>Vh(n,t,i)))}for(const t of n.invoke){if(t.onDone){const i=`xstate.done.actor.${t.id}`;e.set(i,mg(t.onDone).map(r=>Vh(n,i,r)))}if(t.onError){const i=`xstate.error.actor.${t.id}`;e.set(i,mg(t.onError).map(r=>Vh(n,i,r)))}if(t.onSnapshot){const i=`xstate.snapshot.${t.id}`;e.set(i,mg(t.onSnapshot).map(r=>Vh(n,i,r)))}}for(const t of n.after){let i=e.get(t.eventType);i||(i=[],e.set(t.eventType,i)),i.push(t)}return e}function Hie(n,e){const t=typeof e=="string"?n.states[e]:e?n.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${n.id}`);const i={source:n,actions:!e||typeof e=="string"?[]:od(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...i,source:`#${n.id}`,target:t?[`#${t.id}`]:[]})};return i}function jie(n,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(xw(t))return n.machine.getStateNodeById(t);const i=t[0]===Vk;if(i&&!n.parent)return JE(n,t.slice(1));const r=i?n.key+t:t;if(n.parent)try{return JE(n.parent,r)}catch(a){throw new Error(`Invalid transition definition for state node '${n.id}':
${a.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function tF(n){const e=Kk(n.config.target);return e?{target:e.map(t=>typeof t=="string"?JE(n.parent,t):t)}:n.parent.initial}function Xh(n){return n.type==="history"}function b3(n){const e=nF(n);for(const t of e)for(const i of R_(t,n))e.add(i);return e}function nF(n){const e=new Set;function t(i){if(!e.has(i)){if(e.add(i),i.type==="compound")t(i.initial.target[0]);else if(i.type==="parallel")for(const r of Zg(i))t(r)}}return t(n),e}function Xg(n,e){if(xw(e))return n.machine.getStateNodeById(e);if(!n.states)throw new Error(`Unable to retrieve child state '${e}' from '${n.id}'; no child states exist.`);const t=n.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${n.id}'`);return t}function JE(n,e){if(typeof e=="string"&&xw(e))try{return n.machine.getStateNodeById(e)}catch{}const t=eO(e).slice();let i=n;for(;t.length;){const r=t.shift();if(!r.length)break;i=Xg(i,r)}return i}function e1(n,e){if(typeof e=="string"){const r=n.states[e];if(!r)throw new Error(`State '${e}' does not exist on '${n.id}'`);return[n,r]}const t=Object.keys(e),i=t.map(r=>Xg(n,r)).filter(Boolean);return[n.machine.root,n].concat(i,t.reduce((r,a)=>{const s=Xg(n,a);if(!s)return r;const o=e1(s,e[a]);return r.concat(o)},[]))}function Vie(n,e,t,i){const a=Xg(n,e).next(t,i);return!a||!a.length?n.next(t,i):a}function Gie(n,e,t,i){const r=Object.keys(e),a=Xg(n,r[0]),s=sO(a,e[r[0]],t,i);return!s||!s.length?n.next(t,i):s}function Yie(n,e,t,i){const r=[];for(const a of Object.keys(e)){const s=e[a];if(!s)continue;const o=Xg(n,a),c=sO(o,s,t,i);c&&r.push(...c)}return r.length?r:n.next(t,i)}function sO(n,e,t,i){return typeof e=="string"?Vie(n,e,t,i):Object.keys(e).length===1?Gie(n,e,t,i):Yie(n,e,t,i)}function Wie(n){return Object.keys(n.states).map(e=>n.states[e]).filter(e=>e.type==="history")}function _d(n,e){let t=n;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function Zie(n,e){const t=new Set(n),i=new Set(e);for(const r of t)if(i.has(r))return!0;for(const r of i)if(t.has(r))return!0;return!1}function iF(n,e,t){const i=new Set;for(const r of n){let a=!1;const s=new Set;for(const o of i)if(Zie(qC([r],e,t),qC([o],e,t)))if(_d(r.source,o.source))s.add(o);else{a=!0;break}if(!a){for(const o of s)i.delete(o);i.add(r)}}return Array.from(i)}function Xie(n){const[e,...t]=n;for(const i of R_(e,void 0))if(t.every(r=>_d(r,i)))return i}function oO(n,e){if(!n.target)return[];const t=new Set;for(const i of n.target)if(Xh(i))if(e[i.id])for(const r of e[i.id])t.add(r);else for(const r of oO(tF(i),e))t.add(r);else t.add(i);return[...t]}function rF(n,e){const t=oO(n,e);if(!t)return;if(!n.reenter&&t.every(r=>r===n.source||_d(r,n.source)))return n.source;const i=Xie(t.concat(n.source));if(i)return i;if(!n.reenter)return n.source.machine.root}function qC(n,e,t){const i=new Set;for(const r of n)if(r.target?.length){const a=rF(r,t);r.reenter&&r.source===a&&i.add(a);for(const s of e)_d(s,a)&&i.add(s)}return[...i]}function qie(n,e){if(n.length!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function KC(n,e,t,i,r,a){if(!n.length)return e;const s=new Set(e._nodes);let o=e.historyValue;const c=iF(n,s,o);let f=e;r||([f,o]=Jie(f,i,t,c,s,o,a,t.actionExecutor)),f=qg(f,i,t,c.flatMap(d=>d.actions),a,void 0),f=$ie(f,i,t,c,s,a,o,r);const p=[...s];f.status==="done"&&(f=qg(f,i,t,p.sort((d,m)=>m.order-d.order).flatMap(d=>d.exit),a,void 0));try{return o===e.historyValue&&qie(e._nodes,s)?f:cp(f,{_nodes:p,historyValue:o})}catch(d){throw d}}function Kie(n,e,t,i,r){if(i.output===void 0)return;const a=ZC(r.id,r.output!==void 0&&r.parent?XC(r.output,n.context,e,t.self):void 0);return XC(i.output,n.context,a,t.self)}function $ie(n,e,t,i,r,a,s,o){let c=n;const f=new Set,p=new Set;Qie(i,s,p,f),o&&p.add(n.machine.root);const d=new Set;for(const m of[...f].sort((v,_)=>v.order-_.order)){r.add(m);const v=[];v.push(...m.entry);for(const _ of m.invoke)v.push(Uie(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(p.has(m)){const _=m.initial.actions;v.push(..._)}if(c=qg(c,e,t,v,a,m.invoke.map(_=>_.id)),m.type==="final"){const _=m.parent;let b=_?.type==="parallel"?_:_?.parent,S=b||m;for(_?.type==="compound"&&a.push(ZC(_.id,m.output!==void 0?XC(m.output,c.context,e,t.self):void 0));b?.type==="parallel"&&!d.has(b)&&aO(r,b);)d.add(b),a.push(ZC(b.id)),S=b,b=b.parent;if(b)continue;c=cp(c,{status:"done",output:Kie(c,e,t,c.machine.root,S)})}}return c}function Qie(n,e,t,i){for(const r of n){const a=rF(r,e);for(const o of r.target||[])!Xh(o)&&(r.source!==o||r.source!==a||r.reenter)&&(i.add(o),t.add(o)),xg(o,e,t,i);const s=oO(r,e);for(const o of s){const c=R_(o,a);a?.type==="parallel"&&c.push(a),aF(i,e,t,c,!r.source.parent&&r.reenter?void 0:a)}}}function xg(n,e,t,i){if(Xh(n))if(e[n.id]){const r=e[n.id];for(const a of r)i.add(a),xg(a,e,t,i);for(const a of r)CA(a,n.parent,i,e,t)}else{const r=tF(n);for(const a of r.target)i.add(a),r===n.parent?.initial&&t.add(n.parent),xg(a,e,t,i);for(const a of r.target)CA(a,n.parent,i,e,t)}else if(n.type==="compound"){const[r]=n.initial.target;Xh(r)||(i.add(r),t.add(r)),xg(r,e,t,i),CA(r,n,i,e,t)}else if(n.type==="parallel")for(const r of Zg(n).filter(a=>!Xh(a)))[...i].some(a=>_d(a,r))||(Xh(r)||(i.add(r),t.add(r)),xg(r,e,t,i))}function aF(n,e,t,i,r){for(const a of i)if((!r||_d(a,r))&&n.add(a),a.type==="parallel")for(const s of Zg(a).filter(o=>!Xh(o)))[...n].some(o=>_d(o,s))||(n.add(s),xg(s,e,t,n))}function CA(n,e,t,i,r){aF(t,i,r,R_(n,e))}function Jie(n,e,t,i,r,a,s,o){let c=n;const f=qC(i,r,a);f.sort((d,m)=>m.order-d.order);let p;for(const d of f)for(const m of Wie(d)){let v;m.history==="deep"?v=_=>rO(_)&&_d(_,d):v=_=>_.parent===d,p??={...a},p[m.id]=Array.from(r).filter(v)}for(const d of f)c=qg(c,e,t,[...d.exit,...d.invoke.map(m=>$k(m.id))],s,void 0),r.delete(d);return[c,p||a]}function ere(n,e){return n.implementations.actions[e]}function sF(n,e,t,i,r,a){const{machine:s}=n;let o=n;for(const c of i){const f=typeof c=="function",p=f?c:ere(s,typeof c=="string"?c:c.type),d={context:o.context,event:e,self:t.self,system:t.system},m=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:o.context,event:e}):c.params:void 0;if(!p||!("resolve"in p)){t.actionExecutor({type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",info:d,params:m,exec:p});continue}const v=p,[_,b,S]=v.resolve(t,o,d,m,p,r);o=_,"retryResolve"in v&&a?.push([v,b]),"execute"in v&&t.actionExecutor({type:v.type,info:d,params:b,exec:v.execute.bind(null,t,b)}),S&&(o=sF(o,e,t,S,r,a))}return o}function qg(n,e,t,i,r,a){const s=a?[]:void 0,o=sF(n,e,t,i,{internalQueue:r,deferredActorIds:a},s);return s?.forEach(([c,f])=>{c.retryResolve(t,o,f)}),o}function RA(n,e,t,i){let r=n;const a=[];function s(f,p,d){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:p,snapshot:f,_transitions:d}),a.push(f)}if(e.type===WC)return r=cp(x3(r,e,t),{status:"stopped"}),s(r,e,[]),{snapshot:r,microstates:a};let o=e;if(o.type!==Yk){const f=o,p=Tie(f),d=S3(f,r);if(p&&!d.length)return r=cp(n,{status:"error",error:f.error}),s(r,f,[]),{snapshot:r,microstates:a};r=KC(d,n,t,o,!1,i),s(r,f,d)}let c=!0;for(;r.status==="active";){let f=c?tre(r,o):[];const p=f.length?r:void 0;if(!f.length){if(!i.length)break;o=i.shift(),f=S3(o,r)}r=KC(f,r,t,o,!1,i),c=r!==p,s(r,o,f)}return r.status!=="active"&&x3(r,o,t),{snapshot:r,microstates:a}}function x3(n,e,t){return qg(n,e,t,Object.values(n.children).map(i=>$k(i)),[],void 0)}function S3(n,e){return e.machine.getTransitionData(e,n)}function tre(n,e){const t=new Set,i=n._nodes.filter(rO);for(const r of i)e:for(const a of[r].concat(R_(r,void 0)))if(a.always){for(const s of a.always)if(s.guard===void 0||iO(s.guard,n.context,e,n)){t.add(s);break e}}return iF(Array.from(t),new Set(n._nodes),n.historyValue)}function nre(n,e){const t=QE(e1(n,e));return eF(n,[...t])}function ire(n){return!!n&&typeof n=="object"&&"machine"in n&&"value"in n}const rre=function(e){return Zk(e,this.value)},are=function(e){return this.tags.has(e)},sre=function(e){const t=this.machine.getTransitionData(this,e);return!!t?.length&&t.some(i=>i.target!==void 0||i.actions.length)},ore=function(){const{_nodes:e,tags:t,machine:i,getMeta:r,toJSON:a,can:s,hasTag:o,matches:c,...f}=this;return{...f,tags:Array.from(t)}},lre=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function VS(n,e){return{status:n.status,output:n.output,error:n.error,machine:e,context:n.context,_nodes:n._nodes,value:eF(e.root,n._nodes),tags:new Set(n._nodes.flatMap(t=>t.tags)),children:n.children,historyValue:n.historyValue||{},matches:rre,hasTag:are,can:sre,getMeta:lre,toJSON:ore}}function cp(n,e={}){return VS({...n,...e},n.machine)}function cre(n){if(typeof n!="object"||n===null)return{};const e={};for(const t in n){const i=n[t];Array.isArray(i)&&(e[t]=i.map(r=>({id:r.id})))}return e}function ure(n,e){const{_nodes:t,tags:i,machine:r,children:a,context:s,can:o,hasTag:c,matches:f,getMeta:p,toJSON:d,...m}=n,v={};for(const b in a){const S=a[b];v[b]={snapshot:S.getPersistedSnapshot(e),src:S.src,systemId:S._systemId,syncSnapshot:S._syncSnapshot}}return{...m,context:oF(s),children:v,historyValue:cre(m.historyValue)}}function oF(n){let e;for(const t in n){const i=n[t];if(i&&typeof i=="object")if("sessionId"in i&&"send"in i&&"ref"in i)e??=Array.isArray(n)?n.slice():{...n},e[t]={xstate$$type:nO,id:i.id};else{const r=oF(i);r!==i&&(e??=Array.isArray(n)?n.slice():{...n},e[t]=r)}}return e??n}function fre(n,e,t,i,{event:r,id:a,delay:s},{internalQueue:o}){const c=e.machine.implementations.delays;if(typeof r=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${r}" }) instead`);const f=typeof r=="function"?r(t,i):r;let p;if(typeof s=="string"){const d=c&&c[s];p=typeof d=="function"?d(t,i):d}else p=typeof s=="function"?s(t,i):s;return typeof p!="number"&&o.push(f),[e,{event:f,id:a,delay:p},void 0]}function dre(n,e){const{event:t,delay:i,id:r}=e;if(typeof i=="number"){n.defer(()=>{const a=n.self;n.system.scheduler.schedule(a,a,t,i,r)});return}}function hre(n,e){function t(i,r){}return t.type="xstate.raise",t.event=n,t.id=e?.id,t.delay=e?.delay,t.resolve=fre,t.execute=dre,t}function pre(n,{machine:e,context:t},i,r){const a=(s,o)=>{if(typeof s=="string"){const c=tO(e,s);if(!c)throw new Error(`Actor logic '${s}' not implemented in machine '${e.id}'`);const f=Wg(c,{id:o?.id,parent:n.self,syncSnapshot:o?.syncSnapshot,input:typeof o?.input=="function"?o.input({context:t,event:i,self:n.self}):o?.input,src:s,systemId:o?.systemId});return r[f.id]=f,f}else return Wg(s,{id:o?.id,parent:n.self,syncSnapshot:o?.syncSnapshot,input:o?.input,src:s,systemId:o?.systemId})};return(s,o)=>{const c=a(s,o);return r[c.id]=c,n.defer(()=>{c._processingStatus!==js.Stopped&&c.start()}),c}}function mre(n,e,t,i,{assignment:r}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const a={},s={context:e.context,event:t.event,spawn:pre(n,e,t.event,a),self:n.self,system:n.system};let o={};if(typeof r=="function")o=r(s,i);else for(const f of Object.keys(r)){const p=r[f];o[f]=typeof p=="function"?p(s,i):p}const c=Object.assign({},e.context,o);return[cp(e,{context:c,children:Object.keys(a).length?{...e.children,...a}:e.children}),void 0,void 0]}function gre(n){function e(t,i){}return e.type="xstate.assign",e.assignment=n,e.resolve=mre,e}const E3=new WeakMap;function ug(n,e,t){let i=E3.get(n);return i?e in i||(i[e]=t()):(i={[e]:t()},E3.set(n,i)),i[e]}const vre={},e0=n=>typeof n=="string"?{type:n}:typeof n=="function"?"resolve"in n?{type:n.type}:{type:n.name}:n;class t1{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Vk),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?v3(this.config.states,(i,r)=>new t1(i,{_parent:this,_key:r,_machine:this.machine})):vre,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=od(this.config.entry).slice(),this.exit=od(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=od(e.tags).slice()}_initialize(){this.transitions=Fie(this),this.config.always&&(this.always=mg(this.config.always).map(e=>Vh(this,Gk,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(e0),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(e0),eventType:null})}:void 0,history:this.history,states:v3(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(e0)})),entry:this.entry.map(e0),exit:this.exit.map(e0),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return ug(this,"invoke",()=>od(this.config.invoke).map((e,t)=>{const{src:i,systemId:r}=e,a=e.id??y3(this.id,t),s=typeof i=="string"?i:`xstate.invoke.${y3(this.id,t)}`;return{...e,src:s,id:a,systemId:r,toJSON(){const{onDone:o,onError:c,...f}=e;return{...f,type:"xstate.invoke",src:s,id:a}}}}))}get on(){return ug(this,"on",()=>[...this.transitions].flatMap(([t,i])=>i.map(r=>[t,r])).reduce((t,[i,r])=>(t[i]=t[i]||[],t[i].push(r),t),{}))}get after(){return ug(this,"delayedTransitions",()=>kie(this))}get initial(){return ug(this,"initial",()=>Hie(this,this.config.initial))}next(e,t){const i=t.type,r=[];let a;const s=ug(this,`candidates-${i}`,()=>Bie(this,i));for(const o of s){const{guard:c}=o,f=e.context;let p=!1;try{p=!c||iO(c,f,t,e)}catch(d){const m=typeof c=="string"?c:typeof c=="object"?c.type:void 0;throw new Error(`Unable to evaluate guard ${m?`'${m}' `:""}in transition for event '${i}' in state node '${this.id}':
${d.message}`)}if(p){r.push(...o.actions),a=o;break}}return a?[a]:void 0}get events(){return ug(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const i of Object.keys(e)){const r=e[i];if(r.states)for(const a of r.events)t.add(`${a}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(e)}}const yre="#";class lO{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:t?.actors??{},actions:t?.actions??{},delays:t?.delays??{},guards:t?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new t1(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:i,actors:r,delays:a}=this.implementations;return new lO(this.config,{actions:{...t,...e.actions},guards:{...i,...e.guards},actors:{...r,...e.actors},delays:{...a,...e.delays}})}resolveState(e){const t=nre(this.root,e.value),i=QE(e1(this.root,t));return VS({_nodes:[...i],context:e.context||{},children:{},status:aO(i,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,i){return RA(e,t,i,[]).snapshot}microstep(e,t,i){return RA(e,t,i,[]).microstates}getTransitionData(e,t){return sO(this.root,e.value,e,t)||[]}getPreInitialState(e,t,i){const{context:r}=this.config,a=VS({context:typeof r!="function"&&r?r:{},_nodes:[this.root],children:{},status:"active"},this);return typeof r=="function"?qg(a,t,e,[gre(({spawn:o,event:c,self:f})=>r({spawn:o,input:c.input,self:f}))],i,void 0):a}getInitialSnapshot(e,t){const i=Wk(t),r=[],a=this.getPreInitialState(e,i,r),s=KC([{target:[...nF(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],a,e,i,!0,r),{snapshot:o}=RA(s,i,e,r);return o}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=eO(e),i=t.slice(1),r=xw(t[0])?t[0].slice(yre.length):t[0],a=this.idMap.get(r);if(!a)throw new Error(`Child state node '#${r}' does not exist on machine '${this.id}'`);return JE(a,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return ure(e,t)}restoreSnapshot(e,t){const i={},r=e.children;Object.keys(r).forEach(d=>{const m=r[d],v=m.snapshot,_=m.src,b=typeof _=="string"?tO(this,_):_;if(!b)return;const S=Wg(b,{id:d,parent:t.self,syncSnapshot:m.syncSnapshot,snapshot:v,src:_,systemId:m.systemId});i[d]=S});function a(d,m){if(m instanceof t1)return m;try{return d.machine.getStateNodeById(m.id)}catch{}}function s(d,m){if(!m||typeof m!="object")return{};const v={};for(const _ in m){const b=m[_];for(const S of b){const x=a(d,S);x&&(v[_]??=[],v[_].push(x))}}return v}const o=s(this.root,e.historyValue),c=VS({...e,children:i,_nodes:Array.from(QE(e1(this.root,e.value))),historyValue:o},this),f=new Set;function p(d,m){if(!f.has(d)){f.add(d);for(const v in d){const _=d[v];if(_&&typeof _=="object"){if("xstate$$type"in _&&_.xstate$$type===nO){d[v]=m[_.id];continue}p(_,m)}}}}return p(c.context,i),c}}function _re(n,e){return new lO(n,e)}function bre({schemas:n,actors:e,actions:t,guards:i,delays:r}){return{createStateConfig:a=>a,createMachine:a=>_re({...a,schemas:n},{actors:e,actions:t,guards:i,delays:r})}}const lF=(n,e)=>{e(n);const t=n.getSnapshot().children;t&&Object.values(t).forEach(i=>{lF(i,e)})};function xre(n){const e=[];lF(n,i=>{e.push([i,i.getSnapshot()]),i.observers=new Set});const t=n.system.getSnapshot?.();n.stop(),n.system._snapshot=t,e.forEach(([i,r])=>{i._processingStatus=0,i._snapshot=r})}function Sre(n,...[e]){let[[t,i],r]=F.useState(()=>{const a=Wg(n,e);return[n.config,a]});if(n.config!==t){const a=Wg(n,{...e,snapshot:i.getPersistedSnapshot({__unsafeAllowInlineActors:!0})});r([n.config,a]),i=a}return hie(()=>{i.logic.implementations=n.implementations}),i}function Ere(n,...[e,t]){const i=Sre(n,e);return F.useEffect(()=>{if(!t)return;const r=i.subscribe($E(t));return()=>{r.unsubscribe()}},[t]),F.useEffect(()=>(i.start(),()=>{xre(i)}),[i]),i}function wre(n,e){return n===e}function Sw(n,e,t=wre){const i=F.useCallback(s=>{if(!n)return()=>{};const{unsubscribe:o}=n.subscribe(s);return o},[n]),r=F.useCallback(()=>n?.getSnapshot(),[n]);return mk.useSyncExternalStoreWithSelector(i,r,r,e,t)}function Tre(n,e){const t=F.createContext(null),i=t.Provider;function r({children:o,logic:c=n,machine:f,options:p}){if(f)throw new Error('The "machine" prop has been deprecated. Please use "logic" instead.');const d=Ere(c,{...e,...p});return F.createElement(i,{value:d,children:o})}r.displayName="ActorProvider";function a(){const o=F.useContext(t);if(!o)throw new Error(`You used a hook from "${r.displayName}" but it's not inside a <${r.displayName}> component.`);return o}function s(o,c){const f=a();return Sw(f,o,c)}return{Provider:r,useActorRef:a,useSelector:s}}const Mre=bre({}).createMachine({id:"core",initial:"init",context:({input:{emit:n}})=>({emit:n}),on:{SWITCH_TO_ANCHOR:"#anchor",SWITCH_TO_CREATE:"#create",SWITCH_TO_NAVIGATE:"#navigate",SWITCH_TO_SELECT:"#select"},states:{anchor:{id:"anchor",entry:({context:{emit:n}})=>{n("core.state:changed","anchor")}},create:{id:"create",initial:"undefined",entry:({context:{emit:n}})=>{n("core.state:changed","create")},states:{station:{entry:({context:{emit:n}})=>{n("builder.mode:changed","CREATE_STATION")},on:{SWITCH_TO_CREATE_PATH:"path",SWITCH_TO_NAVIGATE:"#navigate",SWITCH_TO_SELECT:"#select"}},path:{entry:({context:{emit:n}})=>{n("builder.mode:changed","CREATE_PATH")},on:{SWITCH_TO_CREATE_STATION:"station",SWITCH_TO_NAVIGATE:"#navigate",SWITCH_TO_SELECT:"#select"}},undefined:{entry:({context:{emit:n}})=>{n("builder.mode:changed","UNDEFINED")},on:{SWITCH_TO_CREATE_STATION:"station",SWITCH_TO_CREATE_PATH:"path"}}}},init:{exit:({context:{emit:n}})=>{n("core:init",Xn)},on:{SETUP:{target:"#navigate"}}},navigate:{id:"navigate",entry:({context:{emit:n}})=>{n("core.state:changed","navigate")}},select:{id:"select",initial:"single",entry:({context:{emit:n}})=>{n("core.state:changed","select")},states:{box:{id:"select.box",initial:"set",states:{extend:{id:"select.box.extend",entry:({context:{emit:n}})=>{n("selection.mode:changed","BOX_EXTEND")},on:{SWITCH_TO_SELECT_BOX_EXTEND_RELEASED:"extend_released",SWITCH_TO_SELECT_SINGLE_EXTEND:"#select.single.extend",SWITCH_TO_SELECT_UNDEFINED:"#select.undefined"}},extend_released:{id:"select.box.extend_released",entry:({context:{emit:n}})=>{n("selection.mode:changed","BOX_EXTEND_RELEASED")},on:{SWITCH_TO_SELECT_SINGLE_SET:"#select.single.set",SWITCH_TO_SELECT_UNDEFINED:"#select.undefined"}},set:{id:"select.box.set",entry:({context:{emit:n}})=>{n("selection.mode:changed","BOX_SET")},on:{SWITCH_TO_SELECT_SINGLE_SET:"#select.single.set",SWITCH_TO_SELECT_UNDEFINED:"#select.undefined"}}}},single:{id:"select.single",initial:"set",states:{extend:{id:"select.single.extend",entry:({context:{emit:n}})=>{n("selection.mode:changed","SINGLE_EXTEND")},on:{SWITCH_TO_SELECT_BOX_EXTEND:"#select.box.extend",SWITCH_TO_SELECT_SINGLE_SET:"set",SWITCH_TO_SELECT_UNDEFINED:"#select.undefined"}},set:{id:"select.single.set",entry:({context:{emit:n}})=>{n("selection.mode:changed","SINGLE_SET")},on:{SWITCH_TO_SELECT_BOX_SET:"#select.box.set",SWITCH_TO_SELECT_SINGLE_EXTEND:"extend",SWITCH_TO_SELECT_UNDEFINED:"#select.undefined"}}}},undefined:{id:"select.undefined",on:{SWITCH_TO_SELECT_BOX_EXTEND:"#select.box.extend",SWITCH_TO_SELECT_BOX_SET:"#select.box.set",SWITCH_TO_SELECT_SINGLE_EXTEND:"#select.single.extend",SWITCH_TO_SELECT_SINGLE_SET:"#select.single.set"}}}}}}),Hu=Tre(Mre);function Are(n){return(e,t={})=>n.perform(e,t)}function Cre(n,e,t,i){F.useEffect(()=>(t.register(i,n),()=>{t.unregister(i)}),[i,n,...e])}function la(){const{actionsHub:n}=F.useContext(wd),e=Are(n);return(t,i={})=>e(t,i)}function Et(n,e,t){const{actionsHub:i}=F.useContext(wd);Cre(n,e,i,t)}function n1(n,e,t){const i=la();F.useEffect(()=>(i("map.action:controller",{action:n,sequence:t}),()=>{i("unmap.action:controller",{action:n,sequence:t})}),[...e])}function cF(){const n=ir(s=>s.scene),e=Hu.useActorRef(),{init:t}=Sw(e,s=>({init:s.matches("init")})),i=la(),r=()=>{t&&(n.background=new zt("#1d2733"),i("setup:layers",{layers:{0:{name:"base",objects:[],visible:!0},1:{name:"collision-shapes/pick-up-areas",objects:[],visible:!0},2:{name:"slots",objects:[],visible:!0},3:{name:"reflectors",objects:[],visible:!0},4:{name:"path-segments",objects:[],visible:!0},5:{name:"robot-lines",objects:[],visible:!0},6:{name:"path-nodes",objects:[],visible:!0},7:{name:"stations-nodes",objects:[],visible:!0},8:{name:"triggers",objects:[],visible:!0},9:{name:"robots",objects:[],visible:!0},10:{name:"robot-data",objects:[],visible:!0},11:{name:"interactives",objects:[],visible:!0}}}),i("set:layers.iterator.direction",{reversed:!0}),e.send({type:"SETUP"}))},a=()=>{const s=i("get:core.state");s.isError()&&i("send.error:log",{error:s.getError(),from:`${cF.name}.${a.name}`,severity:"critical"});const o=s.unwrap();o==="navigate"?i("set:core.state","select"):o==="select"&&i("set:core.state","navigate")};return F.useEffect(r,[t,n]),n1(a,[],"keyboard.key.tab:up"),null}const OA={findNode(n,e){const t=e.find(i=>i.name===n);return lt(t)?Lt.Error(new Error):Lt.Ok(t)}};class cO extends Error{constructor(){super(On("core:common.colors.errors.unknown-format")),this.name=cO.name}}function Rre(n){return typeof n=="number"&&n>=0&&n<=16777215}function Ore(n){return Array.isArray(n)&&n.length===3}function Dre(n){return typeof n=="string"&&n.length===7&&/#[0-9a-fA-F]{6}/.test(n)}class ki{r=0;g=0;b=0;constructor(e){if(Ore(e))this.r=e[0],this.g=e[1],this.b=e[2];else if(Rre(e))this.r=(e&16711680)>>16,this.g=(e&65280)>>8,this.b=(e&255)>>0;else if(Dre(e))this.r=+`0x${e.slice(1,3)}`,this.g=+`0x${e.slice(3,5)}`,this.b=+`0x${e.slice(5,7)}`;else throw new cO}hexa(){return(this.r<<16)+(this.g<<8)+this.b}rgb(){return[this.r,this.g,this.b]}str(){return`#${this.r.toString(16)}${this.g.toString(16)}${this.b.toString(16)}`}threeColor(){return new zt().setHex(this.hexa())}static black(){return new ki(0)}static blue(){return new ki(2130175)}static green(){return new ki(2154368)}static red(){return new ki(16719968)}static toHexa(e){return new ki(e).hexa()}static toRGB(e){return new ki(e).rgb()}static toStr(e){return new ki(e).str()}static white(){return new ki(16777215)}}const uO={blue:new ki("#26547c"),blueGround:new ki("#1f6199"),gray:new ki("#1e3e51"),darkGray:new ki("#111111"),green:new ki("#06d6a0"),pink:new ki("#ef476f"),purple:new ki("#aa2bff"),white:new ki("#fffcf9"),yellow:new ki("#ffd166")};function gg(n){return n instanceof Xo}function $C(n){return"isMesh"in n}class Xo extends Kn{_coreMetadata;_deleted;_metadata;_object3D;_subscriptions;constructor(e,t){super(),this._coreMetadata={level:1,selectable:!1,targeatable:!1},this._deleted=!1,this._metadata=t,this._object3D=e,this._subscriptions=[],this._object3D.position.set(0,0,0),this._object3D.rotation.set(0,0,0),this.add(this._object3D),this.up.copy(ko.zHat()),this.setID(gs())}_applyTransformation(e,t="local"){const i=this.parent;if(t==="local"||fr(i)){e();return}Nn(i)&&(this.removeFromParent(),this.matrixWorld.decompose(this.position,this.quaternion,this.scale),e(),i.attach(this))}add(...e){return super.add(...e),e.forEach(t=>{gg(t)&&t.setLevel(this._coreMetadata.level+1)}),this}attach(e){return super.attach(e),gg(e)&&e.setLevel(this._coreMetadata.level+1),this}delete(){this._deleted||(this.removeFromParent(),this._deleted=!0)}isDeleted(){return this._deleted}getCoreMetadata(){return{...this._coreMetadata}}getID(){return this.name}getGeometry(){if($C(this._object3D))return this._object3D.geometry}getMetadata(){return this._metadata}getMaterial(){if($C(this._object3D))return this._object3D.material}getObject3D(){return this._object3D}notify(){for(const e of this._subscriptions)e()}remove(...e){return super.remove(...e),e.forEach(t=>{gg(t)&&t.setLevel(1)}),this}removeFromParent(){return super.removeFromParent(),this.setLevel(1),this}rotate(e,t=new ve(0,0,0),i=ko.zHat(),r="local",a=!0){const s=new Ft().setPosition(t),o=new Ft().makeRotationAxis(i,e),c=new Ft().setPosition(t.clone().negate()),f=s.multiply(o).multiply(c),p=new Fn().setFromRotationMatrix(o);return this._applyTransformation(()=>{this.position.applyMatrix4(f),this.rotation.set(b0(this.rotation.x+p.x,BS),b0(this.rotation.y+p.y,BS),b0(this.rotation.z+p.z,BS))},r),a&&this.notify(),this}serialize(){return{components:Xn,id:this.getID(),metadata:this._metadata,position:this.position.clone(),rotation:this.rotation.clone(),scale:this.scale.clone(),visible:this.visible}}setID(e){return this.name=e??"",this._object3D.name=this.name,this}setLevel(e){this._coreMetadata.level=e;for(const t of this.children)gg(t)&&t.setLevel(this._coreMetadata.level+1);return this}setMetadata(e){return this._metadata=Gc.patch(this._metadata,e),this}setPosition(e,t="local",i=!0){return this._applyTransformation(()=>{this.position.copy(e)},t),i&&this.notify(),this}setQuaternion(e,t="local",i=!0){return this._applyTransformation(()=>{this.quaternion.copy(e)},t),i&&this.notify(),this}setRenderOrder(e){return this.renderOrder=e,gg(this._object3D)?this._object3D.setRenderOrder(e):this._object3D.renderOrder=e,this}setRotation(e,t="local",i=!0){return this._applyTransformation(()=>{this.rotation.copy(e)},t),i&&this.notify(),this}setScale(e){return this.scale.copy(e),this}setVisible(e){return this.visible=e,this._coreMetadata.selectable=e,this._coreMetadata.targeatable=e,this}subscribe(e){this._subscriptions.push(e)}translate(e,t="local",i=!0){return this._applyTransformation(()=>{this.position.add(e)},t),i&&this.notify(),this}unsubscribe(e){const t=this._subscriptions.findIndex(i=>e===i);t!==-1&&this._subscriptions.splice(t,1)}update(){}}const Nre=new oa({color:uO.yellow.str(),wireframe:!1}),Lre=.2,Ire=16;let Jh=class extends Xo{_connections;constructor(){super(new Ei(new xp(Lre,Ire),Nre),{type:"path"}),this._coreMetadata.selectable=!0,this._coreMetadata.targeatable=!0,this._connections=[],this.setRenderOrder(0)}connect(e){return this._connections.push(e),Lt.Ok(this)}delete(){if(!this._deleted){if(!this.getConnectionsCount()){super.delete();return}for(const e of[...this._connections])e.delete()}}disconnect(e){const t=this._connections.findIndex(i=>i.getID()===e.getID());return t===-1?Lt.Error(new Error("...")):(this._connections.splice(t,1),this.getConnectionsCount()===0&&this.delete(),Lt.Ok(this))}getConnections(){return this._connections}getConnectionsCount(){return this._connections.length}getMetadata(){return this._metadata}};Dt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new _t(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ms.line={uniforms:Hg.merge([Dt.common,Dt.fog,Dt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			float alpha = opacity;
			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class pv extends yo{constructor(e){super({type:"LineMaterial",uniforms:Hg.clone(ms.line.uniforms),vertexShader:ms.line.vertexShader,fragmentShader:ms.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const w3=new Hi,SS=new ve;class uF extends mw{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new kt(e,3)),this.setAttribute("uv",new kt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new op(t,6,1);return this.setAttribute("instanceStart",new Wr(i,3,0)),this.setAttribute("instanceEnd",new Wr(i,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new op(t,6,1);return this.setAttribute("instanceColorStart",new Wr(i,3,0)),this.setAttribute("instanceColorEnd",new Wr(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new hw(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hi);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),w3.setFromBufferAttribute(t),this.boundingBox.union(w3))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)SS.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(SS)),SS.fromBufferAttribute(t,a),r=Math.max(r,i.distanceToSquared(SS));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}const DA=new mn,T3=new ve,M3=new ve,xa=new mn,Sa=new mn,Mc=new mn,NA=new ve,LA=new Ft,Ta=new z2,A3=new ve,ES=new Hi,wS=new hr,Ac=new mn;let Lc,ep;function C3(n,e,t){return Ac.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Ac.multiplyScalar(1/Ac.w),Ac.x=ep/t.width,Ac.y=ep/t.height,Ac.applyMatrix4(n.projectionMatrixInverse),Ac.multiplyScalar(1/Ac.w),Math.abs(Math.max(Ac.x,Ac.y))}function Ure(n,e){const t=n.matrixWorld,i=n.geometry,r=i.attributes.instanceStart,a=i.attributes.instanceEnd,s=Math.min(i.instanceCount,r.count);for(let o=0,c=s;o<c;o++){Ta.start.fromBufferAttribute(r,o),Ta.end.fromBufferAttribute(a,o),Ta.applyMatrix4(t);const f=new ve,p=new ve;Lc.distanceSqToSegment(Ta.start,Ta.end,p,f),p.distanceTo(f)<ep*.5&&e.push({point:p,pointOnLine:f,distance:Lc.origin.distanceTo(p),object:n,face:null,faceIndex:o,uv:null,uv1:null})}}function Pre(n,e,t){const i=e.projectionMatrix,a=n.material.resolution,s=n.matrixWorld,o=n.geometry,c=o.attributes.instanceStart,f=o.attributes.instanceEnd,p=Math.min(o.instanceCount,c.count),d=-e.near;Lc.at(1,Mc),Mc.w=1,Mc.applyMatrix4(e.matrixWorldInverse),Mc.applyMatrix4(i),Mc.multiplyScalar(1/Mc.w),Mc.x*=a.x/2,Mc.y*=a.y/2,Mc.z=0,NA.copy(Mc),LA.multiplyMatrices(e.matrixWorldInverse,s);for(let m=0,v=p;m<v;m++){if(xa.fromBufferAttribute(c,m),Sa.fromBufferAttribute(f,m),xa.w=1,Sa.w=1,xa.applyMatrix4(LA),Sa.applyMatrix4(LA),xa.z>d&&Sa.z>d)continue;if(xa.z>d){const M=xa.z-Sa.z,A=(xa.z-d)/M;xa.lerp(Sa,A)}else if(Sa.z>d){const M=Sa.z-xa.z,A=(Sa.z-d)/M;Sa.lerp(xa,A)}xa.applyMatrix4(i),Sa.applyMatrix4(i),xa.multiplyScalar(1/xa.w),Sa.multiplyScalar(1/Sa.w),xa.x*=a.x/2,xa.y*=a.y/2,Sa.x*=a.x/2,Sa.y*=a.y/2,Ta.start.copy(xa),Ta.start.z=0,Ta.end.copy(Sa),Ta.end.z=0;const b=Ta.closestPointToPointParameter(NA,!0);Ta.at(b,A3);const S=j1.lerp(xa.z,Sa.z,b),x=S>=-1&&S<=1,T=NA.distanceTo(A3)<ep*.5;if(x&&T){Ta.start.fromBufferAttribute(c,m),Ta.end.fromBufferAttribute(f,m),Ta.start.applyMatrix4(s),Ta.end.applyMatrix4(s);const M=new ve,A=new ve;Lc.distanceSqToSegment(Ta.start,Ta.end,A,M),t.push({point:A,pointOnLine:M,distance:Lc.origin.distanceTo(A),object:n,face:null,faceIndex:m,uv:null,uv1:null})}}}class zre extends Ei{constructor(e=new uF,t=new pv({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let s=0,o=0,c=t.count;s<c;s++,o+=2)T3.fromBufferAttribute(t,s),M3.fromBufferAttribute(i,s),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+T3.distanceTo(M3);const a=new op(r,2,1);return e.setAttribute("instanceDistanceStart",new Wr(a,1,0)),e.setAttribute("instanceDistanceEnd",new Wr(a,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Lc=e.ray;const s=this.matrixWorld,o=this.geometry,c=this.material;ep=c.linewidth+a,o.boundingSphere===null&&o.computeBoundingSphere(),wS.copy(o.boundingSphere).applyMatrix4(s);let f;if(i)f=ep*.5;else{const d=Math.max(r.near,wS.distanceToPoint(Lc.origin));f=C3(r,d,c.resolution)}if(wS.radius+=f,Lc.intersectsSphere(wS)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),ES.copy(o.boundingBox).applyMatrix4(s);let p;if(i)p=ep*.5;else{const d=Math.max(r.near,ES.distanceToPoint(Lc.origin));p=C3(r,d,c.resolution)}ES.expandByScalar(p),Lc.intersectsBox(ES)!==!1&&(i?Ure(this,t):Pre(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(DA),this.material.uniforms.resolution.value.set(DA.z,DA.w))}}class fF extends uF{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setColors(i),this}setFromPoints(e){const t=e.length-1,i=new Float32Array(6*t);for(let r=0;r<t;r++)i[6*r]=e[r].x,i[6*r+1]=e[r].y,i[6*r+2]=e[r].z||0,i[6*r+3]=e[r+1].x,i[6*r+4]=e[r+1].y,i[6*r+5]=e[r+1].z||0;return super.setPositions(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Bre extends zre{constructor(e=new fF,t=new pv({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class R3 extends fF{constructor(e=1,t=1){super();const i=.5*e,r=.5*t,a=[-i,-r,0],s=[i,-r,0],o=[-i,r,0],c=[i,r,0],f=[...o,...c],p=[...c,...s],d=[...s,...a],m=[...a,...o];this.setPositions([...f,...p,...d,...m])}}class fO extends _s{_frame;_plane;constructor(e=1,t=1,i=new pv){super(),this._frame=new Bre(new R3(e,t),i),this.add(this._frame),this._plane=new Ei(new Ws(e,t),new oa),this._plane.visible=!1,this.add(this._plane)}updateMaterial(e){this._frame.material.copy(e)}updateGeometry(e,t){this._frame.geometry.copy(new R3(e,t)),this._plane.geometry.copy(new Ws(e,t))}}const kre=new pv({color:ki.red().str(),linewidth:2});class Fre extends Xo{constructor(e,t){super(new fO(e,t,kre),{altitude:0,depth:t,height:0,width:e}),this._coreMetadata.selectable=!0,this._coreMetadata.targeatable=!0,this.setPosition(new ve(-.5*this._metadata.width,0,0)),this.setRenderOrder(0)}serialize(){return super.serialize()}update(){this.setPosition(new ve(-.5*this._metadata.width,0)),this._object3D.updateGeometry(this._metadata.width,this._metadata.depth)}}const Hre=new oa({color:uO.purple.str(),wireframe:!0,wireframeLinewidth:2}),jre=.1,Vre=16;class O3 extends Xo{constructor(){super(new Ei(new xp(jre,Vre),Hre),{}),this._coreMetadata.selectable=!0,this._coreMetadata.targeatable=!0,this.setRenderOrder(2)}}class Gre extends Xo{_reflector1;_reflector2;constructor(){super(new _s,{distance:0}),this._coreMetadata.selectable=!0,this._coreMetadata.targeatable=!0,this._reflector1=new O3,this.add(this._reflector1),this._reflector2=new O3,this.add(this._reflector2),this.setRenderOrder(2),this.setVisible(!1)}serialize(){return super.serialize()}update(){const e=this._metadata.distance,t=.5*e;this._reflector1.setPosition(new ve(0,-t,0)),this._reflector2.setPosition(new ve(0,t,0)),this.setVisible(e>0)}}class dO extends Error{constructor(e,t){super(On("core:objects.node.errors.not-connected-to-path",{node:e,path:t})),this.name=dO.name}}const Yre=new oa({color:uO.yellow.str()}),Wre=.2,Zre=16;class Xre extends Jh{_onConnect;_onDisconnect;constructor(){super(),this._metadata.type="station",this._onConnect=()=>{},this._onDisconnect=()=>{};const e=this.getGeometry(),t=this.getMaterial();e.copy(new xp(Wre,Zre)),t.copy(Yre)}_findConnectedNode(e){return e.getStartNode().getID()===this.getID()?Lt.Ok(e.getEndNode()):e.getEndNode().getID()===this.getID()?Lt.Ok(e.getStartNode()):Lt.Error(new dO(this.getID(),e.getID()))}connect(e){if(this.getConnectionsCount()===1){const[i]=this._connections;this.disconnect(i),this._connections.splice(0,1)}this._connections.push(e);const t=this._findConnectedNode(e);return t.isError()?t:(this._onConnect(t.unwrap()),Lt.Ok(this))}delete(){if(!this._deleted){if(this.getConnectionsCount()===1){const[e]=this._connections;e.delete()}this._deleted=!0}}disconnect(e){const t=this._connections.findIndex(r=>r.getID()===e.getID());if(t===-1)return Lt.Ok(this);const i=this._findConnectedNode(e);return i.isError()?i:(this._connections.splice(t,1),this._onDisconnect(i.unwrap()),Lt.Ok(this))}getPath(){if(this.getConnectionsCount()===1)return this._connections[0]}setOnConnect(e){this._onConnect=e}setOnDisconnect(e){this._onDisconnect=e}}const qre=new pv({color:ki.green().str(),linewidth:0}),Kre={altitude:0,approachLinearSpeed:0,depth:1,elevationStrategy:"GROUND",endDockingLinearSpeed:0,finalApproachDistance:0,flags:[],forkLandingOnEntry:"OPTIONAL",forkLandingOnExit:"OPTIONAL",gateDistance:0,headGap:void 0,height:0,interPalletDistance:0,k0:0,k1:0,maxDeviationForDocking:0,maxDistanceForRetry:0,maxOffsetForDocking:0,minimalApproachDistance:0,name:"slot",obstacleMapEnabled:!1,pathConfig:"DEFAULT",raisedForkAltitude:0,reliabilityThresholdForAccurateDocking:0,serialNumber:0,startAltitude:0,undockDistanceThreshold:0,undockLinearSpeed:0,width:1};class QC extends Xo{constructor(e=1,t=1){super(new fO(e,t,qre),{...Kre,depth:t,width:e}),this._coreMetadata.selectable=!0,this._coreMetadata.targeatable=!0,this.setRenderOrder(0)}serialize(){return super.serialize()}update(){this._object3D.updateGeometry(this._metadata.width,this._metadata.depth)}}const $re={connectedTo:void 0,disabled:!1,isLocked:!1,name:"station",stationTemplateID:void 0,stationType:"STACK",tags:[]};let O_=class extends Xo{_connectedTo;_collisionShape;_node;_reflectors;_slots;constructor(){super(new _s,$re),this._coreMetadata.selectable=!0,this._coreMetadata.targeatable=!0,this._connectedTo=void 0,this._collisionShape=new Fre(1,1),this._collisionShape.setPosition(new ve(-.5,0,0)),this.add(this._collisionShape),this._node=new Xre,this._node.setMetadata({stationID:this.getID()}),this._node.subscribe(()=>{const e=new ve;this._node.getWorldPosition(e),this.setPosition(e,"world",!1),this._node.setPosition(new ve(0,0,0),"local",!1)}),this._node.setOnConnect(e=>{this._connectedTo=e,this.setMetadata({connectedTo:e.getID()})}),this._node.setOnDisconnect(()=>{this._connectedTo=void 0,this.setMetadata({connectedTo:void 0})}),this._node.setRenderOrder(1),this.add(this._node),this._slots=[],this._reflectors=new Gre,this.add(this._reflectors)}addSlots(e){return this._slots.push(...e),this.add(...e),this}delete(){this._deleted||(this._node.delete(),super.delete())}getConnectedTo(){return this._connectedTo}getCollisionShape(){return this._collisionShape}getNode(){return this._node}getMetadata(){return this._metadata}getReflectors(){return this._reflectors}getSlot(e){return this._slots.find(t=>t.getID()===e)}getSlots(){return this._slots}notify(){this._node.notify()}serialize(){return{components:{collisionShape:this._collisionShape.serialize(),node:this._node.serialize(),reflectors:this._reflectors.serialize(),slots:this._slots.map(e=>e.serialize())},id:this.getID(),metadata:this._metadata,position:this.position.clone(),rotation:this.rotation.clone(),scale:this.scale.clone(),visible:this.visible}}setConnectedTo(e){return this._connectedTo=e,this}setCollisionShape(e){return this._collisionShape.setID(e.id).setMetadata(e.metadata).setRotation(e.rotation).setPosition(e.position).update(),this._node.setPosition(new ve(e.position.x+.5*e.metadata.depth,0,0)),this}setID(e){return super.setID(e),Nn(this._node)&&this._node.setMetadata({stationID:e}),this}setNode(e){return this._node.setID(e.id),this}setMetadata(e){return this._metadata=Gc.patch(this._metadata,e),this}setReflectors(e){return this._reflectors.setMetadata(e.metadata).setPosition(e.position).update(),this}setReflectorsDistance(e){return this._reflectors.setMetadata({distance:e}).update(),this}setSlots(e){return this.remove(...this._slots),this._slots.splice(0,this._slots.length,...e),this.add(...e),this}setSlotsFromData(e){return this.setSlots(e.map(t=>{const i=new QC().setID(t.id).setMetadata(t.metadata).setPosition(t.position).setRotation(t.rotation);return i.update(),i})),this}};function Td(){return F.useContext(wd)}function Qre(n){return(e,t)=>{n.emit(e,t)}}function Jre(n,e,t,i){F.useEffect(()=>{const r=t.addEventListener(i,n);return()=>{t.removeEventListener(r)}},[i,n,...e])}function Fo(n,e,t){const{eventsHub:i}=F.useContext(wd);Jre(n,[n,...e],i,t)}function ju(){const{eventsHub:n}=F.useContext(wd),e=Qre(n);return(t,i)=>{e(t,i)}}const eae=new pv({color:ki.black().str(),linewidth:1.5}),D3=.2;class tae extends Xo{_length;constructor(e){super(new fO(D3,e,eae),{}),this._coreMetadata.selectable=!0,this._coreMetadata.targeatable=!0,this._length=e,this.setRenderOrder(-2)}getLength(){return this._length}setLength(e){return this._length=e,this}update(){this._object3D.updateGeometry(D3,this._length)}}class S0 extends Xo{_endNode;_nodeSubscription;_pathSegment;_startNode;constructor(e,t){super(new _s,{disabled:!1,endNodeID:t.getID(),isTwoWay:!0,startNodeID:e.getID(),type:"way"}),this._coreMetadata.selectable=!0,this._coreMetadata.targeatable=!0,this._nodeSubscription=()=>{const r=this.calculatePath();this.setRotation(r.rotation,"local",!1),this.setPosition(r.position,"world",!1),this._pathSegment.setLength(r.length).update()},this._endNode=t,this._startNode=e,this._endNode.subscribe(this._nodeSubscription),this._endNode.connect(this),this._startNode.subscribe(this._nodeSubscription),this._startNode.connect(this);const i=this.calculatePath();this.setPosition(i.position),this.setRotation(i.rotation),this._pathSegment=new tae(i.length),this.add(this._pathSegment),this.subscribe(()=>{const r=.5*this._pathSegment.getLength(),a=this.localToWorld(new ve(0,-r,0));this._startNode.setPosition(a,"world",!1);const s=this.localToWorld(new ve(0,r,0));this._endNode.setPosition(s,"world",!1),this._startNode.notify(),this._endNode.notify()})}_applyTransformation(e,t){const i=this.parent;if(t==="local"||fr(i)){e();return}Nn(i)&&(this.removeFromParent(),e(),i.attach(this))}calculatePath(){const e=new ve;this._startNode.getWorldPosition(e);const t=new ve;this._endNode.getWorldPosition(t);const i=bee(e,t),r=new ve().subVectors(t,e),a=B4(new ve(0,1,0),new ve().subVectors(t,e),new ve(0,0,1));return{length:r.length(),position:i,rotation:new Fn().fromArray([0,0,a])}}delete(){this._deleted||(this._startNode.unsubscribe(this._nodeSubscription),this._startNode.disconnect(this),this._endNode.unsubscribe(this._nodeSubscription),this._endNode.disconnect(this),super.delete())}getEndNode(){return this._endNode}getPathSegment(){return this._pathSegment}getStartNode(){return this._startNode}setEndNode(e){this._endNode.unsubscribe(this._nodeSubscription),this._endNode.disconnect(this),this._endNode=e,this._endNode.connect(this),this._endNode.subscribe(this._nodeSubscription),this._metadata.endNodeID=e.getID()}setMetadata(e){return this._metadata=Gc.patch(this._metadata,{...e,endNodeID:this._metadata.endNodeID,startNodeID:this._metadata.startNodeID}),this}setStartNode(e){this._startNode.unsubscribe(this._nodeSubscription),this._startNode.disconnect(this),this._startNode=e,this._startNode.connect(this),this._startNode.subscribe(this._nodeSubscription),this._metadata.startNodeID=e.getID()}}const nae=10,fg=1,TS=2,Fs=3;function JC(){const{map:n}=Td(),e=ju(),t=la(),i=()=>{const X=Object.values(n.nodes);t("remove:layers.objects",{id:Fs,objects:X}),t("remove:map.objects",X),n.nodes={}},r=()=>{n.pathTriggers={}},a=()=>{const X=Object.values(n.paths);t("remove:layers.objects",{id:fg,objects:X}),t("remove:map.objects",X),n.paths={}},s=()=>{n.pickupAreas={}},o=()=>{n.robotLines={}},c=()=>{n.sideData=void 0},f=()=>{const X=Object.values(n.stations);t("remove:map.objects",X),t("remove:layers.objects",{id:TS,objects:X}),n.stations={}},p=X=>{const oe=Math.ceil(X.metadata.resolution*X.metadata.height),me=Math.ceil(X.metadata.resolution*X.metadata.width),J=.5*oe,le=.5*me,Se=nae*Math.max(me,oe);X.scale.set(X.metadata.resolution,X.metadata.resolution,1),t("set:map.blueprint",{...X}),t("set:map.ground",{depth:Se,width:Se}),t("set:map.grid",{cellSize:2,gridSize:Se}),t("set:navigation.boundaries",{min:[X.position.x-le,X.position.y-J],max:[X.position.x+le,X.position.y+J]}),t("move-to:navigation",[X.position.x,X.position.y,0]),t("show:map.ground"),t("show:map.grid"),t("set:map.overlay.resolution",{resolution:X.metadata.resolution})},d=X=>{const oe=X.map(({id:me,metadata:J,position:le})=>new Jh().setID(me).setMetadata(J).setPosition(le,"world"));oe.forEach(me=>{n.nodes[me.getID()]=me}),t("attach:map.objects",oe),t("add:layers.objects",{id:Fs,objects:oe})},m=X=>{Nn(X)&&(t("set:map.overlay.data",{data:X.metadata.data,height:X.metadata.height,width:X.metadata.width}),t("set:map.overlay.resolution",{resolution:X.metadata.resolution}),t("set:map.overlay.rotation",{rotation:X.rotation}),t("set:map.overlay.position",{position:X.position}),t("set:map.overlay.scale",{scale:X.scale}),t("set:map.overlay.opacity",{opacity:X.metadata.opacity}))},v=X=>{X.forEach(oe=>{n.pathTriggers[oe.id]=oe})},_=X=>{const oe=Object.values(n.nodes),me=[];for(const J of X){const le=OA.findNode(J.metadata.startNodeID,oe);if(le.isError())return le;const Se=OA.findNode(J.metadata.endNodeID,oe);if(Se.isError())return Se;me.push(new S0(le.unwrap(),Se.unwrap()).setID(J.id).setMetadata({disabled:J.metadata.disabled,isTwoWay:J.metadata.isTwoWay,type:"way"}))}return Object.values(n.stations).forEach(J=>{const le=J.getConnectedTo();if(lt(le))return;const Se=oe.find(re=>re.getID()===le.getID());if(lt(Se))return Lt.Error(new Error);const Ee=new S0(J.getNode(),Se).setMetadata({type:"station"});me.push(Ee)}),me.forEach(J=>{n.paths[J.getID()]=J}),t("attach:map.objects",me),t("add:layers.objects",{id:fg,objects:me}),Lt.Ok(Xn)},b=X=>{X.forEach(oe=>{n.pickupAreas[gs()]=oe})},S=X=>{X.forEach(oe=>{n.robotLines[gs()]=oe})},x=X=>{n.sideData=X},T=X=>{const oe=Object.values(n.nodes),me=[];for(const J of X){let le;if(Nn(J.metadata.connectedTo)){const Se=OA.findNode(J.metadata.connectedTo,oe);if(Se.isError())return Se;le=Se.unwrap()}me.push(new O_().setConnectedTo(le).setCollisionShape(J.components.collisionShape).setID(J.id).setNode(J.components.node).setMetadata(J.metadata).setPosition(J.position).setReflectors(J.components.reflectors).setRotation(J.rotation).setSlotsFromData(J.components.slots))}return me.forEach(J=>{n.stations[J.getID()]=J,n.nodes[J.getNode().getID()]=J.getNode()}),t("attach:map.objects",me),t("add:layers.objects",{id:TS,objects:me}),t("add:layers.objects",{id:Fs,objects:me.map(J=>J.getNode())}),Lt.Ok(Xn)},M=X=>{const oe=Math.max(...Object.values(n.stations).flatMap(me=>me.getSlots()).map(me=>me.getMetadata().serialNumber))+1;X.getSlots().forEach((me,J)=>me.setMetadata({serialNumber:oe+J})),n.stations[X.getID()]=X,n.nodes[X.getNode().getID()]=X.getNode(),t("attach:map.objects",[X]),t("add:layers.objects",{id:TS,objects:[X]}),t("add:layers.objects",{id:Fs,objects:[X.getNode()]}),e("core.station:create",X.getID())},A=()=>{i(),r(),a(),s(),o(),c(),f(),t("set:core.state","navigate"),t("clear:map.blueprint"),t("clear:selection"),t("reset:map.overlay"),e("core.data:clear",Xn)},D=({endNodeID:X,startNodeID:oe})=>{let me;if(lt(oe))me=new Jh,n.nodes[me.getID()]=me,t("attach:map.objects",[me]),t("add:layers.objects",{id:Fs,objects:[me]});else if(me=n.nodes[oe],lt(me))return Lt.Error(new Error);let J;if(lt(X))J=new Jh,n.nodes[J.getID()]=J,t("attach:map.objects",[J]),t("add:layers.objects",{id:Fs,objects:[J]});else if(J=n.nodes[X],lt(J))return Lt.Error(new Error);const le=me.getMetadata().stationID;if(Nn(le)){const ge=n.stations[le];if(lt(ge))return Lt.Error(new Error);ge.setMetadata({connectedTo:J.getID()})}const Se=J.getMetadata().stationID;if(Nn(Se)){const ge=n.stations[Se];if(lt(ge))return Lt.Error(new Error);ge.setMetadata({connectedTo:me.getID()})}const Ee=me.getMetadata().type==="station"||J.getMetadata().type==="station"?"station":"way",re=new S0(me,J).setMetadata({type:Ee});return n.paths[re.getID()]=re,t("attach:map.objects",[re]),t("add:layers.objects",{id:fg,objects:[re]}),Lt.Ok(re)},O=X=>{const oe=n.nodes[X];if(lt(oe)||oe.getMetadata().type==="station")return;const me=oe.getConnections().map(Ee=>Ee.getID()),J=[];for(const Ee of me){const{[Ee]:re,...ge}=n.paths;if(lt(re))continue;const Ae=n.nodes[re.getStartNode().getID()];if(lt(Ae))return;const Pe=Ae.getConnections(),We=Pe.indexOf(re);We!==-1&&Pe.splice(We,1),Ae.getID()!==X&&J.push(Ae);const it=n.nodes[re.getEndNode().getID()];if(lt(it))return;const te=it.getConnections(),xe=te.indexOf(re);xe!==-1&&te.splice(xe,1),it.getID()!==X&&J.push(it);const De=Object.entries(n.pathTriggers).filter(([Ce,ce])=>ce.pathID===Ee).map(([Ce,ce])=>Ce);for(const Ce of De){const{[Ce]:ce,...pe}=n.pathTriggers;n.pathTriggers=pe}const He=Object.entries(n.robotLines).filter(([Ce,ce])=>ce.pathIDs.includes(Ee)).map(([Ce,ce])=>Ce);for(const Ce of He){const{[Ce]:ce,...pe}=n.robotLines;n.robotLines=pe}t("remove:map.objects",[re]),t("remove:layers.objects",{id:fg,objects:[re]}),n.paths=ge}for(const Ee of J){const re=Ee.getMetadata().type==="station";if(!re&&Ee.getConnectionsCount()===0){const{[Ee.getID()]:ge,...Ae}=n.nodes;t("remove:map.objects",[Ee]),t("remove:layers.objects",{id:Fs,objects:[Ee]}),n.nodes=Ae}else if(re){const ge=Ee.getMetadata().stationID;if(Nn(ge)){const Ae=n.stations[ge];if(lt(Ae))return;Ae.getMetadata().connectedTo=void 0}}}const{[X]:le,...Se}=n.nodes;t("remove:map.objects",[oe]),t("remove:layers.objects",{id:Fs,objects:[oe]}),n.nodes=Se},I=X=>{const oe=n.paths[X];if(lt(oe))return;const me=n.nodes[oe.getStartNode().getID()];if(lt(me))return;const J=me.getConnections(),le=J.indexOf(oe);if(le!==-1&&J.splice(le,1),me.getMetadata().type!=="station"&&me.getConnectionsCount()===0){const{[me.getID()]:xe,...De}=n.nodes;t("remove:map.objects",[me]),t("remove:layers.objects",{id:Fs,objects:[me]}),n.nodes=De}const Se=n.nodes[oe.getEndNode().getID()];if(lt(Se))return;const Ee=Se.getConnections(),re=Ee.indexOf(oe);if(re!==-1&&Ee.splice(re,1),Se.getMetadata().type!=="station"&&Se.getConnectionsCount()===0){const{[Se.getID()]:xe,...De}=n.nodes;t("remove:map.objects",[Se]),t("remove:layers.objects",{id:Fs,objects:[Se]}),n.nodes=De}const ge=me.getMetadata().stationID;if(Nn(ge)){const xe=n.stations[ge];if(lt(xe))return;xe.getMetadata().connectedTo=void 0}const Ae=Se.getMetadata().stationID;if(Nn(Ae)){const xe=n.stations[Ae];if(lt(xe))return;xe.getMetadata().connectedTo=void 0}const Pe=Object.entries(n.pathTriggers).filter(([xe,De])=>De.pathID===X).map(([xe,De])=>xe);for(const xe of Pe){const{[xe]:De,...He}=n.pathTriggers;n.pathTriggers=He}const We=Object.entries(n.robotLines).filter(([xe,De])=>De.pathIDs.includes(X)).map(([xe,De])=>xe);for(const xe of We){const{[xe]:De,...He}=n.robotLines;n.robotLines=He}const{[X]:it,...te}=n.paths;t("remove:map.objects",[oe]),t("remove:layers.objects",{id:fg,objects:[oe]}),n.paths=te},U=X=>{const{[X]:oe,...me}=n.stations;if(lt(oe))return;const J=oe.getNode();if(J.getConnectionsCount()===1){const[Ee]=J.getConnections(),re=n.paths[Ee.getID()];if(lt(re))return;const ge=re.getStartNode().getID()===J.getID()?re.getEndNode().getID():re.getStartNode().getID(),Ae=n.nodes[ge];if(lt(Ae))return;const Pe=Ae.getConnections(),We=Pe.indexOf(re);if(We!==-1&&Pe.splice(We,1),Ae.getMetadata().type!=="station"&&Ae.getConnectionsCount()===0){const{[Ae.getID()]:xe,...De}=n.nodes;t("remove:map.objects",[Ae]),t("remove:layers.objects",{id:Fs,objects:[Ae]}),n.nodes=De}const{[X]:it,...te}=n.paths;t("remove:map.objects",[re]),t("remove:layers.objects",{id:fg,objects:[re]}),n.paths=te}const{[J.getID()]:le,...Se}=n.nodes;t("remove:map.objects",[J]),t("remove:layers.objects",{id:Fs,objects:[J]}),n.nodes=Se,t("remove:map.objects",[oe]),t("remove:layers.objects",{id:TS,objects:[oe]}),n.stations=me,e("core.station:delete",X)},N=()=>{const X=t("get:map.overlay");return{nodes:Object.values(n.nodes).map(oe=>oe.serialize()),overlay:X.serialize(),pathTriggers:Object.values(n.pathTriggers),paths:Object.values(n.paths).map(oe=>oe.serialize()),pickupAreas:Object.values(n.pickupAreas),robotLines:Object.values(n.robotLines),sideData:n.sideData,stations:Object.values(n.stations).map(oe=>oe.serialize())}},L=X=>{const oe=n.paths[X];if(!lt(oe))return oe.getMetadata()},Y=X=>{const oe=n.stations[X];if(!lt(oe))return oe.serialize()},ee=X=>{A(),d(X.nodes),v(X.pathTriggers),b(X.pickupAreas),S(X.robotLines),x(X.sideData);const oe=T(X.stations);if(oe.isError()){A(),t("send.error:log",{error:oe.getError(),from:`${JC.name}.${ee.name}`,severity:"critical"});return}const me=_(X.paths);if(me.isError()){A(),t("send.error:log",{error:me.getError(),from:`${JC.name}.${ee.name}`,severity:"critical"});return}p(X.blueprint),m(X.overlay),e("core.data:load",X)},se=({nodeID:X,pathID:oe})=>{const me=n.paths[oe];if(lt(me))return;const J=n.nodes[X];if(lt(J))return;const le=n.nodes[me.getEndNode().getID()];if(lt(le))return;const Se=le.getConnections(),Ee=Se.indexOf(me);if(Ee!==-1&&Se.splice(Ee,1),le.getMetadata().type!=="station"&&le.getConnectionsCount()===0){const{[le.getID()]:Ae,...Pe}=n.nodes;t("remove:map.objects",[le]),t("remove:layers.objects",{id:Fs,objects:[le]}),n.nodes=Pe}const re=me.getStartNode().getMetadata().stationID;if(Nn(re)){const Ae=n.stations[re];if(lt(Ae))return;Ae.setMetadata({connectedTo:J.getID()})}const ge=me.getStartNode().getMetadata().type==="station"||J.getMetadata().type==="station"?"station":"way";me.setMetadata({type:ge}).setEndNode(J)},he=({disabled:X,id:oe,isTwoWay:me})=>{const J=n.paths[oe];lt(J)||J.setMetadata({disabled:X,isTwoWay:me})},de=({pathID:X,nodeID:oe})=>{const me=n.paths[X];if(lt(me))return;const J=n.nodes[oe];if(lt(J))return;const le=n.nodes[me.getStartNode().getID()];if(lt(le))return;const Se=le.getConnections(),Ee=Se.indexOf(me);if(Ee!==-1&&Se.splice(Ee,1),le.getMetadata().type!=="station"&&le.getConnectionsCount()===0){const{[le.getID()]:Ae,...Pe}=n.nodes;t("remove:map.objects",[le]),t("remove:layers.objects",{id:Fs,objects:[le]}),n.nodes=Pe}const re=me.getEndNode().getMetadata().stationID;if(Nn(re)){const Ae=n.stations[re];if(lt(Ae))return;Ae.setMetadata({connectedTo:J.getID()})}const ge=J.getMetadata().type==="station"||me.getEndNode().getMetadata().type==="station"?"station":"way";me.setMetadata({type:ge}).setStartNode(J)},P=({metadata:X,stationID:oe})=>{const me=n.stations[oe];lt(me)||(me.setMetadata(X).update(),e("core.station:change",me.serialize()))},B=({metadata:X,stationID:oe})=>{const me=n.stations[oe];if(lt(me))return;const J=me.getCollisionShape();lt(J)||(J.setMetadata(X).update(),e("core.station.collision-shape:change",{stationID:oe,data:J.serialize()}))},V=({data:X,stationID:oe})=>{const me=n.stations[oe];if(lt(me))return;const J=me.getReflectors();lt(J)||(J.setMetadata(X.metadata).setPosition(X.position).setRotation(X.rotation).update(),e("core.station.reflectors:change",{stationID:oe,data:J.serialize()}))},ae=({data:X,stationID:oe})=>{const me=n.stations[oe];if(lt(me))return;const J=me.getSlot(X.id);lt(J)||(J.setMetadata(X.metadata).setPosition(X.position).setRotation(X.rotation).update(),e("core.station.slot:change",{stationID:oe,data:J.serialize()}))};return Et(M,[],"add:core.station"),Et(A,[],"clear:core.data"),Et(D,[],"create:core.path"),Et(O,[],"delete:core.node"),Et(I,[],"delete:core.path"),Et(U,[],"delete:core.station"),Et(N,[],"get:core.data"),Et(L,[],"get:core.path.metadata"),Et(Y,[],"get:core.station.data"),Et(ee,[],"load:core.data"),Et(he,[],"set:core.path.metadata"),Et(P,[],"set:core.station.metadata"),Et(B,[],"set:core.station.collision-shape.metadata"),Et(V,[],"set:core.station.reflectors.data"),Et(ae,[],"set:core.station.slot.data"),Et(se,[],"set.end-node:core.path"),Et(de,[],"set.start-node:core.path"),null}function eR(){const{map:n}=Td(),e=F.useRef({}),t=ju(),i=la();function r(v){return{position:v.position.clone(),quaternion:v.quaternion.clone(),rotation:v.rotation.clone(),scale:v.scale.clone()}}const a=v=>{const _=e.current;if(v in _)return Lt.Ok(_[v]);if(v in n.nodes){const b=n.nodes[v];return _[v]=b,Lt.Ok(b)}else if(v in n.paths){const b=n.paths[v];return _[v]=b,Lt.Ok(b)}else if(v in n.stations){const b=n.stations[v];return _[v]=b,Lt.Ok(b)}else return Lt.Error(new Error)},s=v=>{const _=a(v);return _.isError()?_:Lt.Ok(r(_.unwrap()))},o=({id:v,zoom:_})=>{const b=a(v);if(b.isError())return b;const S=new ve;return b.unwrap().getWorldPosition(S),i("move-to:navigation",S.toArray()),_&&i("zoom-to:navigation",50),Lt.Ok(Xn)},c=({angle:v,at:_,axis:b,coordinateSystem:S,object:x})=>{x.rotate(v,_,b,S),t("core.object:changed",{id:x.getID(),transform:r(x)})},f=v=>{const _=a(v);return _.isError()?_:(i("set:core.state","select"),i("set:selection",{objects:[_.unwrap()]}),Lt.Ok(Xn))},p=({coordinateSystem:v,id:_,position:b})=>{const S=a(_);if(S.isError()){i("send.error:log",{error:S.getError(),from:`${eR.name}.${p.name}`,severity:"high"});return}const x=S.unwrap();x.setPosition(b,v),t("core.object:changed",{id:_,transform:r(x)})},d=({coordinateSystem:v,id:_,rotation:b})=>{const S=a(_);if(S.isError()){i("send.error:log",{error:S.getError(),from:`${eR.name}.${d.name}`,severity:"high"});return}const x=S.unwrap();x.setRotation(b,v),t("core.object:changed",{id:_,transform:r(x)})},m=({coordinateSystem:v,object:_,vector:b})=>{_.translate(b,v),t("core.object:changed",{id:_.getID(),transform:r(_)})};return Et(a,[],"get.by-id:core.object"),Et(s,[],"get.by-id:core.object.transform"),Et(o,[],"move-to:core.object"),Et(c,[],"rotate:core.object"),Et(f,[],"select:core.object"),Et(p,[],"set.by-id:core.object.position"),Et(d,[],"set.by-id:core.object.rotation"),Et(m,[],"translate:core.object"),null}const Fu=Symbol.for("@ts-pattern/matcher"),iae=Symbol.for("@ts-pattern/isVariadic"),i1="@ts-pattern/anonymous-select-key",tR=n=>!!(n&&typeof n=="object"),GS=n=>n&&!!n[Fu],Ic=(n,e,t)=>{if(GS(n)){const i=n[Fu](),{matched:r,selections:a}=i.match(e);return r&&a&&Object.keys(a).forEach(s=>t(s,a[s])),r}if(tR(n)){if(!tR(e))return!1;if(Array.isArray(n)){if(!Array.isArray(e))return!1;let i=[],r=[],a=[];for(const s of n.keys()){const o=n[s];GS(o)&&o[iae]?a.push(o):a.length?r.push(o):i.push(o)}if(a.length){if(a.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(e.length<i.length+r.length)return!1;const s=e.slice(0,i.length),o=r.length===0?[]:e.slice(-r.length),c=e.slice(i.length,r.length===0?1/0:-r.length);return i.every((f,p)=>Ic(f,s[p],t))&&r.every((f,p)=>Ic(f,o[p],t))&&(a.length===0||Ic(a[0],c,t))}return n.length===e.length&&n.every((s,o)=>Ic(s,e[o],t))}return Reflect.ownKeys(n).every(i=>{const r=n[i];return(i in e||GS(a=r)&&a[Fu]().matcherType==="optional")&&Ic(r,e[i],t);var a})}return Object.is(e,n)},bd=n=>{var e,t,i;return tR(n)?GS(n)?(e=(t=(i=n[Fu]()).getSelectionKeys)==null?void 0:t.call(i))!=null?e:[]:Array.isArray(n)?q0(n,bd):q0(Object.values(n),bd):[]},q0=(n,e)=>n.reduce((t,i)=>t.concat(e(i)),[]);function qo(n){return Object.assign(n,{optional:()=>rae(n),and:e=>Wi(n,e),or:e=>aae(n,e),select:e=>e===void 0?N3(n):N3(e,n)})}function rae(n){return qo({[Fu]:()=>({match:e=>{let t={};const i=(r,a)=>{t[r]=a};return e===void 0?(bd(n).forEach(r=>i(r,void 0)),{matched:!0,selections:t}):{matched:Ic(n,e,i),selections:t}},getSelectionKeys:()=>bd(n),matcherType:"optional"})})}function Wi(...n){return qo({[Fu]:()=>({match:e=>{let t={};const i=(r,a)=>{t[r]=a};return{matched:n.every(r=>Ic(r,e,i)),selections:t}},getSelectionKeys:()=>q0(n,bd),matcherType:"and"})})}function aae(...n){return qo({[Fu]:()=>({match:e=>{let t={};const i=(r,a)=>{t[r]=a};return q0(n,bd).forEach(r=>i(r,void 0)),{matched:n.some(r=>Ic(r,e,i)),selections:t}},getSelectionKeys:()=>q0(n,bd),matcherType:"or"})})}function li(n){return{[Fu]:()=>({match:e=>({matched:!!n(e)})})}}function N3(...n){const e=typeof n[0]=="string"?n[0]:void 0,t=n.length===2?n[1]:typeof n[0]=="string"?void 0:n[0];return qo({[Fu]:()=>({match:i=>{let r={[e??i1]:i};return{matched:t===void 0||Ic(t,i,(a,s)=>{r[a]=s}),selections:r}},getSelectionKeys:()=>[e??i1].concat(t===void 0?[]:bd(t))})})}function Cc(n){return typeof n=="number"}function Xf(n){return typeof n=="string"}function qf(n){return typeof n=="bigint"}qo(li(function(n){return!0}));const Kf=n=>Object.assign(qo(n),{startsWith:e=>{return Kf(Wi(n,(t=e,li(i=>Xf(i)&&i.startsWith(t)))));var t},endsWith:e=>{return Kf(Wi(n,(t=e,li(i=>Xf(i)&&i.endsWith(t)))));var t},minLength:e=>Kf(Wi(n,(t=>li(i=>Xf(i)&&i.length>=t))(e))),length:e=>Kf(Wi(n,(t=>li(i=>Xf(i)&&i.length===t))(e))),maxLength:e=>Kf(Wi(n,(t=>li(i=>Xf(i)&&i.length<=t))(e))),includes:e=>{return Kf(Wi(n,(t=e,li(i=>Xf(i)&&i.includes(t)))));var t},regex:e=>{return Kf(Wi(n,(t=e,li(i=>Xf(i)&&!!i.match(t)))));var t}});Kf(li(Xf));const Rc=n=>Object.assign(qo(n),{between:(e,t)=>Rc(Wi(n,((i,r)=>li(a=>Cc(a)&&i<=a&&r>=a))(e,t))),lt:e=>Rc(Wi(n,(t=>li(i=>Cc(i)&&i<t))(e))),gt:e=>Rc(Wi(n,(t=>li(i=>Cc(i)&&i>t))(e))),lte:e=>Rc(Wi(n,(t=>li(i=>Cc(i)&&i<=t))(e))),gte:e=>Rc(Wi(n,(t=>li(i=>Cc(i)&&i>=t))(e))),int:()=>Rc(Wi(n,li(e=>Cc(e)&&Number.isInteger(e)))),finite:()=>Rc(Wi(n,li(e=>Cc(e)&&Number.isFinite(e)))),positive:()=>Rc(Wi(n,li(e=>Cc(e)&&e>0))),negative:()=>Rc(Wi(n,li(e=>Cc(e)&&e<0)))});Rc(li(Cc));const $f=n=>Object.assign(qo(n),{between:(e,t)=>$f(Wi(n,((i,r)=>li(a=>qf(a)&&i<=a&&r>=a))(e,t))),lt:e=>$f(Wi(n,(t=>li(i=>qf(i)&&i<t))(e))),gt:e=>$f(Wi(n,(t=>li(i=>qf(i)&&i>t))(e))),lte:e=>$f(Wi(n,(t=>li(i=>qf(i)&&i<=t))(e))),gte:e=>$f(Wi(n,(t=>li(i=>qf(i)&&i>=t))(e))),positive:()=>$f(Wi(n,li(e=>qf(e)&&e>0))),negative:()=>$f(Wi(n,li(e=>qf(e)&&e<0)))});$f(li(qf));qo(li(function(n){return typeof n=="boolean"}));qo(li(function(n){return typeof n=="symbol"}));qo(li(function(n){return n==null}));qo(li(function(n){return n!=null}));class sae extends Error{constructor(e){let t;try{t=JSON.stringify(e)}catch{t=e}super(`Pattern matching error: no pattern matches value ${t}`),this.input=void 0,this.input=e}}const nR={matched:!1,value:void 0};function Kg(n){return new r1(n,nR)}class r1{constructor(e,t){this.input=void 0,this.state=void 0,this.input=e,this.state=t}with(...e){if(this.state.matched)return this;const t=e[e.length-1],i=[e[0]];let r;e.length===3&&typeof e[1]=="function"?r=e[1]:e.length>2&&i.push(...e.slice(1,e.length-1));let a=!1,s={};const o=(f,p)=>{a=!0,s[f]=p},c=!i.some(f=>Ic(f,this.input,o))||r&&!r(this.input)?nR:{matched:!0,value:t(a?i1 in s?s[i1]:s:this.input,this.input)};return new r1(this.input,c)}when(e,t){if(this.state.matched)return this;const i=!!e(this.input);return new r1(this.input,i?{matched:!0,value:t(this.input,this.input)}:nR)}otherwise(e){return this.state.matched?this.state.value:e(this.input)}exhaustive(e=oae){return this.state.matched?this.state.value:e(this.input)}run(){return this.exhaustive()}returnType(){return this}narrow(){return this}}function oae(n){throw new sae(n)}class hO extends Error{constructor(){super(On("core:state.errors.undefined")),this.name=hO.name}}function lae(){const n=Hu.useActorRef();function e(){const i=n.getSnapshot();return i.matches("anchor")?Lt.Ok("anchor"):i.matches("create")?Lt.Ok("create"):i.matches("navigate")?Lt.Ok("navigate"):i.matches("select")?Lt.Ok("select"):Lt.Error(new hO)}function t(i){Kg(i).with("anchor",()=>{n.send({type:"SWITCH_TO_ANCHOR"})}).with("create",()=>{n.send({type:"SWITCH_TO_CREATE"})}).with("navigate",()=>{n.send({type:"SWITCH_TO_NAVIGATE"})}).with("select",()=>{n.send({type:"SWITCH_TO_SELECT"})}).exhaustive()}return Et(e,[],"get:core.state"),Et(t,[],"set:core.state"),null}function cae(){const n=Td();function e(){return n.world.current}function t({world:i}){n.world.current=i}return Et(e,[],"get:core.world"),Et(t,[],"set:core.world"),null}function uae(){return null}function fae(){const n=Hu.useActorRef(),{eventsHub:e}=Td(),t=F.useRef("idle"),i=F.useRef(void 0),r=F.useRef(void 0),a=F.useRef(void 0),s=F.useRef(void 0),o=F.useRef(void 0),c=la(),f=()=>{lt(s.current)||lt(o.current)||lt(a.current)||(Nn(i.current)&&(c("delete:core.path",i.current.getID()),i.current=void 0),r.current=void 0,e.removeEventListener(a.current),c("unmap.action:controller",{sequence:"mouse.button.left:down",action:s.current}),c("unmap.action:controller",{sequence:"keyboard.key.escape:down",action:o.current}),t.current="idle")},p=F.useCallback(()=>{f(),n.send({type:"SWITCH_TO_SELECT"})},[n]),d=()=>{if(!lt(i.current))if(t.current==="startNode")Nn(r.current)&&c("set.start-node:core.path",{nodeID:r.current.getID(),pathID:i.current.getID()}),t.current="endNode";else{if(Nn(r.current)){if(r.current.getID()===i.current.getStartNode().getID()){c("delete:core.path",i.current.getID()),i.current=void 0,p();return}if(c("set.end-node:core.path",{nodeID:r.current.getID(),pathID:i.current.getID()}),r.current.getMetadata().type==="station"){i.current=void 0,p();return}}const b=i.current.getEndNode(),S=c("create:core.path",{startNodeID:b.getID()});if(S.isError())return;i.current=S.unwrap()}},m=p,v=({value:{intersections:b,position:S}})=>{if(lt(i.current))return;const x=i.current,T=[];t.current==="startNode"?T.push(x.getStartNode().getID(),x.getEndNode().getID()):T.push(x.getEndNode().getID());const M=t.current==="startNode"?x:x.getEndNode(),A=b.find(D=>D instanceof Jh&&!T.includes(D.getID()));if(r.current=A,lt(A))M.setPosition(S);else if(Nn(A))if(A.getMetadata().type==="station"){if(t.current==="endNode"&&i.current.getStartNode().getMetadata().type==="station"){r.current=void 0,M.setPosition(S);return}if(A.getConnectionsCount())r.current=void 0,M.setPosition(S);else{const D=new ve;A.getWorldPosition(D),M.setPosition(D)}}else M.setPosition(A.position)};function _({value:b}){if(b==="CREATE_PATH"){if(t.current!=="idle")return;const S=c("create:core.path");if(S.isError())return;i.current=S.unwrap(),r.current=void 0,a.current=e.addEventListener("cursor.position:changed",v),s.current=d,c("map.action:controller",{sequence:"mouse.button.left:down",action:s.current}),o.current=m,c("map.action:controller",{sequence:"keyboard.key.escape:down",action:o.current}),t.current="startNode"}else{if(t.current==="idle")return;f()}}return Fo(_,[c],"builder.mode:changed"),null}function dae(){const n=Hu.useActorRef();return Et(({mode:e})=>{e==="CREATE_STATION"?n.send({type:"SWITCH_TO_CREATE_STATION"}):n.send({type:"SWITCH_TO_CREATE_PATH"})},[],"set:builder.mode"),null}const hae=1e-6,Zn={degrees(n){return n*z4},isClose(n,e,t=hae){return Math.abs(n-e)<=t},isPowerOf2(n){return n!==0&&(n&n-1)===0},mod(n,e){return(n%e+e)%e},radians(n){return n*U4},round(n,e){return Number.parseFloat(n.toFixed(e))}};function pae(){const n=Hu.useActorRef(),{eventsHub:e}=Td(),t=F.useRef(void 0),i=F.useRef(void 0),r=la(),a=()=>{if(lt(i.current))return;const p=i.current;o(p),r("add:core.station",p),r("set:core.state","select"),r("set:selection",{objects:[p]})},s=F.useCallback(()=>{Nn(i.current)&&o(i.current),n.send({type:"SWITCH_TO_NAVIGATE"})},[n]);function o(p){Nn(t.current)&&e.removeEventListener(t.current),p.removeFromParent(),i.current=void 0,r("unmap.action:controller",{sequence:"mouse.button.left:down",action:a}),r("unmap.action:controller",{sequence:"keyboard.key.escape:down",action:s})}function c({value:p}){if(p==="CREATE_STATION"){const d=r("get:core.world");if(lt(d)){console.debug("[error] StationBuilder.onBuildModeChange: world is undefined");return}Nn(i.current)&&o(i.current);const m=new O_,v=new QC().setMetadata({depth:.85,width:.85}).setPosition(new ve(-.5,0,0));v.update(),m.addSlots([v]),i.current=m,t.current=e.addEventListener("cursor.position:changed",({value:{position:_}})=>{const b=i.current;lt(b)||b.setPosition(_)}),d.add(i.current),r("map.action:controller",{sequence:"mouse.button.left:down",action:a}),r("map.action:controller",{sequence:"keyboard.key.escape:down",action:s})}else{if(lt(i.current))return;o(i.current)}}function f({model:p}){const d=i.current;if(lt(d))return;const[m]=p.collisionShapes,v=Zn.radians(m.rotation),_=new ve(-m.x-.5*m.depth,-m.y,0);d.setMetadata({stationTemplateID:p.id,name:On("core:builders.station.default-name")}),d.setCollisionShape({components:{},id:gs(),metadata:{altitude:m.altitude,depth:m.width,height:m.height,width:m.depth},position:new ve(-.5*m.depth,0,0),rotation:new Fn(0,0,jh(m.rotation)),scale:new ve(1,1,1),visible:!0}),d.setSlots(p.slots.map(b=>{const S=.5*b.dimensions.length,x=Zn.radians(b.pose.rotation),T=new ve(b.pose.x-S*Math.cos(x),b.pose.y-S*Math.sin(x)),M=new ve(_.x+(Math.cos(v)*T.x+Math.sin(v)*T.y),_.y+(-Math.sin(v)*T.x+Math.cos(v)*T.y),0),A=new Fn(0,0,jh(b.pose.rotation)),D={altitude:b.pose.altitude,depth:b.dimensions.width,...b.dockingSettings,flags:b.flags,height:b.dimensions.height,name:b.name,serialNumber:0,width:b.dimensions.length},O=new QC().setMetadata(D).setPosition(M).setRotation(A);return O.update(),O})),d.setReflectors({components:{},id:gs(),metadata:{distance:p.reflectorsDistance},position:_,rotation:new Fn(0,0,0),scale:new ve(1,1,1),visible:!0}),i.current=d}return Fo(c,[r],"builder.mode:changed"),Et(f,[],"set:station-builder.model"),null}function mae(){return q.jsxs(q.Fragment,{children:[q.jsx(dae,{}),q.jsx(pae,{}),q.jsx(fae,{})]})}const dF={targetsRef:{current:[]}},hF=F.createContext(dF);function gae(){return F.useContext(hF)}class pO{xHat;yHat;zHat;constructor(e,t,i){this.xHat=e??ko.xHat(),this.yHat=t??ko.yHat(),this.zHat=i??ko.zHat()}asMatrix4(){return new Ft().makeBasis(this.xHat,this.yHat,this.zHat)}clone(){return new pO(this.xHat.clone(),this.yHat.clone(),this.zHat.clone())}copy(e){return this.xHat.copy(e.xHat),this.yHat.copy(e.yHat),this.zHat.copy(e.zHat),this}reset(){return this.xHat.copy(ko.xHat()),this.yHat.copy(ko.yHat()),this.zHat.copy(ko.zHat()),this}set(e,t,i){return this.xHat.copy(e),this.yHat.copy(t),this.zHat.copy(i),this}setFromMatrix4(e){return e.extractBasis(this.xHat,this.yHat,this.zHat),this}}const vae=2130175,IA=16719968,UA=2154368,yae=2130175,PA=6;function _ae(){const{targetsRef:n}=gae(),e=la(),t=F.useRef(void 0),i=F.useRef(new pO),r=F.useRef("IDLE"),a=F.useRef(new ve(0,0,0)),s=F.useRef(new ve(0,0,0)),o=F.useRef(0),c=({value:{position:v}})=>{if(r.current==="IDLE"||lt(t.current))return;let _=0,b=new ve(0,0,0);if(r.current==="ROTATE"){_=b0(o.current+B4(new ve().subVectors(a.current,t.current.position),new ve().subVectors(v,t.current.position),i.current.zHat)-t.current.rotation.z,BS),t.current.rotation.z+=_,i.current.setFromMatrix4(t.current.matrix);for(const S of n.current)e("rotate:core.object",{angle:_,at:t.current.position,axis:ko.zHat(),coordinateSystem:"world",object:S});return}else{let S;r.current==="X_TRANSLATE"?S=new ve().subVectors(v.projectOnVector(i.current.xHat),a.current):r.current==="Y_TRANSLATE"?S=new ve().subVectors(v.projectOnVector(i.current.yHat),a.current):S=new ve().subVectors(v.projectOnPlane(i.current.zHat),a.current),b=new ve().subVectors(new ve().addVectors(s.current,S),t.current.position),t.current.position.add(b);for(const x of n.current)e("translate:core.object",{coordinateSystem:"world",object:x,vector:b})}},f=()=>{r.current="IDLE",e("activate:selection")},p=({scale:v})=>{lt(t.current)||t.current.scale.set(v,v,1)},d=({targets:v})=>{lt(t.current)||(n.current.splice(0,n.current.length,...v),t.current.visible=n.current.length>0)},m=({position:v,rotation:_})=>{lt(t.current)||(t.current.position.set(v.x,v.y,0),t.current.rotation.set(0,0,_.z),t.current.scale.set(1,1,1),i.current.setFromMatrix4(t.current.matrix),o.current=t.current.rotation.z,s.current.copy(t.current.position))};return Fo(c,[],"cursor.position:changed"),Fo(f,[],"mouse.button:up"),Et(p,[],"set:controls.scale"),Et(d,[t.current],"set:controls.targets"),Et(m,[t.current],"set:controls.transform"),q.jsxs("group",{name:"mouse-controls",ref:t,renderOrder:1e3,visible:!1,children:[q.jsxs("group",{onPointerDown:({point:v,stopPropagation:_})=>{_(),!(r.current!=="IDLE"||lt(t.current))&&(i.current.setFromMatrix4(t.current.matrix),a.current.copy(v),o.current=t.current.rotation.z,r.current="ROTATE",e("deactivate:selection"))},children:[q.jsx(Kne,{color:vae,end:[0,.66,0],mid:[Math.cos(vI),Math.sin(vI),0],lineWidth:PA,name:"arc",renderOrder:1e3,start:[.66,0,0]}),q.jsxs("mesh",{position:[.4,.4,0],visible:!1,children:[q.jsx("planeGeometry",{args:[.75,.75]}),q.jsx("meshBasicMaterial",{})]})]}),q.jsxs("mesh",{name:"arrow-x",onPointerDown:({point:v,stopPropagation:_})=>{_(),!(r.current!=="IDLE"||lt(t.current))&&(i.current.setFromMatrix4(t.current.matrix),a.current.copy(v.projectOnVector(i.current.xHat)),s.current.copy(t.current.position),r.current="X_TRANSLATE",e("deactivate:selection"))},children:[q.jsx(GC,{color:IA,lineWidth:PA,name:"arrow-x-shaft",points:[[0,0,0],[.8,0,0]],position:[0,0,0],renderOrder:2e3}),q.jsxs("mesh",{name:"arrow-x-head",position:[1-.1,0,0],renderOrder:1e3,rotation:[0,0,-P4],children:[q.jsx("coneGeometry",{args:[.05,.2,32]}),q.jsx("meshBasicMaterial",{color:IA})]}),q.jsxs("mesh",{name:"arrow-x-box",position:[.5,0,0],visible:!1,children:[q.jsx("planeGeometry",{args:[1,.1]}),q.jsx("meshBasicMaterial",{color:IA})]})]}),q.jsxs("mesh",{name:"arrow-y",onPointerDown:({point:v,stopPropagation:_})=>{_(),!(r.current!=="IDLE"||lt(t.current))&&(i.current.setFromMatrix4(t.current.matrix),a.current.copy(v.projectOnVector(i.current.yHat)),s.current.copy(t.current.position),r.current="Y_TRANSLATE",e("deactivate:selection"))},children:[q.jsx(GC,{color:UA,lineWidth:PA,name:"arrow-y-shaft",points:[[0,0,0],[0,.8,0]],renderOrder:1e3}),q.jsxs("mesh",{name:"arrow-y-head",position:[0,1-.1,0],renderOrder:1e3,children:[q.jsx("coneGeometry",{args:[.05,.2,32]}),q.jsx("meshBasicMaterial",{color:UA})]}),q.jsxs("mesh",{name:"arrow-y-box",position:[0,.5,0],renderOrder:1e3,visible:!1,children:[q.jsx("planeGeometry",{args:[.1,1]}),q.jsx("meshBasicMaterial",{color:UA})]})]}),q.jsxs("mesh",{name:"xy-plane",onPointerDown:({point:v,stopPropagation:_})=>{_(),!(r.current!=="IDLE"||lt(t.current))&&(i.current.setFromMatrix4(t.current.matrix),a.current.copy(v.projectOnPlane(i.current.zHat)),s.current.copy(t.current.position),r.current="XY_TRANSLATE",e("deactivate:selection"))},position:[.25,.25,.2],renderOrder:1e3,children:[q.jsx("planeGeometry",{args:[.23,.23]}),q.jsx("meshBasicMaterial",{color:yae})]})]})}function bae(){return q.jsx(hF.Provider,{value:dF,children:q.jsx(_ae,{})})}function iR(){const n=F.useRef([]),e=F.useRef(new M_),{actionsHub:t,cursor:i}=Td(),r=ju(),a=la();return C_(({camera:s,pointer:o})=>{if(!t.isActionRegistered("next:layers.layer"))return;const c=e.current;c.setFromCamera(o,s);const f=n.current;let p="end";for(;;){const _=a("next:layers.layer");if(_.isError()){a("send.error:log",{error:_.getError(),from:`${iR.name}.useFrame`,severity:"high"});break}if(p=_.unwrap(),p==="end")break;const b=c.intersectObjects(p.objects);if(!b.length)continue;const S=[],x=[];b.forEach(A=>{let{object:D}=A;if(!S.includes(D.name))for(;Nn(D.parent);){if(gg(D)&&D.getCoreMetadata().targeatable){S.push(D.getID()),x.push(D);break}D=D.parent}}),f.splice(0,f.length,...x);const T=i.intersections.map(A=>A.uuid),M=i.nearest?.uuid;if(f.length?(i.intersections.splice(0,i.intersections.length,...f),i.nearest=f[0]):(i.intersections.splice(0),i.nearest=void 0),(T.length!==i.intersections.length||T.length===i.intersections.length&&!i.intersections.every(A=>T.includes(A.uuid)))&&r("cursor.intersections:changed",i.intersections),M!==i.nearest?.uuid&&r("cursor.nearest:changed",i.nearest),f.length)break}const d=a("get.byID:layers",{id:0});if(d.isError()){a("send.error:log",{error:d.getError(),from:`${iR.name}.useFrame`,severity:"high",message:'Unable to access to object named "ground".'});return}const[m]=d.unwrap().objects,[v]=c.intersectObject(m);Nn(v)&&!i.position.equals(v.point)&&(i.position.set(v.point.x,v.point.y,0),r("cursor.position:changed",{intersections:i.intersections,nearest:i.nearest,position:i.position})),a("reset:layers.iterator")}),null}class mO extends Error{constructor(e){super(On("core:io.command-queue.errors.ill-formed-command",{command:e})),this.name=mO.name}}class gO extends Error{constructor(e){super(On("common:utils.collections.errors.key-missing",{key:e})),this.name=gO.name}}class E0 extends Error{constructor(){super(On("common:utils.collections.errors.object-not-found")),this.name=E0.name}}class Sr{_commands;_mapping;constructor(){this._commands=[],this._mapping=new Map}clear(){this.clearCommands(),this._mapping.clear()}clearCommands(){this._commands.splice(0)}static createCommand({id:e,input:t,modifier:i,source:r,state:a}){return`${r}.${t}.${e.toLowerCase()}:${a}${Nn(i)?"."+i:""}`}static decomposeCommand(e){const t=/(keyboard|mouse).(key|button).([0-9a-z]+):(down|up)(.[a-z]+)?/.exec(e);if(fr(t))return Lt.Error(new mO(e));const[i,r,a,s,o,c]=t;return Lt.Ok({input:a,id:s,state:o,source:r,modifier:c})}push(e,t){if(this._commands.length){const a=this._commands[this._commands.length-1];if(a===e)return this.traverse(t),Lt.Ok(Xn);const s=Sr.decomposeCommand(a);if(s.isError())return s;const o=Sr.decomposeCommand(e);if(o.isError())return o;const c=o.unwrap();if(Nn(c.modifier)&&Sr.createCommand({...s.unwrap(),modifier:void 0})===Sr.createCommand({...c,modifier:void 0}))return this._commands.splice(this._commands.length-1,1,e),this.traverse(t),Lt.Ok(Xn)}this._commands.push(e),this.traverse(t);const i=Sr.decomposeCommand(e);if(i.isError())return i;const r=i.unwrap();if(r.state==="up"){const a=[Sr.createCommand({...r,state:"down"}),Sr.createCommand({...r,state:"down",modifier:"long"}),Sr.createCommand({...r,state:"down",modifier:"move"})];for(let s=this._commands.length-1;s>-1;s--){const o=this._commands[s];if(a.includes(o)){this._commands.splice(s,1);const c=this.remove(e);if(c.isError())return c}}}return Lt.Ok(Xn)}map(e,t){const i=this._mapping.get(e);lt(i)?this._mapping.set(e,[t]):i.push(t)}remove(e){const t=this._commands.indexOf(e);return t===-1?Lt.Error(new E0):(this._commands.splice(t,1),Lt.Ok(Xn))}replace(e,t){const i=this._commands.indexOf(e);return i===-1?Lt.Error(new E0):(this._commands.splice(i,1,t),Lt.Ok(Xn))}static toSequence(e){return e.join("+")}traverse(e){const t=[...this._commands];for(;t.length;){const i=Sr.toSequence(t),r=this._mapping.get(i);if(Nn(r)){r.forEach(a=>{a(e)});break}t.splice(0,1)}}unmap(e,t){const i=this._mapping.get(e);if(lt(i))return Lt.Error(new gO(e));const r=i.indexOf(t);return r===-1?Lt.Error(new E0):(i.splice(r,1),Lt.Ok(Xn))}}function xae(){const n=la();return n1(()=>{const{items:e}=n("get:selection.state");for(const t of e)t.object instanceof Jh?(n("delete:core.node",t.object.getID()),n("clear:selection")):t.object instanceof S0?(n("delete:core.path",t.object.getID()),n("clear:selection")):t.object instanceof O_&&(n("delete:core.station",t.object.getID()),n("clear:selection"))},[],Sr.toSequence(["keyboard.key.delete:up"])),null}function Sae(){const n=F.useContext(wd);return()=>{const{snapshot:e}=n;if(!lt(e))return{cursor:{intersections:e.cursor.intersections,nearest:e.cursor.nearest,position:e.cursor.position.clone()}}}}function Eae(){const n=F.useContext(wd);return()=>{const{cursor:e}=n;if(lt(n.snapshot))n.snapshot={cursor:{...e}};else{const{snapshot:t}=n;t.cursor.intersections.splice(0,e.intersections.length,...e.intersections),t.cursor.nearest=e.nearest,t.cursor.position.copy(e.position)}}}function Oc(){const n=F.useRef(new Sr),e=Sae(),t=la();function i(m){return Sr.createCommand(m)}function r({value:{key:m}}){const v=n.current,_=i({id:m.toLowerCase(),input:"key",source:"keyboard",state:"down"}),b=v.push(_,void 0);b.isError()&&(v.clearCommands(),t("send.error:log",{components:{key:m},error:b.getError(),from:`${Oc.name}.${r.name}`,message:"Command queue has been reset.",severity:"low"}))}function a({value:{key:m}}){const v=n.current,_=i({id:m.toLowerCase(),input:"key",source:"keyboard",state:"up"}),b=v.push(_,void 0);b.isError()&&(v.clearCommands(),t("send.error:log",{components:{key:m},error:b.getError(),from:`${Oc.name}.${a.name}`,message:"Command queue has been reset.",severity:"low"}))}function s({value:{button:m}}){const v=e();if(lt(m)){t("send.warning:log",{components:{button:"undefined"},from:`${Oc.name}.${s.name}`,message:"user pressed an unknown mouse button."});return}const _=n.current,b=i({id:m.toLowerCase(),input:"button",source:"mouse",state:"down"}),S=_.push(b,v?{snapshot:v}:void 0);S.isError()&&(_.clearCommands(),t("send.error:log",{components:{button:m},error:S.getError(),from:`${Oc.name}.${s.name}`,message:"Command queue has been reset.",severity:"low"}))}function o({value:{button:m}}){const v=e();if(lt(m)){t("send.warning:log",{components:{button:"undefined"},from:`${Oc.name}.${o.name}`,message:"user pressed an unknown mouse button."});return}const _=n.current,b=i({id:m.toLowerCase(),input:"button",source:"mouse",state:"down",modifier:"long"}),S=_.push(b,v?{snapshot:v}:void 0);S.isError()&&(_.clearCommands(),t("send.error:log",{components:{button:m},error:S.getError(),from:`${Oc.name}.${o.name}`,message:"Command queue has been reset.",severity:"low"}))}function c({value:{button:m}}){const v=e();if(lt(m))return;const _=n.current,b=i({id:m.toLowerCase(),input:"button",source:"mouse",state:"down",modifier:"move"}),S=_.push(b,v?{snapshot:v}:void 0);S.isError()&&(_.clearCommands(),t("send.error:log",{components:{button:m},error:S.getError(),from:`${Oc.name}.${c.name}`,message:"Command queue has been reset.",severity:"low"}))}function f({value:{button:m}}){const v=e();if(lt(m)){t("send.warning:log",{components:{button:"undefined"},from:`${Oc.name}.${f.name}`,message:"user pressed an unknown mouse button."});return}const _=n.current,b=i({id:m.toLowerCase(),input:"button",source:"mouse",state:"up"}),S=_.push(b,v?{snapshot:v}:void 0);S.isError()&&(_.clearCommands(),t("send.error:log",{components:{button:m},error:S.getError(),from:`${Oc.name}.${f.name}`,message:"Command queue has been reset.",severity:"low"}))}function p({sequence:m,action:v}){n.current.map(m,v)}function d({sequence:m,action:v}){n.current.unmap(m,v)}return Fo(r,[],"keyboard:key.down"),Fo(a,[],"keyboard:key.up"),Fo(s,[],"mouse.button:down"),Fo(o,[],"mouse.button:down.long"),Fo(c,[],"mouse:move"),Fo(f,[],"mouse.button:up"),Et(i,[],"create.command:controller"),Et(p,[],"map.action:controller"),Et(d,[],"unmap.action:controller"),null}class vO extends Error{constructor(e){super(On("core:io.keyboard.errors.unsupported-key",{key:e})),this.name=vO.name}}const wae="a",Tae="b",Mae="c",Aae="d",Cae="e",Rae="f",Oae="g",Dae="h",Nae="i",Lae="j",Iae="k",Uae="l",Pae="m",zae="n",Bae="o",kae="p",Fae="q",Hae="r",jae="s",Vae="t",Gae="u",Yae="v",Wae="w",Zae="x",Xae="y",qae="z",Kae=[wae,Tae,Mae,Aae,Cae,Rae,Oae,Dae,Nae,Lae,Iae,Uae,Pae,zae,Bae,kae,Fae,Hae,jae,Vae,Gae,Yae,Wae,Zae,Xae,qae],$ae="A",Qae="B",Jae="C",ese="D",tse="E",nse="F",ise="G",rse="H",ase="I",sse="J",ose="K",lse="L",cse="M",use="N",fse="O",dse="P",hse="Q",pse="R",mse="S",gse="T",vse="U",yse="V",_se="W",bse="X",xse="Y",Sse="Z",Ese=[$ae,Qae,Jae,ese,tse,nse,ise,rse,ase,sse,ose,lse,cse,use,fse,dse,hse,pse,mse,gse,vse,yse,_se,bse,xse,Sse],wse=[...Kae,...Ese],Tse="F1",Mse="F2",Ase="F3",Cse="F4",Rse="F5",Ose="F6",Dse="F7",Nse="F8",Lse="F9",Ise="F10",Use="F11",Pse="F12",zse=[Tse,Mse,Ase,Cse,Rse,Ose,Dse,Nse,Lse,Ise,Use,Pse],Bse="ArrowDown",kse="ArrowLeft",Fse="ArrowRight",Hse="ArrowUp",jse=[Bse,kse,Fse,Hse],Vse="0",Gse="1",Yse="2",Wse="3",Zse="4",Xse="5",qse="6",Kse="7",$se="8",Qse="9",Jse=[Vse,Gse,Yse,Wse,Zse,Xse,qse,Kse,$se,Qse],eoe="Alt",toe="Control",noe="Meta",ioe="Shift",roe=[eoe,toe,noe,ioe],aoe="Backspace",soe="Capslock",ooe="Delete",loe="Enter",coe="Escape",uoe="Tab",foe=[aoe,soe,ooe,loe,coe,uoe],doe=[...wse,...zse,...jse,...Jse,...roe,...foe];function hoe(n){return doe.includes(n)}function L3(n,e,t){F.useEffect(()=>{const i=n;return document.addEventListener(t,i),()=>{document.removeEventListener(t,i)}},[t,n,...e])}function dg(n,e,t,i){F.useEffect(()=>{if(Nn(t)){const r=n;return t.addEventListener(i,r),()=>{t.removeEventListener(i,r)}}},[t,i,n,...e])}function rR(){const n=F.useRef(void 0),e=ju(),t=la();function i(s,o){const{altKey:c,ctrlKey:f,key:p,metaKey:d,shiftKey:m}=s;return hoe(p)?Lt.Ok({key:p,modifiers:{alt:c,ctrl:f,meta:d,shift:m},type:o}):Lt.Error(new vO(p))}function r(s){const o=i(s,"KEY_DOWN");if(o.isError()){t("send.warning:log",{from:`${rR.name}.${r.name}`,message:o.getError().message});return}n.current=o.unwrap(),s.key==="Tab"&&s.preventDefault(),e("keyboard:key.down",n.current)}function a(s){const o=i(s,"KEY_UP");if(o.isError()){t("send.warning:log",{from:`${rR.name}.${a.name}`,message:o.getError().message});return}n.current=o.unwrap(),s.key==="Tab"&&s.preventDefault(),e("keyboard:key.up",n.current)}return L3(r,[],"keydown"),L3(a,[],"keyup"),null}const poe=0,moe=1,goe=1,voe=4,yoe=2,_oe=2,boe=250;function xoe(){const n=F.useRef({h:0,pb:0,pl:0,pr:0,pt:0,w:0}),e=F.useRef(void 0),{canvasHTML:t}=Td(),i=Eae(),r=ju();F.useEffect(()=>{if(fr(t))return;const v=t.style.paddingBottom?parseFloat(t.style.paddingBottom):0,_=t.style.paddingLeft?parseFloat(t.style.paddingLeft):0,b=t.style.paddingRight?parseFloat(t.style.paddingRight):0,S=t.style.paddingTop?parseFloat(t.style.paddingTop):0,x=new ResizeObserver(()=>{n.current={h:t.clientHeight-S-v,pb:v,pl:_,pr:b,pt:S,w:t.clientWidth-_-b}});return x.observe(t),()=>{x.unobserve(t)}},[]);function a(v){const{h:_,pb:b,pl:S,pr:x,pt:T,w:M}=n.current,A=Math.min(Math.max(v.offsetX,S),M-x)-S,D=Math.min(Math.max(v.offsetY,T),_-b)-T;return{normalized:[2*(A/M)-1,-2*(D/_)+1],raw:[A,D]}}function s(v,_){let b;return v==="MOUSE_BUTTON_UP"?b=Kg(_.button).with(poe,()=>"LEFT").with(goe,()=>"MIDDLE").with(yoe,()=>"RIGHT").otherwise(()=>{}):_.buttons&&(b=Kg(_.buttons).with(moe,()=>"LEFT").with(voe,()=>"MIDDLE").with(_oe,()=>"RIGHT").otherwise(()=>{})),{button:b,position:a(_),type:v}}function o(v){i(),r("mouse.button:double",s("MOUSE_BUTTON_DOUBLE_CLICK",v))}function c(v){i();const _=s("MOUSE_BUTTON_DOWN",v);e.current=setTimeout(()=>{r("mouse.button:down.long",_)},boe),r("mouse.button:down",_)}function f(v){i(),clearTimeout(e.current),r("mouse.button:up",s("MOUSE_BUTTON_UP",v))}function p(v){i(),r("mouse:enter.scene",s("MOUSE_ENTER",v))}function d(v){i(),r("mouse:leave.scene",s("MOUSE_LEAVE",v))}function m(v){i(),clearTimeout(e.current),r("mouse:move",s("MOUSE_MOVE",v))}return dg(o,[],t,"dblclick"),dg(c,[],t,"mousedown"),dg(p,[],t,"mouseenter"),dg(d,[],t,"mouseleave"),dg(f,[],t,"mouseup"),dg(m,[],t,"mousemove"),null}function Soe(){return q.jsxs(q.Fragment,{children:[q.jsx(rR,{}),q.jsx(xoe,{}),q.jsx(Oc,{})]})}class yO extends Error{constructor(e){super(On("core:layers.errors.unknown-layer-id",{id:e})),this.name=yO.name}}class _O extends Error{constructor(e,t){super(On("core:layers.errors.layer-level-out-of-range",{min:e,max:t})),this.name=_O.name}}const tp={areObjectsEqual(n,e){return n.name===e.name},calculateObjectBounds(n,e=!1){const t=new Hi;return t.setFromObject(n,e),{x:{min:t.min.x,max:t.max.x},y:{min:t.min.y,max:t.max.y},z:{min:t.min.z,max:t.max.z}}},calculateObjectBoundsCenter(n,e=!1){const t=this.calculateObjectBounds(n,e);return new ve(.5*(t.x.min+t.x.max),.5*(t.y.min+t.y.max),.5*(t.z.min+t.z.max))},calculateObjectsBounds(n,e=!1){if(!n.length)return{x:{min:0,max:0},y:{min:0,max:0},z:{min:0,max:0}};const t={x:{min:1/0,max:-1/0},y:{min:1/0,max:-1/0},z:{min:1/0,max:-1/0}};return n.forEach(i=>{const r=this.calculateObjectBounds(i,e);t.x.min=Math.min(t.x.min,r.x.min),t.x.max=Math.max(t.x.max,r.x.max),t.y.min=Math.min(t.y.min,r.y.min),t.y.max=Math.max(t.y.max,r.y.max),t.z.min=Math.min(t.z.min,r.z.min),t.z.max=Math.max(t.z.max,r.z.max)}),t},calculateObjectsBoundsCenter(n,e=!1){const t=this.calculateObjectsBounds(n,e);return new ve(.5*(t.x.min+t.x.max),.5*(t.y.min+t.y.max),.5*(t.z.min+t.z.max))},freeGeometry(n){n.dispose()},freeGeometries(n){n.forEach(e=>{this.freeGeometry(e)})},freeMaterial(n){n.dispose()},freeMaterials(n){n.forEach(e=>{this.freeMaterial(e)})},removeObject(n){for(const e of n.children)this.removeObject(e);$C(n)&&(Array.isArray(n.geometry)?this.freeGeometries(n.geometry):this.freeGeometry(n.geometry),Array.isArray(n.material)?this.freeMaterials(n.material):this.freeMaterial(n.material)),n.parent&&n.parent.remove(n)},isObjectInteractive(n){return this.isObjectSomething(n,"interactive")},isObjectInCollection(n,e){for(const t of n)if(this.areObjectsEqual(t,e))return!0;return!1},isObjectHasData(n,e){return e in n.userData},isObjectSomething(n,e){return n?n.userData[e]:!1},isObjectTargetable(n){return this.isObjectSomething(n,"targetable")}};class Eoe{_iterator=0;_layers={};_levels=[];_n=0;_reversed=!1;constructor(e){lt(e)||this.setup(e)}_checkID(e){return e in this._layers?Lt.Ok(Xn):Lt.Error(new yO(e.toString()))}_checkLevel(e){const t=this._levels.length-1;return e<0||e>t?Lt.Error(new _O(0,t)):Lt.Ok(Xn)}_getIDByLevel(e){const t=this._checkLevel(e);return t.isError()?t:Lt.Ok(this._levels[e])}_getLayerByID(e){const t=this._checkID(e);if(t.isError())return t;const i=this._layers[e];if(lt(i))throw new Error("[ImplementationError] Layers._getLayerByID: layer is undefined");return Lt.Ok(i)}_getLayerByLevel(e){const t=this._getIDByLevel(e);return t.isError()?t:Lt.Ok(this._layers[t.unwrap()])}_getLevelByID(e){const t=this._checkID(e);if(t.isError())return t;const i=this._levels.findIndex(r=>r===e);if(i===-1)throw new Error(`[AttributeError] Layers._getLevelByID: no level found for layer ${e}`);return Lt.Ok(i)}addLayer(e=[],t){const i=this._n++;this._layers[i]={name:t,objects:e,visible:!0};const r=this._levels.length;return this._levels.push(r),{id:i,level:r,name:t,visible:!0}}addObjectsByID(e,t){const i=this._getLayerByID(e);return i.isError()?i:(i.unwrap().objects.push(...t),Lt.Ok(Xn))}addObjectsByLevel(e,t){const i=this._getIDByLevel(e);return i.isError()?i:(this.addObjectsByID(i.unwrap(),t),Lt.Ok(Xn))}down(e){const t=this._getLevelByID(e);if(t.isError())return t;const i=t.unwrap();if(!i)return Lt.Ok({id:e,level:0});const r=i-1,a=this._getIDByLevel(r);if(a.isError())return a;const s=a.unwrap();this._levels[r]=e,this._levels[i]=s;const o=this.getLayerByID(e);if(o.isError())return o;const c=o.unwrap();return Lt.Ok({id:e,level:r,name:c.name,visible:c.visible})}getLayerByID(e){const t=this._getLevelByID(e);if(t.isError())return t;const i=t.unwrap(),r=this._getLayerByID(e);if(r.isError())return r;const a=r.unwrap();return Lt.Ok({id:e,...a,level:i})}getLayerByLevel(e){const t=this._getIDByLevel(e);if(t.isError())return t;const i=t.unwrap(),r=this._getLayerByLevel(e);if(r.isError())return r;const a=r.unwrap();return Lt.Ok({id:i,...a,level:e})}getLayerInfoByID(e){const t=this.getLayerByID(e);if(t.isError())return t;const i=t.unwrap();return Lt.Ok({id:e,level:i.level,name:i.name,visible:i.visible})}getLayers(){const e=[];return this._levels.forEach((t,i)=>{const r=this._getLayerByID(t);if(r.isError())return r;const a=r.unwrap();e.push({id:t,...a,level:i})}),e.sort((t,i)=>t.level-i.level)}getLayersInfo(){const e={};for(const{level:t,...i}of this.getLayers())e[t]=i;return e}hideByID(e){const t=this._getLayerByID(e);if(t.isError())return t;const i=t.unwrap();return i.visible&&(i.objects.forEach(r=>r.visible=!1),i.visible=!1),Lt.Ok(Xn)}hideByLevel(e){const t=this._getIDByLevel(e);if(t.isError())return t;const i=t.unwrap(),r=this.hideByID(i);return r.isError()?r:Lt.Ok(Xn)}next(){if(this._iterator<0||this._iterator>this._levels.length-1)return Lt.Ok("end");const e=this._getLayerByLevel(this._iterator);return e.isError()?(this.reset(),e):(this._iterator+=this._reversed?-1:1,e)}moveTo(e,t){this._checkLevel(t);const i=this._getLevelByID(e);if(i.isError())return i;const r=i.unwrap(),a=t-r,s=a>0?f=>this.up(f):f=>this.down(f);for(let f=0;f<Math.abs(a);f++)s(e);const o=this._getLayerByID(e);if(o.isError())return o;const c=o.unwrap();return Lt.Ok({id:e,level:t,name:c.name,visible:c.visible})}removeLayerByID(e){const t=this._getLevelByID(e);if(t.isError())return t;const i=t.unwrap(),{[e]:r,...a}=this._layers;return this._levels.splice(i,1),this._layers=a,Lt.Ok(Xn)}removeLayerByLevel(e){const t=this._getIDByLevel(e);if(t.isError())return t;const i=t.unwrap(),r=this.removeLayerByID(i);return r.isError()?r:Lt.Ok(Xn)}removeObjectsByID(e,t,i){i??=tp.areObjectsEqual;const r=this._getLayerByID(e);if(r.isError())return r;const a=r.unwrap();for(const s of t){const o=a.objects.findIndex(c=>i(c,s));o!==-1&&a.objects.splice(o,1)}return Lt.Ok(Xn)}removeObjectsByLevel(e,t,i){const r=this._getIDByLevel(e);if(r.isError())return r;const a=r.unwrap(),s=this.removeObjectsByID(a,t,i);return s.isError()?s:Lt.Ok(Xn)}reset(){this._iterator=this._reversed?this._levels.length-1:0}setReversed(e){this._reversed=e,this.reset()}setup(e){const t=Object.keys(e).map(i=>Number(i)).sort((i,r)=>i-r);t.forEach((i,r)=>{if(i!==r)throw new Error("[AttributeError] Layers: layer levels are not well defined")}),this.reset(),this._n=0,this._layers={},this._levels=new Array(t.length);for(const i in e){const r=Number(i),a=e[r];a.visible||a.objects.forEach(o=>o.visible=!1);const s=this._n++;this._layers[s]=e[r],this._levels[r]=s}}showByID(e){const t=this._getLayerByID(e);if(t.isError())return t;const i=t.unwrap();return i.visible||(i.objects.forEach(r=>r.visible=!0),i.visible=!0),Lt.Ok(Xn)}showByLevel(e){const t=this._getIDByLevel(e);if(t.isError())return t;const i=t.unwrap(),r=this.showByID(i);return r.isError()?r:Lt.Ok(Xn)}up(e){const t=this._getLevelByID(e);if(t.isError())return t;const i=t.unwrap(),r=this._levels.length-1;if(i===r)return Lt.Ok({id:e,level:0});const a=i+1,s=this._getIDByLevel(i);if(s.isError())return s;const o=s.unwrap();this._levels[a]=e,this._levels[i]=o;const c=this._getLayerByID(e);if(c.isError())return c;const f=c.unwrap();return Lt.Ok({id:e,level:a,name:f.name,visible:f.visible})}}function Qf({setup:n}){const e=F.useRef(new Eoe(n)),t=ju(),i=la();function r({name:T,objects:M}){const A=e.current.addLayer(M,T);return t("layers.layer:added",A),A}function a({id:T,objects:M}){e.current.addObjectsByID(T,M);const A=e.current.getLayerInfoByID(T);if(A.isError()){i("send.error:log",{error:A.getError(),from:`${Qf.name}.${a.name}`,severity:"high"});return}t("layers.objects:added",{layer:A.unwrap(),objects:M})}function s({id:T}){return e.current.getLayerByID(T)}function o(){return e.current.getLayers()}function c(){return e.current.next()}function f({id:T}){e.current.hideByID(T);const M=e.current.getLayerInfoByID(T);if(M.isError()){i("send.error:log",{error:M.getError(),from:`${Qf.name}.${f.name}`,severity:"high"});return}t("layers.layer.visible:changed",M.unwrap())}function p(){t("layers:setup",e.current.getLayersInfo())}function d({id:T,level:M}){const A=e.current.moveTo(T,M);return A.isError()?(i("send.error:log",{error:A.getError(),from:`${Qf.name}.${d.name}`,severity:"high"}),A):(t("layers.layer:moved",A.unwrap()),A)}function m({id:T}){e.current.removeLayerByID(T),t("layers.layer:removed",T)}function v({id:T,objects:M}){const A=e.current.removeObjectsByID(T,M);if(A.isError()){i("send.error:log",{error:A.getError(),from:`${Qf.name}.${v.name}`,severity:"high"});return}const D=e.current.getLayerInfoByID(T);if(D.isError()){i("send.error:log",{error:D.getError(),from:`${Qf.name}.${v.name}`,severity:"high"});return}t("layers.objects:removed",{layer:D.unwrap(),objects:M})}function _(){e.current.reset()}function b({id:T}){const M=e.current.showByID(T);if(M.isError()){i("send.error:log",{error:M.getError(),from:`${Qf.name}.${b.name}`,severity:"high"});return}const A=e.current.getLayerInfoByID(T);if(A.isError()){i("send.error:log",{error:A.getError(),from:`${Qf.name}.${v.name}`,severity:"high"});return}t("layers.layer.visible:changed",A.unwrap())}function S({reversed:T}){e.current.setReversed(T)}function x({layers:T}){e.current.setup(T);const M=e.current.getLayersInfo();return t("layers:setup",M),M}return F.useEffect(p,[]),Et(r,[],"add:layers.layer"),Et(a,[],"add:layers.objects"),Et(o,[],"get:layers"),Et(s,[],"get.byID:layers"),Et(f,[],"hide:layers.layer"),Et(c,[],"next:layers.layer"),Et(d,[],"move:layers.layer"),Et(m,[],"remove:layers.layer"),Et(v,[],"remove:layers.objects"),Et(_,[],"reset:layers.iterator"),Et(b,[],"show:layers.layer"),Et(S,[],"set:layers.iterator.direction"),Et(x,[],"setup:layers"),null}function woe(){const n=ju(),e=(s,o,c,f)=>{let d=`[${new Date().toISOString()}] [${s.toUpperCase()}]: `;d+=`[${s}.from]="${o}"`;const m=Object.keys(c);return m.length>0&&(d+=" "+m.map(v=>`[${v}]="${c[v]}"`).join(" ")),Nn(f)&&f.trim().length>0&&(d+=` [log.message]="${f}"`),d},t=({components:s,from:o,message:c})=>{n("log:send.debug",e("debug",o,s??{},c))},i=({components:s,error:o,from:c,message:f,severity:p})=>{const d=Nn(o.stack)?o.stack.replaceAll(/\s+/g," ").replaceAll(`
`,""):"undefined";s??={},s["error.severity"]=p,s["error.name"]=o.name,s["error.message"]=o.message,s["error.stack"]=d,n("log:send.error",e("error",c,s,f))},r=({components:s,from:o,message:c})=>{n("log:send.info",e("info",o,s??{},c))},a=({components:s,from:o,message:c})=>{n("log:send.warning",e("warning",o,s??{},c))};return Et(t,[],"send.debug:log"),Et(i,[],"send.error:log"),Et(r,[],"send.info:log"),Et(a,[],"send.warning:log"),null}const pF=-.002,Toe=new ve(0,0,pF),Moe=new Fn(Gg,0,0),Aoe=new ve(1,1,1),I3=new Ws(0,0),U3=new oa({transparent:!0}),Coe={alphaMap:new Uint8ClampedArray,height:0,name:"unknown",png:"",resolution:1,width:0};class Roe extends Xo{constructor(){super(new Ei(I3,U3),Coe),this.setID("blueprint"),this.setRotation(Moe),this.setPosition(Toe),this.setScale(Aoe)}getGeometry(){return this._object3D.geometry}getMaterial(){return this._object3D.material}reset(){this.setPosition(new ve(0,0,0)),this.setRotation(new Fn(0,0,0)),this.setScale(new ve(1,1,1));const e=this.getGeometry(),t=this.getMaterial();e.copy(I3),t.copy(U3)}serialize(){return super.serialize()}setPosition(e,t,i){return e.setZ(pF),super.setPosition(e,t,i),this}setRotation(e,t,i){return e.set(Gg,0,e.z),super.setRotation(e,t,i),this}setScale(e){return e.setZ(1),super.setScale(e),this}update(){const{alphaMap:e,height:t,width:i}=this._metadata,r=new Yo(e,i,t);r.needsUpdate=!0;const a=this.getGeometry(),s=this.getMaterial();a.copy(new Ws(i,t)),s.copy(new oa({alphaMap:r,side:jo,transparent:!0}))}}const ds={color:"#1d2733",depth:100,depthSection:1,width:100,widthSection:1,wireframe:!1,wireframeLineWidth:2},Ooe=-.004;class Doe extends Xo{_color;_depth;_depthSection;_width;_widthSection;_wireframe;_wireframeLineWidth;constructor(){super(new Ei(new Ws(ds.width,ds.depth,ds.widthSection,ds.depthSection),new oa({color:ds.color,wireframe:ds.wireframe,wireframeLinewidth:ds.wireframeLineWidth})),{}),this._coreMetadata={level:0,selectable:!1,targeatable:!0},this._color=ds.color,this._depth=ds.depth,this._depthSection=ds.depthSection,this._width=ds.width,this._widthSection=ds.widthSection,this._wireframe=ds.wireframe,this._wireframeLineWidth=ds.wireframeLineWidth,this.name="ground",this.position.z=Ooe,this.setVisible(!1)}setColor(e){return this._color=e,this}setDepth(e){return this._depth=e,this}setDepthSection(e){return this._depthSection=e,this}setVisible(e){return this.visible=e,this}setWidth(e){return this._width=e,this}setWidthSection(e){return this._widthSection=e,this}setWireframe(e){return this._wireframe=e,this}setWireframeLineWidth(e){return this._wireframeLineWidth=e,this}update(){const e=this.getGeometry(),t=this.getMaterial();e.copy(new Ws(this._width,this._depth,this._widthSection,this._depthSection)),t.copy(new oa({color:this._color,wireframe:this._wireframe,wireframeLinewidth:this._wireframeLineWidth}))}}const a1=-.003,Noe=new ve(0,0,a1),Loe=new Fn(Gg,0,0),Ioe=new ve(1,1,1);class Uoe extends Xo{constructor(){super(new Ei(new Ws(0,0),new oa({transparent:!0})),{data:new Uint8ClampedArray,height:0,image:"",opacity:1,resolution:1,width:0}),this.setID("overlay"),this.setRotation(Loe),this.setPosition(Noe),this.setScale(Ioe)}rotate(e,t,i,r,a){return super.rotate(-e,t,i,r,a),this}serialize(){return super.serialize()}setOpacity(e){this._metadata.opacity=e;const t=this.getMaterial();return t.opacity=e,this}setPosition(e,t,i){return e.setZ(a1),super.setPosition(e,t,i),this}setRotation(e,t,i){return e.set(Gg,0,e.z),super.setRotation(e,t,i),this}setScale(e){return e.setZ(1),super.setScale(e),this}update(){const{data:e,height:t,opacity:i,width:r}=this._metadata,a=new Yo(e,r,t);a.needsUpdate=!0,a.colorSpace=Aa;const s=this.getGeometry(),o=this.getMaterial();s.copy(new Ws(r,t)),o.copy(new oa({map:a,opacity:i,side:jo,transparent:!0}))}}const Poe=1,zoe=-2e-4,Boe=0,koe=-3e-4,s1=6710886,Foe=-.001,Hoe=()=>{const n=new _s;n.name="world";const e=new _s;e.position.set(0,0,zoe),e.name="artefacts",e.renderOrder=Poe,n.add(e);const t=new Roe;e.add(t);const i=new Uoe;e.add(i);const r=new B2(0,0,s1,s1);r.name="grid",r.position.set(0,0,Foe),r.rotation.set(P4,0,0),r.visible=!1,e.add(r);const a=new _s;a.position.set(0,0,koe),a.name="base",a.renderOrder=Boe,n.add(a);const s=new Doe;a.add(s),s.setLevel(0);const o=new _s;return o.name="objects",n.add(o),{artefacts:e,blueprint:t,base:a,grid:r,ground:s,objects:o,overlay:i,world:n}},mF=()=>{const{artefacts:n,base:e,blueprint:t,grid:i,ground:r,objects:a,overlay:s,world:o}=Hoe();return{artefacts:{blueprint:t,grid:i,overlay:s,ref:n},base:{ground:r,ref:e},objects:a,world:o}},gF=F.createContext(mF());function wp(){return F.useContext(gF)}function joe(){const{base:{ground:n},world:e}=wp(),t=la(),i=ir(s=>s.scene);function r(){return t("add:layers.objects",{id:0,objects:[n]}),()=>{t("remove:layers.objects",{id:0,objects:[n]})}}function a(){return i.add(e),t("set:core.world",{world:e}),()=>{e.removeFromParent(),t("set:core.world",{world:void 0})}}return F.useEffect(a,[e]),Fo(r,[],"layers:setup"),null}function Voe(){const{artefacts:{ref:n}}=wp(),e=r=>{n.add(...r)},t=r=>{for(const a of r)n.attach(a)},i=r=>{n.remove(...r)};return Et(e,[],"add:map.artefacts"),Et(t,[],"attach:map.artefacts"),Et(i,[],"remove:map.artefacts"),null}function Goe(){const{artefacts:{blueprint:n}}=wp();function e(){n.reset()}function t({metadata:i,position:r,rotation:a,scale:s}){n.setMetadata(i).setRotation(a).setPosition(r).setScale(s).update()}return Et(e,[],"clear:map.blueprint"),Et(t,[],"set:map.blueprint"),null}function Yoe(){const{artefacts:n}=wp();function e(){n.grid.visible=!1}function t({cellSize:r,gridSize:a}){const s=n.grid.name,o=n.grid.position.clone(),c=n.grid.rotation.clone(),f=n.grid.scale.clone(),p=n.grid.visible,d=a%r===0?a:a+(r-a%r),m=d/r;n.grid.removeFromParent();const v=new B2(d,m,s1,s1);v.name=s,v.position.copy(o),v.rotation.copy(c),v.scale.copy(f),v.visible=p,n.grid=v,n.ref.add(v)}function i(){n.grid.visible=!0}return Et(e,[],"hide:map.grid"),Et(t,[],"set:map.grid"),Et(i,[],"show:map.grid"),null}function Woe(){const{base:{ground:n}}=wp();function e(){n.setVisible(!1)}function t(r){const a=Gc.patch(ds,r);n.setColor(a.color).setDepth(a.depth).setDepthSection(a.depthSection).setWidth(a.width).setWidthSection(a.widthSection).setWireframe(a.wireframe).setWireframeLineWidth(a.wireframeLineWidth).update()}function i(){n.setVisible(!0)}return Et(e,[],"hide:map.ground"),Et(t,[],"set:map.ground"),Et(i,[],"show:map.ground"),null}function Zoe(){const{objects:n}=wp(),e=a=>{n.add(...a)},t=()=>{n.clear()},i=a=>{for(const s of a)n.attach(s)},r=a=>{n.remove(...a)};return Et(e,[],"add:map.objects"),Et(t,[],"clear:map.objects"),Et(i,[],"attach:map.objects"),Et(r,[],"remove:map.objects"),null}function Xoe(){const{artefacts:{overlay:n}}=wp(),e=ju(),t=la();function i(){return{components:{},id:n.getID(),metadata:{...n.getMetadata()},position:n.position,rotation:n.rotation,scale:n.scale,visible:n.visible}}function r(){return n}function a(){n.setVisible(!1);const b=i();e("overlay:update",{...b})}function s(){n.setPosition(new ve(0,0,a1)).setRotation(new Fn(Gg,0,0)).setVisible(!1).setMetadata({data:new Uint8ClampedArray,height:0,opacity:1,width:0}).update();const b=i();e("overlay:update",{...b})}function o(){t("set:core.state","select"),t("set:selection",{objects:[n]}),t("set:controls.scale",{scale:50})}function c({data:b,height:S,width:x}){n.setMetadata({data:b,height:S,width:x}).update(),n.setVisible(!0);const T=i();e("overlay:update",{...T})}function f({opacity:b}){n.setOpacity(b);const S=i();e("overlay:update",{...S})}function p({position:b}){b.setZ(a1),n.setPosition(b);const S=i();e("overlay:update",{...S})}function d({rotation:b}){b.x=Gg,n.setRotation(b,"local");const S=i();e("overlay:update",{...S})}function m({resolution:b}){n.setMetadata({resolution:b}).setScale(new ve(b,b,1)),e("overlay:update",{...i()})}function v({scale:b}){b.z=1,n.scale.copy(b);const S=i();e("overlay:update",{...S})}function _(){n.setVisible(!0);const b=i();e("overlay:update",{...b})}return Et(r,[],"get:map.overlay"),Et(i,[],"get:map.overlay.data"),Et(a,[],"hide:map.overlay"),Et(s,[],"reset:map.overlay"),Et(o,[],"select:map.overlay"),Et(c,[],"set:map.overlay.data"),Et(f,[],"set:map.overlay.opacity"),Et(p,[],"set:map.overlay.position"),Et(m,[],"set:map.overlay.resolution"),Et(d,[],"set:map.overlay.rotation"),Et(v,[],"set:map.overlay.scale"),Et(_,[],"show:map.overlay"),null}function qoe(){return q.jsxs(gF.Provider,{value:mF(),children:[q.jsx(Voe,{}),q.jsx(Goe,{}),q.jsx(Xoe,{}),q.jsx(Woe,{}),q.jsx(Zoe,{}),q.jsx(Yoe,{}),q.jsx("group",{name:"world"}),q.jsx(joe,{})]})}class Koe extends Fk{enableRotation=!0;async rotate(e,t,i){this.enableRotation&&await super.rotate(e,0,i)}}const $oe=500;function Qoe({controlsRef:n}){const e=Gc.wrapAsyncFn(async r=>{const a=n.current;if(fr(a))return;const[s,o,c]=r;await a.moveTo(s,o,c,!0)}),t=({min:r,max:a})=>{const s=n.current;fr(s)||s.setBoundary(new Hi(new ve(r[0],r[1],0),new ve(a[0],a[1],$oe)))},i=Gc.wrapAsyncFn(async r=>{const a=n.current;fr(a)||await a.zoomTo(r,!0)});return Et(e,[],"move-to:navigation"),Et(t,[],"set:navigation.boundaries"),Et(i,[],"zoom-to:navigation"),null}const Joe=300,ele=3;function tle(){const n=F.useRef(null);function e({value:t}){const i=n.current;fr(i)||(i.enableRotation=t==="navigate")}return Fo(e,[],"core.state:changed"),q.jsxs(q.Fragment,{children:[q.jsx(nie,{impl:Koe,ref:n,minZoom:ele,maxZoom:Joe}),q.jsx(Qoe,{controlsRef:n})]})}const vF={focus:void 0,groupRef:{current:void 0},items:[]},bO=F.createContext(vF);function yF(){return F.useContext(bO)}class xO extends Error{constructor(){super(On("core:world.errors.world-undefined")),this.name=xO.name}}function _F(){const{groupRef:n}=yF(),e=la();function t(){if(Nn(n.current))return;const i=e("get:core.world");if(lt(i)){e("send.error:log",{error:new xO,from:`${_F.name}.${t.name}`,severity:"critical",message:"Unable to initialize the selection submodule."});return}return n.current=new _s,n.current.name="selection",i.attach(n.current),()=>{n.current=void 0}}return F.useEffect(t,[n.current]),null}const Ri={areItemsEqual(n,e){return tp.areObjectsEqual(n.object,e.object)},createItem(n,e=!1){return{object:n,locked:e}},createItems(n,e=!1){return n.map(t=>this.createItem(t,e))},deleteItem(n,e){const t=this.getItemIndex(n,e);return t!==-1&&n.splice(t,1),n},deleteItems(n,e){return e.forEach(t=>{this.deleteItem(n,t)}),n},getLockedItems(n){return n.filter(e=>e.locked)},getItemByObject(n,e){return n.find(t=>tp.areObjectsEqual(t.object,e))},getItemByObjectName(n,e){return n.find(t=>t.object.name===e)},getItemIndex(n,e){return n.findIndex(t=>this.areItemsEqual(t,e))},getUnlockedItems(n){return n.filter(e=>!e.locked)},lockItemByObjectName(n,e){const t=this.getItemByObjectName(n,e);t&&(t.locked=!0)},isObjectSelected(n,e){return n.some(t=>tp.areObjectsEqual(t.object,e))},isObjectSelectable(n){return n.getCoreMetadata().selectable},isItemSelected(n,e){return n.find(t=>this.areItemsEqual(t,e))},mapToObject3D(n,e=!1){return e?n.object.clone():n.object},mapToObject3Ds(n,e=!1){return n.map(t=>this.mapToObject3D(t,e))},splitItems(n){const e=[],t=[];return n.forEach(i=>{i.locked?e.push(i):t.push(i)}),{locked:e,unlocked:t}},unlockItemByObjectName(n,e){const t=this.getItemByObjectName(n,e);t&&(t.locked=!1)}};class SO extends Error{constructor(e){super(On("core:objects.errors.parent-undefined",{object:e})),this.name=SO.name}}function YS(){const n=yF(),{send:e}=Hu.useActorRef(),t=ju(),i=la();function r(T){const M=[],A=[];for(const D of T)D.getCoreMetadata().level===1?M.push(D):A.push(D);for(const D of A){let O=D;for(;O.getCoreMetadata().level!==1;){if(fr(O.parent))return Lt.Error(new SO(O.getID()));O=O.parent}M.push(O)}return Lt.Ok(M)}function a(T,M){if(!T.length&&!M.length)return;const{groupRef:{current:A},items:D}=n;lt(A)||(s(),A.visible=D.length>0,i("set:controls.targets",{targets:Ri.mapToObject3Ds(D)}),i("set:controls.transform",{position:A.position,rotation:A.rotation}))}function s(){const{groupRef:{current:T},items:M}=n;if(!lt(T)){if(!M.length)T.position.set(0,0,0),T.quaternion.set(0,0,0,1);else if(M.length===1){const A=M[0]?.object;if(lt(A))return;A.matrixWorld.decompose(T.position,T.quaternion,new ve)}else{const A={};M.forEach(O=>{A[O.object.name]={position:T.localToWorld(O.object.position.clone()),quaternion:O.object.getWorldQuaternion(new Or)}});const D=tp.calculateObjectsBoundsCenter(Ri.mapToObject3Ds(M)).setZ(0);T.position.copy(D),T.quaternion.set(0,0,0,1)}T.position.set(T.position.x,T.position.y,0)}}function o(){const{groupRef:{current:T},items:M}=n;if(lt(T)||!M.length)return;const A=Ri.getUnlockedItems(M);A.length&&(Ri.deleteItems(M,A),a([],A),t("selection:changed",{selected:[],selection:Ri.mapToObject3Ds(M),unselected:Ri.mapToObject3Ds(A)}))}function c(){e({type:"SWITCH_TO_SELECT"})}const f=()=>n.items.map(T=>T.object.getID());function p(){const{focus:T,items:M}=n;return{focus:T,items:[...M]}}function d({objects:T}){if(!T.length)return;const{items:M}=n;T.forEach(A=>{const D=Ri.getItemByObject(M,A);lt(D)||D.locked||(D.locked=!0)})}function m({objects:T}){const{groupRef:{current:M}}=n;if(lt(M)||!T.length)return;const A=r(T);if(A.isError()){i("send.error:log",{error:A.getError(),from:`${YS.name}.${m.name}`,severity:"critical",message:"Unable to select the objects."});return}const D=A.unwrap(),{items:O}=n,I=[];D.forEach(U=>{Ri.isObjectSelected(O,U)||I.push(Ri.createItem(U))}),O.push(...I),a(I,[]),t("selection:changed",{selected:Ri.mapToObject3Ds(I),selection:Ri.mapToObject3Ds(O),unselected:[]})}function v({objects:T}){const{groupRef:{current:M}}=n;if(lt(M))return;if(!T.length){o();return}const A=r(T);if(A.isError()){i("send.error:log",{error:A.getError(),from:`${YS.name}.${v.name}`,severity:"critical",message:"Unable to set the selection."});return}const D=A.unwrap(),{items:O}=n;if(!O.length){O.push(...Ri.createItems(D)),a(O,[]),t("selection:changed",{selected:D,selection:D,unselected:[]});return}const I=O.filter(L=>L.locked||tp.isObjectInCollection(D,L.object)),U=D.filter(L=>!Ri.isObjectSelected(I,L)),N=O.filter(L=>!Ri.isObjectSelected(I,L.object)&&!tp.isObjectInCollection(U,L.object));!U.length&&!N.length||(O.splice(0),O.push(...I,...Ri.createItems(U)),a(Ri.createItems(U),N),t("selection:changed",{selected:U,selection:Ri.mapToObject3Ds(O),unselected:Ri.mapToObject3Ds(N)}))}function _({mode:T}){Kg(T).with("BOX_EXTEND",()=>{e({type:"SWITCH_TO_SELECT_BOX_EXTEND"})}).with("BOX_EXTEND_RELEASED",()=>{e({type:"SWITCH_TO_SELECT_BOX_EXTEND_RELEASED"})}).with("BOX_SET",()=>{e({type:"SWITCH_TO_SELECT_BOX_SET"})}).with("SINGLE_EXTEND",()=>{e({type:"SWITCH_TO_SELECT_SINGLE_EXTEND"})}).with("SINGLE_SET",()=>{e({type:"SWITCH_TO_SELECT_SINGLE_SET"})}).with("UNDEFINED",()=>{e({type:"SWITCH_TO_SELECT_UNDEFINED"})}).exhaustive()}function b({object:T}){return Ri.isObjectSelected(n.items,T)}function S({objects:T}){if(!T.length)return;const{items:M}=n;T.forEach(A=>{const D=Ri.getItemByObject(M,A);lt(D)||!D.locked||(D.locked=!1)})}function x({objects:T}){const{groupRef:{current:M}}=n;if(lt(M))return;const A=r(T);if(A.isError()){i("send.error:log",{error:A.getError(),from:`${YS.name}.${x.name}`,severity:"critical",message:"Unable to unselect objects."});return}const D=A.unwrap(),{items:O}=n,I=Ri.getLockedItems(O),U=[];D.forEach(N=>{const L=Ri.getItemByObject(O,N);lt(L)||Ri.isItemSelected(I,L)||U.push(L)}),Ri.deleteItems(O,U),a(I,U),t("selection:changed",{selected:[],selection:Ri.mapToObject3Ds(O),unselected:Ri.mapToObject3Ds(U)})}return Et(o,[],"clear:selection"),Et(c,[],"enable:selection"),Et(f,[],"get:selection"),Et(p,[],"get:selection.state"),Et(d,[],"lock:selection"),Et(m,[],"select:selection"),Et(v,[],"set:selection"),Et(_,[],"switch:selection.mode"),Et(b,[],"test.selected:selection"),Et(S,[],"unlock:selection"),Et(x,[],"unselect:selection"),null}function nle(){const{extend:n,select:e,set:t}=Sw(Hu.useActorRef(),f=>({extend:f.matches({select:{single:"extend"}}),select:f.matches("select"),set:f.matches({select:{single:"set"}})})),i=la(),r=F.useCallback(()=>{e&&i("switch:selection.mode",{mode:"SINGLE_SET"})},[e]),a=F.useCallback(()=>{e&&i("switch:selection.mode",{mode:"UNDEFINED"})},[e]);function s(){i("set:core.state","navigate")}function o(){i("switch:selection.mode",{mode:"SINGLE_EXTEND"})}function c(){i("switch:selection.mode",{mode:"SINGLE_SET"})}return F.useEffect(()=>(t&&i("map.action:controller",{sequence:Sr.toSequence(["keyboard.key.escape:down"]),action:s}),()=>{i("unmap.action:controller",{sequence:Sr.toSequence(["keyboard.key.escape:down"]),action:s})}),[t]),F.useEffect(()=>(t&&i("map.action:controller",{sequence:Sr.toSequence(["keyboard.key.shift:down"]),action:o}),()=>{i("unmap.action:controller",{sequence:Sr.toSequence(["keyboard.key.shift:down"]),action:o})}),[t]),F.useEffect(()=>(n&&i("map.action:controller",{sequence:Sr.toSequence(["keyboard.key.shift:up"]),action:c}),()=>{i("unmap.action:controller",{sequence:Sr.toSequence(["keyboard.key.shift:up"]),action:c})}),[n]),Et(r,[],"activate:selection"),Et(a,[],"deactivate:selection"),null}class o1 extends Error{constructor(e){super(On("common:utils.arguments.error.undefined",{argument:e})),this.name=o1.name}}function aR(){const n=F.useContext(bO),{extend:e,navigate:t,set:i}=Sw(Hu.useActorRef(),o=>({extend:o.matches({select:{single:"extend"}}),navigate:o.matches("navigate"),set:o.matches({select:{single:"set"}})})),r=la();function a(o){if(!e)return;if(lt(o)){r("send.error:log",{error:new o1("input"),from:`${aR.name}.${a.name}`,severity:"high"});return}const{snapshot:{cursor:{nearest:c}}}=o;lt(c)||!c.getCoreMetadata().selectable||Ri.getItemByObject(n.items,c)}function s(o){if(!i&&!t)return;if(lt(o)){r("send.error:log",{error:new o1("input"),from:`${aR.name}.${s.name}`,severity:"high"});return}const{snapshot:{cursor:{nearest:c}}}=o;if(lt(c)||c.getCoreMetadata().level===0){r("clear:selection"),r("set:core.state","navigate");return}c.getCoreMetadata().selectable&&(r("set:selection",{objects:[c]}),t&&r("set:core.state","select"))}return n1(a,[e],Sr.toSequence(["keyboard.key.shift:down","mouse.button.left:down","mouse.button.left:up"])),n1(s,[t,i],Sr.toSequence(["mouse.button.left:up"])),null}function ile(){return q.jsxs(bO.Provider,{value:vF,children:[q.jsx(YS,{}),q.jsx(nle,{}),q.jsx(aR,{}),q.jsx(_F,{})]})}function rle(){return q.jsx(lie,{alignment:"top-right",margin:[50,50],children:q.jsx(cie,{axisColors:[ki.red().str(),ki.green().str(),ki.blue().str()],disabled:!0,labelColor:ki.white().str(),scale:25})})}function ale(){const{canvasHTML:n}=Td();function e({style:t}){fr(n)||(n.style.cursor=t)}return Et(e,[],"set:pointer.style"),null}const sle=new ve(0,0,1);function ole({ref:n}){const e=F.useRef(null),[t,i]=F.useState(jk),[r,a]=F.useState({input:{emit:Gc.doNothing}});return F.useEffect(()=>{const s=e.current;fr(s)||(i(o=>({...o,canvasHTML:s})),a({input:{emit:(o,c)=>{t.eventsHub.emit(o,c)}}}))},[]),F.useImperativeHandle(n,()=>({forget:s=>{t.eventsHub.removeEventListener(s)},listen:(s,o,c=0)=>t.eventsHub.addEventListener(s,o,c),perform:(s,o)=>t.actionsHub.perform(s,o)}),[t]),q.jsxs(Yne,{dpr:[1,2],ref:e,resize:{debounce:0},children:[q.jsx(Bk,{makeDefault:!0,position:[0,0,1],zoom:10,up:sle}),q.jsx(wd.Provider,{value:t,children:q.jsxs(Hu.Provider,{options:r,children:[q.jsx(woe,{}),q.jsx(JC,{}),q.jsx(eR,{}),q.jsx(lae,{}),q.jsx(cae,{}),q.jsx(ale,{}),q.jsx(Soe,{}),q.jsx(Qf,{}),q.jsx(qoe,{}),q.jsx(iR,{}),q.jsx(uae,{}),q.jsx(tle,{}),q.jsx(ile,{}),q.jsx(rle,{}),q.jsx(bae,{}),q.jsx(mae,{}),q.jsx(xae,{}),q.jsx(cF,{})]})})]})}function lle(){const n=Za();return q.jsxs("div",{className:"relative w-full h-full",children:[q.jsx(Bte,{}),q.jsx(rte,{}),q.jsx(ole,{ref:n.coreModuleRef})]})}const Ew=F.createContext(null);Ew.displayName="PanelGroupContext";const ur={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},EO=10,np=F.useLayoutEffect,P3=CR.useId,cle=typeof P3=="function"?P3:()=>null;let ule=0;function wO(n=null){const e=cle(),t=F.useRef(n||e||null);return t.current===null&&(t.current=""+ule++),n??t.current}function bF({children:n,className:e="",collapsedSize:t,collapsible:i,defaultSize:r,forwardedRef:a,id:s,maxSize:o,minSize:c,onCollapse:f,onExpand:p,onResize:d,order:m,style:v,tagName:_="div",...b}){const S=F.useContext(Ew);if(S===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:x,expandPanel:T,getPanelSize:M,getPanelStyle:A,groupId:D,isPanelCollapsed:O,reevaluatePanelConstraints:I,registerPanel:U,resizePanel:N,unregisterPanel:L}=S,Y=wO(s),ee=F.useRef({callbacks:{onCollapse:f,onExpand:p,onResize:d},constraints:{collapsedSize:t,collapsible:i,defaultSize:r,maxSize:o,minSize:c},id:Y,idIsFromProps:s!==void 0,order:m});F.useRef({didLogMissingDefaultSizeWarning:!1}),np(()=>{const{callbacks:he,constraints:de}=ee.current,P={...de};ee.current.id=Y,ee.current.idIsFromProps=s!==void 0,ee.current.order=m,he.onCollapse=f,he.onExpand=p,he.onResize=d,de.collapsedSize=t,de.collapsible=i,de.defaultSize=r,de.maxSize=o,de.minSize=c,(P.collapsedSize!==de.collapsedSize||P.collapsible!==de.collapsible||P.maxSize!==de.maxSize||P.minSize!==de.minSize)&&I(ee.current,P)}),np(()=>{const he=ee.current;return U(he),()=>{L(he)}},[m,Y,U,L]),F.useImperativeHandle(a,()=>({collapse:()=>{x(ee.current)},expand:he=>{T(ee.current,he)},getId(){return Y},getSize(){return M(ee.current)},isCollapsed(){return O(ee.current)},isExpanded(){return!O(ee.current)},resize:he=>{N(ee.current,he)}}),[x,T,M,O,Y,N]);const se=A(ee.current,r);return F.createElement(_,{...b,children:n,className:e,id:Y,style:{...se,...v},[ur.groupId]:D,[ur.panel]:"",[ur.panelCollapsible]:i||void 0,[ur.panelId]:Y,[ur.panelSize]:parseFloat(""+se.flexGrow).toFixed(1)})}const xF=F.forwardRef((n,e)=>F.createElement(bF,{...n,forwardedRef:e}));bF.displayName="Panel";xF.displayName="forwardRef(Panel)";let sR=null,WS=-1,nd=null;function fle(n,e,t){const i=(e&MF)!==0,r=(e&AF)!==0,a=(e&CF)!==0,s=(e&RF)!==0;if(e){if(i)return a?"se-resize":s?"ne-resize":"e-resize";if(r)return a?"sw-resize":s?"nw-resize":"w-resize";if(a)return"s-resize";if(s)return"n-resize"}switch(n){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function dle(){nd!==null&&(document.head.removeChild(nd),sR=null,nd=null,WS=-1)}function zA(n,e,t){var i,r;const a=fle(n,e);if(sR!==a){if(sR=a,nd===null&&(nd=document.createElement("style"),document.head.appendChild(nd)),WS>=0){var s;(s=nd.sheet)===null||s===void 0||s.removeRule(WS)}WS=(i=(r=nd.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${a} !important;}`))!==null&&i!==void 0?i:-1}}function SF(n){return n.type==="keydown"}function EF(n){return n.type.startsWith("pointer")}function wF(n){return n.type.startsWith("mouse")}function ww(n){if(EF(n)){if(n.isPrimary)return{x:n.clientX,y:n.clientY}}else if(wF(n))return{x:n.clientX,y:n.clientY};return{x:1/0,y:1/0}}function hle(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ple(n,e,t){return n.x<e.x+e.width&&n.x+n.width>e.x&&n.y<e.y+e.height&&n.y+n.height>e.y}function mle(n,e){if(n===e)throw new Error("Cannot compare node with itself");const t={a:k3(n),b:k3(e)};let i;for(;t.a.at(-1)===t.b.at(-1);)n=t.a.pop(),e=t.b.pop(),i=n;Dn(i,"Stacking order can only be calculated for elements with a common ancestor");const r={a:B3(z3(t.a)),b:B3(z3(t.b))};if(r.a===r.b){const a=i.childNodes,s={a:t.a.at(-1),b:t.b.at(-1)};let o=a.length;for(;o--;){const c=a[o];if(c===s.a)return 1;if(c===s.b)return-1}}return Math.sign(r.a-r.b)}const gle=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function vle(n){var e;const t=getComputedStyle((e=TF(n))!==null&&e!==void 0?e:n).display;return t==="flex"||t==="inline-flex"}function yle(n){const e=getComputedStyle(n);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||vle(n))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||gle.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function z3(n){let e=n.length;for(;e--;){const t=n[e];if(Dn(t,"Missing node"),yle(t))return t}return null}function B3(n){return n&&Number(getComputedStyle(n).zIndex)||0}function k3(n){const e=[];for(;n;)e.push(n),n=TF(n);return e}function TF(n){const{parentNode:e}=n;return e&&e instanceof ShadowRoot?e.host:e}const MF=1,AF=2,CF=4,RF=8,_le=hle()==="coarse";let Dl=[],Cg=!1,id=new Map,Tw=new Map;const K0=new Set;function ble(n,e,t,i,r){var a;const{ownerDocument:s}=e,o={direction:t,element:e,hitAreaMargins:i,setResizeHandlerState:r},c=(a=id.get(s))!==null&&a!==void 0?a:0;return id.set(s,c+1),K0.add(o),l1(),function(){var p;Tw.delete(n),K0.delete(o);const d=(p=id.get(s))!==null&&p!==void 0?p:1;if(id.set(s,d-1),l1(),d===1&&id.delete(s),Dl.includes(o)){const m=Dl.indexOf(o);m>=0&&Dl.splice(m,1),Mw(),r("up",!0,null)}}}function xle(n){const{target:e}=n,{x:t,y:i}=ww(n);Cg=!0,TO({target:e,x:t,y:i}),l1(),Dl.length>0&&(c1("down",n),Mw(),n.preventDefault(),OF(e)||n.stopImmediatePropagation())}function BA(n){const{x:e,y:t}=ww(n);if(Cg&&n.buttons===0&&(Cg=!1,c1("up",n)),!Cg){const{target:i}=n;TO({target:i,x:e,y:t})}c1("move",n),Mw(),Dl.length>0&&n.preventDefault()}function kA(n){const{target:e}=n,{x:t,y:i}=ww(n);Tw.clear(),Cg=!1,Dl.length>0&&(n.preventDefault(),OF(e)||n.stopImmediatePropagation()),c1("up",n),TO({target:e,x:t,y:i}),Mw(),l1()}function OF(n){let e=n;for(;e;){if(e.hasAttribute(ur.resizeHandle))return!0;e=e.parentElement}return!1}function TO({target:n,x:e,y:t}){Dl.splice(0);let i=null;(n instanceof HTMLElement||n instanceof SVGElement)&&(i=n),K0.forEach(r=>{const{element:a,hitAreaMargins:s}=r,o=a.getBoundingClientRect(),{bottom:c,left:f,right:p,top:d}=o,m=_le?s.coarse:s.fine;if(e>=f-m&&e<=p+m&&t>=d-m&&t<=c+m){if(i!==null&&document.contains(i)&&a!==i&&!a.contains(i)&&!i.contains(a)&&mle(i,a)>0){let _=i,b=!1;for(;_&&!_.contains(a);){if(ple(_.getBoundingClientRect(),o)){b=!0;break}_=_.parentElement}if(b)return}Dl.push(r)}})}function FA(n,e){Tw.set(n,e)}function Mw(){let n=!1,e=!1;Dl.forEach(i=>{const{direction:r}=i;r==="horizontal"?n=!0:e=!0});let t=0;Tw.forEach(i=>{t|=i}),n&&e?zA("intersection",t):n?zA("horizontal",t):e?zA("vertical",t):dle()}let HA;function l1(){var n;(n=HA)===null||n===void 0||n.abort(),HA=new AbortController;const e={capture:!0,signal:HA.signal};K0.size&&(Cg?(Dl.length>0&&id.forEach((t,i)=>{const{body:r}=i;t>0&&(r.addEventListener("contextmenu",kA,e),r.addEventListener("pointerleave",BA,e),r.addEventListener("pointermove",BA,e))}),id.forEach((t,i)=>{const{body:r}=i;r.addEventListener("pointerup",kA,e),r.addEventListener("pointercancel",kA,e)})):id.forEach((t,i)=>{const{body:r}=i;t>0&&(r.addEventListener("pointerdown",xle,e),r.addEventListener("pointermove",BA,e))}))}function c1(n,e){K0.forEach(t=>{const{setResizeHandlerState:i}=t,r=Dl.includes(t);i(n,r,e)})}function Sle(){const[n,e]=F.useState(0);return F.useCallback(()=>e(t=>t+1),[])}function Dn(n,e){if(!n)throw console.error(e),Error(e)}function up(n,e,t=EO){return n.toFixed(t)===e.toFixed(t)?0:n>e?1:-1}function Du(n,e,t=EO){return up(n,e,t)===0}function fo(n,e,t){return up(n,e,t)===0}function Ele(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){const r=n[i],a=e[i];if(!fo(r,a,t))return!1}return!0}function Sg({panelConstraints:n,panelIndex:e,size:t}){const i=n[e];Dn(i!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:r=0,collapsible:a,maxSize:s=100,minSize:o=0}=i;if(up(t,o)<0)if(a){const c=(r+o)/2;up(t,c)<0?t=r:t=o}else t=o;return t=Math.min(s,t),t=parseFloat(t.toFixed(EO)),t}function s0({delta:n,initialLayout:e,panelConstraints:t,pivotIndices:i,prevLayout:r,trigger:a}){if(fo(n,0))return e;const s=[...e],[o,c]=i;Dn(o!=null,"Invalid first pivot index"),Dn(c!=null,"Invalid second pivot index");let f=0;if(a==="keyboard"){{const d=n<0?c:o,m=t[d];Dn(m,`Panel constraints not found for index ${d}`);const{collapsedSize:v=0,collapsible:_,minSize:b=0}=m;if(_){const S=e[d];if(Dn(S!=null,`Previous layout not found for panel index ${d}`),fo(S,v)){const x=b-S;up(x,Math.abs(n))>0&&(n=n<0?0-x:x)}}}{const d=n<0?o:c,m=t[d];Dn(m,`No panel constraints found for index ${d}`);const{collapsedSize:v=0,collapsible:_,minSize:b=0}=m;if(_){const S=e[d];if(Dn(S!=null,`Previous layout not found for panel index ${d}`),fo(S,b)){const x=S-v;up(x,Math.abs(n))>0&&(n=n<0?0-x:x)}}}}{const d=n<0?1:-1;let m=n<0?c:o,v=0;for(;;){const b=e[m];Dn(b!=null,`Previous layout not found for panel index ${m}`);const x=Sg({panelConstraints:t,panelIndex:m,size:100})-b;if(v+=x,m+=d,m<0||m>=t.length)break}const _=Math.min(Math.abs(n),Math.abs(v));n=n<0?0-_:_}{let m=n<0?o:c;for(;m>=0&&m<t.length;){const v=Math.abs(n)-Math.abs(f),_=e[m];Dn(_!=null,`Previous layout not found for panel index ${m}`);const b=_-v,S=Sg({panelConstraints:t,panelIndex:m,size:b});if(!fo(_,S)&&(f+=_-S,s[m]=S,f.toFixed(3).localeCompare(Math.abs(n).toFixed(3),void 0,{numeric:!0})>=0))break;n<0?m--:m++}}if(Ele(r,s))return r;{const d=n<0?c:o,m=e[d];Dn(m!=null,`Previous layout not found for panel index ${d}`);const v=m+f,_=Sg({panelConstraints:t,panelIndex:d,size:v});if(s[d]=_,!fo(_,v)){let b=v-_,x=n<0?c:o;for(;x>=0&&x<t.length;){const T=s[x];Dn(T!=null,`Previous layout not found for panel index ${x}`);const M=T+b,A=Sg({panelConstraints:t,panelIndex:x,size:M});if(fo(T,A)||(b-=A-T,s[x]=A),fo(b,0))break;n>0?x--:x++}}}const p=s.reduce((d,m)=>m+d,0);return fo(p,100)?s:r}function wle({layout:n,panelsArray:e,pivotIndices:t}){let i=0,r=100,a=0,s=0;const o=t[0];Dn(o!=null,"No pivot index found"),e.forEach((d,m)=>{const{constraints:v}=d,{maxSize:_=100,minSize:b=0}=v;m===o?(i=b,r=_):(a+=b,s+=_)});const c=Math.min(r,100-a),f=Math.max(i,100-s),p=n[o];return{valueMax:c,valueMin:f,valueNow:p}}function $0(n,e=document){return Array.from(e.querySelectorAll(`[${ur.resizeHandleId}][data-panel-group-id="${n}"]`))}function DF(n,e,t=document){const r=$0(n,t).findIndex(a=>a.getAttribute(ur.resizeHandleId)===e);return r??null}function NF(n,e,t){const i=DF(n,e,t);return i!=null?[i,i+1]:[-1,-1]}function Tle(n){return n instanceof HTMLElement?!0:typeof n=="object"&&n!==null&&"tagName"in n&&"getAttribute"in n}function LF(n,e=document){if(Tle(e)&&e.dataset.panelGroupId==n)return e;const t=e.querySelector(`[data-panel-group][data-panel-group-id="${n}"]`);return t||null}function Aw(n,e=document){const t=e.querySelector(`[${ur.resizeHandleId}="${n}"]`);return t||null}function Mle(n,e,t,i=document){var r,a,s,o;const c=Aw(e,i),f=$0(n,i),p=c?f.indexOf(c):-1,d=(r=(a=t[p])===null||a===void 0?void 0:a.id)!==null&&r!==void 0?r:null,m=(s=(o=t[p+1])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null;return[d,m]}function Ale({committedValuesRef:n,eagerValuesRef:e,groupId:t,layout:i,panelDataArray:r,panelGroupElement:a,setLayout:s}){F.useRef({didWarnAboutMissingResizeHandle:!1}),np(()=>{if(!a)return;const o=$0(t,a);for(let c=0;c<r.length-1;c++){const{valueMax:f,valueMin:p,valueNow:d}=wle({layout:i,panelsArray:r,pivotIndices:[c,c+1]}),m=o[c];if(m!=null){const v=r[c];Dn(v,`No panel data found for index "${c}"`),m.setAttribute("aria-controls",v.id),m.setAttribute("aria-valuemax",""+Math.round(f)),m.setAttribute("aria-valuemin",""+Math.round(p)),m.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{o.forEach((c,f)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[t,i,r,a]),F.useEffect(()=>{if(!a)return;const o=e.current;Dn(o,"Eager values not found");const{panelDataArray:c}=o,f=LF(t,a);Dn(f!=null,`No group found for id "${t}"`);const p=$0(t,a);Dn(p,`No resize handles found for group id "${t}"`);const d=p.map(m=>{const v=m.getAttribute(ur.resizeHandleId);Dn(v,"Resize handle element has no handle id attribute");const[_,b]=Mle(t,v,c,a);if(_==null||b==null)return()=>{};const S=x=>{if(!x.defaultPrevented)switch(x.key){case"Enter":{x.preventDefault();const T=c.findIndex(M=>M.id===_);if(T>=0){const M=c[T];Dn(M,`No panel data found for index ${T}`);const A=i[T],{collapsedSize:D=0,collapsible:O,minSize:I=0}=M.constraints;if(A!=null&&O){const U=s0({delta:fo(A,D)?I-D:D-A,initialLayout:i,panelConstraints:c.map(N=>N.constraints),pivotIndices:NF(t,v,a),prevLayout:i,trigger:"keyboard"});i!==U&&s(U)}}break}}};return m.addEventListener("keydown",S),()=>{m.removeEventListener("keydown",S)}});return()=>{d.forEach(m=>m())}},[a,n,e,t,i,r,s])}function F3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function IF(n,e){const t=n==="horizontal",{x:i,y:r}=ww(e);return t?i:r}function Cle(n,e,t,i,r){const a=t==="horizontal",s=Aw(e,r);Dn(s,`No resize handle element found for id "${e}"`);const o=s.getAttribute(ur.groupId);Dn(o,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=i;const f=IF(t,n),p=LF(o,r);Dn(p,`No group element found for id "${o}"`);const d=p.getBoundingClientRect(),m=a?d.width:d.height;return(f-c)/m*100}function Rle(n,e,t,i,r,a){if(SF(n)){const s=t==="horizontal";let o=0;n.shiftKey?o=100:r!=null?o=r:o=10;let c=0;switch(n.key){case"ArrowDown":c=s?0:o;break;case"ArrowLeft":c=s?-o:0;break;case"ArrowRight":c=s?o:0;break;case"ArrowUp":c=s?0:-o;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return i==null?0:Cle(n,e,t,i,a)}function Ole({panelDataArray:n}){const e=Array(n.length),t=n.map(a=>a.constraints);let i=0,r=100;for(let a=0;a<n.length;a++){const s=t[a];Dn(s,`Panel constraints not found for index ${a}`);const{defaultSize:o}=s;o!=null&&(i++,e[a]=o,r-=o)}for(let a=0;a<n.length;a++){const s=t[a];Dn(s,`Panel constraints not found for index ${a}`);const{defaultSize:o}=s;if(o!=null)continue;const c=n.length-i,f=r/c;i++,e[a]=f,r-=f}return e}function hg(n,e,t){e.forEach((i,r)=>{const a=n[r];Dn(a,`Panel data not found for index ${r}`);const{callbacks:s,constraints:o,id:c}=a,{collapsedSize:f=0,collapsible:p}=o,d=t[c];if(d==null||i!==d){t[c]=i;const{onCollapse:m,onExpand:v,onResize:_}=s;_&&_(i,d),p&&(m||v)&&(v&&(d==null||Du(d,f))&&!Du(i,f)&&v(),m&&(d==null||!Du(d,f))&&Du(i,f)&&m())}})}function MS(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t])return!1;return!0}function Dle({defaultSize:n,dragState:e,layout:t,panelData:i,panelIndex:r,precision:a=3}){const s=t[r];let o;return s==null?o=n!=null?n.toFixed(a):"1":i.length===1?o="1":o=s.toFixed(a),{flexBasis:0,flexGrow:o,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Nle(n,e=10){let t=null;return(...r)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...r)},e)}}function H3(n){try{if(typeof localStorage<"u")n.getItem=e=>localStorage.getItem(e),n.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),n.getItem=()=>null,n.setItem=()=>{}}}function UF(n){return`react-resizable-panels:${n}`}function PF(n){return n.map(e=>{const{constraints:t,id:i,idIsFromProps:r,order:a}=e;return r?i:a?`${a}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function zF(n,e){try{const t=UF(n),i=e.getItem(t);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function Lle(n,e,t){var i,r;const a=(i=zF(n,t))!==null&&i!==void 0?i:{},s=PF(e);return(r=a[s])!==null&&r!==void 0?r:null}function Ile(n,e,t,i,r){var a;const s=UF(n),o=PF(e),c=(a=zF(n,r))!==null&&a!==void 0?a:{};c[o]={expandToSizes:Object.fromEntries(t.entries()),layout:i};try{r.setItem(s,JSON.stringify(c))}catch(f){console.error(f)}}function j3({layout:n,panelConstraints:e}){const t=[...n],i=t.reduce((a,s)=>a+s,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(a=>`${a}%`).join(", ")}`);if(!fo(i,100)&&t.length>0)for(let a=0;a<e.length;a++){const s=t[a];Dn(s!=null,`No layout data found for index ${a}`);const o=100/i*s;t[a]=o}let r=0;for(let a=0;a<e.length;a++){const s=t[a];Dn(s!=null,`No layout data found for index ${a}`);const o=Sg({panelConstraints:e,panelIndex:a,size:s});s!=o&&(r+=s-o,t[a]=o)}if(!fo(r,0))for(let a=0;a<e.length;a++){const s=t[a];Dn(s!=null,`No layout data found for index ${a}`);const o=s+r,c=Sg({panelConstraints:e,panelIndex:a,size:o});if(s!==c&&(r-=c-s,t[a]=c,fo(r,0)))break}return t}const Ule=100,o0={getItem:n=>(H3(o0),o0.getItem(n)),setItem:(n,e)=>{H3(o0),o0.setItem(n,e)}},V3={};function BF({autoSaveId:n=null,children:e,className:t="",direction:i,forwardedRef:r,id:a=null,onLayout:s=null,keyboardResizeBy:o=null,storage:c=o0,style:f,tagName:p="div",...d}){const m=wO(a),v=F.useRef(null),[_,b]=F.useState(null),[S,x]=F.useState([]),T=Sle(),M=F.useRef({}),A=F.useRef(new Map),D=F.useRef(0),O=F.useRef({autoSaveId:n,direction:i,dragState:_,id:m,keyboardResizeBy:o,onLayout:s,storage:c}),I=F.useRef({layout:S,panelDataArray:[],panelDataArrayChanged:!1});F.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),F.useImperativeHandle(r,()=>({getId:()=>O.current.id,getLayout:()=>{const{layout:J}=I.current;return J},setLayout:J=>{const{onLayout:le}=O.current,{layout:Se,panelDataArray:Ee}=I.current,re=j3({layout:J,panelConstraints:Ee.map(ge=>ge.constraints)});F3(Se,re)||(x(re),I.current.layout=re,le&&le(re),hg(Ee,re,M.current))}}),[]),np(()=>{O.current.autoSaveId=n,O.current.direction=i,O.current.dragState=_,O.current.id=m,O.current.onLayout=s,O.current.storage=c}),Ale({committedValuesRef:O,eagerValuesRef:I,groupId:m,layout:S,panelDataArray:I.current.panelDataArray,setLayout:x,panelGroupElement:v.current}),F.useEffect(()=>{const{panelDataArray:J}=I.current;if(n){if(S.length===0||S.length!==J.length)return;let le=V3[n];le==null&&(le=Nle(Ile,Ule),V3[n]=le);const Se=[...J],Ee=new Map(A.current);le(n,Se,Ee,S,c)}},[n,S,c]),F.useEffect(()=>{});const U=F.useCallback(J=>{const{onLayout:le}=O.current,{layout:Se,panelDataArray:Ee}=I.current;if(J.constraints.collapsible){const re=Ee.map(We=>We.constraints),{collapsedSize:ge=0,panelSize:Ae,pivotIndices:Pe}=Ph(Ee,J,Se);if(Dn(Ae!=null,`Panel size not found for panel "${J.id}"`),!Du(Ae,ge)){A.current.set(J.id,Ae);const it=vg(Ee,J)===Ee.length-1?Ae-ge:ge-Ae,te=s0({delta:it,initialLayout:Se,panelConstraints:re,pivotIndices:Pe,prevLayout:Se,trigger:"imperative-api"});MS(Se,te)||(x(te),I.current.layout=te,le&&le(te),hg(Ee,te,M.current))}}},[]),N=F.useCallback((J,le)=>{const{onLayout:Se}=O.current,{layout:Ee,panelDataArray:re}=I.current;if(J.constraints.collapsible){const ge=re.map(xe=>xe.constraints),{collapsedSize:Ae=0,panelSize:Pe=0,minSize:We=0,pivotIndices:it}=Ph(re,J,Ee),te=le??We;if(Du(Pe,Ae)){const xe=A.current.get(J.id),De=xe!=null&&xe>=te?xe:te,Ce=vg(re,J)===re.length-1?Pe-De:De-Pe,ce=s0({delta:Ce,initialLayout:Ee,panelConstraints:ge,pivotIndices:it,prevLayout:Ee,trigger:"imperative-api"});MS(Ee,ce)||(x(ce),I.current.layout=ce,Se&&Se(ce),hg(re,ce,M.current))}}},[]),L=F.useCallback(J=>{const{layout:le,panelDataArray:Se}=I.current,{panelSize:Ee}=Ph(Se,J,le);return Dn(Ee!=null,`Panel size not found for panel "${J.id}"`),Ee},[]),Y=F.useCallback((J,le)=>{const{panelDataArray:Se}=I.current,Ee=vg(Se,J);return Dle({defaultSize:le,dragState:_,layout:S,panelData:Se,panelIndex:Ee})},[_,S]),ee=F.useCallback(J=>{const{layout:le,panelDataArray:Se}=I.current,{collapsedSize:Ee=0,collapsible:re,panelSize:ge}=Ph(Se,J,le);return Dn(ge!=null,`Panel size not found for panel "${J.id}"`),re===!0&&Du(ge,Ee)},[]),se=F.useCallback(J=>{const{layout:le,panelDataArray:Se}=I.current,{collapsedSize:Ee=0,collapsible:re,panelSize:ge}=Ph(Se,J,le);return Dn(ge!=null,`Panel size not found for panel "${J.id}"`),!re||up(ge,Ee)>0},[]),he=F.useCallback(J=>{const{panelDataArray:le}=I.current;le.push(J),le.sort((Se,Ee)=>{const re=Se.order,ge=Ee.order;return re==null&&ge==null?0:re==null?-1:ge==null?1:re-ge}),I.current.panelDataArrayChanged=!0,T()},[T]);np(()=>{if(I.current.panelDataArrayChanged){I.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:le,storage:Se}=O.current,{layout:Ee,panelDataArray:re}=I.current;let ge=null;if(J){const Pe=Lle(J,re,Se);Pe&&(A.current=new Map(Object.entries(Pe.expandToSizes)),ge=Pe.layout)}ge==null&&(ge=Ole({panelDataArray:re}));const Ae=j3({layout:ge,panelConstraints:re.map(Pe=>Pe.constraints)});F3(Ee,Ae)||(x(Ae),I.current.layout=Ae,le&&le(Ae),hg(re,Ae,M.current))}}),np(()=>{const J=I.current;return()=>{J.layout=[]}},[]);const de=F.useCallback(J=>{let le=!1;const Se=v.current;return Se&&window.getComputedStyle(Se,null).getPropertyValue("direction")==="rtl"&&(le=!0),function(re){re.preventDefault();const ge=v.current;if(!ge)return()=>null;const{direction:Ae,dragState:Pe,id:We,keyboardResizeBy:it,onLayout:te}=O.current,{layout:xe,panelDataArray:De}=I.current,{initialLayout:He}=Pe??{},Ce=NF(We,J,ge);let ce=Rle(re,J,Ae,Pe,it,ge);const pe=Ae==="horizontal";pe&&le&&(ce=-ce);const ie=De.map(j=>j.constraints),W=s0({delta:ce,initialLayout:He??xe,panelConstraints:ie,pivotIndices:Ce,prevLayout:xe,trigger:SF(re)?"keyboard":"mouse-or-touch"}),K=!MS(xe,W);(EF(re)||wF(re))&&D.current!=ce&&(D.current=ce,!K&&ce!==0?pe?FA(J,ce<0?MF:AF):FA(J,ce<0?CF:RF):FA(J,0)),K&&(x(W),I.current.layout=W,te&&te(W),hg(De,W,M.current))}},[]),P=F.useCallback((J,le)=>{const{onLayout:Se}=O.current,{layout:Ee,panelDataArray:re}=I.current,ge=re.map(xe=>xe.constraints),{panelSize:Ae,pivotIndices:Pe}=Ph(re,J,Ee);Dn(Ae!=null,`Panel size not found for panel "${J.id}"`);const it=vg(re,J)===re.length-1?Ae-le:le-Ae,te=s0({delta:it,initialLayout:Ee,panelConstraints:ge,pivotIndices:Pe,prevLayout:Ee,trigger:"imperative-api"});MS(Ee,te)||(x(te),I.current.layout=te,Se&&Se(te),hg(re,te,M.current))},[]),B=F.useCallback((J,le)=>{const{layout:Se,panelDataArray:Ee}=I.current,{collapsedSize:re=0,collapsible:ge}=le,{collapsedSize:Ae=0,collapsible:Pe,maxSize:We=100,minSize:it=0}=J.constraints,{panelSize:te}=Ph(Ee,J,Se);te!=null&&(ge&&Pe&&Du(te,re)?Du(re,Ae)||P(J,Ae):te<it?P(J,it):te>We&&P(J,We))},[P]),V=F.useCallback((J,le)=>{const{direction:Se}=O.current,{layout:Ee}=I.current;if(!v.current)return;const re=Aw(J,v.current);Dn(re,`Drag handle element not found for id "${J}"`);const ge=IF(Se,le);b({dragHandleId:J,dragHandleRect:re.getBoundingClientRect(),initialCursorPosition:ge,initialLayout:Ee})},[]),ae=F.useCallback(()=>{b(null)},[]),X=F.useCallback(J=>{const{panelDataArray:le}=I.current,Se=vg(le,J);Se>=0&&(le.splice(Se,1),delete M.current[J.id],I.current.panelDataArrayChanged=!0,T())},[T]),oe=F.useMemo(()=>({collapsePanel:U,direction:i,dragState:_,expandPanel:N,getPanelSize:L,getPanelStyle:Y,groupId:m,isPanelCollapsed:ee,isPanelExpanded:se,reevaluatePanelConstraints:B,registerPanel:he,registerResizeHandle:de,resizePanel:P,startDragging:V,stopDragging:ae,unregisterPanel:X,panelGroupElement:v.current}),[U,_,i,N,L,Y,m,ee,se,B,he,de,P,V,ae,X]),me={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return F.createElement(Ew.Provider,{value:oe},F.createElement(p,{...d,children:e,className:t,id:a,ref:v,style:{...me,...f},[ur.group]:"",[ur.groupDirection]:i,[ur.groupId]:m}))}const kF=F.forwardRef((n,e)=>F.createElement(BF,{...n,forwardedRef:e}));BF.displayName="PanelGroup";kF.displayName="forwardRef(PanelGroup)";function vg(n,e){return n.findIndex(t=>t===e||t.id===e.id)}function Ph(n,e,t){const i=vg(n,e),a=i===n.length-1?[i-1,i]:[i,i+1],s=t[i];return{...e.constraints,panelSize:s,pivotIndices:a}}function Ple({disabled:n,handleId:e,resizeHandler:t,panelGroupElement:i}){F.useEffect(()=>{if(n||t==null||i==null)return;const r=Aw(e,i);if(r==null)return;const a=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),t(s);break}case"F6":{s.preventDefault();const o=r.getAttribute(ur.groupId);Dn(o,`No group element found for id "${o}"`);const c=$0(o,i),f=DF(o,e,i);Dn(f!==null,`No resize element found for id "${e}"`);const p=s.shiftKey?f>0?f-1:c.length-1:f+1<c.length?f+1:0;c[p].focus();break}}};return r.addEventListener("keydown",a),()=>{r.removeEventListener("keydown",a)}},[i,n,e,t])}function FF({children:n=null,className:e="",disabled:t=!1,hitAreaMargins:i,id:r,onBlur:a,onClick:s,onDragging:o,onFocus:c,onPointerDown:f,onPointerUp:p,style:d={},tabIndex:m=0,tagName:v="div",..._}){var b,S;const x=F.useRef(null),T=F.useRef({onClick:s,onDragging:o,onPointerDown:f,onPointerUp:p});F.useEffect(()=>{T.current.onClick=s,T.current.onDragging=o,T.current.onPointerDown=f,T.current.onPointerUp=p});const M=F.useContext(Ew);if(M===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:A,groupId:D,registerResizeHandle:O,startDragging:I,stopDragging:U,panelGroupElement:N}=M,L=wO(r),[Y,ee]=F.useState("inactive"),[se,he]=F.useState(!1),[de,P]=F.useState(null),B=F.useRef({state:Y});np(()=>{B.current.state=Y}),F.useEffect(()=>{if(t)P(null);else{const oe=O(L);P(()=>oe)}},[t,L,O]);const V=(b=i?.coarse)!==null&&b!==void 0?b:15,ae=(S=i?.fine)!==null&&S!==void 0?S:5;F.useEffect(()=>{if(t||de==null)return;const oe=x.current;Dn(oe,"Element ref not attached");let me=!1;return ble(L,oe,A,{coarse:V,fine:ae},(le,Se,Ee)=>{if(!Se){ee("inactive");return}switch(le){case"down":{ee("drag"),me=!1,Dn(Ee,'Expected event to be defined for "down" action'),I(L,Ee);const{onDragging:re,onPointerDown:ge}=T.current;re?.(!0),ge?.();break}case"move":{const{state:re}=B.current;me=!0,re!=="drag"&&ee("hover"),Dn(Ee,'Expected event to be defined for "move" action'),de(Ee);break}case"up":{ee("hover"),U();const{onClick:re,onDragging:ge,onPointerUp:Ae}=T.current;ge?.(!1),Ae?.(),me||re?.();break}}})},[V,A,t,ae,O,L,de,I,U]),Ple({disabled:t,handleId:L,resizeHandler:de,panelGroupElement:N});const X={touchAction:"none",userSelect:"none"};return F.createElement(v,{..._,children:n,className:e,id:r,onBlur:()=>{he(!1),a?.()},onFocus:()=>{he(!0),c?.()},ref:x,role:"separator",style:{...X,...d},tabIndex:m,[ur.groupDirection]:A,[ur.groupId]:D,[ur.resizeHandle]:"",[ur.resizeHandleActive]:Y==="drag"?"pointer":se?"keyboard":void 0,[ur.resizeHandleEnabled]:!t,[ur.resizeHandleId]:L,[ur.resizeHandleState]:Y})}FF.displayName="PanelResizeHandle";function HF({className:n,...e}){return q.jsx(kF,{"data-slot":"resizable-panel-group",className:Zi("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),...e})}function u1({...n}){return q.jsx(xF,{"data-slot":"resizable-panel",...n})}function jF({withHandle:n,className:e,...t}){return q.jsx(FF,{"data-slot":"resizable-handle",className:Zi("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...t,children:n&&q.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:q.jsx(q9,{className:"size-2.5"})})})}var VF=Symbol.for("immer-nothing"),G3=Symbol.for("immer-draftable"),_o=Symbol.for("immer-state");function Rl(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Q0=Object.getPrototypeOf;function $g(n){return!!n&&!!n[_o]}function fp(n){return n?GF(n)||Array.isArray(n)||!!n[G3]||!!n.constructor?.[G3]||D_(n)||Rw(n):!1}var zle=Object.prototype.constructor.toString(),Y3=new WeakMap;function GF(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let i=Y3.get(t);return i===void 0&&(i=Function.toString.call(t),Y3.set(t,i)),i===zle}function f1(n,e,t=!0){Cw(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(r=>{e(r,n[r],n)}):n.forEach((i,r)=>e(r,i,n))}function Cw(n){const e=n[_o];return e?e.type_:Array.isArray(n)?1:D_(n)?2:Rw(n)?3:0}function oR(n,e){return Cw(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function YF(n,e,t){const i=Cw(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function Ble(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function D_(n){return n instanceof Map}function Rw(n){return n instanceof Set}function Fh(n){return n.copy_||n.base_}function lR(n,e){if(D_(n))return new Map(n);if(Rw(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=GF(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[_o];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],o=i[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(i[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(Q0(n),i)}else{const i=Q0(n);if(i!==null&&t)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function MO(n,e=!1){return Ow(n)||$g(n)||!fp(n)||(Cw(n)>1&&Object.defineProperties(n,{set:AS,add:AS,clear:AS,delete:AS}),Object.freeze(n),e&&Object.values(n).forEach(t=>MO(t,!0))),n}function kle(){Rl(2)}var AS={value:kle};function Ow(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var Fle={};function dp(n){const e=Fle[n];return e||Rl(0,n),e}var J0;function WF(){return J0}function Hle(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function W3(n,e){e&&(dp("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function cR(n){uR(n),n.drafts_.forEach(jle),n.drafts_=null}function uR(n){n===J0&&(J0=n.parent_)}function Z3(n){return J0=Hle(J0,n)}function jle(n){const e=n[_o];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function X3(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[_o].modified_&&(cR(e),Rl(4)),fp(n)&&(n=d1(e,n),e.parent_||h1(e,n)),e.patches_&&dp("Patches").generateReplacementPatches_(t[_o].base_,n,e.patches_,e.inversePatches_)):n=d1(e,t,[]),cR(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==VF?n:void 0}function d1(n,e,t){if(Ow(e))return e;const i=n.immer_.shouldUseStrictIteration(),r=e[_o];if(!r)return f1(e,(a,s)=>q3(n,r,e,a,s,t),i),e;if(r.scope_!==n)return e;if(!r.modified_)return h1(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let s=a,o=!1;r.type_===3&&(s=new Set(a),a.clear(),o=!0),f1(s,(c,f)=>q3(n,r,a,c,f,t,o),i),h1(n,a,!1),t&&n.patches_&&dp("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function q3(n,e,t,i,r,a,s){if(r==null||typeof r!="object"&&!s)return;const o=Ow(r);if(!(o&&!s)){if($g(r)){const c=a&&e&&e.type_!==3&&!oR(e.assigned_,i)?a.concat(i):void 0,f=d1(n,r,c);if(YF(t,i,f),$g(f))n.canAutoFreeze_=!1;else return}else s&&t.add(r);if(fp(r)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&o)return;d1(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(D_(t)?t.has(i):Object.prototype.propertyIsEnumerable.call(t,i))&&h1(n,r)}}}function h1(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&MO(e,t)}function Vle(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:WF(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=AO;t&&(r=[i],a=e_);const{revoke:s,proxy:o}=Proxy.revocable(r,a);return i.draft_=o,i.revoke_=s,o}var AO={get(n,e){if(e===_o)return n;const t=Fh(n);if(!oR(t,e))return Gle(n,t,e);const i=t[e];return n.finalized_||!fp(i)?i:i===jA(n.base_,e)?(VA(n),n.copy_[e]=dR(i,n)):i},has(n,e){return e in Fh(n)},ownKeys(n){return Reflect.ownKeys(Fh(n))},set(n,e,t){const i=ZF(Fh(n),e);if(i?.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=jA(Fh(n),e),a=r?.[_o];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(Ble(t,r)&&(t!==void 0||oR(n.base_,e)))return!0;VA(n),fR(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return jA(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,VA(n),fR(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Fh(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Rl(11)},getPrototypeOf(n){return Q0(n.base_)},setPrototypeOf(){Rl(12)}},e_={};f1(AO,(n,e)=>{e_[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});e_.deleteProperty=function(n,e){return e_.set.call(this,n,e,void 0)};e_.set=function(n,e,t){return AO.set.call(this,n[0],e,t,n[0])};function jA(n,e){const t=n[_o];return(t?Fh(t):n)[e]}function Gle(n,e,t){const i=ZF(e,t);return i?"value"in i?i.value:i.get?.call(n.draft_):void 0}function ZF(n,e){if(!(e in n))return;let t=Q0(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Q0(t)}}function fR(n){n.modified_||(n.modified_=!0,n.parent_&&fR(n.parent_))}function VA(n){n.copy_||(n.copy_=lR(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Yle=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(c=a,...f){return s.produce(c,p=>t.call(this,p,...f))}}typeof t!="function"&&Rl(6),i!==void 0&&typeof i!="function"&&Rl(7);let r;if(fp(e)){const a=Z3(this),s=dR(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?cR(a):uR(a)}return W3(a,i),X3(r,a)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===VF&&(r=void 0),this.autoFreeze_&&MO(r,!0),i){const a=[],s=[];dp("Patches").generateReplacementPatches_(e,r,a,s),i(a,s)}return r}else Rl(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let i,r;return[this.produce(e,t,(s,o)=>{i=s,r=o}),i,r]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){fp(n)||Rl(8),$g(n)&&(n=Wle(n));const e=Z3(this),t=dR(n,void 0);return t[_o].isManual_=!0,uR(e),t}finishDraft(n,e){const t=n&&n[_o];(!t||!t.isManual_)&&Rl(9);const{scope_:i}=t;return W3(i,e),X3(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=dp("Patches").applyPatches_;return $g(n)?i(n,e):this.produce(n,r=>i(r,e))}};function dR(n,e){const t=D_(n)?dp("MapSet").proxyMap_(n,e):Rw(n)?dp("MapSet").proxySet_(n,e):Vle(n,e);return(e?e.scope_:WF()).drafts_.push(t),t}function Wle(n){return $g(n)||Rl(10,n),XF(n)}function XF(n){if(!fp(n)||Ow(n))return n;const e=n[_o];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=lR(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=lR(n,!0);return f1(t,(r,a)=>{YF(t,r,XF(a))},i),e&&(e.finalized_=!1),t}var Zle=new Yle,Qg=Zle.produce,Dw="Collapsible",[Xle,mge]=Ul(Dw),[qle,CO]=Xle(Dw),qF=F.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:i,defaultOpen:r,disabled:a,onOpenChange:s,...o}=n,[c,f]=pd({prop:i,defaultProp:r??!1,onChange:s,caller:Dw});return q.jsx(qle,{scope:t,disabled:a,contentId:kc(),open:c,onOpenToggle:F.useCallback(()=>f(p=>!p),[f]),children:q.jsx(ln.div,{"data-state":DO(c),"data-disabled":a?"":void 0,...o,ref:e})})});qF.displayName=Dw;var KF="CollapsibleTrigger",$F=F.forwardRef((n,e)=>{const{__scopeCollapsible:t,...i}=n,r=CO(KF,t);return q.jsx(ln.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":DO(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...i,ref:e,onClick:Ut(n.onClick,r.onOpenToggle)})});$F.displayName=KF;var RO="CollapsibleContent",OO=F.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=CO(RO,n.__scopeCollapsible);return q.jsx(Pl,{present:t||r.open,children:({present:a})=>q.jsx(Kle,{...i,ref:e,present:a})})});OO.displayName=RO;var Kle=F.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:i,children:r,...a}=n,s=CO(RO,t),[o,c]=F.useState(i),f=F.useRef(null),p=Ln(e,f),d=F.useRef(0),m=d.current,v=F.useRef(0),_=v.current,b=s.open||o,S=F.useRef(b),x=F.useRef(void 0);return F.useEffect(()=>{const T=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(T)},[]),sa(()=>{const T=f.current;if(T){x.current=x.current||{transitionDuration:T.style.transitionDuration,animationName:T.style.animationName},T.style.transitionDuration="0s",T.style.animationName="none";const M=T.getBoundingClientRect();d.current=M.height,v.current=M.width,S.current||(T.style.transitionDuration=x.current.transitionDuration,T.style.animationName=x.current.animationName),c(i)}},[s.open,i]),q.jsx(ln.div,{"data-state":DO(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!b,...a,ref:p,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":_?`${_}px`:void 0,...n.style},children:b&&r})});function DO(n){return n?"open":"closed"}var $le=qF;function Qle({index:n,data:e}){const{coreModuleRef:t}=Za(),[i,r]=F.useState(e),[a,s]=F.useState(!1),o=`flex justify-between items-center px-2 py-1 ${a?"bg-blue-500":n%2?"bg-gray-900":""} hover:bg-blue-500 cursor-pointer transition duration-150`,c=()=>{const v=t.current;if(lt(v))return;r(e);const _=v.perform("get:selection",Xn);s(_.includes(e.id))},f=()=>{const v=t.current;if(lt(v))return;const _=v.listen("selection:changed",({value:{selection:b}})=>{s(b.some(S=>S instanceof O_&&S.name===i.id))});return()=>{v.forget(_)}},p=()=>{const v=t.current;if(lt(v))return;const _=v.listen("core.station:change",({value:b})=>{b.id===i.id&&r(Qg(S=>{S.name=b.metadata.name}))});return()=>{v.forget(_)}},d=v=>{const _=t.current;lt(_)||(v.preventDefault(),_.perform("select:core.object",i.id),_.perform("move-to:core.object",{id:i.id,zoom:!0}))},m=v=>{const _=t.current;lt(_)||(v.stopPropagation(),_.perform("delete:core.station",i.id))};return F.useEffect(c,[e]),F.useEffect(f,[t.current,s]),F.useEffect(p,[t.current,r]),q.jsxs("div",{className:o,onClick:d,children:[q.jsxs("div",{className:"flex",children:[q.jsx(_z,{size:14}),q.jsx("span",{className:"text-xs ml-1",children:i.name})]}),q.jsx("div",{className:"flex flex-row items-center",children:q.jsx(sd,{className:"size-6 cursor-pointer",onClick:m,size:"icon",variant:"ghost",children:q.jsx(Ez,{size:2})})})]})}function cd({...n}){return q.jsx($le,{"data-slot":"collapsible",...n})}function ud({...n}){return q.jsx($F,{"data-slot":"collapsible-trigger",...n})}function ip({...n}){return q.jsx(OO,{"data-slot":"collapsible-content",...n})}function Jle({data:n}){const{coreModuleRef:e}=Za(),[t,i]=F.useState(n),r=()=>{i(n)},a=()=>{const o=e.current;if(lt(o))return;const c=o.listen("core.station:create",({value:f})=>{const p=o.perform("get:core.station.data",f);lt(p)||i(Qg(d=>{d.push({id:p.id,name:p.metadata.name})}))});return()=>{o.forget(c)}},s=()=>{const o=e.current;if(lt(o))return;const c=o.listen("core.station:delete",({value:f})=>{i(Qg(p=>{const d=p.findIndex(m=>m.id===f);d!==-1&&p.splice(d,1)}))});return()=>{o.forget(c)}};return F.useEffect(r,[n]),F.useEffect(a,[e.current,i]),F.useEffect(s,[e.current,i]),q.jsxs(cd,{defaultOpen:!0,children:[q.jsxs(ud,{className:"flex flex-row gap-1 w-full pt-1",children:[q.jsx(ld,{size:16}),q.jsxs("span",{className:"text-xs font-mono font-bold uppercase",children:["Stations (",t.length,")"]})]}),q.jsx(OO,{className:"ml-2 border-l-1 border-neutral flex flex-col pl-2",children:t.map((o,c)=>q.jsx(Qle,{index:c,data:o},o.id))})]})}function t_(n,[e,t]){return Math.min(t,Math.max(e,n))}function ece(n,e){return F.useReducer((t,i)=>e[t][i]??t,n)}var NO="ScrollArea",[QF,gge]=Ul(NO),[tce,Ko]=QF(NO),JF=F.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:i="hover",dir:r,scrollHideDelay:a=600,...s}=n,[o,c]=F.useState(null),[f,p]=F.useState(null),[d,m]=F.useState(null),[v,_]=F.useState(null),[b,S]=F.useState(null),[x,T]=F.useState(0),[M,A]=F.useState(0),[D,O]=F.useState(!1),[I,U]=F.useState(!1),N=Ln(e,Y=>c(Y)),L=iv(r);return q.jsx(tce,{scope:t,type:i,dir:L,scrollHideDelay:a,scrollArea:o,viewport:f,onViewportChange:p,content:d,onContentChange:m,scrollbarX:v,onScrollbarXChange:_,scrollbarXEnabled:D,onScrollbarXEnabledChange:O,scrollbarY:b,onScrollbarYChange:S,scrollbarYEnabled:I,onScrollbarYEnabledChange:U,onCornerWidthChange:T,onCornerHeightChange:A,children:q.jsx(ln.div,{dir:L,...s,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":M+"px",...n.style}})})});JF.displayName=NO;var e5="ScrollAreaViewport",t5=F.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:i,nonce:r,...a}=n,s=Ko(e5,t),o=F.useRef(null),c=Ln(e,o,s.onViewportChange);return q.jsxs(q.Fragment,{children:[q.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),q.jsx(ln.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...n.style},children:q.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});t5.displayName=e5;var qc="ScrollAreaScrollbar",n5=F.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=Ko(qc,n.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:s}=r,o=n.orientation==="horizontal";return F.useEffect(()=>(o?a(!0):s(!0),()=>{o?a(!1):s(!1)}),[o,a,s]),r.type==="hover"?q.jsx(nce,{...i,ref:e,forceMount:t}):r.type==="scroll"?q.jsx(ice,{...i,ref:e,forceMount:t}):r.type==="auto"?q.jsx(i5,{...i,ref:e,forceMount:t}):r.type==="always"?q.jsx(LO,{...i,ref:e}):null});n5.displayName=qc;var nce=F.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=Ko(qc,n.__scopeScrollArea),[a,s]=F.useState(!1);return F.useEffect(()=>{const o=r.scrollArea;let c=0;if(o){const f=()=>{window.clearTimeout(c),s(!0)},p=()=>{c=window.setTimeout(()=>s(!1),r.scrollHideDelay)};return o.addEventListener("pointerenter",f),o.addEventListener("pointerleave",p),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",f),o.removeEventListener("pointerleave",p)}}},[r.scrollArea,r.scrollHideDelay]),q.jsx(Pl,{present:t||a,children:q.jsx(i5,{"data-state":a?"visible":"hidden",...i,ref:e})})}),ice=F.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=Ko(qc,n.__scopeScrollArea),a=n.orientation==="horizontal",s=Lw(()=>c("SCROLL_END"),100),[o,c]=ece("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return F.useEffect(()=>{if(o==="idle"){const f=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(f)}},[o,r.scrollHideDelay,c]),F.useEffect(()=>{const f=r.viewport,p=a?"scrollLeft":"scrollTop";if(f){let d=f[p];const m=()=>{const v=f[p];d!==v&&(c("SCROLL"),s()),d=v};return f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[r.viewport,a,c,s]),q.jsx(Pl,{present:t||o!=="hidden",children:q.jsx(LO,{"data-state":o==="hidden"?"hidden":"visible",...i,ref:e,onPointerEnter:Ut(n.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ut(n.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),i5=F.forwardRef((n,e)=>{const t=Ko(qc,n.__scopeScrollArea),{forceMount:i,...r}=n,[a,s]=F.useState(!1),o=n.orientation==="horizontal",c=Lw(()=>{if(t.viewport){const f=t.viewport.offsetWidth<t.viewport.scrollWidth,p=t.viewport.offsetHeight<t.viewport.scrollHeight;s(o?f:p)}},10);return Jg(t.viewport,c),Jg(t.content,c),q.jsx(Pl,{present:i||a,children:q.jsx(LO,{"data-state":a?"visible":"hidden",...r,ref:e})})}),LO=F.forwardRef((n,e)=>{const{orientation:t="vertical",...i}=n,r=Ko(qc,n.__scopeScrollArea),a=F.useRef(null),s=F.useRef(0),[o,c]=F.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=l5(o.viewport,o.content),p={...i,sizes:o,onSizesChange:c,hasThumb:f>0&&f<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:m=>s.current=m};function d(m,v){return cce(m,s.current,o,v)}return t==="horizontal"?q.jsx(rce,{...p,ref:e,onThumbPositionChange:()=>{if(r.viewport&&a.current){const m=r.viewport.scrollLeft,v=K3(m,o,r.dir);a.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=d(m,r.dir))}}):t==="vertical"?q.jsx(ace,{...p,ref:e,onThumbPositionChange:()=>{if(r.viewport&&a.current){const m=r.viewport.scrollTop,v=K3(m,o);a.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=d(m))}}):null}),rce=F.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,...r}=n,a=Ko(qc,n.__scopeScrollArea),[s,o]=F.useState(),c=F.useRef(null),f=Ln(e,c,a.onScrollbarXChange);return F.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),q.jsx(a5,{"data-orientation":"horizontal",...r,ref:f,sizes:t,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Nw(t)+"px",...n.style},onThumbPointerDown:p=>n.onThumbPointerDown(p.x),onDragScroll:p=>n.onDragScroll(p.x),onWheelScroll:(p,d)=>{if(a.viewport){const m=a.viewport.scrollLeft+p.deltaX;n.onWheelScroll(m),u5(m,d)&&p.preventDefault()}},onResize:()=>{c.current&&a.viewport&&s&&i({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:m1(s.paddingLeft),paddingEnd:m1(s.paddingRight)}})}})}),ace=F.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,...r}=n,a=Ko(qc,n.__scopeScrollArea),[s,o]=F.useState(),c=F.useRef(null),f=Ln(e,c,a.onScrollbarYChange);return F.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),q.jsx(a5,{"data-orientation":"vertical",...r,ref:f,sizes:t,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Nw(t)+"px",...n.style},onThumbPointerDown:p=>n.onThumbPointerDown(p.y),onDragScroll:p=>n.onDragScroll(p.y),onWheelScroll:(p,d)=>{if(a.viewport){const m=a.viewport.scrollTop+p.deltaY;n.onWheelScroll(m),u5(m,d)&&p.preventDefault()}},onResize:()=>{c.current&&a.viewport&&s&&i({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:m1(s.paddingTop),paddingEnd:m1(s.paddingBottom)}})}})}),[sce,r5]=QF(qc),a5=F.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:i,hasThumb:r,onThumbChange:a,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:f,onWheelScroll:p,onResize:d,...m}=n,v=Ko(qc,t),[_,b]=F.useState(null),S=Ln(e,N=>b(N)),x=F.useRef(null),T=F.useRef(""),M=v.viewport,A=i.content-i.viewport,D=Ca(p),O=Ca(c),I=Lw(d,10);function U(N){if(x.current){const L=N.clientX-x.current.left,Y=N.clientY-x.current.top;f({x:L,y:Y})}}return F.useEffect(()=>{const N=L=>{const Y=L.target;_?.contains(Y)&&D(L,A)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[M,_,A,D]),F.useEffect(O,[i,O]),Jg(_,I),Jg(v.content,I),q.jsx(sce,{scope:t,scrollbar:_,hasThumb:r,onThumbChange:Ca(a),onThumbPointerUp:Ca(s),onThumbPositionChange:O,onThumbPointerDown:Ca(o),children:q.jsx(ln.div,{...m,ref:S,style:{position:"absolute",...m.style},onPointerDown:Ut(n.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),x.current=_.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),U(N))}),onPointerMove:Ut(n.onPointerMove,U),onPointerUp:Ut(n.onPointerUp,N=>{const L=N.target;L.hasPointerCapture(N.pointerId)&&L.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=T.current,v.viewport&&(v.viewport.style.scrollBehavior=""),x.current=null})})})}),p1="ScrollAreaThumb",s5=F.forwardRef((n,e)=>{const{forceMount:t,...i}=n,r=r5(p1,n.__scopeScrollArea);return q.jsx(Pl,{present:t||r.hasThumb,children:q.jsx(oce,{ref:e,...i})})}),oce=F.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:i,...r}=n,a=Ko(p1,t),s=r5(p1,t),{onThumbPositionChange:o}=s,c=Ln(e,d=>s.onThumbChange(d)),f=F.useRef(void 0),p=Lw(()=>{f.current&&(f.current(),f.current=void 0)},100);return F.useEffect(()=>{const d=a.viewport;if(d){const m=()=>{if(p(),!f.current){const v=uce(d,o);f.current=v,o()}};return o(),d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,p,o]),q.jsx(ln.div,{"data-state":s.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Ut(n.onPointerDownCapture,d=>{const v=d.target.getBoundingClientRect(),_=d.clientX-v.left,b=d.clientY-v.top;s.onThumbPointerDown({x:_,y:b})}),onPointerUp:Ut(n.onPointerUp,s.onThumbPointerUp)})});s5.displayName=p1;var IO="ScrollAreaCorner",o5=F.forwardRef((n,e)=>{const t=Ko(IO,n.__scopeScrollArea),i=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&i?q.jsx(lce,{...n,ref:e}):null});o5.displayName=IO;var lce=F.forwardRef((n,e)=>{const{__scopeScrollArea:t,...i}=n,r=Ko(IO,t),[a,s]=F.useState(0),[o,c]=F.useState(0),f=!!(a&&o);return Jg(r.scrollbarX,()=>{const p=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(p),c(p)}),Jg(r.scrollbarY,()=>{const p=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(p),s(p)}),f?q.jsx(ln.div,{...i,ref:e,style:{width:a,height:o,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function m1(n){return n?parseInt(n,10):0}function l5(n,e){const t=n/e;return isNaN(t)?0:t}function Nw(n){const e=l5(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,i=(n.scrollbar.size-t)*e;return Math.max(i,18)}function cce(n,e,t,i="ltr"){const r=Nw(t),a=r/2,s=e||a,o=r-s,c=t.scrollbar.paddingStart+s,f=t.scrollbar.size-t.scrollbar.paddingEnd-o,p=t.content-t.viewport,d=i==="ltr"?[0,p]:[p*-1,0];return c5([c,f],d)(n)}function K3(n,e,t="ltr"){const i=Nw(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-r,s=e.content-e.viewport,o=a-i,c=t==="ltr"?[0,s]:[s*-1,0],f=t_(n,c);return c5([0,s],[0,o])(f)}function c5(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function u5(n,e){return n>0&&n<e}var uce=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},i=0;return(function r(){const a={left:n.scrollLeft,top:n.scrollTop},s=t.left!==a.left,o=t.top!==a.top;(s||o)&&e(),t=a,i=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(i)};function Lw(n,e){const t=Ca(n),i=F.useRef(0);return F.useEffect(()=>()=>window.clearTimeout(i.current),[]),F.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(t,e)},[t,e])}function Jg(n,e){const t=Ca(e);sa(()=>{let i=0;if(n){const r=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(t)});return r.observe(n),()=>{window.cancelAnimationFrame(i),r.unobserve(n)}}},[n,t])}var fce=JF,dce=t5,hce=o5;function Iw({className:n,children:e,...t}){return q.jsxs(fce,{"data-slot":"scroll-area",className:Zi("relative",n),...t,children:[q.jsx(dce,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),q.jsx(pce,{}),q.jsx(hce,{})]})}function pce({className:n,orientation:e="vertical",...t}){return q.jsx(n5,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Zi("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:q.jsx(s5,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function mce(){const{coreModuleRef:n}=Za(),[e,t]=F.useState([]),i=()=>{const s=n.current;if(lt(s))return;const o=s.listen("core.data:clear",()=>{t([])});return()=>{s.forget(o)}},r=()=>{const s=n.current;if(lt(s))return;const o=s.listen("core.data:load",({value:c})=>{const{stations:f}=c;t(()=>{const p=f.map(d=>({id:d.id,name:d.metadata.name}));return p.sort((d,m)=>d.name.localeCompare(m.name,void 0,{numeric:!0,sensitivity:"variant"})),p})});return()=>{s.forget(o)}},a=()=>{const s=n.current;if(lt(s))return;const o=s.listen("core.station:change",({value:c})=>{t(Qg(f=>{const p=f.find(d=>d.id===c.id);lt(p)||(p.name=c.metadata.name)}))});return()=>{s.forget(o)}};return F.useEffect(i,[n.current]),F.useEffect(r,[n.current]),F.useEffect(a,[n.current]),q.jsx(Iw,{className:"pl-1 h-full w-full",children:q.jsx(Jle,{data:e})})}const f5={selection:void 0},mv=F.createContext(f5);function d5({className:n,type:e,...t}){return q.jsx("input",{type:e,"data-slot":"input",className:Zi("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}var gce="Label",h5=F.forwardRef((n,e)=>q.jsx(ln.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));h5.displayName=gce;var vce=h5;function Uw({className:n,...e}){return q.jsx(vce,{"data-slot":"label",className:Zi("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}function ev({defaultValue:n,disabled:e=!1,id:t=gs(),label:i,placeholder:r,onChange:a,value:s}){return q.jsxs("div",{className:"flex flex-row justify-between",children:[q.jsx(Uw,{className:"text-xs",htmlFor:t,children:i}),q.jsx(d5,{className:"h-5 w-64 !text-xs rounded-xs",defaultValue:n,disabled:e,id:t,placeholder:r,onChange:a,value:s})]})}function yce(){const{selection:n}=F.useContext(mv);return lt(n)?null:q.jsx("div",{className:"flex flex-col gap-2",children:q.jsx(ev,{disabled:!0,label:"ID",value:n.id})})}function UO(n){const e=F.useRef({value:n,previous:n});return F.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var Pw="Checkbox",[_ce,vge]=Ul(Pw),[bce,PO]=_ce(Pw);function xce(n){const{__scopeCheckbox:e,checked:t,children:i,defaultChecked:r,disabled:a,form:s,name:o,onCheckedChange:c,required:f,value:p="on",internal_do_not_use_render:d}=n,[m,v]=pd({prop:t,defaultProp:r??!1,onChange:c,caller:Pw}),[_,b]=F.useState(null),[S,x]=F.useState(null),T=F.useRef(!1),M=_?!!s||!!_.closest("form"):!0,A={checked:m,disabled:a,setChecked:v,control:_,setControl:b,name:o,form:s,value:p,hasConsumerStoppedPropagationRef:T,required:f,defaultChecked:fd(r)?!1:r,isFormControl:M,bubbleInput:S,setBubbleInput:x};return q.jsx(bce,{scope:e,...A,children:Sce(d)?d(A):i})}var p5="CheckboxTrigger",m5=F.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...i},r)=>{const{control:a,value:s,disabled:o,checked:c,required:f,setControl:p,setChecked:d,hasConsumerStoppedPropagationRef:m,isFormControl:v,bubbleInput:_}=PO(p5,n),b=Ln(r,p),S=F.useRef(c);return F.useEffect(()=>{const x=a?.form;if(x){const T=()=>d(S.current);return x.addEventListener("reset",T),()=>x.removeEventListener("reset",T)}},[a,d]),q.jsx(ln.button,{type:"button",role:"checkbox","aria-checked":fd(c)?"mixed":c,"aria-required":f,"data-state":x5(c),"data-disabled":o?"":void 0,disabled:o,value:s,...i,ref:b,onKeyDown:Ut(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Ut(t,x=>{d(T=>fd(T)?!0:!T),_&&v&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});m5.displayName=p5;var g5=F.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:i,checked:r,defaultChecked:a,required:s,disabled:o,value:c,onCheckedChange:f,form:p,...d}=n;return q.jsx(xce,{__scopeCheckbox:t,checked:r,defaultChecked:a,disabled:o,required:s,onCheckedChange:f,name:i,form:p,value:c,internal_do_not_use_render:({isFormControl:m})=>q.jsxs(q.Fragment,{children:[q.jsx(m5,{...d,ref:e,__scopeCheckbox:t}),m&&q.jsx(b5,{__scopeCheckbox:t})]})})});g5.displayName=Pw;var v5="CheckboxIndicator",y5=F.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:i,...r}=n,a=PO(v5,t);return q.jsx(Pl,{present:i||fd(a.checked)||a.checked===!0,children:q.jsx(ln.span,{"data-state":x5(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...n.style}})})});y5.displayName=v5;var _5="CheckboxBubbleInput",b5=F.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:i,hasConsumerStoppedPropagationRef:r,checked:a,defaultChecked:s,required:o,disabled:c,name:f,value:p,form:d,bubbleInput:m,setBubbleInput:v}=PO(_5,n),_=Ln(t,v),b=UO(a),S=zR(i);F.useEffect(()=>{const T=m;if(!T)return;const M=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(M,"checked").set,O=!r.current;if(b!==a&&D){const I=new Event("click",{bubbles:O});T.indeterminate=fd(a),D.call(T,fd(a)?!1:a),T.dispatchEvent(I)}},[m,b,a,r]);const x=F.useRef(fd(a)?!1:a);return q.jsx(ln.input,{type:"checkbox","aria-hidden":!0,defaultChecked:s??x.current,required:o,disabled:c,name:f,value:p,form:d,...e,tabIndex:-1,ref:_,style:{...e.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});b5.displayName=_5;function Sce(n){return typeof n=="function"}function fd(n){return n==="indeterminate"}function x5(n){return fd(n)?"indeterminate":n?"checked":"unchecked"}function Ece({className:n,...e}){return q.jsx(g5,{"data-slot":"checkbox",className:Zi("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:q.jsx(y5,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:q.jsx(bz,{className:"size-3.5"})})})}function tv({checked:n=!1,id:e=gs(),label:t,onChange:i}){const[r,a]=F.useState(n);return q.jsxs("div",{className:"flex flex-row justify-between items-center",children:[q.jsx(Uw,{className:"text-xs",htmlFor:e,children:t}),q.jsx(Ece,{id:e,checked:r,onClick:()=>{const s=!r;Nn(i)&&i(s),a(s)}})]})}function wce(){const{coreModuleRef:n}=Za(),{selection:e}=F.useContext(mv),[t,i]=F.useState({disabled:!1,isTwoWay:!0});F.useEffect(()=>{const a=n.current;if(lt(a)||lt(e))return;const s=a.perform("get:core.path.metadata",e.id);lt(s)||i({disabled:s.disabled,isTwoWay:s.isTwoWay})},[n.current,e]);function r(a,s){const o=n.current;lt(o)||lt(e)||(o.perform("set:core.path.metadata",{disabled:a,id:e.id,isTwoWay:s}),i({disabled:a,isTwoWay:s}))}return lt(e)?null:q.jsxs("div",{className:"flex flex-col gap-2",children:[q.jsx(ev,{disabled:!0,label:"ID",value:e.id}),q.jsx(tv,{label:"Disabled",onChange:a=>{r(a,t.isTwoWay)}}),q.jsx(tv,{label:"Two way",onChange:a=>{r(t.disabled,a)}})]})}const hR={capitalize(n){return n.length?`${n[0].toUpperCase()}${n.slice(1).toLowerCase()}`:""},stringToUInt8Array(n){return Uint8Array.from(Array.from(n).map(e=>e.charCodeAt(0)))},toLabel(n){let e=this.capitalize(n);return e=e.trim(),e=e.replaceAll("_"," "),e}};function S5(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}var n_;(function(n){n.event="event",n.props="prop"})(n_||(n_={}));function rd(){}function Tce(n){var e,t=void 0;return function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return e&&i.length===e.length&&i.every(function(a,s){return a===e[s]})||(e=i,t=n.apply(void 0,i)),t}}function i_(n){return!!(n||"").match(/\d/)}function Rg(n){return n==null}function Mce(n){return typeof n=="number"&&isNaN(n)}function E5(n){return Rg(n)||Mce(n)||typeof n=="number"&&!isFinite(n)}function w5(n){return n.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Ace(n){switch(n){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Cce(n,e,t){var i=Ace(t),r=n.search(/[1-9]/);return r=r===-1?n.length:r,n.substring(0,r)+n.substring(r,n.length).replace(i,"$1"+e)}function Rce(n){var e=F.useRef(n);e.current=n;var t=F.useRef(function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return e.current.apply(e,i)});return t.current}function zO(n,e){e===void 0&&(e=!0);var t=n[0]==="-",i=t&&e;n=n.replace("-","");var r=n.split("."),a=r[0],s=r[1]||"";return{beforeDecimal:a,afterDecimal:s,hasNegation:t,addNegation:i}}function Oce(n){if(!n)return n;var e=n[0]==="-";e&&(n=n.substring(1,n.length));var t=n.split("."),i=t[0].replace(/^0+/,"")||"0",r=t[1]||"";return(e?"-":"")+i+(r?"."+r:"")}function T5(n,e,t){for(var i="",r=t?"0":"",a=0;a<=e-1;a++)i+=n[a]||r;return i}function $3(n,e){return Array(e+1).join(n)}function M5(n){var e=n+"",t=e[0]==="-"?"-":"";t&&(e=e.substring(1));var i=e.split(/[eE]/g),r=i[0],a=i[1];if(a=Number(a),!a)return t+r;r=r.replace(".","");var s=1+a,o=r.length;return s<0?r="0."+$3("0",Math.abs(s))+r:s>=o?r=r+$3("0",s-o):r=(r.substring(0,s)||"0")+"."+r.substring(s),t+r}function Q3(n,e,t){if(["","-"].indexOf(n)!==-1)return n;var i=(n.indexOf(".")!==-1||t)&&e,r=zO(n),a=r.beforeDecimal,s=r.afterDecimal,o=r.hasNegation,c=parseFloat("0."+(s||"0")),f=s.length<=e?"0."+s:c.toFixed(e),p=f.split("."),d=a;a&&Number(p[0])&&(d=a.split("").reverse().reduce(function(b,S,x){return b.length>x?(Number(b[0])+Number(S)).toString()+b.substring(1,b.length):S+b},p[0]));var m=T5(p[1]||"",e,t),v=o?"-":"",_=i?".":"";return""+v+d+_+m}function Gh(n,e){if(n.value=n.value,n!==null){if(n.createTextRange){var t=n.createTextRange();return t.move("character",e),t.select(),!0}return n.selectionStart||n.selectionStart===0?(n.focus(),n.setSelectionRange(e,e),!0):(n.focus(),!1)}}var A5=Tce(function(n,e){for(var t=0,i=0,r=n.length,a=e.length;n[t]===e[t]&&t<r;)t++;for(;n[r-1-i]===e[a-1-i]&&a-i>t&&r-i>t;)i++;return{from:{start:t,end:r-i},to:{start:t,end:a-i}}}),Dce=function(n,e){var t=Math.min(n.selectionStart,e);return{from:{start:t,end:n.selectionEnd},to:{start:t,end:e}}};function Nce(n,e,t){return Math.min(Math.max(n,e),t)}function GA(n){return Math.max(n.selectionStart,n.selectionEnd)}function Lce(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Ice(n){return{from:{start:0,end:0},to:{start:0,end:n.length},lastValue:""}}function Uce(n){var e=n.currentValue,t=n.formattedValue,i=n.currentValueIndex,r=n.formattedValueIndex;return e[i]===t[r]}function Pce(n,e,t,i,r,a,s){s===void 0&&(s=Uce);var o=r.findIndex(function(A){return A}),c=n.slice(0,o);!e&&!t.startsWith(c)&&(e=c,t=c+t,i=i+c.length);for(var f=t.length,p=n.length,d={},m=new Array(f),v=0;v<f;v++){m[v]=-1;for(var _=0,b=p;_<b;_++){var S=s({currentValue:t,lastValue:e,formattedValue:n,currentValueIndex:v,formattedValueIndex:_});if(S&&d[_]!==!0){m[v]=_,d[_]=!0;break}}}for(var x=i;x<f&&(m[x]===-1||!a(t[x]));)x++;var T=x===f||m[x]===-1?p:m[x];for(x=i-1;x>0&&m[x]===-1;)x--;var M=x===-1||m[x]===-1?0:m[x]+1;return M>T?T:i-M<T-i?M:T}function J3(n,e,t,i){var r=n.length;if(e=Nce(e,0,r),i==="left"){for(;e>=0&&!t[e];)e--;e===-1&&(e=t.indexOf(!0))}else{for(;e<=r&&!t[e];)e++;e>r&&(e=t.lastIndexOf(!0))}return e===-1&&(e=r),e}function zce(n){for(var e=Array.from({length:n.length+1}).map(function(){return!0}),t=0,i=e.length;t<i;t++)e[t]=!!(i_(n[t])||i_(n[t-1]));return e}function C5(n,e,t,i,r,a){a===void 0&&(a=rd);var s=Rce(function(_,b){var S,x;return E5(_)?(x="",S=""):typeof _=="number"||b?(x=typeof _=="number"?M5(_):_,S=i(x)):(x=r(_,void 0),S=i(x)),{formattedValue:S,numAsString:x}}),o=F.useState(function(){return s(Rg(n)?e:n,t)}),c=o[0],f=o[1],p=function(_,b){_.formattedValue!==c.formattedValue&&f({formattedValue:_.formattedValue,numAsString:_.value}),a(_,b)},d=n,m=t;Rg(n)&&(d=c.numAsString,m=!0);var v=s(d,m);return F.useMemo(function(){f(v)},[v.formattedValue]),[c,p]}function Bce(n){return n.replace(/[^0-9]/g,"")}function kce(n){return n}function Fce(n){var e=n.type;e===void 0&&(e="text");var t=n.displayType;t===void 0&&(t="input");var i=n.customInput,r=n.renderText,a=n.getInputRef,s=n.format;s===void 0&&(s=kce);var o=n.removeFormatting;o===void 0&&(o=Bce);var c=n.defaultValue,f=n.valueIsNumericString,p=n.onValueChange,d=n.isAllowed,m=n.onChange;m===void 0&&(m=rd);var v=n.onKeyDown;v===void 0&&(v=rd);var _=n.onMouseUp;_===void 0&&(_=rd);var b=n.onFocus;b===void 0&&(b=rd);var S=n.onBlur;S===void 0&&(S=rd);var x=n.value,T=n.getCaretBoundary;T===void 0&&(T=zce);var M=n.isValidInputCharacter;M===void 0&&(M=i_);var A=n.isCharacterSame,D=S5(n,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),O=C5(x,c,!!f,s,o,p),I=O[0],U=I.formattedValue,N=I.numAsString,L=O[1],Y=F.useRef(),ee=F.useRef({formattedValue:U,numAsString:N}),se=function(Ce,ce){ee.current={formattedValue:Ce.formattedValue,numAsString:Ce.value},L(Ce,ce)},he=F.useState(!1),de=he[0],P=he[1],B=F.useRef(null),V=F.useRef({setCaretTimeout:null,focusTimeout:null});F.useEffect(function(){return P(!0),function(){clearTimeout(V.current.setCaretTimeout),clearTimeout(V.current.focusTimeout)}},[]);var ae=s,X=function(Ce,ce){var pe=parseFloat(ce);return{formattedValue:Ce,value:ce,floatValue:isNaN(pe)?void 0:pe}},oe=function(Ce,ce,pe){Ce.selectionStart===0&&Ce.selectionEnd===Ce.value.length||(Gh(Ce,ce),V.current.setCaretTimeout=setTimeout(function(){Ce.value===pe&&Ce.selectionStart!==ce&&Gh(Ce,ce)},0))},me=function(Ce,ce,pe){return J3(Ce,ce,T(Ce),pe)},J=function(Ce,ce,pe){var ie=T(ce),W=Pce(ce,U,Ce,pe,ie,M,A);return W=J3(ce,W,ie),W},le=function(Ce){var ce=Ce.formattedValue;ce===void 0&&(ce="");var pe=Ce.input,ie=Ce.source,W=Ce.event,K=Ce.numAsString,j;if(pe){var $=Ce.inputValue||pe.value,Re=GA(pe);pe.value=ce,j=J($,ce,Re),j!==void 0&&oe(pe,j,ce)}ce!==U&&se(X(ce,K),{event:W,source:ie})};F.useEffect(function(){var Ce=ee.current,ce=Ce.formattedValue,pe=Ce.numAsString;(U!==ce||N!==pe)&&se(X(U,N),{event:void 0,source:n_.props})},[U,N]);var Se=B.current?GA(B.current):void 0,Ee=typeof window<"u"?F.useLayoutEffect:F.useEffect;Ee(function(){var Ce=B.current;if(U!==ee.current.formattedValue&&Ce){var ce=J(ee.current.formattedValue,U,Se);Ce.value=U,oe(Ce,ce,U)}},[U]);var re=function(Ce,ce,pe){var ie=ce.target,W=Y.current?Dce(Y.current,ie.selectionEnd):A5(U,Ce),K=Object.assign(Object.assign({},W),{lastValue:U}),j=o(Ce,K),$=ae(j);if(j=o($,void 0),d&&!d(X($,j))){var Re=ce.target,Ie=GA(Re),ne=J(Ce,U,Ie);return Re.value=U,oe(Re,ne,U),!1}return le({formattedValue:$,numAsString:j,inputValue:Ce,event:ce,source:pe,input:ce.target}),!0},ge=function(Ce,ce){ce===void 0&&(ce=0);var pe=Ce.selectionStart,ie=Ce.selectionEnd;Y.current={selectionStart:pe,selectionEnd:ie+ce}},Ae=function(Ce){var ce=Ce.target,pe=ce.value,ie=re(pe,Ce,n_.event);ie&&m(Ce),Y.current=void 0},Pe=function(Ce){var ce=Ce.target,pe=Ce.key,ie=ce.selectionStart,W=ce.selectionEnd,K=ce.value;K===void 0&&(K="");var j;pe==="ArrowLeft"||pe==="Backspace"?j=Math.max(ie-1,0):pe==="ArrowRight"?j=Math.min(ie+1,K.length):pe==="Delete"&&(j=ie);var $=0;pe==="Delete"&&ie===W&&($=1);var Re=pe==="ArrowLeft"||pe==="ArrowRight";if(j===void 0||ie!==W&&!Re){v(Ce),ge(ce,$);return}var Ie=j;if(Re){var ne=pe==="ArrowLeft"?"left":"right";Ie=me(K,j,ne),Ie!==j&&Ce.preventDefault()}else pe==="Delete"&&!M(K[j])?Ie=me(K,j,"right"):pe==="Backspace"&&!M(K[j])&&(Ie=me(K,j,"left"));Ie!==j&&oe(ce,Ie,K),v(Ce),ge(ce,$)},We=function(Ce){var ce=Ce.target,pe=function(){var ie=ce.selectionStart,W=ce.selectionEnd,K=ce.value;if(K===void 0&&(K=""),ie===W){var j=me(K,ie);j!==ie&&oe(ce,j,K)}};pe(),requestAnimationFrame(function(){pe()}),_(Ce),ge(ce)},it=function(Ce){Ce.persist&&Ce.persist();var ce=Ce.target,pe=Ce.currentTarget;B.current=ce,V.current.focusTimeout=setTimeout(function(){var ie=ce.selectionStart,W=ce.selectionEnd,K=ce.value;K===void 0&&(K="");var j=me(K,ie);j!==ie&&!(ie===0&&W===K.length)&&oe(ce,j,K),b(Object.assign(Object.assign({},Ce),{currentTarget:pe}))},0)},te=function(Ce){B.current=null,clearTimeout(V.current.focusTimeout),clearTimeout(V.current.setCaretTimeout),S(Ce)},xe=de&&Lce()?"numeric":void 0,De=Object.assign({inputMode:xe},D,{type:e,value:U,onChange:Ae,onKeyDown:Pe,onMouseUp:We,onFocus:it,onBlur:te});if(t==="text")return r?Tt.createElement(Tt.Fragment,null,r(U,D)||null):Tt.createElement("span",Object.assign({},D,{ref:a}),U);if(i){var He=i;return Tt.createElement(He,Object.assign({},De,{ref:a}))}return Tt.createElement("input",Object.assign({},De,{ref:a}))}function eU(n,e){var t=e.decimalScale,i=e.fixedDecimalScale,r=e.prefix;r===void 0&&(r="");var a=e.suffix;a===void 0&&(a="");var s=e.allowNegative,o=e.thousandsGroupStyle;if(o===void 0&&(o="thousand"),n===""||n==="-")return n;var c=zw(e),f=c.thousandSeparator,p=c.decimalSeparator,d=t!==0&&n.indexOf(".")!==-1||t&&i,m=zO(n,s),v=m.beforeDecimal,_=m.afterDecimal,b=m.addNegation;return t!==void 0&&(_=T5(_,t,!!i)),f&&(v=Cce(v,f,o)),r&&(v=r+v),a&&(_=_+a),b&&(v="-"+v),n=v+(d&&p||"")+_,n}function zw(n){var e=n.decimalSeparator;e===void 0&&(e=".");var t=n.thousandSeparator,i=n.allowedDecimalSeparators;return t===!0&&(t=","),i||(i=[e,"."]),{decimalSeparator:e,thousandSeparator:t,allowedDecimalSeparators:i}}function Hce(n,e){n===void 0&&(n="");var t=new RegExp("(-)"),i=new RegExp("(-)(.)*(-)"),r=t.test(n),a=i.test(n);return n=n.replace(/-/g,""),r&&!a&&e&&(n="-"+n),n}function jce(n,e){return new RegExp("(^-)|[0-9]|"+w5(n),"g")}function Vce(n,e,t){return n===""?!0:!e?.match(/\d/)&&!t?.match(/\d/)&&typeof n=="string"&&!isNaN(Number(n))}function Gce(n,e,t){var i;e===void 0&&(e=Ice(n));var r=t.allowNegative,a=t.prefix;a===void 0&&(a="");var s=t.suffix;s===void 0&&(s="");var o=t.decimalScale,c=e.from,f=e.to,p=f.start,d=f.end,m=zw(t),v=m.allowedDecimalSeparators,_=m.decimalSeparator,b=n[d]===_;if(i_(n)&&(n===a||n===s)&&e.lastValue==="")return n;if(d-p===1&&v.indexOf(n[p])!==-1){var S=o===0?"":_;n=n.substring(0,p)+S+n.substring(p+1,n.length)}var x=function(B,V,ae){var X=!1,oe=!1;a.startsWith("-")?X=!1:B.startsWith("--")?(X=!1,oe=!0):s.startsWith("-")&&B.length===s.length?X=!1:B[0]==="-"&&(X=!0);var me=X?1:0;return oe&&(me=2),me&&(B=B.substring(me),V-=me,ae-=me),{value:B,start:V,end:ae,hasNegation:X}},T=x(n,p,d),M=T.hasNegation;i=T,n=i.value,p=i.start,d=i.end;var A=x(e.lastValue,c.start,c.end),D=A.start,O=A.end,I=A.value,U=n.substring(p,d);n.length&&I.length&&(D>I.length-s.length||O<a.length)&&!(U&&s.startsWith(U))&&(n=I);var N=0;n.startsWith(a)?N+=a.length:p<a.length&&(N=p),n=n.substring(N),d-=N;var L=n.length,Y=n.length-s.length;n.endsWith(s)?L=Y:(d>Y||d>n.length-s.length)&&(L=d),n=n.substring(0,L),n=Hce(M?"-"+n:n,r),n=(n.match(jce(_))||[]).join("");var ee=n.indexOf(_);n=n.replace(new RegExp(w5(_),"g"),function(B,V){return V===ee?".":""});var se=zO(n,r),he=se.beforeDecimal,de=se.afterDecimal,P=se.addNegation;return f.end-f.start<c.end-c.start&&he===""&&b&&!parseFloat(de)&&(n=P?"-":""),n}function Yce(n,e){var t=e.prefix;t===void 0&&(t="");var i=e.suffix;i===void 0&&(i="");var r=Array.from({length:n.length+1}).map(function(){return!0}),a=n[0]==="-";r.fill(!1,0,t.length+(a?1:0));var s=n.length;return r.fill(!1,s-i.length+1,s+1),r}function Wce(n){var e=zw(n),t=e.thousandSeparator,i=e.decimalSeparator,r=n.prefix;r===void 0&&(r="");var a=n.allowNegative;if(a===void 0&&(a=!0),t===i)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+t+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+i+` (default value for decimalSeparator is .)
     `);return r.startsWith("-")&&a&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+r+`
      allowNegative: `+a+`
    `),a=!1),Object.assign(Object.assign({},n),{allowNegative:a})}function Zce(n){n=Wce(n),n.decimalSeparator,n.allowedDecimalSeparators,n.thousandsGroupStyle;var e=n.suffix,t=n.allowNegative,i=n.allowLeadingZeros,r=n.onKeyDown;r===void 0&&(r=rd);var a=n.onBlur;a===void 0&&(a=rd);var s=n.thousandSeparator,o=n.decimalScale,c=n.fixedDecimalScale,f=n.prefix;f===void 0&&(f="");var p=n.defaultValue,d=n.value,m=n.valueIsNumericString,v=n.onValueChange,_=S5(n,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),b=zw(n),S=b.decimalSeparator,x=b.allowedDecimalSeparators,T=function(P){return eU(P,n)},M=function(P,B){return Gce(P,B,n)},A=Rg(d)?p:d,D=m??Vce(A,f,e);Rg(d)?Rg(p)||(D=D||typeof p=="number"):D=D||typeof d=="number";var O=function(P){return E5(P)?P:(typeof P=="number"&&(P=M5(P)),D&&typeof o=="number"?Q3(P,o,!!c):P)},I=C5(O(d),O(p),!!D,T,M,v),U=I[0],N=U.numAsString,L=U.formattedValue,Y=I[1],ee=function(P){var B=P.target,V=P.key,ae=B.selectionStart,X=B.selectionEnd,oe=B.value;if(oe===void 0&&(oe=""),(V==="Backspace"||V==="Delete")&&X<f.length){P.preventDefault();return}if(ae!==X){r(P);return}V==="Backspace"&&oe[0]==="-"&&ae===f.length+1&&t&&Gh(B,1),o&&c&&(V==="Backspace"&&oe[ae-1]===S?(Gh(B,ae-1),P.preventDefault()):V==="Delete"&&oe[ae]===S&&P.preventDefault()),x?.includes(V)&&oe[ae]===S&&Gh(B,ae+1);var me=s===!0?",":s;V==="Backspace"&&oe[ae-1]===me&&Gh(B,ae-1),V==="Delete"&&oe[ae]===me&&Gh(B,ae+1),r(P)},se=function(P){var B=N;if(B.match(/\d/g)||(B=""),i||(B=Oce(B)),c&&o&&(B=Q3(B,o,c)),B!==N){var V=eU(B,n);Y({formattedValue:V,value:B,floatValue:parseFloat(B)},{event:P,source:n_.event})}a(P)},he=function(P){return P===S?!0:i_(P)},de=function(P){var B=P.currentValue,V=P.lastValue,ae=P.formattedValue,X=P.currentValueIndex,oe=P.formattedValueIndex,me=B[X],J=ae[oe],le=A5(V,B),Se=le.to,Ee=function(re){return M(re).indexOf(".")+f.length};return d===0&&c&&o&&B[Se.start]===S&&Ee(B)<X&&Ee(ae)>oe?!1:X>=Se.start&&X<Se.end&&x&&x.includes(me)&&J===S?!0:me===J};return Object.assign(Object.assign({},_),{value:L,valueIsNumericString:!1,isValidInputCharacter:he,isCharacterSame:de,onValueChange:Y,format:T,removeFormatting:M,getCaretBoundary:function(P){return Yce(P,n)},onKeyDown:ee,onBlur:se})}function Xce(n){var e=Zce(n);return Tt.createElement(Fce,Object.assign({},e))}function tr({decimal:n=3,defaultValue:e=0,disabled:t=!1,id:i=gs(),label:r,onChange:a,ref:s,value:o}){return q.jsxs("div",{className:"flex flex-row justify-between items-center",children:[q.jsx(Uw,{className:"pr-1 text-xs",htmlFor:i,children:r}),q.jsx(Xce,{allowedDecimalSeparators:[","],allowNegative:!0,className:"h-5 max-w-64 px-1 py-0 !text-xs rounded-xs",customInput:d5,decimalScale:n,defaultValue:e,disabled:t,fixedDecimalScale:!0,getInputRef:s,id:i,onChange:a,value:o,valueIsNumericString:!0})]})}function Vc({defaultValue:n=[0,0,0],disabled:e=!1,disableX:t=!1,disableY:i=!1,disableZ:r=!1,label:a,onChange:s=()=>{},value:o=[0,0,0]}){const c=F.useRef(void 0),f=F.useRef(void 0),p=F.useRef(void 0),d=({target:{value:_}})=>{lt(f.current)||lt(p.current)||s([Number(_),Number(f.current.value),Number(p.current.value)])},m=({target:{value:_}})=>{lt(c.current)||lt(p.current)||s([Number(c.current.value),Number(_),Number(p.current.value)])},v=({target:{value:_}})=>{lt(c.current)||lt(f.current)||s([Number(c.current.value),Number(f.current.value),Number(_)])};return q.jsxs("div",{className:"flex flex-row justify-between",children:[q.jsx("div",{className:"text-xs",children:a}),q.jsxs("div",{className:"flex flex-row gap-1 max-w-64",children:[q.jsx(tr,{defaultValue:n[0],disabled:e||t,label:"X",onChange:d,ref:c,value:o[0]}),q.jsx(tr,{defaultValue:n[1],disabled:e||i,label:"Y",onChange:m,ref:f,value:o[1]}),q.jsx(tr,{defaultValue:n[2],disabled:e||r,label:"Z",onChange:v,ref:p,value:o[2]})]})]})}var R5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qce="VisuallyHidden",Kce=F.forwardRef((n,e)=>q.jsx(ln.span,{...n,ref:e,style:{...R5,...n.style}}));Kce.displayName=qce;var $ce=[" ","Enter","ArrowUp","ArrowDown"],Qce=[" ","Enter"],hp="Select",[Bw,kw,Jce]=c_(hp),[gv,yge]=Ul(hp,[Jce,C1]),Fw=C1(),[eue,Md]=gv(hp),[tue,nue]=gv(hp),O5=n=>{const{__scopeSelect:e,children:t,open:i,defaultOpen:r,onOpenChange:a,value:s,defaultValue:o,onValueChange:c,dir:f,name:p,autoComplete:d,disabled:m,required:v,form:_}=n,b=Fw(e),[S,x]=F.useState(null),[T,M]=F.useState(null),[A,D]=F.useState(!1),O=iv(f),[I,U]=pd({prop:i,defaultProp:r??!1,onChange:a,caller:hp}),[N,L]=pd({prop:s,defaultProp:o,onChange:c,caller:hp}),Y=F.useRef(null),ee=S?_||!!S.closest("form"):!0,[se,he]=F.useState(new Set),de=Array.from(se).map(P=>P.props.value).join(";");return q.jsx(sP,{...b,children:q.jsxs(eue,{required:v,scope:e,trigger:S,onTriggerChange:x,valueNode:T,onValueNodeChange:M,valueNodeHasChildren:A,onValueNodeHasChildrenChange:D,contentId:kc(),value:N,onValueChange:L,open:I,onOpenChange:U,dir:O,triggerPointerDownPosRef:Y,disabled:m,children:[q.jsx(Bw.Provider,{scope:e,children:q.jsx(tue,{scope:n.__scopeSelect,onNativeOptionAdd:F.useCallback(P=>{he(B=>new Set(B).add(P))},[]),onNativeOptionRemove:F.useCallback(P=>{he(B=>{const V=new Set(B);return V.delete(P),V})},[]),children:t})}),ee?q.jsxs(Q5,{"aria-hidden":!0,required:v,tabIndex:-1,name:p,autoComplete:d,value:N,onChange:P=>L(P.target.value),disabled:m,form:_,children:[N===void 0?q.jsx("option",{value:""}):null,Array.from(se)]},de):null]})})};O5.displayName=hp;var D5="SelectTrigger",N5=F.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:i=!1,...r}=n,a=Fw(t),s=Md(D5,t),o=s.disabled||i,c=Ln(e,s.onTriggerChange),f=kw(t),p=F.useRef("touch"),[d,m,v]=e6(b=>{const S=f().filter(M=>!M.disabled),x=S.find(M=>M.value===s.value),T=t6(S,b,x);T!==void 0&&s.onValueChange(T.value)}),_=b=>{o||(s.onOpenChange(!0),v()),b&&(s.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return q.jsx(oP,{asChild:!0,...a,children:q.jsx(ln.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":J5(s.value)?"":void 0,...r,ref:c,onClick:Ut(r.onClick,b=>{b.currentTarget.focus(),p.current!=="mouse"&&_(b)}),onPointerDown:Ut(r.onPointerDown,b=>{p.current=b.pointerType;const S=b.target;S.hasPointerCapture(b.pointerId)&&S.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(_(b),b.preventDefault())}),onKeyDown:Ut(r.onKeyDown,b=>{const S=d.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(S&&b.key===" ")&&$ce.includes(b.key)&&(_(),b.preventDefault())})})})});N5.displayName=D5;var L5="SelectValue",I5=F.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:r,children:a,placeholder:s="",...o}=n,c=Md(L5,t),{onValueNodeHasChildrenChange:f}=c,p=a!==void 0,d=Ln(e,c.onValueNodeChange);return sa(()=>{f(p)},[f,p]),q.jsx(ln.span,{...o,ref:d,style:{pointerEvents:"none"},children:J5(c.value)?q.jsx(q.Fragment,{children:s}):a})});I5.displayName=L5;var iue="SelectIcon",U5=F.forwardRef((n,e)=>{const{__scopeSelect:t,children:i,...r}=n;return q.jsx(ln.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});U5.displayName=iue;var rue="SelectPortal",P5=n=>q.jsx(FR,{asChild:!0,...n});P5.displayName=rue;var pp="SelectContent",z5=F.forwardRef((n,e)=>{const t=Md(pp,n.__scopeSelect),[i,r]=F.useState();if(sa(()=>{r(new DocumentFragment)},[]),!t.open){const a=i;return a?l_.createPortal(q.jsx(B5,{scope:n.__scopeSelect,children:q.jsx(Bw.Slot,{scope:n.__scopeSelect,children:q.jsx("div",{children:n.children})})}),a):null}return q.jsx(k5,{...n,ref:e})});z5.displayName=pp;var Al=10,[B5,Ad]=gv(pp),aue="SelectContentImpl",sue=Dg("SelectContent.RemoveScroll"),k5=F.forwardRef((n,e)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:a,onPointerDownOutside:s,side:o,sideOffset:c,align:f,alignOffset:p,arrowPadding:d,collisionBoundary:m,collisionPadding:v,sticky:_,hideWhenDetached:b,avoidCollisions:S,...x}=n,T=Md(pp,t),[M,A]=F.useState(null),[D,O]=F.useState(null),I=Ln(e,re=>A(re)),[U,N]=F.useState(null),[L,Y]=F.useState(null),ee=kw(t),[se,he]=F.useState(!1),de=F.useRef(!1);F.useEffect(()=>{if(M)return yP(M)},[M]),zU();const P=F.useCallback(re=>{const[ge,...Ae]=ee().map(it=>it.ref.current),[Pe]=Ae.slice(-1),We=document.activeElement;for(const it of re)if(it===We||(it?.scrollIntoView({block:"nearest"}),it===ge&&D&&(D.scrollTop=0),it===Pe&&D&&(D.scrollTop=D.scrollHeight),it?.focus(),document.activeElement!==We))return},[ee,D]),B=F.useCallback(()=>P([U,M]),[P,U,M]);F.useEffect(()=>{se&&B()},[se,B]);const{onOpenChange:V,triggerPointerDownPosRef:ae}=T;F.useEffect(()=>{if(M){let re={x:0,y:0};const ge=Pe=>{re={x:Math.abs(Math.round(Pe.pageX)-(ae.current?.x??0)),y:Math.abs(Math.round(Pe.pageY)-(ae.current?.y??0))}},Ae=Pe=>{re.x<=10&&re.y<=10?Pe.preventDefault():M.contains(Pe.target)||V(!1),document.removeEventListener("pointermove",ge),ae.current=null};return ae.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",Ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",Ae,{capture:!0})}}},[M,V,ae]),F.useEffect(()=>{const re=()=>V(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[V]);const[X,oe]=e6(re=>{const ge=ee().filter(We=>!We.disabled),Ae=ge.find(We=>We.ref.current===document.activeElement),Pe=t6(ge,re,Ae);Pe&&setTimeout(()=>Pe.ref.current.focus())}),me=F.useCallback((re,ge,Ae)=>{const Pe=!de.current&&!Ae;(T.value!==void 0&&T.value===ge||Pe)&&(N(re),Pe&&(de.current=!0))},[T.value]),J=F.useCallback(()=>M?.focus(),[M]),le=F.useCallback((re,ge,Ae)=>{const Pe=!de.current&&!Ae;(T.value!==void 0&&T.value===ge||Pe)&&Y(re)},[T.value]),Se=i==="popper"?pR:F5,Ee=Se===pR?{side:o,sideOffset:c,align:f,alignOffset:p,arrowPadding:d,collisionBoundary:m,collisionPadding:v,sticky:_,hideWhenDetached:b,avoidCollisions:S}:{};return q.jsx(B5,{scope:t,content:M,viewport:D,onViewportChange:O,itemRefCallback:me,selectedItem:U,onItemLeave:J,itemTextRefCallback:le,focusSelectedItem:B,selectedItemText:L,position:i,isPositioned:se,searchRef:X,children:q.jsx(HR,{as:sue,allowPinchZoom:!0,children:q.jsx(OR,{asChild:!0,trapped:T.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:Ut(r,re=>{T.trigger?.focus({preventScroll:!0}),re.preventDefault()}),children:q.jsx(RR,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:q.jsx(Se,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:re=>re.preventDefault(),...x,...Ee,onPlaced:()=>he(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Ut(x.onKeyDown,re=>{const ge=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!ge&&re.key.length===1&&oe(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let Pe=ee().filter(We=>!We.disabled).map(We=>We.ref.current);if(["ArrowUp","End"].includes(re.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const We=re.target,it=Pe.indexOf(We);Pe=Pe.slice(it+1)}setTimeout(()=>P(Pe)),re.preventDefault()}})})})})})})});k5.displayName=aue;var oue="SelectItemAlignedPosition",F5=F.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:i,...r}=n,a=Md(pp,t),s=Ad(pp,t),[o,c]=F.useState(null),[f,p]=F.useState(null),d=Ln(e,I=>p(I)),m=kw(t),v=F.useRef(!1),_=F.useRef(!0),{viewport:b,selectedItem:S,selectedItemText:x,focusSelectedItem:T}=s,M=F.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&f&&b&&S&&x){const I=a.trigger.getBoundingClientRect(),U=f.getBoundingClientRect(),N=a.valueNode.getBoundingClientRect(),L=x.getBoundingClientRect();if(a.dir!=="rtl"){const We=L.left-U.left,it=N.left-We,te=I.left-it,xe=I.width+te,De=Math.max(xe,U.width),He=window.innerWidth-Al,Ce=t_(it,[Al,Math.max(Al,He-De)]);o.style.minWidth=xe+"px",o.style.left=Ce+"px"}else{const We=U.right-L.right,it=window.innerWidth-N.right-We,te=window.innerWidth-I.right-it,xe=I.width+te,De=Math.max(xe,U.width),He=window.innerWidth-Al,Ce=t_(it,[Al,Math.max(Al,He-De)]);o.style.minWidth=xe+"px",o.style.right=Ce+"px"}const Y=m(),ee=window.innerHeight-Al*2,se=b.scrollHeight,he=window.getComputedStyle(f),de=parseInt(he.borderTopWidth,10),P=parseInt(he.paddingTop,10),B=parseInt(he.borderBottomWidth,10),V=parseInt(he.paddingBottom,10),ae=de+P+se+V+B,X=Math.min(S.offsetHeight*5,ae),oe=window.getComputedStyle(b),me=parseInt(oe.paddingTop,10),J=parseInt(oe.paddingBottom,10),le=I.top+I.height/2-Al,Se=ee-le,Ee=S.offsetHeight/2,re=S.offsetTop+Ee,ge=de+P+re,Ae=ae-ge;if(ge<=le){const We=Y.length>0&&S===Y[Y.length-1].ref.current;o.style.bottom="0px";const it=f.clientHeight-b.offsetTop-b.offsetHeight,te=Math.max(Se,Ee+(We?J:0)+it+B),xe=ge+te;o.style.height=xe+"px"}else{const We=Y.length>0&&S===Y[0].ref.current;o.style.top="0px";const te=Math.max(le,de+b.offsetTop+(We?me:0)+Ee)+Ae;o.style.height=te+"px",b.scrollTop=ge-le+b.offsetTop}o.style.margin=`${Al}px 0`,o.style.minHeight=X+"px",o.style.maxHeight=ee+"px",i?.(),requestAnimationFrame(()=>v.current=!0)}},[m,a.trigger,a.valueNode,o,f,b,S,x,a.dir,i]);sa(()=>M(),[M]);const[A,D]=F.useState();sa(()=>{f&&D(window.getComputedStyle(f).zIndex)},[f]);const O=F.useCallback(I=>{I&&_.current===!0&&(M(),T?.(),_.current=!1)},[M,T]);return q.jsx(cue,{scope:t,contentWrapper:o,shouldExpandOnScrollRef:v,onScrollButtonChange:O,children:q.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:q.jsx(ln.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});F5.displayName=oue;var lue="SelectPopperPosition",pR=F.forwardRef((n,e)=>{const{__scopeSelect:t,align:i="start",collisionPadding:r=Al,...a}=n,s=Fw(t);return q.jsx(lP,{...s,...a,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pR.displayName=lue;var[cue,BO]=gv(pp,{}),mR="SelectViewport",H5=F.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:i,...r}=n,a=Ad(mR,t),s=BO(mR,t),o=Ln(e,a.onViewportChange),c=F.useRef(0);return q.jsxs(q.Fragment,{children:[q.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),q.jsx(Bw.Slot,{scope:t,children:q.jsx(ln.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Ut(r.onScroll,f=>{const p=f.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:m}=s;if(m?.current&&d){const v=Math.abs(c.current-p.scrollTop);if(v>0){const _=window.innerHeight-Al*2,b=parseFloat(d.style.minHeight),S=parseFloat(d.style.height),x=Math.max(b,S);if(x<_){const T=x+v,M=Math.min(_,T),A=T-M;d.style.height=M+"px",d.style.bottom==="0px"&&(p.scrollTop=A>0?A:0,d.style.justifyContent="flex-end")}}}c.current=p.scrollTop})})})]})});H5.displayName=mR;var j5="SelectGroup",[uue,fue]=gv(j5),due=F.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,r=kc();return q.jsx(uue,{scope:t,id:r,children:q.jsx(ln.div,{role:"group","aria-labelledby":r,...i,ref:e})})});due.displayName=j5;var V5="SelectLabel",hue=F.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,r=fue(V5,t);return q.jsx(ln.div,{id:r.id,...i,ref:e})});hue.displayName=V5;var g1="SelectItem",[pue,G5]=gv(g1),Y5=F.forwardRef((n,e)=>{const{__scopeSelect:t,value:i,disabled:r=!1,textValue:a,...s}=n,o=Md(g1,t),c=Ad(g1,t),f=o.value===i,[p,d]=F.useState(a??""),[m,v]=F.useState(!1),_=Ln(e,T=>c.itemRefCallback?.(T,i,r)),b=kc(),S=F.useRef("touch"),x=()=>{r||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return q.jsx(pue,{scope:t,value:i,disabled:r,textId:b,isSelected:f,onItemTextChange:F.useCallback(T=>{d(M=>M||(T?.textContent??"").trim())},[]),children:q.jsx(Bw.ItemSlot,{scope:t,value:i,disabled:r,textValue:p,children:q.jsx(ln.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":f&&m,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...s,ref:_,onFocus:Ut(s.onFocus,()=>v(!0)),onBlur:Ut(s.onBlur,()=>v(!1)),onClick:Ut(s.onClick,()=>{S.current!=="mouse"&&x()}),onPointerUp:Ut(s.onPointerUp,()=>{S.current==="mouse"&&x()}),onPointerDown:Ut(s.onPointerDown,T=>{S.current=T.pointerType}),onPointerMove:Ut(s.onPointerMove,T=>{S.current=T.pointerType,r?c.onItemLeave?.():S.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ut(s.onPointerLeave,T=>{T.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Ut(s.onKeyDown,T=>{c.searchRef?.current!==""&&T.key===" "||(Qce.includes(T.key)&&x(),T.key===" "&&T.preventDefault())})})})})});Y5.displayName=g1;var l0="SelectItemText",W5=F.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:r,...a}=n,s=Md(l0,t),o=Ad(l0,t),c=G5(l0,t),f=nue(l0,t),[p,d]=F.useState(null),m=Ln(e,x=>d(x),c.onItemTextChange,x=>o.itemTextRefCallback?.(x,c.value,c.disabled)),v=p?.textContent,_=F.useMemo(()=>q.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:b,onNativeOptionRemove:S}=f;return sa(()=>(b(_),()=>S(_)),[b,S,_]),q.jsxs(q.Fragment,{children:[q.jsx(ln.span,{id:c.textId,...a,ref:m}),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?l_.createPortal(a.children,s.valueNode):null]})});W5.displayName=l0;var Z5="SelectItemIndicator",X5=F.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return G5(Z5,t).isSelected?q.jsx(ln.span,{"aria-hidden":!0,...i,ref:e}):null});X5.displayName=Z5;var gR="SelectScrollUpButton",q5=F.forwardRef((n,e)=>{const t=Ad(gR,n.__scopeSelect),i=BO(gR,n.__scopeSelect),[r,a]=F.useState(!1),s=Ln(e,i.onScrollButtonChange);return sa(()=>{if(t.viewport&&t.isPositioned){let o=function(){const f=c.scrollTop>0;a(f)};const c=t.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),r?q.jsx($5,{...n,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=t;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});q5.displayName=gR;var vR="SelectScrollDownButton",K5=F.forwardRef((n,e)=>{const t=Ad(vR,n.__scopeSelect),i=BO(vR,n.__scopeSelect),[r,a]=F.useState(!1),s=Ln(e,i.onScrollButtonChange);return sa(()=>{if(t.viewport&&t.isPositioned){let o=function(){const f=c.scrollHeight-c.clientHeight,p=Math.ceil(c.scrollTop)<f;a(p)};const c=t.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),r?q.jsx($5,{...n,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=t;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});K5.displayName=vR;var $5=F.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:i,...r}=n,a=Ad("SelectScrollButton",t),s=F.useRef(null),o=kw(t),c=F.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return F.useEffect(()=>()=>c(),[c]),sa(()=>{o().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),q.jsx(ln.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:Ut(r.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(i,50))}),onPointerMove:Ut(r.onPointerMove,()=>{a.onItemLeave?.(),s.current===null&&(s.current=window.setInterval(i,50))}),onPointerLeave:Ut(r.onPointerLeave,()=>{c()})})}),mue="SelectSeparator",gue=F.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return q.jsx(ln.div,{"aria-hidden":!0,...i,ref:e})});gue.displayName=mue;var yR="SelectArrow",vue=F.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,r=Fw(t),a=Md(yR,t),s=Ad(yR,t);return a.open&&s.position==="popper"?q.jsx(cP,{...r,...i,ref:e}):null});vue.displayName=yR;var yue="SelectBubbleInput",Q5=F.forwardRef(({__scopeSelect:n,value:e,...t},i)=>{const r=F.useRef(null),a=Ln(i,r),s=UO(e);return F.useEffect(()=>{const o=r.current;if(!o)return;const c=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==e&&p){const d=new Event("change",{bubbles:!0});p.call(o,e),o.dispatchEvent(d)}},[s,e]),q.jsx(ln.select,{...t,style:{...R5,...t.style},ref:a,defaultValue:e})});Q5.displayName=yue;function J5(n){return n===""||n===void 0}function e6(n){const e=Ca(n),t=F.useRef(""),i=F.useRef(0),r=F.useCallback(s=>{const o=t.current+s;e(o),(function c(f){t.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>c(""),1e3))})(o)},[e]),a=F.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return F.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,r,a]}function t6(n,e,t){const r=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let s=_ue(n,Math.max(a,0));r.length===1&&(s=s.filter(f=>f!==t));const c=s.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function _ue(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var bue=O5,xue=N5,Sue=I5,Eue=U5,wue=P5,Tue=z5,Mue=H5,Aue=Y5,Cue=W5,Rue=X5,Oue=q5,Due=K5;function Nue({...n}){return q.jsx(bue,{"data-slot":"select",...n})}function Lue({...n}){return q.jsx(Sue,{"data-slot":"select-value",...n})}function Iue({className:n,size:e="default",children:t,...i}){return q.jsxs(xue,{"data-slot":"select-trigger","data-size":e,className:Zi("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...i,children:[t,q.jsx(Eue,{asChild:!0,children:q.jsx(xz,{className:"size-4 opacity-50"})})]})}function Uue({className:n,children:e,position:t="popper",align:i="center",...r}){return q.jsx(wue,{children:q.jsxs(Tue,{"data-slot":"select-content",className:Zi("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,align:i,...r,children:[q.jsx(Pue,{}),q.jsx(Mue,{className:Zi("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),q.jsx(zue,{})]})})}function _R({className:n,children:e,...t}){return q.jsxs(Aue,{"data-slot":"select-item",className:Zi("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[q.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:q.jsx(Rue,{children:q.jsx(bz,{className:"size-4"})})}),q.jsx(Cue,{children:e})]})}function Pue({className:n,...e}){return q.jsx(Oue,{"data-slot":"select-scroll-up-button",className:Zi("flex cursor-default items-center justify-center py-1",n),...e,children:q.jsx(G9,{className:"size-4"})})}function zue({className:n,...e}){return q.jsx(Due,{"data-slot":"select-scroll-down-button",className:Zi("flex cursor-default items-center justify-center py-1",n),...e,children:q.jsx(xz,{className:"size-4"})})}function bR({defaultValue:n,children:e,id:t=gs(),label:i,onChange:r,placeholder:a,value:s}){return q.jsxs("div",{className:"flex flex-row justify-between",children:[q.jsx(Uw,{className:"text-xs",htmlFor:t,children:i}),q.jsxs(Nue,{defaultValue:n,onValueChange:r,value:s,children:[q.jsx(Iue,{id:t,className:"w-64 !h-5 rounded-xs text-xs",children:q.jsx(Lue,{placeholder:a})}),q.jsx(Uue,{children:e})]})]})}function vt(n,e,t){function i(o,c){var f;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(f=o._zod).traits??(f.traits=new Set),o._zod.traits.add(n),e(o,c);for(const p in s.prototype)p in o||Object.defineProperty(o,p,{value:s.prototype[p].bind(o)});o._zod.constr=s,o._zod.def=c}const r=t?.Parent??Object;class a extends r{}Object.defineProperty(a,"name",{value:n});function s(o){var c;const f=t?.Parent?new a:this;i(f,o),(c=f._zod).deferred??(c.deferred=[]);for(const p of f._zod.deferred)p();return f}return Object.defineProperty(s,"init",{value:i}),Object.defineProperty(s,Symbol.hasInstance,{value:o=>t?.Parent&&o instanceof t.Parent?!0:o?._zod?.traits?.has(n)}),Object.defineProperty(s,"name",{value:n}),s}class Og extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class n6 extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const i6={};function mp(n){return i6}function Bue(n){const e=Object.values(n).filter(i=>typeof i=="number");return Object.entries(n).filter(([i,r])=>e.indexOf(+i)===-1).map(([i,r])=>r)}function xR(n,e){return typeof e=="bigint"?e.toString():e}function kO(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function FO(n){return n==null}function HO(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}function kue(n,e){const t=(n.toString().split(".")[1]||"").length,i=e.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const c=i.match(/\d?e-(\d?)/);c?.[1]&&(r=Number.parseInt(c[1]))}const a=t>r?t:r,s=Number.parseInt(n.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return s%o/10**a}const tU=Symbol("evaluating");function Oi(n,e,t){let i;Object.defineProperty(n,e,{get(){if(i!==tU)return i===void 0&&(i=tU,i=t()),i},set(r){Object.defineProperty(n,e,{value:r})},configurable:!0})}function Tp(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function Mp(...n){const e={};for(const t of n){const i=Object.getOwnPropertyDescriptors(t);Object.assign(e,i)}return Object.defineProperties({},e)}function nU(n){return JSON.stringify(n)}const r6="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function v1(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const Fue=kO(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function r_(n){if(v1(n)===!1)return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(v1(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function a6(n){return r_(n)?{...n}:Array.isArray(n)?[...n]:n}const Hue=new Set(["string","number","symbol"]);function Hw(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Vu(n,e,t){const i=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(i._zod.parent=n),i}function qt(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function jue(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}const Vue={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Gue(n,e){const t=n._zod.def,i=Mp(n._zod.def,{get shape(){const r={};for(const a in e){if(!(a in t.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(r[a]=t.shape[a])}return Tp(this,"shape",r),r},checks:[]});return Vu(n,i)}function Yue(n,e){const t=n._zod.def,i=Mp(n._zod.def,{get shape(){const r={...n._zod.def.shape};for(const a in e){if(!(a in t.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete r[a]}return Tp(this,"shape",r),r},checks:[]});return Vu(n,i)}function Wue(n,e){if(!r_(e))throw new Error("Invalid input to extend: expected a plain object");const t=n._zod.def.checks;if(t&&t.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=Mp(n._zod.def,{get shape(){const a={...n._zod.def.shape,...e};return Tp(this,"shape",a),a},checks:[]});return Vu(n,r)}function Zue(n,e){if(!r_(e))throw new Error("Invalid input to safeExtend: expected a plain object");const t={...n._zod.def,get shape(){const i={...n._zod.def.shape,...e};return Tp(this,"shape",i),i},checks:n._zod.def.checks};return Vu(n,t)}function Xue(n,e){const t=Mp(n._zod.def,{get shape(){const i={...n._zod.def.shape,...e._zod.def.shape};return Tp(this,"shape",i),i},get catchall(){return e._zod.def.catchall},checks:[]});return Vu(n,t)}function que(n,e,t){const i=Mp(e._zod.def,{get shape(){const r=e._zod.def.shape,a={...r};if(t)for(const s in t){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(a[s]=n?new n({type:"optional",innerType:r[s]}):r[s])}else for(const s in r)a[s]=n?new n({type:"optional",innerType:r[s]}):r[s];return Tp(this,"shape",a),a},checks:[]});return Vu(e,i)}function Kue(n,e,t){const i=Mp(e._zod.def,{get shape(){const r=e._zod.def.shape,a={...r};if(t)for(const s in t){if(!(s in a))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(a[s]=new n({type:"nonoptional",innerType:r[s]}))}else for(const s in r)a[s]=new n({type:"nonoptional",innerType:r[s]});return Tp(this,"shape",a),a},checks:[]});return Vu(e,i)}function Eg(n,e=0){if(n.aborted===!0)return!0;for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function s6(n,e){return e.map(t=>{var i;return(i=t).path??(i.path=[]),t.path.unshift(n),t})}function CS(n){return typeof n=="string"?n:n?.message}function gp(n,e,t){const i={...n,path:n.path??[]};if(!n.message){const r=CS(n.inst?._zod.def?.error?.(n))??CS(e?.error?.(n))??CS(t.customError?.(n))??CS(t.localeError?.(n))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,e?.reportInput||delete i.input,i}function jO(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function a_(...n){const[e,t,i]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:i}:{...e}}const o6=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,xR,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},l6=vt("$ZodError",o6),jw=vt("$ZodError",o6,{Parent:Error});function $ue(n,e=t=>t.message){const t={},i=[];for(const r of n.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:t}}function Que(n,e=t=>t.message){const t={_errors:[]},i=r=>{for(const a of r.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(s=>i({issues:s}));else if(a.code==="invalid_key")i({issues:a.issues});else if(a.code==="invalid_element")i({issues:a.issues});else if(a.path.length===0)t._errors.push(e(a));else{let s=t,o=0;for(;o<a.path.length;){const c=a.path[o];o===a.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(e(a))):s[c]=s[c]||{_errors:[]},s=s[c],o++}}};return i(n),t}const Vw=n=>(e,t,i,r)=>{const a=i?Object.assign(i,{async:!1}):{async:!1},s=e._zod.run({value:t,issues:[]},a);if(s instanceof Promise)throw new Og;if(s.issues.length){const o=new(r?.Err??n)(s.issues.map(c=>gp(c,a,mp())));throw r6(o,r?.callee),o}return s.value},Jue=Vw(jw),Gw=n=>async(e,t,i,r)=>{const a=i?Object.assign(i,{async:!0}):{async:!0};let s=e._zod.run({value:t,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){const o=new(r?.Err??n)(s.issues.map(c=>gp(c,a,mp())));throw r6(o,r?.callee),o}return s.value},efe=Gw(jw),Yw=n=>(e,t,i)=>{const r=i?{...i,async:!1}:{async:!1},a=e._zod.run({value:t,issues:[]},r);if(a instanceof Promise)throw new Og;return a.issues.length?{success:!1,error:new(n??l6)(a.issues.map(s=>gp(s,r,mp())))}:{success:!0,data:a.value}},c6=Yw(jw),Ww=n=>async(e,t,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let a=e._zod.run({value:t,issues:[]},r);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new n(a.issues.map(s=>gp(s,r,mp())))}:{success:!0,data:a.value}},u6=Ww(jw),tfe=n=>(e,t,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Vw(n)(e,t,r)},nfe=n=>(e,t,i)=>Vw(n)(e,t,i),ife=n=>async(e,t,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Gw(n)(e,t,r)},rfe=n=>async(e,t,i)=>Gw(n)(e,t,i),afe=n=>(e,t,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Yw(n)(e,t,r)},sfe=n=>(e,t,i)=>Yw(n)(e,t,i),ofe=n=>async(e,t,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ww(n)(e,t,r)},lfe=n=>async(e,t,i)=>Ww(n)(e,t,i),cfe=/^[cC][^\s-]{8,}$/,ufe=/^[0-9a-z]+$/,ffe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,dfe=/^[0-9a-vA-V]{20}$/,hfe=/^[A-Za-z0-9]{27}$/,pfe=/^[a-zA-Z0-9_-]{21}$/,mfe=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,gfe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,iU=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,vfe=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,yfe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function _fe(){return new RegExp(yfe,"u")}const bfe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xfe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Sfe=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Efe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,wfe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,f6=/^[A-Za-z0-9_-]*$/,Tfe=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Mfe=/^\+(?:[0-9]){6,14}[0-9]$/,d6="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Afe=new RegExp(`^${d6}$`);function h6(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Cfe(n){return new RegExp(`^${h6(n)}$`)}function Rfe(n){const e=h6({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${e}(?:${t.join("|")})`;return new RegExp(`^${d6}T(?:${i})$`)}const Ofe=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Dfe=/^-?\d+$/,Nfe=/^-?\d+(?:\.\d+)?/,Lfe=/^(?:true|false)$/i,Ife=/^[^A-Z]*$/,Ufe=/^[^a-z]*$/,Xs=vt("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),p6={number:"number",bigint:"bigint",object:"date"},m6=vt("$ZodCheckLessThan",(n,e)=>{Xs.init(n,e);const t=p6[typeof e.value];n._zod.onattach.push(i=>{const r=i._zod.bag,a=(e.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?r.maximum=e.value:r.exclusiveMaximum=e.value)}),n._zod.check=i=>{(e.inclusive?i.value<=e.value:i.value<e.value)||i.issues.push({origin:t,code:"too_big",maximum:e.value,input:i.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),g6=vt("$ZodCheckGreaterThan",(n,e)=>{Xs.init(n,e);const t=p6[typeof e.value];n._zod.onattach.push(i=>{const r=i._zod.bag,a=(e.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?r.minimum=e.value:r.exclusiveMinimum=e.value)}),n._zod.check=i=>{(e.inclusive?i.value>=e.value:i.value>e.value)||i.issues.push({origin:t,code:"too_small",minimum:e.value,input:i.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),Pfe=vt("$ZodCheckMultipleOf",(n,e)=>{Xs.init(n,e),n._zod.onattach.push(t=>{var i;(i=t._zod.bag).multipleOf??(i.multipleOf=e.value)}),n._zod.check=t=>{if(typeof t.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof t.value=="bigint"?t.value%e.value===BigInt(0):kue(t.value,e.value)===0)||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:e.value,input:t.value,inst:n,continue:!e.abort})}}),zfe=vt("$ZodCheckNumberFormat",(n,e)=>{Xs.init(n,e),e.format=e.format||"float64";const t=e.format?.includes("int"),i=t?"int":"number",[r,a]=Vue[e.format];n._zod.onattach.push(s=>{const o=s._zod.bag;o.format=e.format,o.minimum=r,o.maximum=a,t&&(o.pattern=Dfe)}),n._zod.check=s=>{const o=s.value;if(t){if(!Number.isInteger(o)){s.issues.push({expected:i,format:e.format,code:"invalid_type",continue:!1,input:o,inst:n});return}if(!Number.isSafeInteger(o)){o>0?s.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:i,continue:!e.abort}):s.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:i,continue:!e.abort});return}}o<r&&s.issues.push({origin:"number",input:o,code:"too_small",minimum:r,inclusive:!0,inst:n,continue:!e.abort}),o>a&&s.issues.push({origin:"number",input:o,code:"too_big",maximum:a,inst:n})}}),Bfe=vt("$ZodCheckMaxLength",(n,e)=>{var t;Xs.init(n,e),(t=n._zod.def).when??(t.when=i=>{const r=i.value;return!FO(r)&&r.length!==void 0}),n._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(i._zod.bag.maximum=e.maximum)}),n._zod.check=i=>{const r=i.value;if(r.length<=e.maximum)return;const s=jO(r);i.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:r,inst:n,continue:!e.abort})}}),kfe=vt("$ZodCheckMinLength",(n,e)=>{var t;Xs.init(n,e),(t=n._zod.def).when??(t.when=i=>{const r=i.value;return!FO(r)&&r.length!==void 0}),n._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(i._zod.bag.minimum=e.minimum)}),n._zod.check=i=>{const r=i.value;if(r.length>=e.minimum)return;const s=jO(r);i.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:r,inst:n,continue:!e.abort})}}),Ffe=vt("$ZodCheckLengthEquals",(n,e)=>{var t;Xs.init(n,e),(t=n._zod.def).when??(t.when=i=>{const r=i.value;return!FO(r)&&r.length!==void 0}),n._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),n._zod.check=i=>{const r=i.value,a=r.length;if(a===e.length)return;const s=jO(r),o=a>e.length;i.issues.push({origin:s,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:n,continue:!e.abort})}}),Zw=vt("$ZodCheckStringFormat",(n,e)=>{var t,i;Xs.init(n,e),n._zod.onattach.push(r=>{const a=r._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(i=n._zod).check??(i.check=()=>{})}),Hfe=vt("$ZodCheckRegex",(n,e)=>{Zw.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),jfe=vt("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=Ife),Zw.init(n,e)}),Vfe=vt("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=Ufe),Zw.init(n,e)}),Gfe=vt("$ZodCheckIncludes",(n,e)=>{Xs.init(n,e);const t=Hw(e.includes),i=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=i,n._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(i)}),n._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:n,continue:!e.abort})}}),Yfe=vt("$ZodCheckStartsWith",(n,e)=>{Xs.init(n,e);const t=new RegExp(`^${Hw(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(t)}),n._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:n,continue:!e.abort})}}),Wfe=vt("$ZodCheckEndsWith",(n,e)=>{Xs.init(n,e);const t=new RegExp(`.*${Hw(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(t)}),n._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:n,continue:!e.abort})}}),Zfe=vt("$ZodCheckOverwrite",(n,e)=>{Xs.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class Xfe{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const i=e.split(`
`).filter(s=>s),r=Math.min(...i.map(s=>s.length-s.trimStart().length)),a=i.map(s=>s.slice(r)).map(s=>" ".repeat(this.indent*2)+s);for(const s of a)this.content.push(s)}compile(){const e=Function,t=this?.args,r=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...t,r.join(`
`))}}const qfe={major:4,minor:1,patch:12},pr=vt("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=qfe;const i=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&i.unshift(n);for(const r of i)for(const a of r._zod.onattach)a(n);if(i.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const r=(s,o,c)=>{let f=Eg(s),p;for(const d of o){if(d._zod.def.when){if(!d._zod.def.when(s))continue}else if(f)continue;const m=s.issues.length,v=d._zod.check(s);if(v instanceof Promise&&c?.async===!1)throw new Og;if(p||v instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await v,s.issues.length!==m&&(f||(f=Eg(s,m)))});else{if(s.issues.length===m)continue;f||(f=Eg(s,m))}}return p?p.then(()=>s):s},a=(s,o,c)=>{if(Eg(s))return s.aborted=!0,s;const f=r(o,i,c);if(f instanceof Promise){if(c.async===!1)throw new Og;return f.then(p=>n._zod.parse(p,c))}return n._zod.parse(f,c)};n._zod.run=(s,o)=>{if(o.skipChecks)return n._zod.parse(s,o);if(o.direction==="backward"){const f=n._zod.parse({value:s.value,issues:[]},{...o,skipChecks:!0});return f instanceof Promise?f.then(p=>a(p,s,o)):a(f,s,o)}const c=n._zod.parse(s,o);if(c instanceof Promise){if(o.async===!1)throw new Og;return c.then(f=>r(f,i,o))}return r(c,i,o)}}n["~standard"]={validate:r=>{try{const a=c6(n,r);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return u6(n,r).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Xw=vt("$ZodString",(n,e)=>{pr.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??Ofe(n._zod.bag),n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),Xi=vt("$ZodStringFormat",(n,e)=>{Zw.init(n,e),Xw.init(n,e)}),Kfe=vt("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=gfe),Xi.init(n,e)}),$fe=vt("$ZodUUID",(n,e)=>{if(e.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(i===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=iU(i))}else e.pattern??(e.pattern=iU());Xi.init(n,e)}),Qfe=vt("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=vfe),Xi.init(n,e)}),Jfe=vt("$ZodURL",(n,e)=>{Xi.init(n,e),n._zod.check=t=>{try{const i=t.value.trim(),r=new URL(i);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Tfe.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=r.href:t.value=i;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),ede=vt("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=_fe()),Xi.init(n,e)}),tde=vt("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=pfe),Xi.init(n,e)}),nde=vt("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=cfe),Xi.init(n,e)}),ide=vt("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=ufe),Xi.init(n,e)}),rde=vt("$ZodULID",(n,e)=>{e.pattern??(e.pattern=ffe),Xi.init(n,e)}),ade=vt("$ZodXID",(n,e)=>{e.pattern??(e.pattern=dfe),Xi.init(n,e)}),sde=vt("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=hfe),Xi.init(n,e)}),ode=vt("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=Rfe(e)),Xi.init(n,e)}),lde=vt("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=Afe),Xi.init(n,e)}),cde=vt("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=Cfe(e)),Xi.init(n,e)}),ude=vt("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=mfe),Xi.init(n,e)}),fde=vt("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=bfe),Xi.init(n,e),n._zod.onattach.push(t=>{const i=t._zod.bag;i.format="ipv4"})}),dde=vt("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=xfe),Xi.init(n,e),n._zod.onattach.push(t=>{const i=t._zod.bag;i.format="ipv6"}),n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),hde=vt("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=Sfe),Xi.init(n,e)}),pde=vt("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=Efe),Xi.init(n,e),n._zod.check=t=>{const i=t.value.split("/");try{if(i.length!==2)throw new Error;const[r,a]=i;if(!a)throw new Error;const s=Number(a);if(`${s}`!==a)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function v6(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const mde=vt("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=wfe),Xi.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64"}),n._zod.check=t=>{v6(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function gde(n){if(!f6.test(n))return!1;const e=n.replace(/[-_]/g,i=>i==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return v6(t)}const vde=vt("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=f6),Xi.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64url"}),n._zod.check=t=>{gde(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),yde=vt("$ZodE164",(n,e)=>{e.pattern??(e.pattern=Mfe),Xi.init(n,e)});function _de(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[i]=t;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const bde=vt("$ZodJWT",(n,e)=>{Xi.init(n,e),n._zod.check=t=>{_de(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),VO=vt("$ZodNumber",(n,e)=>{pr.init(n,e),n._zod.pattern=n._zod.bag.pattern??Nfe,n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=Number(t.value)}catch{}const r=t.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return t;const a=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return t.issues.push({expected:"number",code:"invalid_type",input:r,inst:n,...a?{received:a}:{}}),t}}),xde=vt("$ZodNumber",(n,e)=>{zfe.init(n,e),VO.init(n,e)}),Sde=vt("$ZodBoolean",(n,e)=>{pr.init(n,e),n._zod.pattern=Lfe,n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=!!t.value}catch{}const r=t.value;return typeof r=="boolean"||t.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:n}),t}}),Ede=vt("$ZodUnknown",(n,e)=>{pr.init(n,e),n._zod.parse=t=>t}),wde=vt("$ZodNever",(n,e)=>{pr.init(n,e),n._zod.parse=(t,i)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function rU(n,e,t){n.issues.length&&e.issues.push(...s6(t,n.issues)),e.value[t]=n.value}const y6=vt("$ZodArray",(n,e)=>{pr.init(n,e),n._zod.parse=(t,i)=>{const r=t.value;if(!Array.isArray(r))return t.issues.push({expected:"array",code:"invalid_type",input:r,inst:n}),t;t.value=Array(r.length);const a=[];for(let s=0;s<r.length;s++){const o=r[s],c=e.element._zod.run({value:o,issues:[]},i);c instanceof Promise?a.push(c.then(f=>rU(f,t,s))):rU(c,t,s)}return a.length?Promise.all(a).then(()=>t):t}});function y1(n,e,t,i){n.issues.length&&e.issues.push(...s6(t,n.issues)),n.value===void 0?t in i&&(e.value[t]=void 0):e.value[t]=n.value}function _6(n){const e=Object.keys(n.shape);for(const i of e)if(!n.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const t=jue(n.shape);return{...n,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t)}}function b6(n,e,t,i,r,a){const s=[],o=r.keySet,c=r.catchall._zod,f=c.def.type;for(const p of Object.keys(e)){if(o.has(p))continue;if(f==="never"){s.push(p);continue}const d=c.run({value:e[p],issues:[]},i);d instanceof Promise?n.push(d.then(m=>y1(m,t,p,e))):y1(d,t,p,e)}return s.length&&t.issues.push({code:"unrecognized_keys",keys:s,input:e,inst:a}),n.length?Promise.all(n).then(()=>t):t}const x6=vt("$ZodObject",(n,e)=>{if(pr.init(n,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const o=e.shape;Object.defineProperty(e,"shape",{get:()=>{const c={...o};return Object.defineProperty(e,"shape",{value:c}),c}})}const i=kO(()=>_6(e));Oi(n._zod,"propValues",()=>{const o=e.shape,c={};for(const f in o){const p=o[f]._zod;if(p.values){c[f]??(c[f]=new Set);for(const d of p.values)c[f].add(d)}}return c});const r=v1,a=e.catchall;let s;n._zod.parse=(o,c)=>{s??(s=i.value);const f=o.value;if(!r(f))return o.issues.push({expected:"object",code:"invalid_type",input:f,inst:n}),o;o.value={};const p=[],d=s.shape;for(const m of s.keys){const _=d[m]._zod.run({value:f[m],issues:[]},c);_ instanceof Promise?p.push(_.then(b=>y1(b,o,m,f))):y1(_,o,m,f)}return a?b6(p,f,o,c,i.value,n):p.length?Promise.all(p).then(()=>o):o}}),Tde=vt("$ZodObjectJIT",(n,e)=>{x6.init(n,e);const t=n._zod.parse,i=kO(()=>_6(e)),r=m=>{const v=new Xfe(["shape","payload","ctx"]),_=i.value,b=M=>{const A=nU(M);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};v.write("const input = payload.value;");const S=Object.create(null);let x=0;for(const M of _.keys)S[M]=`key_${x++}`;v.write("const newResult = {};");for(const M of _.keys){const A=S[M],D=nU(M);v.write(`const ${A} = ${b(M)};`),v.write(`
        if (${A}.issues.length) {
          payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        
        if (${A}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${A}.value;
        }
        
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const T=v.compile();return(M,A)=>T(m,M,A)};let a;const s=v1,o=!i6.jitless,f=o&&Fue.value,p=e.catchall;let d;n._zod.parse=(m,v)=>{d??(d=i.value);const _=m.value;return s(_)?o&&f&&v?.async===!1&&v.jitless!==!0?(a||(a=r(e.shape)),m=a(m,v),p?b6([],_,m,v,d,n):m):t(m,v):(m.issues.push({expected:"object",code:"invalid_type",input:_,inst:n}),m)}});function aU(n,e,t,i){for(const a of n)if(a.issues.length===0)return e.value=a.value,e;const r=n.filter(a=>!Eg(a));return r.length===1?(e.value=r[0].value,r[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(a=>a.issues.map(s=>gp(s,i,mp())))}),e)}const Mde=vt("$ZodUnion",(n,e)=>{pr.init(n,e),Oi(n._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Oi(n._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Oi(n._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),Oi(n._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${r.map(a=>HO(a.source)).join("|")})$`)}});const t=e.options.length===1,i=e.options[0]._zod.run;n._zod.parse=(r,a)=>{if(t)return i(r,a);let s=!1;const o=[];for(const c of e.options){const f=c._zod.run({value:r.value,issues:[]},a);if(f instanceof Promise)o.push(f),s=!0;else{if(f.issues.length===0)return f;o.push(f)}}return s?Promise.all(o).then(c=>aU(c,r,n,a)):aU(o,r,n,a)}}),Ade=vt("$ZodIntersection",(n,e)=>{pr.init(n,e),n._zod.parse=(t,i)=>{const r=t.value,a=e.left._zod.run({value:r,issues:[]},i),s=e.right._zod.run({value:r,issues:[]},i);return a instanceof Promise||s instanceof Promise?Promise.all([a,s]).then(([c,f])=>sU(t,c,f)):sU(t,a,s)}});function SR(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(r_(n)&&r_(e)){const t=Object.keys(e),i=Object.keys(n).filter(a=>t.indexOf(a)!==-1),r={...n,...e};for(const a of i){const s=SR(n[a],e[a]);if(!s.valid)return{valid:!1,mergeErrorPath:[a,...s.mergeErrorPath]};r[a]=s.data}return{valid:!0,data:r}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let i=0;i<n.length;i++){const r=n[i],a=e[i],s=SR(r,a);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};t.push(s.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function sU(n,e,t){if(e.issues.length&&n.issues.push(...e.issues),t.issues.length&&n.issues.push(...t.issues),Eg(n))return n;const i=SR(e.value,t.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return n.value=i.data,n}const S6=vt("$ZodEnum",(n,e)=>{pr.init(n,e);const t=Bue(e.entries),i=new Set(t);n._zod.values=i,n._zod.pattern=new RegExp(`^(${t.filter(r=>Hue.has(typeof r)).map(r=>typeof r=="string"?Hw(r):r.toString()).join("|")})$`),n._zod.parse=(r,a)=>{const s=r.value;return i.has(s)||r.issues.push({code:"invalid_value",values:t,input:s,inst:n}),r}}),Cde=vt("$ZodTransform",(n,e)=>{pr.init(n,e),n._zod.parse=(t,i)=>{if(i.direction==="backward")throw new n6(n.constructor.name);const r=e.transform(t.value,t);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(s=>(t.value=s,t));if(r instanceof Promise)throw new Og;return t.value=r,t}});function oU(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const E6=vt("$ZodOptional",(n,e)=>{pr.init(n,e),n._zod.optin="optional",n._zod.optout="optional",Oi(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Oi(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${HO(t.source)})?$`):void 0}),n._zod.parse=(t,i)=>{if(e.innerType._zod.optin==="optional"){const r=e.innerType._zod.run(t,i);return r instanceof Promise?r.then(a=>oU(a,t.value)):oU(r,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,i)}}),Rde=vt("$ZodNullable",(n,e)=>{pr.init(n,e),Oi(n._zod,"optin",()=>e.innerType._zod.optin),Oi(n._zod,"optout",()=>e.innerType._zod.optout),Oi(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${HO(t.source)}|null)$`):void 0}),Oi(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,i)=>t.value===null?t:e.innerType._zod.run(t,i)}),Ode=vt("$ZodDefault",(n,e)=>{pr.init(n,e),n._zod.optin="optional",Oi(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);if(t.value===void 0)return t.value=e.defaultValue,t;const r=e.innerType._zod.run(t,i);return r instanceof Promise?r.then(a=>lU(a,e)):lU(r,e)}});function lU(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const Dde=vt("$ZodPrefault",(n,e)=>{pr.init(n,e),n._zod.optin="optional",Oi(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>(i.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,i))}),Nde=vt("$ZodNonOptional",(n,e)=>{pr.init(n,e),Oi(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(i=>i!==void 0)):void 0}),n._zod.parse=(t,i)=>{const r=e.innerType._zod.run(t,i);return r instanceof Promise?r.then(a=>cU(a,n)):cU(r,n)}});function cU(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const Lde=vt("$ZodCatch",(n,e)=>{pr.init(n,e),Oi(n._zod,"optin",()=>e.innerType._zod.optin),Oi(n._zod,"optout",()=>e.innerType._zod.optout),Oi(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);const r=e.innerType._zod.run(t,i);return r instanceof Promise?r.then(a=>(t.value=a.value,a.issues.length&&(t.value=e.catchValue({...t,error:{issues:a.issues.map(s=>gp(s,i,mp()))},input:t.value}),t.issues=[]),t)):(t.value=r.value,r.issues.length&&(t.value=e.catchValue({...t,error:{issues:r.issues.map(a=>gp(a,i,mp()))},input:t.value}),t.issues=[]),t)}}),Ide=vt("$ZodPipe",(n,e)=>{pr.init(n,e),Oi(n._zod,"values",()=>e.in._zod.values),Oi(n._zod,"optin",()=>e.in._zod.optin),Oi(n._zod,"optout",()=>e.out._zod.optout),Oi(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,i)=>{if(i.direction==="backward"){const a=e.out._zod.run(t,i);return a instanceof Promise?a.then(s=>RS(s,e.in,i)):RS(a,e.in,i)}const r=e.in._zod.run(t,i);return r instanceof Promise?r.then(a=>RS(a,e.out,i)):RS(r,e.out,i)}});function RS(n,e,t){return n.issues.length?(n.aborted=!0,n):e._zod.run({value:n.value,issues:n.issues},t)}const Ude=vt("$ZodReadonly",(n,e)=>{pr.init(n,e),Oi(n._zod,"propValues",()=>e.innerType._zod.propValues),Oi(n._zod,"values",()=>e.innerType._zod.values),Oi(n._zod,"optin",()=>e.innerType._zod.optin),Oi(n._zod,"optout",()=>e.innerType._zod.optout),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);const r=e.innerType._zod.run(t,i);return r instanceof Promise?r.then(uU):uU(r)}});function uU(n){return n.value=Object.freeze(n.value),n}const Pde=vt("$ZodCustom",(n,e)=>{Xs.init(n,e),pr.init(n,e),n._zod.parse=(t,i)=>t,n._zod.check=t=>{const i=t.value,r=e.fn(i);if(r instanceof Promise)return r.then(a=>fU(a,t,i,n));fU(r,t,i,n)}});function fU(n,e,t,i){if(!n){const r={code:"custom",input:t,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),e.issues.push(a_(r))}}class zde{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const i=t[0];if(this._map.set(e,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const i={...this.get(t)??{}};delete i.id;const r={...i,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Bde(){return new zde}const OS=Bde();function w6(n,e){return new n({type:"string",...qt(e)})}function kde(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...qt(e)})}function dU(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...qt(e)})}function Fde(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...qt(e)})}function Hde(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...qt(e)})}function jde(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...qt(e)})}function Vde(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...qt(e)})}function Gde(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...qt(e)})}function Yde(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...qt(e)})}function Wde(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...qt(e)})}function Zde(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...qt(e)})}function Xde(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...qt(e)})}function qde(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...qt(e)})}function Kde(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...qt(e)})}function $de(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...qt(e)})}function Qde(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...qt(e)})}function Jde(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...qt(e)})}function ehe(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...qt(e)})}function the(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...qt(e)})}function nhe(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...qt(e)})}function ihe(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...qt(e)})}function rhe(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...qt(e)})}function ahe(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...qt(e)})}function she(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...qt(e)})}function ohe(n,e){return new n({type:"string",format:"date",check:"string_format",...qt(e)})}function lhe(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...qt(e)})}function che(n,e){return new n({type:"string",format:"duration",check:"string_format",...qt(e)})}function T6(n,e){return new n({type:"number",checks:[],...qt(e)})}function uhe(n,e){return new n({type:"number",check:"number_format",abort:!1,format:"safeint",...qt(e)})}function fhe(n,e){return new n({type:"boolean",...qt(e)})}function dhe(n){return new n({type:"unknown"})}function hhe(n,e){return new n({type:"never",...qt(e)})}function hU(n,e){return new m6({check:"less_than",...qt(e),value:n,inclusive:!1})}function YA(n,e){return new m6({check:"less_than",...qt(e),value:n,inclusive:!0})}function pU(n,e){return new g6({check:"greater_than",...qt(e),value:n,inclusive:!1})}function Ho(n,e){return new g6({check:"greater_than",...qt(e),value:n,inclusive:!0})}function mU(n,e){return new Pfe({check:"multiple_of",...qt(e),value:n})}function M6(n,e){return new Bfe({check:"max_length",...qt(e),maximum:n})}function _1(n,e){return new kfe({check:"min_length",...qt(e),minimum:n})}function GO(n,e){return new Ffe({check:"length_equals",...qt(e),length:n})}function phe(n,e){return new Hfe({check:"string_format",format:"regex",...qt(e),pattern:n})}function mhe(n){return new jfe({check:"string_format",format:"lowercase",...qt(n)})}function ghe(n){return new Vfe({check:"string_format",format:"uppercase",...qt(n)})}function vhe(n,e){return new Gfe({check:"string_format",format:"includes",...qt(e),includes:n})}function yhe(n,e){return new Yfe({check:"string_format",format:"starts_with",...qt(e),prefix:n})}function _he(n,e){return new Wfe({check:"string_format",format:"ends_with",...qt(e),suffix:n})}function N_(n){return new Zfe({check:"overwrite",tx:n})}function bhe(n){return N_(e=>e.normalize(n))}function xhe(){return N_(n=>n.trim())}function She(){return N_(n=>n.toLowerCase())}function Ehe(){return N_(n=>n.toUpperCase())}function whe(n,e,t){return new n({type:"array",element:e,...qt(t)})}function The(n,e,t){return new n({type:"custom",check:"custom",fn:e,...qt(t)})}function Mhe(n){const e=Ahe(t=>(t.addIssue=i=>{if(typeof i=="string")t.issues.push(a_(i,t.value,e._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=t.value),r.inst??(r.inst=e),r.continue??(r.continue=!e._zod.def.abort),t.issues.push(a_(r))}},n(t.value,t)));return e}function Ahe(n,e){const t=new Xs({check:"custom",...qt(e)});return t._zod.check=n,t}const Ap=vt("ZodMiniType",(n,e)=>{if(!n._zod)throw new Error("Uninitialized schema in ZodMiniType.");pr.init(n,e),n.def=e,n.type=e.type,n.parse=(t,i)=>Jue(n,t,i,{callee:n.parse}),n.safeParse=(t,i)=>c6(n,t,i),n.parseAsync=async(t,i)=>efe(n,t,i,{callee:n.parseAsync}),n.safeParseAsync=async(t,i)=>u6(n,t,i),n.check=(...t)=>n.clone({...e,checks:[...e.checks??[],...t.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),n.clone=(t,i)=>Vu(n,t,i),n.brand=()=>n,n.register=((t,i)=>(t.add(n,i),n))}),Che=vt("ZodMiniString",(n,e)=>{Xw.init(n,e),Ap.init(n,e)});function b1(n){return w6(Che,n)}const Rhe=vt("ZodMiniNumber",(n,e)=>{VO.init(n,e),Ap.init(n,e)});function Bi(n){return T6(Rhe,n)}const Ohe=vt("ZodMiniBoolean",(n,e)=>{Sde.init(n,e),Ap.init(n,e)});function Dhe(n){return fhe(Ohe,n)}const Nhe=vt("ZodMiniArray",(n,e)=>{y6.init(n,e),Ap.init(n,e)});function ER(n,e){return new Nhe({type:"array",element:n,...qt(e)})}const Lhe=vt("ZodMiniObject",(n,e)=>{x6.init(n,e),Ap.init(n,e),Oi(n,"shape",()=>e.shape)});function c0(n,e){const t={type:"object",shape:n??{},...qt(e)};return new Lhe(t)}const Ihe=vt("ZodMiniEnum",(n,e)=>{S6.init(n,e),Ap.init(n,e),n.options=Object.values(e.entries)});function L_(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(i=>[i,i])):n;return new Ihe({type:"enum",entries:t,...qt(e)})}const Uhe=vt("ZodMiniOptional",(n,e)=>{E6.init(n,e),Ap.init(n,e)});function Phe(n){return new Uhe({type:"optional",innerType:n})}const A6=["ALTITUDE_SENSOR","GROUND","TIMED"],zhe=L_(A6),C6=["BACKWARD","DEFAULT","FORWARD","NOMINAL","OPTIONAL","PRIMITIVE"],Bhe=L_(C6);function khe(n){const{coreModuleRef:e}=Za(),{selection:t}=F.useContext(mv),[i,r]=F.useState(n);function a(s){const o=e.current;lt(o)||lt(t)||t.type!=="station"||(r(s),o.perform("set:core.station.slot.data",{stationID:t.id,data:s}))}return q.jsxs(cd,{children:[q.jsxs(ud,{className:"flex flex-row justify-between items-center w-full mb-2 text-xs",children:[i.metadata.name," ",q.jsx(ld,{size:16})]}),q.jsxs(ip,{className:"flex flex-col gap-1 pl-2",children:[q.jsx(ev,{label:"Name",onChange:s=>{a({...i,metadata:{...i.metadata,name:s.target.value}})},value:i.metadata.name}),q.jsx(ev,{label:"Serial number",onChange:s=>{a({...i,metadata:{...i.metadata,serialNumber:Number(s.target.value)}})},value:i.metadata.serialNumber.toString()}),q.jsx(Vc,{disableZ:!0,label:"Position",onChange:s=>{a({...i,position:new ve(...s)})},value:i.position.toArray()}),q.jsx(Vc,{disableX:!0,disableY:!0,label:"Rotation",onChange:s=>{const[o,c,f]=s;a({...i,rotation:new Fn(Zn.radians(o),Zn.radians(c),Zn.radians(f))})},value:[Zn.mod(Zn.degrees(i.rotation.x),360),Zn.mod(Zn.degrees(i.rotation.y),360),Zn.mod(Zn.degrees(i.rotation.z),360)]}),q.jsx(tr,{label:"Width",onChange:s=>{a({...i,metadata:{...i.metadata,width:Number(s.target.value)}})},value:i.metadata.width}),q.jsx(tr,{label:"Depth",onChange:s=>{a({...i,metadata:{...i.metadata,depth:Number(s.target.value)}})},value:i.metadata.depth}),q.jsx(bR,{label:"Elevation strategy",placeholder:"Select strategy",onChange:s=>{a({...i,metadata:{...i.metadata,elevationStrategy:s}})},value:i.metadata.elevationStrategy,children:A6.map(s=>q.jsx(_R,{className:"text-xs",value:s,children:hR.toLabel(s)},s))}),q.jsx(bR,{label:"Path configuration",placeholder:"Select configuration",onChange:s=>{a({...i,metadata:{...i.metadata,pathConfig:s}})},value:i.metadata.pathConfig,children:C6.map(s=>q.jsx(_R,{className:"text-xs",value:s,children:hR.toLabel(s)},s))}),q.jsx(tr,{label:"Altitude",onChange:s=>{a({...i,metadata:{...i.metadata,altitude:Number(s.target.value)}})},value:i.metadata.altitude}),q.jsx(tr,{label:"Gate distance",onChange:s=>{a({...i,metadata:{...i.metadata,gateDistance:Number(s.target.value)}})},value:i.metadata.gateDistance}),q.jsx(tr,{label:"Approach linear speed",onChange:s=>{a({...i,metadata:{...i.metadata,approachLinearSpeed:Number(s.target.value)}})},value:i.metadata.approachLinearSpeed}),q.jsx(tr,{label:"End docking linear speed",onChange:s=>{a({...i,metadata:{...i.metadata,endDockingLinearSpeed:Number(s.target.value)}})},value:i.metadata.endDockingLinearSpeed}),q.jsx(tr,{label:"Undock linear speed",onChange:s=>{a({...i,metadata:{...i.metadata,undockLinearSpeed:Number(s.target.value)}})},value:i.metadata.undockLinearSpeed}),q.jsx(tr,{label:"Undock distance threshold",onChange:s=>{a({...i,metadata:{...i.metadata,undockDistanceThreshold:Number(s.target.value)}})},value:i.metadata.undockDistanceThreshold}),q.jsx(tr,{label:"Minimal approach distance",onChange:s=>{a({...i,metadata:{...i.metadata,minimalApproachDistance:Number(s.target.value)}})},value:i.metadata.minimalApproachDistance}),q.jsx(tr,{label:"Final approach distance",onChange:s=>{a({...i,metadata:{...i.metadata,finalApproachDistance:Number(s.target.value)}})},value:i.metadata.finalApproachDistance}),q.jsx(tr,{label:"Max deviation (docking)",onChange:s=>{a({...i,metadata:{...i.metadata,maxDeviationForDocking:Number(s.target.value)}})},value:i.metadata.maxDeviationForDocking}),q.jsx(tr,{label:"Max offset (docking)",onChange:s=>{a({...i,metadata:{...i.metadata,maxOffsetForDocking:Number(s.target.value)}})},value:i.metadata.maxOffsetForDocking}),q.jsx(tr,{label:"Max distance (retry)",onChange:s=>{a({...i,metadata:{...i.metadata,maxDistanceForRetry:Number(s.target.value)}})},value:i.metadata.maxDistanceForRetry}),q.jsx(tr,{label:"Reliability threshold",onChange:s=>{a({...i,metadata:{...i.metadata,reliabilityThresholdForAccurateDocking:Number(s.target.value)}})},value:i.metadata.reliabilityThresholdForAccurateDocking}),q.jsx(tr,{label:"k0",onChange:s=>{a({...i,metadata:{...i.metadata,k0:Number(s.target.value)}})},value:i.metadata.k0}),q.jsx(tr,{label:"k1",onChange:s=>{a({...i,metadata:{...i.metadata,k1:Number(s.target.value)}})},value:i.metadata.k1}),q.jsx(tv,{checked:i.metadata.obstacleMapEnabled,onChange:s=>{a({...i,metadata:{...i.metadata,obstacleMapEnabled:s}})},label:"Obstacle map"})]})]})}function Fhe({slots:n}){return q.jsxs(cd,{defaultOpen:!0,children:[q.jsxs(ud,{className:"flex flex-row justify-between items-center w-full mb-2 text-xs",children:["Slots ",q.jsx(ld,{size:16})]}),q.jsx(ip,{className:"flex flex-col gap-1 pl-2",children:n.sort((e,t)=>e.metadata.name.localeCompare(t.metadata.name,void 0,{numeric:!0,sensitivity:"variant"})).map(e=>q.jsx(khe,{...e},e.id))})]})}var Hhe="Separator",gU="horizontal",jhe=["horizontal","vertical"],R6=F.forwardRef((n,e)=>{const{decorative:t,orientation:i=gU,...r}=n,a=Vhe(i)?i:gU,o=t?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return q.jsx(ln.div,{"data-orientation":a,...o,...r,ref:e})});R6.displayName=Hhe;function Vhe(n){return jhe.includes(n)}var Ghe=R6;function WA({className:n,orientation:e="horizontal",decorative:t=!0,...i}){return q.jsx(Ghe,{"data-slot":"separator",decorative:t,orientation:e,className:Zi("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...i})}const O6=["AISLE","CONVEYOR","GRID","GROUND","RACK","STACK"],Yhe=L_(O6);function Whe(){const{coreModuleRef:n}=Za(),{selection:e}=F.useContext(mv),[t,i]=F.useState({id:"",metadata:{altitude:0,depth:0,height:0,width:0}}),[r,a]=F.useState({components:{},id:"",metadata:{distance:0},position:new ve(0,0,0),rotation:new Fn(0,0,0),scale:new ve(1,1,1),visible:!0}),[s,o]=F.useState([]),[c,f]=F.useState({id:"",metadata:{connectedTo:void 0,disabled:!1,isLocked:!1,name:"",stationTemplateID:void 0,stationType:"STACK",tags:[]}});F.useEffect(()=>{const v=n.current;if(lt(v)||lt(e)||e.type!=="station")return;const _=v.perform("get:core.station.data",e.id);lt(_)||(i({id:_.id,metadata:_.components.collisionShape.metadata}),a({..._.components.reflectors}),o([..._.components.slots]),f({id:_.id,metadata:_.metadata}))},[n.current,e]);function p(v){const _=n.current;lt(_)||lt(e)||e.type!=="station"||(f({...c,metadata:v}),_.perform("set:core.station.metadata",{metadata:v,stationID:e.id}))}function d(v){const _=n.current;lt(_)||lt(e)||e.type!=="station"||(i({id:t.id,metadata:v}),_.perform("set:core.station.collision-shape.metadata",{metadata:v,stationID:e.id}))}function m(v){const _=n.current;lt(_)||lt(e)||e.type!=="station"||(a(v),_.perform("set:core.station.reflectors.data",{data:v,stationID:e.id}))}return lt(e)?null:q.jsxs("div",{className:"flex flex-col gap-2",children:[q.jsxs(cd,{defaultOpen:!0,children:[q.jsxs(ud,{className:"flex flex-row justify-between items-center w-full mb-2 text-xs",children:["Station ",q.jsx(ld,{size:16})]}),q.jsxs(ip,{className:"flex flex-col gap-1 pl-2",children:[q.jsx(ev,{label:"Name",onChange:v=>{p({...c.metadata,name:v.target.value})},value:c.metadata.name}),q.jsx(bR,{label:"Type",placeholder:"Select type",onChange:v=>{p({...c.metadata,stationType:v})},value:c.metadata.stationType,children:O6.map(v=>q.jsx(_R,{className:"text-xs",value:v,children:hR.toLabel(v)},v))}),q.jsx(ev,{defaultValue:c.metadata.stationTemplateID,disabled:!0,label:"Model ID"}),q.jsx(tv,{checked:c.metadata.disabled,onChange:v=>{p({...c.metadata,disabled:v})},label:"Disabled"}),q.jsx(tv,{checked:c.metadata.isLocked,onChange:v=>{p({...c.metadata,isLocked:v})},label:"Locked"}),q.jsx(WA,{className:"my-2"})]})]}),q.jsxs(cd,{defaultOpen:!0,children:[q.jsxs(ud,{className:"flex flex-row justify-between items-center w-full mb-2 text-xs",children:["Reflectors ",q.jsx(ld,{size:16})]}),q.jsxs(ip,{className:"flex flex-col gap-1 pl-2",children:[q.jsx(Vc,{disableZ:!0,label:"Position",onChange:v=>{m({...r,position:new ve(...v)})},value:r.position.toArray()}),q.jsx(Vc,{disableX:!0,disableY:!0,label:"Rotation",onChange:v=>{const[_,b,S]=v;m({...r,rotation:new Fn(Zn.radians(_),Zn.radians(b),Zn.radians(S))})},value:[Zn.mod(Zn.degrees(r.rotation.x),360),Zn.mod(Zn.degrees(r.rotation.y),360),Zn.mod(Zn.degrees(r.rotation.z),360)]}),q.jsx(tr,{label:"Distance",onChange:v=>{m({...r,metadata:{...r.metadata,distance:Number(v.target.value)}})},value:r.metadata.distance}),q.jsx(WA,{className:"my-2"})]})]}),q.jsxs(cd,{defaultOpen:!0,children:[q.jsxs(ud,{className:"flex flex-row justify-between items-center w-full mb-2 text-xs",children:["Collision shape ",q.jsx(ld,{size:16})]}),q.jsxs(ip,{className:"flex flex-col gap-1 pl-2",children:[q.jsx(tr,{label:"Altitude",onChange:v=>{d({...t.metadata,altitude:Number(v.target.value)})},value:t.metadata.altitude}),q.jsx(tr,{label:"Width",onChange:v=>{d({...t.metadata,width:Number(v.target.value)})},value:t.metadata.width}),q.jsx(tr,{label:"Depth",onChange:v=>{d({...t.metadata,depth:Number(v.target.value)})},value:t.metadata.depth}),q.jsx(WA,{className:"my-2"})]})]}),q.jsx(Fhe,{slots:s})]})}function s_({children:n,variant:e="title"}){const t=Kg(e).with("title",()=>"flex text-xs font-mono font-bold uppercase").exhaustive();return q.jsx("div",{className:t,children:n})}function Zhe(){const{coreModuleRef:n}=Za(),{selection:e}=F.useContext(mv),[t,i]=F.useState([0,0,0]),[r,a]=F.useState([0,0,0]),[s,o]=F.useState([0,0,0]);F.useEffect(()=>{const p=n.current;if(lt(p)||lt(e)||e.type==="other")return;const d=p.perform("get.by-id:core.object.transform",e.id);if(d.isError()){ra.error(d.getError().message);return}const m=d.unwrap();i(m.position.toArray()),a([Zn.mod(Zn.degrees(m.rotation.x),360),Zn.mod(Zn.degrees(m.rotation.y),360),Zn.mod(Zn.degrees(m.rotation.z),360)]),o(m.scale.toArray());const v=p.listen("core.object:changed",({value:{id:_,transform:b}})=>{_===e.id&&(i(b.position.toArray()),a([Zn.mod(Zn.degrees(b.rotation.x),360),Zn.mod(Zn.degrees(b.rotation.y),360),Zn.mod(Zn.degrees(b.rotation.z),360)]),o(b.scale.toArray()))});return()=>{p.forget(v)}},[n.current,e]);function c([p,d,m]){const v=n.current;lt(v)||lt(e)||v.perform("set.by-id:core.object.position",{coordinateSystem:"local",id:e.id,position:new ve(p,d,m)})}function f([p,d,m]){const v=n.current;lt(v)||lt(e)||(isNaN(p)&&(p=0),isNaN(d)&&(d=0),isNaN(m)&&(m=0),v.perform("set.by-id:core.object.rotation",{coordinateSystem:"local",id:e.id,rotation:new Fn(Zn.radians(p),Zn.radians(d),Zn.radians(m))}))}return lt(e)||e.type==="other"?q.jsxs("div",{className:"flex flex-col gap-2 px-2 py-1 w-full",children:[q.jsx("div",{children:q.jsx(s_,{variant:"title",children:On("ui:panel.object-settings.title")})}),q.jsx("p",{className:"text-xs text-center",children:On("ui:panel.object-settings.state.empty")})]}):q.jsxs("div",{className:"flex flex-col gap-3 px-2 py-1 w-full",children:[q.jsx("div",{children:q.jsx(s_,{variant:"title",children:On("ui:panel.object-settings.title")})}),q.jsxs(cd,{defaultOpen:!0,children:[q.jsxs(ud,{className:"flex flex-row justify-between w-full",children:[q.jsxs("span",{className:"flex flex-row gap-1 text-xs",children:[q.jsx(tY,{size:16})," ",On("ui:panel.object-settings.sections.transform.title")]}),q.jsx(ld,{size:16})]}),q.jsxs(ip,{className:"flex flex-col gap-1 pt-2 pl-2",children:[q.jsx(Vc,{disableZ:!0,label:On("ui:panel.object-settings.sections.transform.fields.position"),onChange:c,value:t}),q.jsx(Vc,{disableX:!0,disableY:!0,label:On("ui:panel.object-settings.sections.transform.fields.rotation"),onChange:f,value:r}),q.jsx(Vc,{disabled:!0,label:On("ui:panel.object-settings.sections.transform.fields.scale"),value:s})]})]}),q.jsxs(cd,{defaultOpen:!0,children:[q.jsxs(ud,{className:"flex flex-row justify-between w-full",children:[q.jsxs("span",{className:"flex flex-row gap-1 text-xs",children:[q.jsx(lY,{size:16})," ",On("ui:panel.object-settings.sections.properties.title")]}),q.jsx(ld,{size:16})]}),q.jsx(ip,{className:"flex flex-col gap-1 pt-2 pl-2",children:q.jsxs("div",{className:"pt-1",children:[e.type==="node"&&q.jsx(yce,{}),e.type==="path"&&q.jsx(wce,{}),e.type==="station"&&q.jsx(Whe,{})]})})]})]})}const vU="w-42 h-5 rounded-xs text-xs text-white";function ZA({children:n,onClick:e,variant:t="default"}){const i=Kg(t).with("danger",()=>`${vU} bg-red-800 hover:bg-red-600`).with("default",()=>`${vU} bg-gray-800 hover:bg-gray-600`).exhaustive();return q.jsx(sd,{className:i,onClick:e,children:n})}var D6=["PageUp","PageDown"],N6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],L6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},vv="Slider",[wR,Xhe,qhe]=c_(vv),[I6,_ge]=Ul(vv,[qhe]),[Khe,qw]=I6(vv),U6=F.forwardRef((n,e)=>{const{name:t,min:i=0,max:r=100,step:a=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:f=[i],value:p,onValueChange:d=()=>{},onValueCommit:m=()=>{},inverted:v=!1,form:_,...b}=n,S=F.useRef(new Set),x=F.useRef(0),M=s==="horizontal"?$he:Qhe,[A=[],D]=pd({prop:p,defaultProp:f,onChange:Y=>{[...S.current][x.current]?.focus(),d(Y)}}),O=F.useRef(A);function I(Y){const ee=ipe(A,Y);L(Y,ee)}function U(Y){L(Y,x.current)}function N(){const Y=O.current[x.current];A[x.current]!==Y&&m(A)}function L(Y,ee,{commit:se}={commit:!1}){const he=ope(a),de=lpe(Math.round((Y-i)/a)*a+i,he),P=t_(de,[i,r]);D((B=[])=>{const V=tpe(B,P,ee);if(spe(V,c*a)){x.current=V.indexOf(P);const ae=String(V)!==String(B);return ae&&se&&m(V),ae?V:B}else return B})}return q.jsx(Khe,{scope:n.__scopeSlider,name:t,disabled:o,min:i,max:r,valueIndexToChangeRef:x,thumbs:S.current,values:A,orientation:s,form:_,children:q.jsx(wR.Provider,{scope:n.__scopeSlider,children:q.jsx(wR.Slot,{scope:n.__scopeSlider,children:q.jsx(M,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:e,onPointerDown:Ut(b.onPointerDown,()=>{o||(O.current=A)}),min:i,max:r,inverted:v,onSlideStart:o?void 0:I,onSlideMove:o?void 0:U,onSlideEnd:o?void 0:N,onHomeKeyDown:()=>!o&&L(i,0,{commit:!0}),onEndKeyDown:()=>!o&&L(r,A.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:ee})=>{if(!o){const de=D6.includes(Y.key)||Y.shiftKey&&N6.includes(Y.key)?10:1,P=x.current,B=A[P],V=a*de*ee;L(B+V,P,{commit:!0})}}})})})})});U6.displayName=vv;var[P6,z6]=I6(vv,{startEdge:"left",endEdge:"right",size:"width",direction:1}),$he=F.forwardRef((n,e)=>{const{min:t,max:i,dir:r,inverted:a,onSlideStart:s,onSlideMove:o,onSlideEnd:c,onStepKeyDown:f,...p}=n,[d,m]=F.useState(null),v=Ln(e,M=>m(M)),_=F.useRef(void 0),b=iv(r),S=b==="ltr",x=S&&!a||!S&&a;function T(M){const A=_.current||d.getBoundingClientRect(),D=[0,A.width],I=YO(D,x?[t,i]:[i,t]);return _.current=A,I(M-A.left)}return q.jsx(P6,{scope:n.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:q.jsx(B6,{dir:b,"data-orientation":"horizontal",...p,ref:v,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:M=>{const A=T(M.clientX);s?.(A)},onSlideMove:M=>{const A=T(M.clientX);o?.(A)},onSlideEnd:()=>{_.current=void 0,c?.()},onStepKeyDown:M=>{const D=L6[x?"from-left":"from-right"].includes(M.key);f?.({event:M,direction:D?-1:1})}})})}),Qhe=F.forwardRef((n,e)=>{const{min:t,max:i,inverted:r,onSlideStart:a,onSlideMove:s,onSlideEnd:o,onStepKeyDown:c,...f}=n,p=F.useRef(null),d=Ln(e,p),m=F.useRef(void 0),v=!r;function _(b){const S=m.current||p.current.getBoundingClientRect(),x=[0,S.height],M=YO(x,v?[i,t]:[t,i]);return m.current=S,M(b-S.top)}return q.jsx(P6,{scope:n.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:q.jsx(B6,{"data-orientation":"vertical",...f,ref:d,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const S=_(b.clientY);a?.(S)},onSlideMove:b=>{const S=_(b.clientY);s?.(S)},onSlideEnd:()=>{m.current=void 0,o?.()},onStepKeyDown:b=>{const x=L6[v?"from-bottom":"from-top"].includes(b.key);c?.({event:b,direction:x?-1:1})}})})}),B6=F.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:i,onSlideMove:r,onSlideEnd:a,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:c,...f}=n,p=qw(vv,t);return q.jsx(ln.span,{...f,ref:e,onKeyDown:Ut(n.onKeyDown,d=>{d.key==="Home"?(s(d),d.preventDefault()):d.key==="End"?(o(d),d.preventDefault()):D6.concat(N6).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:Ut(n.onPointerDown,d=>{const m=d.target;m.setPointerCapture(d.pointerId),d.preventDefault(),p.thumbs.has(m)?m.focus():i(d)}),onPointerMove:Ut(n.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:Ut(n.onPointerUp,d=>{const m=d.target;m.hasPointerCapture(d.pointerId)&&(m.releasePointerCapture(d.pointerId),a(d))})})}),k6="SliderTrack",F6=F.forwardRef((n,e)=>{const{__scopeSlider:t,...i}=n,r=qw(k6,t);return q.jsx(ln.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});F6.displayName=k6;var TR="SliderRange",H6=F.forwardRef((n,e)=>{const{__scopeSlider:t,...i}=n,r=qw(TR,t),a=z6(TR,t),s=F.useRef(null),o=Ln(e,s),c=r.values.length,f=r.values.map(m=>G6(m,r.min,r.max)),p=c>1?Math.min(...f):0,d=100-Math.max(...f);return q.jsx(ln.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:o,style:{...n.style,[a.startEdge]:p+"%",[a.endEdge]:d+"%"}})});H6.displayName=TR;var MR="SliderThumb",j6=F.forwardRef((n,e)=>{const t=Xhe(n.__scopeSlider),[i,r]=F.useState(null),a=Ln(e,o=>r(o)),s=F.useMemo(()=>i?t().findIndex(o=>o.ref.current===i):-1,[t,i]);return q.jsx(Jhe,{...n,ref:a,index:s})}),Jhe=F.forwardRef((n,e)=>{const{__scopeSlider:t,index:i,name:r,...a}=n,s=qw(MR,t),o=z6(MR,t),[c,f]=F.useState(null),p=Ln(e,T=>f(T)),d=c?s.form||!!c.closest("form"):!0,m=zR(c),v=s.values[i],_=v===void 0?0:G6(v,s.min,s.max),b=npe(i,s.values.length),S=m?.[o.size],x=S?rpe(S,_,o.direction):0;return F.useEffect(()=>{if(c)return s.thumbs.add(c),()=>{s.thumbs.delete(c)}},[c,s.thumbs]),q.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${_}% + ${x}px)`},children:[q.jsx(wR.ItemSlot,{scope:n.__scopeSlider,children:q.jsx(ln.span,{role:"slider","aria-label":n["aria-label"]||b,"aria-valuemin":s.min,"aria-valuenow":v,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...a,ref:p,style:v===void 0?{display:"none"}:n.style,onFocus:Ut(n.onFocus,()=>{s.valueIndexToChangeRef.current=i})})}),d&&q.jsx(V6,{name:r??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:v},i)]})});j6.displayName=MR;var epe="RadioBubbleInput",V6=F.forwardRef(({__scopeSlider:n,value:e,...t},i)=>{const r=F.useRef(null),a=Ln(r,i),s=UO(e);return F.useEffect(()=>{const o=r.current;if(!o)return;const c=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==e&&p){const d=new Event("input",{bubbles:!0});p.call(o,e),o.dispatchEvent(d)}},[s,e]),q.jsx(ln.input,{style:{display:"none"},...t,ref:a,defaultValue:e})});V6.displayName=epe;function tpe(n=[],e,t){const i=[...n];return i[t]=e,i.sort((r,a)=>r-a)}function G6(n,e,t){const a=100/(t-e)*(n-e);return t_(a,[0,100])}function npe(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function ipe(n,e){if(n.length===1)return 0;const t=n.map(r=>Math.abs(r-e)),i=Math.min(...t);return t.indexOf(i)}function rpe(n,e,t){const i=n/2,a=YO([0,50],[0,i]);return(i-a(e)*t)*t}function ape(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function spe(n,e){if(e>0){const t=ape(n);return Math.min(...t)>=e}return!0}function YO(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function ope(n){return(String(n).split(".")[1]||"").length}function lpe(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var cpe=U6,upe=F6,fpe=H6,dpe=j6;function hpe({className:n,defaultValue:e,value:t,min:i=0,max:r=100,...a}){const s=F.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[i,r],[t,e,i,r]);return q.jsxs(cpe,{"data-slot":"slider",defaultValue:e,value:t,min:i,max:r,className:Zi("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),...a,children:[q.jsx(upe,{"data-slot":"slider-track",className:Zi("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:q.jsx(fpe,{"data-slot":"slider-range",className:Zi("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,c)=>q.jsx(dpe,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},c))]})}const ppe=3e3,mpe=300,gpe={types:[{description:"Image",accept:{"image/png":".png"}}],excludeAcceptAllOption:!0,multiple:!1};function vpe(){const{coreModuleRef:n}=Za(),e=F.useRef(null),t=F.useRef(void 0),i=F.useRef(new Uint8ClampedArray),r=F.useRef([0,0]),[a,s]=F.useState(!1),[o,c]=F.useState([100]),[f,p]=F.useState([0,0,0]),[d,m]=F.useState([0,0,0]),[v,_]=F.useState([1,1,1]),[b,S]=F.useState(!1);F.useEffect(()=>{const N=n.current;if(lt(N))return;const L=N.listen("overlay:update",({value:ee})=>{const{metadata:{data:se,height:he,opacity:de,width:P},position:B,rotation:V,scale:ae,visible:X}=ee;s(se.length>0),c([de*100]),p([B.x,B.y,0]),m([0,0,V.z]),_([ae.x,ae.y,1]),S(X),i.current=se,r.current=[P,he],se.length>0&&window.createImageBitmap(new ImageData(Uint8ClampedArray.from(se),P,he),{resizeWidth:mpe}).then(oe=>{t.current=oe}).catch(oe=>{ra.error("Unable to create a preview of the overlay.")})}),Y=N.listen("core.object:changed",({value:{id:ee,transform:se}})=>{ee==="overlay"&&(p(se.position.toArray()),m([0,0,se.rotation.z]))});return()=>{N.forget(L),N.forget(Y)}},[]),F.useEffect(()=>{const N=e.current,L=t.current;if(fr(N)||lt(L))return;const Y=N.getContext("2d");fr(Y)||(N.width=L.width,N.height=L.height,Y.drawImage(L,0,0,L.width,L.height),L.close())},[a]);async function x(){const N=n.current;if(!lt(N))try{const[L]=await window.showOpenFilePicker(gpe),ee=await(await L.getFile()).arrayBuffer();N.perform("set:map.overlay.data",{...YE.read(nE.Buffer.from(ee))}),ra.success("Overlay loaded with success.",{duration:ppe})}catch(L){if(L.name==="AbortError")return;ra.error("Unable to load the overlay, an unknown error has occurred.")}}function T(N){const L=n.current;lt(L)||L.perform("set:map.overlay.position",{position:new ve(...N)})}function M(N){const L=n.current;lt(L)||L.perform("set:map.overlay.rotation",{rotation:new Fn(...N)})}function A(N){const L=n.current;lt(L)||L.perform("set:map.overlay.scale",{scale:new ve(...N)})}function D(N){const L=n.current;if(lt(L))return;const[Y]=N;c([Y]),L.perform("set:map.overlay.opacity",{opacity:Y/100})}function O(N){const L=n.current;lt(L)||(N?L.perform("show:map.overlay",Xn):L.perform("hide:map.overlay",Xn))}function I(){const N=n.current;lt(N)||N.perform("select:map.overlay",Xn)}function U(){const N=n.current;lt(N)||(N.perform("reset:map.overlay",Xn),s(!1))}return a?q.jsxs("div",{className:"flex flex-col gap-2 px-2 py-1 w-full",children:[q.jsxs("div",{children:[q.jsx("div",{children:q.jsx(s_,{variant:"title",children:On("ui:panel.overlay.title")})}),q.jsxs("div",{className:"flex flex-col gap-1 pt-2 pl-2",children:[q.jsx(Vc,{disableZ:!0,label:On("ui:panel.overlay.fields.position"),onChange:T,value:f}),q.jsx(Vc,{disableX:!0,disableY:!0,label:On("ui:panel.overlay.fields.rotation"),onChange:M,value:d}),q.jsx(Vc,{disableZ:!0,label:On("ui:panel.overlay.fields.scale"),onChange:A,value:v}),q.jsxs("div",{className:"flex flex-row justify-between items-center pb-1",children:[q.jsx("span",{className:"text-xs",children:On("ui:panel.overlay.fields.opacity")}),q.jsxs("div",{className:"flex flex-row w-64",children:[q.jsx(hpe,{max:100,onValueChange:D,step:1,value:o}),q.jsx("span",{className:"w-8 text-right text-xs",children:o})]})]}),q.jsx(tv,{label:On("ui:panel.overlay.fields.visible"),onChange:O,checked:b})]})]}),q.jsx(Iw,{className:"h-80 rounded-md border",children:q.jsx("div",{className:"flex flex-row justify-center items-center h-80",children:q.jsx("canvas",{ref:e})})}),q.jsxs("div",{className:"flex flex-col justify-center items-center gap-1",children:[q.jsx(ZA,{onClick:I,children:On("ui:panel.overlay.actions.move")}),q.jsx(ZA,{onClick:U,variant:"danger",children:On("ui:panel.overlay.actions.delete")})]})]}):q.jsx("div",{className:"flex flex-col gap-2 px-2 py-1 w-full",children:q.jsxs("div",{children:[q.jsx("div",{children:q.jsx(s_,{variant:"title",children:On("ui:panel.overlay.title")})}),q.jsx("div",{className:"flex flex-col justify-center items-center w-full mt-2",children:q.jsx(ZA,{onClick:Gc.wrapAsyncFn(x),children:On("ui:panel.overlay.actions.load")})})]})})}function ype({fileTypes:n,message:e,onDrop:t}){const[i,r]=F.useState(!1),a=F.useRef(null);return F.useEffect(()=>{const s=a.current;if(fr(s))return;const o=()=>{r(!0)},c=()=>{r(!1)},f=d=>{d.preventDefault()},p=d=>{const{dataTransfer:m}=d;if(fr(m)){console.debug("DropZone.handleDrop: dataTransfer is null."),ra.error(" An error occurred while transferring data from the file(s). Please try again. If the error persists, contact support."),r(!1);return}const{items:v}=m,_=new Set;for(const S of v)_.add(S.kind);if(_.has("string")){ra.error(" For the moment, only files can be dragged and dropped."),r(!1);return}const b=[];for(const S of v){const x=S.getAsFile();if(fr(x)){console.debug("DropZone.handleDrop: file is null."),ra.error(" An error occurred while transferring data from the file(s): unable to extract the contents of one of the files."),r(!1);return}else if(!n.includes(x.type)){ra.error(` Only files of type ${n.join(", ")} are accepted.`),r(!1);return}b.push(x)}t(b).catch(S=>{S instanceof Error?ra.error(S.message):ra.error(" An error occurred while processing data from the file(s).")}).finally(()=>{r(!1)}),d.preventDefault()};return s.addEventListener("dragenter",o),s.addEventListener("dragleave",c),s.addEventListener("dragover",f),s.addEventListener("drop",p),()=>{s.removeEventListener("dragenter",o),s.removeEventListener("dragleave",c),s.removeEventListener("dragover",f),s.removeEventListener("drop",p)}},[a.current]),q.jsx("div",{className:`flex flex-col justify-center items-center w-full h-24 ${i?"bg-blue-900":"bg-blue-900/50"} border-dashed rounded-sm border-2  ${i?"border-blue-500":"border-blue-900"} transition duration-150`,ref:a,children:q.jsx("p",{className:"px-2 text-center pointer-events-none",children:i?q.jsx("span",{className:"text-xl",children:""}):q.jsx("span",{className:"text-xs text-white",children:e})})})}const _pe=vt("ZodISODateTime",(n,e)=>{ode.init(n,e),ar.init(n,e)});function bpe(n){return she(_pe,n)}const xpe=vt("ZodISODate",(n,e)=>{lde.init(n,e),ar.init(n,e)});function Spe(n){return ohe(xpe,n)}const Epe=vt("ZodISOTime",(n,e)=>{cde.init(n,e),ar.init(n,e)});function wpe(n){return lhe(Epe,n)}const Tpe=vt("ZodISODuration",(n,e)=>{ude.init(n,e),ar.init(n,e)});function Mpe(n){return che(Tpe,n)}const Ape=(n,e)=>{l6.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>Que(n,t)},flatten:{value:t=>$ue(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,xR,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,xR,2)}},isEmpty:{get(){return n.issues.length===0}}})},$o=vt("ZodError",Ape,{Parent:Error}),Cpe=Vw($o),Rpe=Gw($o),Ope=Yw($o),Dpe=Ww($o),Npe=tfe($o),Lpe=nfe($o),Ipe=ife($o),Upe=rfe($o),Ppe=afe($o),zpe=sfe($o),Bpe=ofe($o),kpe=lfe($o),qr=vt("ZodType",(n,e)=>(pr.init(n,e),n.def=e,n.type=e.type,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone(Mp(e,{checks:[...e.checks??[],...t.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),n.clone=(t,i)=>Vu(n,t,i),n.brand=()=>n,n.register=((t,i)=>(t.add(n,i),n)),n.parse=(t,i)=>Cpe(n,t,i,{callee:n.parse}),n.safeParse=(t,i)=>Ope(n,t,i),n.parseAsync=async(t,i)=>Rpe(n,t,i,{callee:n.parseAsync}),n.safeParseAsync=async(t,i)=>Dpe(n,t,i),n.spa=n.safeParseAsync,n.encode=(t,i)=>Npe(n,t,i),n.decode=(t,i)=>Lpe(n,t,i),n.encodeAsync=async(t,i)=>Ipe(n,t,i),n.decodeAsync=async(t,i)=>Upe(n,t,i),n.safeEncode=(t,i)=>Ppe(n,t,i),n.safeDecode=(t,i)=>zpe(n,t,i),n.safeEncodeAsync=async(t,i)=>Bpe(n,t,i),n.safeDecodeAsync=async(t,i)=>kpe(n,t,i),n.refine=(t,i)=>n.check(Nme(t,i)),n.superRefine=t=>n.check(Lme(t)),n.overwrite=t=>n.check(N_(t)),n.optional=()=>xU(n),n.nullable=()=>SU(n),n.nullish=()=>xU(SU(n)),n.nonoptional=t=>Tme(n,t),n.array=()=>ume(n),n.or=t=>pme([n,t]),n.and=t=>gme(n,t),n.transform=t=>EU(n,_me(t)),n.default=t=>Sme(n,t),n.prefault=t=>wme(n,t),n.catch=t=>Ame(n,t),n.pipe=t=>EU(n,t),n.readonly=()=>Ome(n),n.describe=t=>{const i=n.clone();return OS.add(i,{description:t}),i},Object.defineProperty(n,"description",{get(){return OS.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return OS.get(n);const i=n.clone();return OS.add(i,t[0]),i},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),Y6=vt("_ZodString",(n,e)=>{Xw.init(n,e),qr.init(n,e);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...i)=>n.check(phe(...i)),n.includes=(...i)=>n.check(vhe(...i)),n.startsWith=(...i)=>n.check(yhe(...i)),n.endsWith=(...i)=>n.check(_he(...i)),n.min=(...i)=>n.check(_1(...i)),n.max=(...i)=>n.check(M6(...i)),n.length=(...i)=>n.check(GO(...i)),n.nonempty=(...i)=>n.check(_1(1,...i)),n.lowercase=i=>n.check(mhe(i)),n.uppercase=i=>n.check(ghe(i)),n.trim=()=>n.check(xhe()),n.normalize=(...i)=>n.check(bhe(...i)),n.toLowerCase=()=>n.check(She()),n.toUpperCase=()=>n.check(Ehe())}),Fpe=vt("ZodString",(n,e)=>{Xw.init(n,e),Y6.init(n,e),n.email=t=>n.check(kde(jpe,t)),n.url=t=>n.check(Gde(Vpe,t)),n.jwt=t=>n.check(ahe(rme,t)),n.emoji=t=>n.check(Yde(Gpe,t)),n.guid=t=>n.check(dU(yU,t)),n.uuid=t=>n.check(Fde(DS,t)),n.uuidv4=t=>n.check(Hde(DS,t)),n.uuidv6=t=>n.check(jde(DS,t)),n.uuidv7=t=>n.check(Vde(DS,t)),n.nanoid=t=>n.check(Wde(Ype,t)),n.guid=t=>n.check(dU(yU,t)),n.cuid=t=>n.check(Zde(Wpe,t)),n.cuid2=t=>n.check(Xde(Zpe,t)),n.ulid=t=>n.check(qde(Xpe,t)),n.base64=t=>n.check(nhe(tme,t)),n.base64url=t=>n.check(ihe(nme,t)),n.xid=t=>n.check(Kde(qpe,t)),n.ksuid=t=>n.check($de(Kpe,t)),n.ipv4=t=>n.check(Qde($pe,t)),n.ipv6=t=>n.check(Jde(Qpe,t)),n.cidrv4=t=>n.check(ehe(Jpe,t)),n.cidrv6=t=>n.check(the(eme,t)),n.e164=t=>n.check(rhe(ime,t)),n.datetime=t=>n.check(bpe(t)),n.date=t=>n.check(Spe(t)),n.time=t=>n.check(wpe(t)),n.duration=t=>n.check(Mpe(t))});function Hpe(n){return w6(Fpe,n)}const ar=vt("ZodStringFormat",(n,e)=>{Xi.init(n,e),Y6.init(n,e)}),jpe=vt("ZodEmail",(n,e)=>{Qfe.init(n,e),ar.init(n,e)}),yU=vt("ZodGUID",(n,e)=>{Kfe.init(n,e),ar.init(n,e)}),DS=vt("ZodUUID",(n,e)=>{$fe.init(n,e),ar.init(n,e)}),Vpe=vt("ZodURL",(n,e)=>{Jfe.init(n,e),ar.init(n,e)}),Gpe=vt("ZodEmoji",(n,e)=>{ede.init(n,e),ar.init(n,e)}),Ype=vt("ZodNanoID",(n,e)=>{tde.init(n,e),ar.init(n,e)}),Wpe=vt("ZodCUID",(n,e)=>{nde.init(n,e),ar.init(n,e)}),Zpe=vt("ZodCUID2",(n,e)=>{ide.init(n,e),ar.init(n,e)}),Xpe=vt("ZodULID",(n,e)=>{rde.init(n,e),ar.init(n,e)}),qpe=vt("ZodXID",(n,e)=>{ade.init(n,e),ar.init(n,e)}),Kpe=vt("ZodKSUID",(n,e)=>{sde.init(n,e),ar.init(n,e)}),$pe=vt("ZodIPv4",(n,e)=>{fde.init(n,e),ar.init(n,e)}),Qpe=vt("ZodIPv6",(n,e)=>{dde.init(n,e),ar.init(n,e)}),Jpe=vt("ZodCIDRv4",(n,e)=>{hde.init(n,e),ar.init(n,e)}),eme=vt("ZodCIDRv6",(n,e)=>{pde.init(n,e),ar.init(n,e)}),tme=vt("ZodBase64",(n,e)=>{mde.init(n,e),ar.init(n,e)}),nme=vt("ZodBase64URL",(n,e)=>{vde.init(n,e),ar.init(n,e)}),ime=vt("ZodE164",(n,e)=>{yde.init(n,e),ar.init(n,e)}),rme=vt("ZodJWT",(n,e)=>{bde.init(n,e),ar.init(n,e)}),W6=vt("ZodNumber",(n,e)=>{VO.init(n,e),qr.init(n,e),n.gt=(i,r)=>n.check(pU(i,r)),n.gte=(i,r)=>n.check(Ho(i,r)),n.min=(i,r)=>n.check(Ho(i,r)),n.lt=(i,r)=>n.check(hU(i,r)),n.lte=(i,r)=>n.check(YA(i,r)),n.max=(i,r)=>n.check(YA(i,r)),n.int=i=>n.check(_U(i)),n.safe=i=>n.check(_U(i)),n.positive=i=>n.check(pU(0,i)),n.nonnegative=i=>n.check(Ho(0,i)),n.negative=i=>n.check(hU(0,i)),n.nonpositive=i=>n.check(YA(0,i)),n.multipleOf=(i,r)=>n.check(mU(i,r)),n.step=(i,r)=>n.check(mU(i,r)),n.finite=()=>n;const t=n._zod.bag;n.minValue=Math.max(t.minimum??Number.NEGATIVE_INFINITY,t.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,n.maxValue=Math.min(t.maximum??Number.POSITIVE_INFINITY,t.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,n.isInt=(t.format??"").includes("int")||Number.isSafeInteger(t.multipleOf??.5),n.isFinite=!0,n.format=t.format??null});function zh(n){return T6(W6,n)}const ame=vt("ZodNumberFormat",(n,e)=>{xde.init(n,e),W6.init(n,e)});function _U(n){return uhe(ame,n)}const sme=vt("ZodUnknown",(n,e)=>{Ede.init(n,e),qr.init(n,e)});function bU(){return dhe(sme)}const ome=vt("ZodNever",(n,e)=>{wde.init(n,e),qr.init(n,e)});function lme(n){return hhe(ome,n)}const cme=vt("ZodArray",(n,e)=>{y6.init(n,e),qr.init(n,e),n.element=e.element,n.min=(t,i)=>n.check(_1(t,i)),n.nonempty=t=>n.check(_1(1,t)),n.max=(t,i)=>n.check(M6(t,i)),n.length=(t,i)=>n.check(GO(t,i)),n.unwrap=()=>n.element});function ume(n,e){return whe(cme,n,e)}const fme=vt("ZodObject",(n,e)=>{Tde.init(n,e),qr.init(n,e),Oi(n,"shape",()=>e.shape),n.keyof=()=>vme(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:bU()}),n.loose=()=>n.clone({...n._zod.def,catchall:bU()}),n.strict=()=>n.clone({...n._zod.def,catchall:lme()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>Wue(n,t),n.safeExtend=t=>Zue(n,t),n.merge=t=>Xue(n,t),n.pick=t=>Gue(n,t),n.omit=t=>Yue(n,t),n.partial=(...t)=>que(Z6,n,t[0]),n.required=(...t)=>Kue(X6,n,t[0])});function dme(n,e){const t={type:"object",shape:n??{},...qt(e)};return new fme(t)}const hme=vt("ZodUnion",(n,e)=>{Mde.init(n,e),qr.init(n,e),n.options=e.options});function pme(n,e){return new hme({type:"union",options:n,...qt(e)})}const mme=vt("ZodIntersection",(n,e)=>{Ade.init(n,e),qr.init(n,e)});function gme(n,e){return new mme({type:"intersection",left:n,right:e})}const AR=vt("ZodEnum",(n,e)=>{S6.init(n,e),qr.init(n,e),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(i,r)=>{const a={};for(const s of i)if(t.has(s))a[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new AR({...e,checks:[],...qt(r),entries:a})},n.exclude=(i,r)=>{const a={...e.entries};for(const s of i)if(t.has(s))delete a[s];else throw new Error(`Key ${s} not found in enum`);return new AR({...e,checks:[],...qt(r),entries:a})}});function vme(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(i=>[i,i])):n;return new AR({type:"enum",entries:t,...qt(e)})}const yme=vt("ZodTransform",(n,e)=>{Cde.init(n,e),qr.init(n,e),n._zod.parse=(t,i)=>{if(i.direction==="backward")throw new n6(n.constructor.name);t.addIssue=a=>{if(typeof a=="string")t.issues.push(a_(a,t.value,e));else{const s=a;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=t.value),s.inst??(s.inst=n),t.issues.push(a_(s))}};const r=e.transform(t.value,t);return r instanceof Promise?r.then(a=>(t.value=a,t)):(t.value=r,t)}});function _me(n){return new yme({type:"transform",transform:n})}const Z6=vt("ZodOptional",(n,e)=>{E6.init(n,e),qr.init(n,e),n.unwrap=()=>n._zod.def.innerType});function xU(n){return new Z6({type:"optional",innerType:n})}const bme=vt("ZodNullable",(n,e)=>{Rde.init(n,e),qr.init(n,e),n.unwrap=()=>n._zod.def.innerType});function SU(n){return new bme({type:"nullable",innerType:n})}const xme=vt("ZodDefault",(n,e)=>{Ode.init(n,e),qr.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function Sme(n,e){return new xme({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():a6(e)}})}const Eme=vt("ZodPrefault",(n,e)=>{Dde.init(n,e),qr.init(n,e),n.unwrap=()=>n._zod.def.innerType});function wme(n,e){return new Eme({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():a6(e)}})}const X6=vt("ZodNonOptional",(n,e)=>{Nde.init(n,e),qr.init(n,e),n.unwrap=()=>n._zod.def.innerType});function Tme(n,e){return new X6({type:"nonoptional",innerType:n,...qt(e)})}const Mme=vt("ZodCatch",(n,e)=>{Lde.init(n,e),qr.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function Ame(n,e){return new Mme({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const Cme=vt("ZodPipe",(n,e)=>{Ide.init(n,e),qr.init(n,e),n.in=e.in,n.out=e.out});function EU(n,e){return new Cme({type:"pipe",in:n,out:e})}const Rme=vt("ZodReadonly",(n,e)=>{Ude.init(n,e),qr.init(n,e),n.unwrap=()=>n._zod.def.innerType});function Ome(n){return new Rme({type:"readonly",innerType:n})}const Dme=vt("ZodCustom",(n,e)=>{Pde.init(n,e),qr.init(n,e)});function Nme(n,e={}){return The(Dme,n,e)}function Lme(n){return Mhe(n)}const Ime=dme({altitude:zh(),depth:zh().check(Ho(0)),height:zh().check(Ho(0)),id:Hpe(),rotation:zh(),width:zh().check(Ho(0)),x:zh(),y:zh()}),Ume=["AUTO_EMPTY","AUTO_FILL","BUFFER","CHARGING","IN","OUT","PARKING","PAYLOAD_STORAGE","SINKHOLE"],Pme=ER(L_(Ume)),zme=["FORBIDDEN","OPTIONAL","REQUIRED"],wU=L_(zme),Bme=c0({flags:Pme,dimensions:c0({height:Bi().check(Ho(0)),length:Bi().check(Ho(0)),width:Bi().check(Ho(0))}),dockingSettings:c0({approachLinearSpeed:Bi().check(Ho(0)),elevationStrategy:zhe,endDockingLinearSpeed:Bi().check(Ho(0)),finalApproachDistance:Bi(),forkLandingOnEntry:wU,forkLandingOnExit:wU,gateDistance:Bi(),headGap:Phe(Bi()),interPalletDistance:Bi(),k0:Bi(),k1:Bi(),maxDeviationForDocking:Bi(),maxDistanceForRetry:Bi(),maxOffsetForDocking:Bi(),minimalApproachDistance:Bi(),obstacleMapEnabled:Dhe(),pathConfig:Bhe,raisedForkAltitude:Bi(),reliabilityThresholdForAccurateDocking:Bi(),startAltitude:Bi(),undockDistanceThreshold:Bi(),undockLinearSpeed:Bi().check(Ho(0))}),id:b1(),name:b1(),pose:c0({altitude:Bi(),rotation:Bi(),x:Bi(),y:Bi()})}),TU=c0({collisionShapes:ER(Ime).check(GO(1)),id:b1(),name:b1(),reflectorsDistance:Bi(),slots:ER(Bme),stationType:Yhe}),kme=2e3,pg="nadir/models";function Fme(){const{coreModuleRef:n}=Za(),[e,t]=F.useState([]),i=F.useRef([]),r=c=>{const f=e.indexOf(c);if(f===-1){ra.error("Unable to delete the station template because an unknown error occurred. Please try again. If the problem persists, please contact support.");return}t(Qg(p=>{p.splice(f,1),localStorage.removeItem(pg),localStorage.setItem(pg,JSON.stringify(p))})),i.current.splice(f,1)},a=async c=>{const f=await Promise.all(c.map(_=>_.text().then(b=>TU.safeParseAsync(JSON.parse(b))).then(b=>({filename:_.name,parsing:b})))),p=[],d=[];for(const _ of f)_.parsing.success?p.push(_.parsing.data):d.push(_.filename);if(d.length>0&&p.length>0){const _=d.map(b=>`"${b}"`).join(", ");ra.warning(`The following station models couldn't be loaded because one or more of their properties were incorrectly defined or missing : ${_}`)}else d.length>0&&p.length===0&&ra.error("None of the station models provided couldn't be loaded because one or more of their properties were incorrectly defined or missing.");const m=[],v=[];for(const _ of p)i.current.includes(_.id)?v.push(_.name):m.push(_);if(v.length){const _=v.map(b=>`"${b}"`).join(", ");ra.warning(`The following station models were ignored because they have already been imported : ${_}`)}m.length&&(i.current.push(...m.map(_=>_.id)),t(Qg(_=>{_.push(...m),localStorage.removeItem(pg),localStorage.setItem(pg,JSON.stringify(_))})),ra.success("The station models have been successfully loaded.",{duration:kme}))},s=c=>{const f=n.current;lt(f)||(f.perform("set:core.state","create"),f.perform("set:builder.mode",{mode:"CREATE_STATION"}),f.perform("set:station-builder.model",{model:c}))},o=()=>{const c=localStorage.getItem(pg);if(fr(c))return;const f=JSON.parse(c);if(!Array.isArray(f))return;const p=[];for(const d of f){const m=TU.safeParse(d);if(!m.success){localStorage.removeItem(pg),ra("Unable to load saved station templates because an unknown error occurred. The cache has been cleared. Contact support if the problem persists.");return}p.push(m.data),i.current.push(m.data.id)}t(p)};return F.useEffect(o,[]),q.jsxs("div",{className:"flex flex-col px-2 py-1 w-full",children:[q.jsx("div",{children:q.jsx(s_,{variant:"title",children:On("ui:panel.station-models.title")})}),q.jsxs("div",{children:[e.length>0&&q.jsx(Iw,{className:"h-110 mb-2",children:q.jsx("ul",{children:e.map((c,f)=>q.jsxs("li",{className:`flex justify-between items-center px-2 py-1 ${f%2?"bg-gray-900":""} hover:bg-blue-500 cursor-pointer transition duration-150`,onClick:()=>{s(c)},children:[q.jsxs("div",{className:"flex",children:[q.jsx(_z,{size:14}),q.jsx("span",{className:"text-xs ml-1",children:c.name})]}),q.jsx("div",{className:"flex flex-row items-center",children:q.jsx(sd,{className:"size-6 cursor-pointer",onClick:p=>{p.stopPropagation(),r(c)},size:"icon",variant:"ghost",children:q.jsx(Ez,{size:2})})})]},c.id))})}),q.jsx(ype,{fileTypes:["application/json"],message:On("ui:panel.station-models.actions.drag-and-drop"),onDrop:a})]})]})}const Hme={activate:()=>{},activeTab:0},WO=F.createContext(Hme);function XA({icon:n,index:e}){const{activate:t,activeTab:i}=F.useContext(WO);return q.jsx(sd,{className:`size-6 ${i===e?"bg-gray-900":""}`,onClick:()=>{t(e)},size:"icon",variant:"ghost",children:n})}function qA({children:n,index:e}){const{activeTab:t}=F.useContext(WO);return q.jsx("div",{style:{display:e===t?"block":"none"},children:n})}function jme({active:n,children:e}){const[t,i]=F.useState(n);return q.jsx(WO.Provider,{value:{activate:r=>{i(r)},activeTab:t},children:e})}function Vme(){const{coreModuleRef:n}=Za(),[e,t]=F.useState(f5);return F.useEffect(()=>{const i=n.current;if(lt(i))return;const r=i.listen("selection:changed",({value:{selection:a}})=>{if(a.length!==1)t({selection:void 0});else{const[s]=a;let o;s instanceof Jh?o="node":s instanceof S0?o="path":s instanceof O_?o="station":o="other",t({selection:{id:s.name,type:o}})}});return()=>{i.forget(r)}},[n.current,t]),q.jsx(mv.Provider,{value:e,children:q.jsx(jme,{active:0,children:q.jsxs("div",{className:"flex flex-row h-full",children:[q.jsxs("div",{className:"flex flex-col items-center gap-1 px-1 pt-1 h-full border-r-1",children:[q.jsx(XA,{icon:q.jsx(fY,{}),index:0}),q.jsx(XA,{icon:q.jsx(Z9,{}),index:1}),q.jsx(XA,{icon:q.jsx($9,{}),index:2})]}),q.jsx("div",{className:"flex flex-col w-full h-full p-1",children:q.jsxs(Iw,{className:"h-full pr-1",children:[q.jsx(qA,{index:0,children:q.jsx(Zhe,{})}),q.jsx(qA,{index:1,children:q.jsx(Fme,{})}),q.jsx(qA,{index:2,children:q.jsx(vpe,{})})]})})]})})})}function Gme(){return q.jsxs(HF,{direction:"vertical",children:[q.jsx(u1,{children:q.jsx(mce,{})}),q.jsx(jF,{}),q.jsx(u1,{children:q.jsx(Vme,{})})]})}const Yme=5e3,KA="nadir/save";function Wme(){const{coreModuleRef:n}=Za();return F.useEffect(()=>{const e=n.current;if(lt(e))return;const t=e.listen("core:init",()=>{const i=n.current;if(lt(i))return;const r=localStorage.getItem(KA);if(!fr(r))try{const a=JSON.parse(r);i.perform("load:core.data",ak.toCoreMapData(a))}catch{localStorage.removeItem(KA),i.perform("clear:core.data",Xn),ra.error("An error occurred while loading the cached configuration. The cache and scene have been cleared.")}});return()=>{e.forget(t)}},[n.current]),F.useEffect(()=>{const e=n.current;if(lt(e))return;let t;const i=e.listen("core.data:load",()=>{t=setInterval(()=>{const a=e.perform("get:core.data",Xn),s=sk.toVizyrProjectData(a);localStorage.setItem(KA,JSON.stringify(s))},Yme)}),r=e.listen("core.data:clear",()=>{clearInterval(t),t=void 0});return()=>{e.forget(i),e.forget(r)}},[n.current]),F.useEffect(()=>{const e=n.current;if(lt(e))return;const t=e.listen("log:send.debug",({value:s})=>{console.debug(s)}),i=e.listen("log:send.error",({value:s})=>{console.error(s)}),r=e.listen("log:send.info",({value:s})=>{console.info(s)}),a=e.listen("log:send.warning",({value:s})=>{console.warn(s)});return()=>{e.forget(t),e.forget(i),e.forget(r),e.forget(a)}},[n.current]),q.jsxs(HF,{direction:"horizontal",children:[q.jsx(u1,{className:"relative",children:q.jsx(lle,{})}),q.jsx(jF,{}),q.jsx(u1,{defaultSize:20,children:q.jsx(Gme,{})})]})}function Zme(){return q.jsx(LU.Provider,{value:NU,children:q.jsxs("div",{className:"flex flex-col h-screen w-screen",children:[q.jsx(tte,{}),q.jsx(Wme,{}),q.jsx(Nj,{})]})})}function Xme(){return q.jsxs(q.Fragment,{children:[q.jsx(Zme,{}),q.jsx(Dj,{closeButton:!0,duration:1/0,expand:!0,position:"bottom-left"})]})}J8.createRoot(document.getElementById("root")).render(q.jsx(F.StrictMode,{children:q.jsx(Xme,{})}));
